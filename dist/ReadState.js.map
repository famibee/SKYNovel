{"version":3,"file":"ReadState.js","sources":["../node_modules/@tweenjs/tween.js/dist/tween.esm.js","../src/sn/ReadState.ts"],"sourcesContent":["/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = Object.freeze({\n    Linear: Object.freeze({\n        None: function (amount) {\n            return amount;\n        },\n        In: function (amount) {\n            return amount;\n        },\n        Out: function (amount) {\n            return amount;\n        },\n        InOut: function (amount) {\n            return amount;\n        },\n    }),\n    Quadratic: Object.freeze({\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    }),\n    Cubic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    }),\n    Quartic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    }),\n    Quintic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    }),\n    Sinusoidal: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sin(((1.0 - amount) * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.sin(Math.PI * (0.5 - amount)));\n        },\n    }),\n    Exponential: Object.freeze({\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    }),\n    Circular: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    }),\n    Elastic: Object.freeze({\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    }),\n    Back: Object.freeze({\n        In: function (amount) {\n            var s = 1.70158;\n            return amount === 1 ? 1 : amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return amount === 0 ? 0 : --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    }),\n    Bounce: Object.freeze({\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    }),\n    generatePow: function (power) {\n        if (power === void 0) { power = 4; }\n        power = power < Number.EPSILON ? Number.EPSILON : power;\n        power = power > 10000 ? 10000 : power;\n        return {\n            In: function (amount) {\n                return Math.pow(amount, power);\n            },\n            Out: function (amount) {\n                return 1 - Math.pow((1 - amount), power);\n            },\n            InOut: function (amount) {\n                if (amount < 0.5) {\n                    return Math.pow((amount * 2), power) / 2;\n                }\n                return (1 - Math.pow((2 - amount * 2), power)) / 2 + 0.5;\n            },\n        };\n    },\n});\n\nvar now = function () { return performance.now(); };\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._isDynamic = false;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        // eslint-disable-next-line\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._propertiesAreSetUp = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.getDuration = function () {\n        return this._duration;\n    };\n    Tween.prototype.to = function (target, duration) {\n        if (duration === void 0) { duration = 1000; }\n        if (this._isPlaying)\n            throw new Error('Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.');\n        this._valuesEnd = target;\n        this._propertiesAreSetUp = false;\n        this._duration = duration < 0 ? 0 : duration;\n        return this;\n    };\n    Tween.prototype.duration = function (duration) {\n        if (duration === void 0) { duration = 1000; }\n        this._duration = duration < 0 ? 0 : duration;\n        return this;\n    };\n    Tween.prototype.dynamic = function (dynamic) {\n        if (dynamic === void 0) { dynamic = false; }\n        this._isDynamic = dynamic;\n        return this;\n    };\n    Tween.prototype.start = function (time, overrideStartingValues) {\n        if (time === void 0) { time = now(); }\n        if (overrideStartingValues === void 0) { overrideStartingValues = false; }\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time;\n        this._startTime += this._delayTime;\n        if (!this._propertiesAreSetUp || overrideStartingValues) {\n            this._propertiesAreSetUp = true;\n            // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n            if (!this._isDynamic) {\n                var tmp = {};\n                for (var prop in this._valuesEnd)\n                    tmp[prop] = this._valuesEnd[prop];\n                this._valuesEnd = tmp;\n            }\n            this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat, overrideStartingValues);\n        }\n        return this;\n    };\n    Tween.prototype.startFromCurrentValues = function (time) {\n        return this.start(time, true);\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat, overrideStartingValues) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // Handle an array of relative values.\n                // Creates a local copy of the Array with the start value at the front\n                var temp = [startValue];\n                for (var i = 0, l = endValues.length; i < l; i += 1) {\n                    var value = this._handleRelativeValue(startValue, endValues[i]);\n                    if (isNaN(value)) {\n                        isInterpolationList = false;\n                        console.warn('Found invalid interpolation list. Skipping.');\n                        break;\n                    }\n                    temp.push(value);\n                }\n                if (isInterpolationList) {\n                    // if (_valuesStart[property] === undefined) { // handle end values only the first time. NOT NEEDED? setupProperties is now guarded by _propertiesAreSetUp.\n                    _valuesEnd[property] = temp;\n                    // }\n                }\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                var nestedObject = startValue;\n                for (var prop in nestedObject) {\n                    _valuesStart[property][prop] = nestedObject[prop];\n                }\n                // TODO? repeat nested values? And yoyo? And array values?\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {};\n                var endValues = _valuesEnd[property];\n                // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n                if (!this._isDynamic) {\n                    var tmp = {};\n                    for (var prop in endValues)\n                        tmp[prop] = endValues[prop];\n                    _valuesEnd[property] = endValues = tmp;\n                }\n                this._setupProperties(nestedObject, _valuesStart[property], endValues, _valuesStartRepeat[property], overrideStartingValues);\n            }\n            else {\n                // Save the starting value, but only once unless override is requested.\n                if (typeof _valuesStart[property] === 'undefined' || overrideStartingValues) {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        if (group === void 0) { group = mainGroup; }\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        if (amount === void 0) { amount = 0; }\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        if (times === void 0) { times = 0; }\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        if (yoyo === void 0) { yoyo = false; }\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        if (easingFunction === void 0) { easingFunction = Easing.Linear.None; }\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        if (interpolationFunction === void 0) { interpolationFunction = Interpolation.Linear; }\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    // eslint-disable-next-line\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onEveryStart = function (callback) {\n        this._onEveryStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        var _this = this;\n        var _a;\n        if (time === void 0) { time = now(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time, true);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        if (this._onEveryStartCallbackFired === false) {\n            if (this._onEveryStartCallback) {\n                this._onEveryStartCallback(this._object);\n            }\n            this._onEveryStartCallbackFired = true;\n        }\n        var elapsedTime = time - this._startTime;\n        var durationAndDelay = this._duration + ((_a = this._repeatDelayTime) !== null && _a !== void 0 ? _a : this._delayTime);\n        var totalTime = this._duration + this._repeat * durationAndDelay;\n        var calculateElapsedPortion = function () {\n            if (_this._duration === 0)\n                return 1;\n            if (elapsedTime > totalTime) {\n                return 1;\n            }\n            var timesRepeated = Math.trunc(elapsedTime / durationAndDelay);\n            var timeIntoCurrentRepeat = elapsedTime - timesRepeated * durationAndDelay;\n            // TODO use %?\n            // const timeIntoCurrentRepeat = elapsedTime % durationAndDelay\n            var portion = Math.min(timeIntoCurrentRepeat / _this._duration, 1);\n            if (portion === 0 && elapsedTime === _this._duration) {\n                return 1;\n            }\n            return portion;\n        };\n        var elapsed = calculateElapsedPortion();\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (this._duration === 0 || elapsedTime >= this._duration) {\n            if (this._repeat > 0) {\n                var completeCount = Math.min(Math.trunc((elapsedTime - this._duration) / durationAndDelay) + 1, this._repeat);\n                if (isFinite(this._repeat)) {\n                    this._repeat -= completeCount;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                this._startTime += durationAndDelay * completeCount;\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                this._onEveryStartCallbackFired = false;\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration, false);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        return parseFloat(end);\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '23.1.3';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, exports as default, getAll, nextId, now, remove, removeAll, update };\n","/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2023-2024 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {IVariable, IMain, IHEvt2Fnc, IEvt2Fnc, IMark} from './CmnInterface';\nimport {CmnLib, argChk_Boolean, argChk_Num} from './CmnLib';\nimport type {HArg, IHTag, ITag} from './Grammar';\nimport type {LayerMng} from './LayerMng';\nimport type {ScriptIterator} from './ScriptIterator';\nimport {EventListenerCtn} from './EventListenerCtn';\nimport type {SoundMng} from './SoundMng';\nimport type {FocusMng} from './FocusMng';\nimport type {Config} from './Config';\n\nimport {Container, utils} from 'pixi.js';\nimport {Tween, remove} from '@tweenjs/tween.js'\n\nlet\tchgSt\t: (rs: ReadState)=> void;\nlet main\t: IMain;\nlet val\t\t: IVariable;\nlet layMng\t: LayerMng;\nlet scrItr\t: ScriptIterator;\nlet sndMng\t: SoundMng;\nlet hTag\t: IHTag;\nlet fcs\t\t: FocusMng;\nlet\tgoTxt\t: ()=> void;\nlet procWheel4wle: (elc: EventListenerCtn, onIntr: ()=> void)=> void= ()=> {};\nlet\telmHint\t: HTMLElement;\nlet\tcfg\t\t: Config;\n\nlet\ttagL_enabled\t= true;\t\t// 頁末まで一気に読み進むか(l無視)\nlet\tskip_all\t\t= false;\t// falseなら既読のみをスキップ\nlet\tskip_enabled\t= false;\t// 次の選択肢(/未読)まで進むが有効か\nlet\tauto_enabled\t= false;\t// 自動読みすすみモードかどうか\n\nlet\thLocalEvt2Fnc\t: IHEvt2Fnc = {};\nlet\thGlobalEvt2Fnc\t: IHEvt2Fnc = {};\nlet aPage\t: IPageLog[];\nlet\tlenPage = 0;\nlet\tposPage = 0;\nlet\tstyPaging\t: string;\nexport const INI_STYPAGE = 'color: yellow; text-shadow: 1px 1px 0 #000, -1px 1px 0 #000, 1px -1px 0 #000, -1px -1px 0 #000;';\n\nlet\taKeysAtPaging: string[]\t= [];\n\n//let\tisDbgBreak\t\t= false;\n\nfunction\tcancelAutoSkip() {\n\tif (! tagL_enabled) {\t// 頁末まで一気に読み進むか(l無視)\n\t\ttagL_enabled = true;\n\t\tval.setVal_Nochk('tmp', 'sn.tagL.enabled', true);\n\t}\n\n\tif (skip_enabled) {\t\t// 次の選択肢(/未読)まで進むが有効か\n\t\tskip_enabled = false;\n\t\tval.setVal_Nochk('tmp', 'sn.skip.enabled', false);\n\t}\n\tif (auto_enabled) {\t\t// 自動読みすすみモードかどうか\n\t\tauto_enabled = false;\n\t\tval.setVal_Nochk('tmp', 'sn.auto.enabled', false);\n\t}\n}\n\nexport\tfunction\tenableEvent() {fnc_enableEvent()}\nexport\tfunction\tdisableEvent() {fnc_disableEvent()}\nlet fnc_enableEvent\t: ()=> void\t= ()=> new RsEvtRsv;\nlet fnc_disableEvent: ()=> void\t= ()=> new Rs_BanEvent;\n\nexport\tfunction\tplaybackPage(saPageLog: string, $styPaging: string) {\n\taPage = JSON.parse(saPageLog);\n\tlenPage = aPage.length;\n\tif (posPage >= lenPage) posPage = lenPage -1;\n\tstyPaging = $styPaging;\n}\n\ninterface IPageLog {\n\tkey\t\t: string;\n\tfn\t\t: string;\n\tindex\t: number;\n\tmark\t: IMark;\n\tweek\t: boolean;\n};\n\nclass WaitLimitedEventer {\n\treadonly\t#elc\t= new EventListenerCtn;\n\n\tconstructor(hArg: HArg, onIntr: ()=> void) {\n\t\tif (skip_enabled) {\t\t// Fスキップ時\n\t\t\tif (! skip_all && ! scrItr.isNextKidoku) cancelAutoSkip();\t// 未読で停止\n\t\t//\telse {fnc(); return false}\t// これを有効にすると Fスキップ時速すぎて文字が見えない\n\t\t}\n\n\t\tif (argChk_Boolean(hArg, 'canskip', true)) {\n\t\t\tconst fnc = ()=> {this.destroy(); cancelAutoSkip(); onIntr()};\n\t\t\tthis.#elc.add(window, 'pointerdown', e=> {e.stopPropagation(); fnc()});\n\t\t\tthis.#elc.add(window, 'keydown', (e: any)=> {\n\t\t\t\t//if (! e.isTrusted) return;\n\t\t\t\tif (e['isComposing']) return; // サポートしてない環境でもいける書き方\n\t\t\t\te.stopPropagation();\n\t\t\t\tfnc();\n\t\t\t});\n\t\t\tprocWheel4wle(this.#elc, fnc);\n\t\t}\n\t}\n\tdestroy() {this.#elc.clear()}\n\n}\n\n\nexport class ReadState {\n\tstatic\tinit($chgSt: (rs: ReadState)=> void, $main: IMain, $val: IVariable, $layMng: LayerMng, $scrItr: ScriptIterator, $sndMng: SoundMng, $hTag: IHTag, $fcs: FocusMng, $procWheel4wle: (elc: EventListenerCtn, onIntr: ()=> void)=> void, $elmHint: HTMLElement, $cfg: Config) {\n\t\tchgSt = $chgSt;\n\t\tmain = $main;\n\t\tval = $val;\n\t\tlayMng = $layMng;\n\t\tscrItr = $scrItr;\n\t\tsndMng = $sndMng;\n\t\thTag = $hTag;\n\t\tfcs = $fcs;\n\t\tgoTxt = ()=> layMng.goTxt();\n\t\tprocWheel4wle = $procWheel4wle;\n\t\telmHint = $elmHint;\n\t\tcfg = $cfg;\n\t\tnew RsEvtRsv;\n\n\t\tval.defTmp('sn.tagL.enabled', ()=> tagL_enabled);\n\t\tval.defValTrg('tmp:sn.tagL.enabled', (_name: string, val: any)=> tagL_enabled = String(val) !== 'false');\n\t\tval.defTmp('sn.skip.all', ()=> skip_all);\n\t\tval.defValTrg('tmp:sn.skip.all', (_name: string, val: any)=> skip_all = String(val) !== 'false');\n\t\tval.defTmp('sn.skip.enabled', ()=> skip_enabled);\n\t\tval.defValTrg('tmp:sn.skip.enabled', (_name: string, val: any)=> skip_enabled = String(val) !== 'false');\n\t\tval.defTmp('sn.auto.enabled', ()=> auto_enabled);\n\t\tval.defValTrg('tmp:sn.auto.enabled', (_name: string, val: any)=> auto_enabled = String(val) !== 'false');\n\n\t\thLocalEvt2Fnc = {};\n\t\thGlobalEvt2Fnc = {};\n\t\t//aPage = [];\t// 初期化済につき\n\t\t//lenPage = 0;\n\t\t//posPage = 0;\n\t\t//styPaging =\n\t}\n\n\tprotected\tconstructor(protected readonly hArg: HArg) {\n\t\tfnc_enableEvent\t= ()=> new RsEvtRsv;\n\t\tfnc_disableEvent= ()=> new Rs_BanEvent;\n\t\tchgSt(this);\n\t}\n\tdestroy() {\n\t\tthis.onFinish\t= ()=> {};\n\t\tthis.onUserAct\t= ()=> {};\n\t\tthis.#wle.destroy();\n\t}\n\n\tget\tisSkipping(): boolean {return skip_enabled}\n\n\tstatic\tgetHtmlElmList(KeY: string): {el: NodeListOf<HTMLElement>, id: string, sel: string} {\n\t\tconst idx = KeY.indexOf(':');\n\t\tlet sel = '';\n\t\tif (idx >= 0) {\t\t// key='dom=config:#ctrl2val\n\t\t\tconst id = KeY.slice(4, idx);\n\t\t\tconst frmnm = `const.sn.frm.${id}`;\n\t\t\tif (! val.getVal(`tmp:${frmnm}`, 0)) throw `HTML【${id}】が読み込まれていません`;\n\n\t\t\tconst ifrm = document.getElementById(id) as HTMLIFrameElement;\n\t\t\tconst win = ifrm.contentWindow!;\n\t\t\tsel = KeY.slice(idx +1);\n\t\t\treturn {el: win.document.querySelectorAll(sel), id, sel};\n\t\t}\n\n\t\tsel = KeY.slice(4);\n\t\treturn {el: document.querySelectorAll(sel), id: '', sel};\n\t}\n\n\n\tstatic\tsetEvt2Fnc(glb: boolean, key: string, fnc: IEvt2Fnc) {\n\t\tif (glb)\n\t\t\thGlobalEvt2Fnc[key] = fnc;\n\t\telse hLocalEvt2Fnc[key] = fnc;\n\t}\n\tprotected\tstatic\tgetEvt2Fnc = (key: string): IEvt2Fnc | undefined => hLocalEvt2Fnc[key] ?? hGlobalEvt2Fnc[key];\n\tstatic\tclear_eventer(KeY: string, glb: boolean, key: string) {\n\t\tif (! KeY.startsWith('dom=')) return;\n\n\t\tconst e2f = glb ? hGlobalEvt2Fnc[key] : hLocalEvt2Fnc[key];\n\t\tif (e2f) ReadState.getHtmlElmList(KeY).el.forEach(v=> v.removeEventListener('click', e2f));\n\t\tif (glb) delete hGlobalEvt2Fnc[key]; else delete hLocalEvt2Fnc[key];\n\t}\n\n\n\tstatic\tclear_event(hArg: HArg): boolean {\n\t\tconst glb = argChk_Boolean(hArg, 'global', false);\n\t\tconst h = glb ?hGlobalEvt2Fnc :hLocalEvt2Fnc;\n\t\tfor (const [KeY, e2f] of Object.entries(h)) {\n\t\t\tif (! KeY.startsWith('dom=')) continue;\n\n\t\t\tReadState.getHtmlElmList(KeY).el.forEach(v=> v.removeEventListener('click', e2f));\n\t\t}\n\t\tif (glb) hGlobalEvt2Fnc = {}; else hLocalEvt2Fnc = {};\n\n\t\treturn false;\n\t}\n\n\ts(hArg: HArg) {this.#recodePage(); return Rs_S.go(hArg)}\n\n\treadonly\twait: ITag = hArg=> {\n\t\tif (skip_enabled) {\t\t// Fスキップ時\n\t\t\tif (! skip_all && ! scrItr.isNextKidoku) {cancelAutoSkip(); return false}\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Rs_Wait.go(hArg);\n\t}\n\treadonly\twaitclick: ITag = hArg=> Rs_WaitClick.go(hArg);\n\n\tprotected\twaitTxtAndTimer(time: number, hArg: HArg): boolean {\n\t\tReadState.#eeCompTxt.once(ReadState.#EENM_COMP_TXT, ()=> {\t// 1)文字表示待ち\n//console.log(`fn:ReadState.ts B) Txt Fin... time Wait:${time}`);\n\t\t\tthis.#wle.destroy();\t// waitEvent 使用者の通常 break 時義務\n\t\t\tif (time === 0) {this.onFinish(); return}\n\n\t\t\tconst tw = new Tween({})\n\t\t\t.to({}, time)\n\t\t\t.onComplete(()=> {\t// 2)時間待ち\n//console.log(`fn:ReadState.ts 2) COMP`);\n\t\t\t\tthis.#wle.destroy();\t// waitEvent 使用者の通常 break 時義務\n\t\t\t\tremove(tw);\n\t\t\t\tthis.onFinish();\n\t\t\t})\n\t\t\t.start();\n\t\t\tthis.waitLimitedEvent(hArg, ()=> {\t// 2)時間待ち\n//console.log(`%cfn:ReadState.ts 2) CANCEL`, 'color:#B30;');\n\t\t\t\ttw.stop();\n\t\t\t\tremove(tw);\t//x\ttw.end();\n\t\t\t\tthis.onUserAct();\n\t\t\t});\n\t\t});\n\t\tgoTxt();\n\t\tval.saveKidoku();\n\n\t\treturn this.waitLimitedEvent(hArg, ()=> {\t// 1)文字表示待ち\n//console.log(`fn:ReadState.ts b) Txt Skip`);\n\t\t\tReadState.#eeCompTxt.removeAllListeners();\n\t\t\tthis.onUserAct();\t// 並び重要\n\t\t});\n\t}\n\tstatic\tnoticeCompTxt() {ReadState.#eeCompTxt.emit(ReadState.#EENM_COMP_TXT)}\n\tstatic\treadonly\t#eeCompTxt\t\t= new utils.EventEmitter;// static必須\n\tstatic\treadonly\t#EENM_COMP_TXT\t= 'sn:notice_comp_txt';\n\n\n\tstatic\tpopLocalEvts(): IHEvt2Fnc {\n\t\tconst ret = hLocalEvt2Fnc;\n\t\thLocalEvt2Fnc = {};\n\t\treturn ret;\n\t}\n\tstatic\tpushLocalEvts(h: IHEvt2Fnc) {hLocalEvt2Fnc = h}\n\n\t// 予約イベントの発生待ち\n\tprotected\twaitRsvEvent(canUserAct: boolean, glb: boolean): void {\n\t\tval.saveKidoku();\n\n\t\tif (canUserAct) {\n\t\t\t//hTag.event({key:'click', breakout: fnc});\n\t\t\t//hTag.event({key:'middleclick', breakout: fnc});\n\t\t\t//\thTag.event()は内部で使わず、こうする\n\t\t\thLocalEvt2Fnc['click'] =\n\t\t\t//this.hTag.event({key:'enter', breakout: fnc});\n\t\t\t//hTag.event({key:'down', breakout: fnc});\n\t\t\t//\thTag.event()は内部で使わず、こうする\n\t\t\thLocalEvt2Fnc['enter'] =\n\t\t\thLocalEvt2Fnc['arrowdown'] =\n\n\t\t\t// hTag.event({key:'downwheel', breakout: fnc});\n\t\t\t//\thTag.event()は内部で使わず、こうする\n\t\t\thLocalEvt2Fnc['wheel.y>0'] = ()=> this.onUserAct();\n\t\t}\n\t\telse {\n\t\t\tdelete hLocalEvt2Fnc['click'];\n\t\t\tdelete hLocalEvt2Fnc['enter'];\n\t\t\tdelete hLocalEvt2Fnc['arrowdown'];\n\t\t\tdelete hLocalEvt2Fnc['wheel.y>0'];\n\t\t}\n\t\tReadState.getEvt2Fnc = glb\n\t\t\t? key=> hLocalEvt2Fnc[key]\n\t\t\t\t?? hGlobalEvt2Fnc[key]\n\t\t\t: key=> hLocalEvt2Fnc[key];\n\n\t\tscrItr.noticeWait();\n\t\tif (CmnLib.debugLog) {\n\t\t\tconst o = Object.create(null);\n\t\t\to.local = Object.keys(hLocalEvt2Fnc);\n\t\t\to.global= Object.keys(hGlobalEvt2Fnc);\n\t\t\tconsole.log(`🎍 wait event... %o`, o);\n\t\t}\n\t}\n\n\n\tl(hArg: HArg): boolean {\n\t\tif (! tagL_enabled) return false;\n\t\tthis.#recodePage(true);\n\n\t\tif (auto_enabled) {\n\t\t\tconst time = Number(val.getVal(`sys:sn.auto.msecLineWait${scrItr.isKidoku ?'_Kidoku' :''}`));\n\t\t\treturn Rs_L_AutoSkip.go(time, hArg);\n\t\t}\n\t\tif (skip_enabled) {\t\t// Fスキップ時\n\t\t\tif (! skip_all && ! scrItr.isNextKidoku) return Rs_L_Wait.go(hArg);\t// 未読で停止\n\n\t\t\tif ('ps'.includes(val.getVal('sys:sn.skip.mode'))) return Rs_L_AutoSkip.go(50, hArg);\t// 改行待ち=しない\t// 魔法数字、見えるぐらい少し待つ\n\t\t}\n\n\t\treturn Rs_L.go(hArg);\n\t}\n\n\tp(hArg: HArg): boolean {\n\t\tthis.#recodePage();\n\n\t\tif (auto_enabled) {\n\t\t\tconst time = Number(val.getVal(`sys:sn.auto.msecPageWait${scrItr.isKidoku ?'_Kidoku' :''}`));\n\t\t\treturn Rs_P_AutoSkip.go(time, hArg);\n\t\t}\n\t\tif (skip_enabled) {\t\t// Fスキップ時\n\t\t\tif (! skip_all && ! scrItr.isNextKidoku) return Rs_P_Wait.go(hArg);\t// 未読で停止\n\n\t\t\tif ('s' == val.getVal('sys:sn.skip.mode')) {\t// 改行待ち＆改ページ待ち=しない\n\t\t\t\treturn Rs_P_AutoSkip.go(50, hArg);// 魔法数字、見えるぐらい少し待つ\n\t\t\t\t//return false;\t// このほうが高速だが、Fスキップ時文字を見せたい\n\t\t\t}\n\t\t}\n\n\t\treturn Rs_P.go(hArg);\n\t}\n\n\n\t// 予約イベントの発生待ちしない waitRsvEvent()\n\t// 使う場合、外部要因でキャンセルした際は breakLimitedEvent() で後始末を忘れないこと\n\twaitLimitedEvent(hArg: HArg, onIntr: ()=> void): boolean {\n\t\tthis.#wle.destroy();\n\t\tthis.#wle = new WaitLimitedEventer(hArg, onIntr);\n\n\t\treturn true;\n\t}\n\tbreakEvent(evnm: string) {\n\t\tif (ReadState.evnm !== evnm) return;\n\t\tReadState.evnm = '';\n\n\t\tthis.#wle.destroy();\n\t\tenableEvent();\n\t}\n\t#wle\t= new WaitLimitedEventer({}, ()=> {});\t// ':タグ名' は未定義、デバッグ時に無視を\n\tprotected\tstatic\tevnm\t= '';\t// 状態保存する変数はすべて static に\n\n\twaitEvent(evnm: string, hArg: HArg, onFire: ()=> void) {\n\t\t// waitEvent 使用者は、通常 break 時義務として、breakEvent()を呼ぶこと\n\t\tReadState.evnm = evnm;\n\n\t//\tif (auto_enabled)\t// いまのとこ高速化せず\n\t\tif (skip_enabled) {\t\t// Fスキップ時\n\t\t\tif (! skip_all && ! scrItr.isNextKidoku) return Rs_Any_Wait.go(hArg, onFire);\t// 未読で停止\n\t\t}\n\n\t\treturn Rs_Any.go(hArg, onFire);\n\t}\n\n\tprotected\tonFinish(): void {}\n\tprotected\tonUserAct(): void {}\n\n\treadonly\tisWait: boolean\t\t= false;\t// 予約イベントの発生待ち中か\n\tfire(_KEY: string, _e: Event) {}\n\n\tpage(hArg: HArg): boolean {\n\t\tif (! ('clear' in hArg || 'to' in hArg || 'style' in hArg)) throw 'clear,style,to いずれかは必須です';\n\n\t\tconst {style} = hArg;\n\t\tif (style) {\n\t\t\tstyPaging = style;\n\t\t\tval.setVal_Nochk('save', 'const.sn.styPaging', style);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (argChk_Boolean(hArg, 'clear', false)) {\n\t\t\taPage = [];\n\t\t\tlenPage = 0;\n\t\t\tposPage = 0;\n\t\t\tval.setVal_Nochk('sys', 'const.sn.aPageLog', '[]');\n\t\t\tval.setVal_Nochk('save', 'const.sn.styPaging', INI_STYPAGE);\n\t\t\treturn false;\n\t\t}\n\n\t\tconst {to, key} = hArg;\n\t\tif (key) aKeysAtPaging = key.split((','));\n//console.log(`fn:ReadState.ts line:389 to:${to}`);\n\t\tswitch (to) {\n\t\t\tcase 'prev':\tposPage = lenPage -1;\n\t\t\t\tif (lenPage < 2) return false;\tbreak;\n\t\t\t//case 'next':\tbreak;\n\t\t\t//default:\tbreak;\t// ダイアログ確認などするとここを通る\n\t\t}\n\n\t\treturn RsPagination.go(hArg);\t// 『ページ移動中』状態へ\n\t}\n\n\t#recodePage(week = false) {\n\t\tif (! val.getVal('save:sn.doRecLog')) return;\n\n\t\tconst {fn, idx} = scrItr.nowScrIdx();\n\t\tconst key = `${idx -1}:`+ fn;\n\t\tif (aPage.findIndex(p=> p.key === key) > -1) return;\n\n//console.log(`fn:ReadState.ts === week:${week} lenPage:${lenPage} len:${aPage.length} POP:${aPage.at(-1)?.week}`);\n\t\tif (aPage.at(-1)?.week) aPage.pop();\n\t\tconst {max_len} = cfg.oCfg.log;\t// 一定数を保つ\n\t\tif (aPage.push({key, week,\n\t\t\tfn\t\t: val.getVal('save:const.sn.scriptFn', fn),\n\t\t\tindex\t: val.getVal('save:const.sn.scriptIdx', 0),\n\t\t\tmark\t: scrItr.nowMark(),\n\t\t}) > max_len) aPage = aPage.slice(-max_len);\n\t\tlenPage = aPage.length;\n// const m = scrItr.nowMark();\n// console.log(`fn:ReadState.ts    === lenPage:${lenPage} (base=${m.hPages.base.fore.sBkFn} 0=${m.hPages['0'].fore.sBkFn} mes=${m.hPages.mes.fore.txs.cssText.match(/color: \\w+;/)}) mark:%o aPage:%o`, m, aPage);\n\n\t\tval.setVal_Nochk('sys', 'const.sn.aPageLog', JSON.stringify(aPage));\n\t}\n}\n\n\n// === イベント予約受付中 ===\nclass RsEvtRsv extends ReadState {\n\tconstructor() {super({}); main.resume(); elmHint.hidden = true}\n\toverride\tbreakEvent() {}\n}\n\n\n// === [s] ===\nclass Rs_S_fire extends ReadState {\n\toverride\treadonly\tisWait\t= true;\t// 予約イベントの発生待ち中か\n\toverride\tfire(KEY: string, e: Event) {\n\t\t//if (this.#isDbgBreak) return;\n\n\t\t// 予約実行\n\t\tconst key = KEY.toLowerCase();\n\t\tif (CmnLib.debugLog) console.log(`👺 fire<(key:\\`${key}\\` type:${e.type} e:%o)`, {...e});\n\t\tif (key === 'enter') {\n\t\t\tconst em = fcs.getFocus();\n\t\t\tif (em instanceof Container) {\n\t\t\t\tem.emit('pointerdown', new Event('pointerdown'));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst ke = ReadState.getEvt2Fnc(key);\n\t\tif (! ke) {\n\t\t\t// スマホ用疑似スワイプスクロール\n\t\t\tif (key.startsWith('swipe')) globalThis.scrollBy(\n\t\t\t\t-(e as WheelEvent).deltaX || 0,\t// NaN なので ?? ではダメ\n\t\t\t\t-(e as WheelEvent).deltaY || 0,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif (! key.endsWith('wheel')) e.preventDefault?.();\n\t\te.stopPropagation();\n\t\tif (! key.startsWith('dom=')) if (layMng.clickTxtLay()) return;\n\n\t\tke(e);\n\t\t//this.hLocalEvt2Fnc = {};\t// ここで消去禁止、Main.resumeByJumpOrCall()が担当\n\t}\n}\nclass Rs_S extends Rs_S_fire {\n\tstatic\treadonly\tgo: ITag = hArg=> {\n\t\tnew Rs_S(hArg).waitTxtAndTimer(0, {});\n\t\tfnc_enableEvent = ()=> {};\t// constructor 後に\n\t\treturn true;\n\t}\n\toverride\tbreakEvent() {}\n\tprotected\toverride\tonFinish() {Rs_S_Wait.go(this.hArg)}\n\tprotected\toverride\tonUserAct() {this.onFinish()}\n}\n\nclass Rs_S_Wait extends Rs_S_fire {\n\tstatic\treadonly\tgo: ITag = hArg=> {\n\t\tcancelAutoSkip();\n\t\tconst glb = argChk_Boolean(hArg, 'global', true);\n\t\tnew Rs_S_Wait(hArg).waitRsvEvent(false, glb);\n\t\tfnc_enableEvent = ()=> {};\t// constructor 後に\n\t\treturn true;\n\t}\n\toverride\tbreakEvent() {}\n\tprotected\toverride\tonFinish() {}\n\tprotected\toverride\tonUserAct() {}\n}\n\n\n// === [wait] ===\nclass Rs_Wait extends ReadState {\t// 文字表示終了待ち→[wait]\n\tstatic\treadonly\tgo: ITag = hArg=> {\n\t\tconst time = argChk_Num(hArg, 'time', NaN);\t// skip時でもエラーは出したげたい\n\t\treturn new Rs_Wait(hArg).waitTxtAndTimer(time, hArg);\n\t}\n\tprotected\toverride\tonFinish() {enableEvent()}\n\tprotected\toverride\tonUserAct() {this.onFinish()}\n}\n\n\n// === [l] ===\nclass Rs_L extends ReadState {\t\t// 文字表示終了待ち（そして[l]）\n\tstatic\treadonly\tgo: ITag = hArg=> new Rs_L(hArg).waitTxtAndTimer(0, hArg);\n\toverride\tbreakEvent() {}\n\tprotected\toverride\tonFinish() {Rs_L_Wait.go(this.hArg)}\n\tprotected\toverride\tonUserAct() {this.onFinish()}\n}\n\nclass Rs_L_AutoSkip extends ReadState {\t// 文字表示終了待ち（そして[l]auto/skipウェイト待ち）\n\tstatic\treadonly\tgo = (time: number, hArg: HArg)=> new Rs_L_AutoSkip(hArg).waitTxtAndTimer(time, hArg);\n\toverride\tbreakEvent() {}\n\tprotected\toverride\tonFinish() {enableEvent()}\n\tprotected\toverride\tonUserAct() {Rs_L_Wait.go(this.hArg)}\n}\n\nclass Rs_L_Wait extends Rs_S_fire {\t\t// [l] クリック待ち\n\tstatic\treadonly\tgo: ITag = hArg=> {\n\t\tif (argChk_Boolean(hArg, 'visible', true)) layMng.breakLine(hArg);\n\t\tgoTxt();\n\n\t\tconst glb = argChk_Boolean(hArg, 'global', true);\n\t\tnew Rs_L_Wait(hArg).waitRsvEvent(true, glb);\n\t\treturn true;\n\t}\n\tprotected\toverride\tonFinish() {enableEvent()}\n\tprotected\toverride\tonUserAct() {enableEvent()}\n}\n\n\n// === [p] ===\nclass Rs_P extends ReadState {\t\t// 文字表示終了待ち（そして[p]）\n\tstatic\treadonly\tgo: ITag = hArg=> new Rs_P(hArg).waitTxtAndTimer(0, hArg);\n\toverride\tbreakEvent() {}\n\tprotected\toverride\tonFinish() {Rs_P_Wait.go(this.hArg)}\n\tprotected\toverride\tonUserAct() {this.onFinish()}\n}\n\nclass Rs_P_AutoSkip extends ReadState {\t// 文字表示終了待ち（そして[p]auto/skipウェイト待ち）\n\tstatic\treadonly\tgo = (time: number, hArg: HArg)=> new Rs_P_AutoSkip(hArg).waitTxtAndTimer(time, hArg);\n\toverride\tbreakEvent() {}\n\tprotected\toverride\tonFinish() {enableEvent()}\n\tprotected\toverride\tonUserAct() {Rs_P_Wait.go(this.hArg)}\n}\n\nclass Rs_P_Wait extends Rs_S_fire {\t\t// [p] クリック待ち\n\tstatic\treadonly\tgo: ITag = hArg=> {\n\t\t// [p]メソッド内でやるとスキップの利きが悪い\n\t\tif (argChk_Boolean(hArg, 'visible', true)) layMng.breakPage(hArg);\n\t\tgoTxt();\n\n\t\tconst glb = argChk_Boolean(hArg, 'global', true);\n\t\tnew Rs_P_Wait(hArg).waitRsvEvent(true, glb);\n\t\treturn true;\n\t}\n\tprotected\toverride\tonFinish() {\n\t\tif (argChk_Boolean(this.hArg, 'er', false)) hTag.er!(this.hArg);\n\n\t\tsndMng.clearCache();\n\t\t//scrItr.turnPage();\n\t\tenableEvent();\n\t}\n\tprotected\toverride\tonUserAct() {this.onFinish()}\n}\n\n\n// === [waitclick] ===\nclass Rs_WaitClick extends Rs_S_fire {\n\tstatic\treadonly\tgo: ITag = hArg=> new Rs_WaitClick(hArg).waitTxtAndTimer(0, hArg);\n\tprotected\toverride\tonFinish() {\n\t\tcancelAutoSkip();\n\t\tconst glb = argChk_Boolean(this.hArg, 'global', true);\n\t\tthis.waitRsvEvent(true, glb);\n\t}\n\tprotected\toverride\tonUserAct() {enableEvent()}\n}\n\n\n// === [wt][wait_tsy][wv][ws][wl][wf][wb] ===\nclass Rs_Any extends ReadState {\t\t// 文字表示終了待ち（そして[*]）\n\tstatic\treadonly\tgo = (hArg: HArg, onIntr: ()=> void)=> new Rs_Any(hArg, onIntr).waitTxtAndTimer(0, hArg);\n\tprivate\tconstructor(hArg: HArg, private readonly onIntr: ()=> void) {super(hArg)}\n\tprotected\toverride\tonFinish() {Rs_Any_Wait.go(this.hArg, this.onIntr)}\n\tprotected\toverride\tonUserAct() {this.onFinish()}\n}\n\n//\tclass Rs_Any_AutoSkip extends... {\t// 文字表示終了待ち（そして[*]auto/skipウェイト待ち）\n\nclass Rs_Any_Wait extends Rs_S_fire {\t// fireがある → イベント受付する\n//class Rs_Any_Wait extends ReadState {\t// fireがない → イベント受付しない\n\tstatic\treadonly\tgo = (hArg: HArg, onFire: ()=> void)=> new Rs_Any_Wait(hArg, onFire).waitLimitedEvent(hArg, onFire);\n\tprivate\tconstructor(hArg: HArg, private readonly onIntr: ()=> void) {super(hArg)}\n\tprotected\toverride\tonFinish() {enableEvent()}\n\tprotected\toverride\tonUserAct() {this.onIntr(); this.onFinish()}\n}\n\n\n// === イベント禁止（内部処理用） ===\nclass Rs_BanEvent extends ReadState {\t// fireがない → イベント受付しない\n\tconstructor() {\n\t\tsuper({})\n\t\tfnc_enableEvent = ()=> new RsEvtRsv;\n\t\tfnc_disableEvent = ()=> {};\n\t}\n\toverride\tbreakEvent() {}\n}\n\n\n// === ページ移動中 ===\nexport class RsPagination extends Rs_S {\n\tconstructor(hArg: HArg) {\n\t\tsuper(hArg);\n\t\tfnc_enableEvent = ()=> {};\n\t\tfnc_disableEvent = ()=> new Rs_BanEvPage;\n\t}\n\toverride\tget\tisSkipping() {return ! aPage[posPage]?.week;}\n\t\t// return true で良いのだが、[l]でページ移動モードになったあと、[l]に戻ってモード終了してから、[p]に至る文字表示が瞬時表示になる対策\n\n\toverride\treadonly\ts: ITag = hArg=> Rs_S.go(hArg);\n\n\toverride\treadonly\twait = ()=> false;\n\toverride\treadonly\twaitclick = ()=> false;\n\tprotected\toverride\treadonly\twaitTxtAndTimer = ()=> false;\n\n\toverride\tl(hArg: HArg): boolean {\n//console.log(`fn:ReadState.ts [l] len:${lenPage} pos:${posPage}`);\n\t\t// ページ末尾ならページ移動終了\n\t\tif (posPage === lenPage -1) {this.#exit(); return Rs_L_Wait.go(hArg)}\n\n\t\tlayMng.setAllStyle2TxtLay(styPaging);\n\t\tgoTxt();\n\t\tif (! aPage[posPage]?.week) return false;\n\n\t\tif (argChk_Boolean(hArg, 'visible', true)) layMng.breakLine(hArg);\n\t\tthis.#waitRsvEvent4Paging();\n\n\t\treturn true;\n\t}\n\t\t#waitRsvEvent4Paging() {\n\t\t\tthis.waitRsvEvent(false, true);\n\n\t\t\tlet h: IHEvt2Fnc = {};\n\t\t\tif (aKeysAtPaging.length === 0) h = hGlobalEvt2Fnc;\n\t\t\telse for (const k of aKeysAtPaging) {\n\t\t\t\tconst v = hGlobalEvt2Fnc[k];\n\t\t\t\tif (v) h[k] = v;\n\t\t\t}\n\t\t\tReadState.getEvt2Fnc = key=> hLocalEvt2Fnc[key] ?? h[key];\n\t\t}\n\n\toverride\tp(hArg: HArg): boolean {\n//console.log(`fn:ReadState.ts [p] len:${lenPage} pos:${posPage}`);\n\t\t// ページ末尾ならページ移動終了\n\t\tif (posPage === lenPage -1) {this.#exit(); return Rs_P_Wait.go(hArg)}\n\n\t\tlayMng.setAllStyle2TxtLay(styPaging);\n\t\tgoTxt();\n\n\t\tif (argChk_Boolean(hArg, 'visible', true)) layMng.breakPage(hArg);\n\t\tthis.#waitRsvEvent4Paging();\n\n\t\treturn true;\n\t}\n\n\tstatic\toverride\treadonly\tgo: ITag = hArg=> {\n\t\tval.setVal_Nochk('tmp', 'const.sn.isPaging', true);\n\t\treturn new RsPagination(hArg).page(hArg);\n\t}\n\toverride\tpage(hArg: HArg): boolean {\n\t\tconst {to, style, clear} = hArg;\n\t\tif (style || clear) return false;\n// console.log(`fn:ReadState.ts RsPa len:${lenPage} pos:${posPage} to:${to}`);\n\t\tswitch (to) {\n\t\t\tcase 'prev':\tif (posPage === 0) return false;\n\t\t\t\t--posPage;\tbreak;\n\n\t\t\tcase 'next':\tif (posPage === lenPage -1) return false;\n\t\t\t\t++posPage;\tbreak;\n\n\t\t\tcase 'exit':\tposPage = lenPage -1;\tthis.#exit();\tbreak;\n\n\t\t\tcase 'load':\tlenPage = posPage +1;\n\t\t\t\taPage = aPage.slice(0, lenPage);\tbreak;\n\n\t\t\tdefault:\tthrow `属性to「${to}」は異常です`;\n\t\t}\n\n\t\tconst p = aPage[posPage];\n\t\tif (! p) throw `[page] posPage異常:${posPage}`\n\t\tconst {fn, index, mark} = p;\n// const m = scrItr.nowMark();\n// const {week} = aPage[posPage];\n// console.log(`fn:ReadState.ts -- pos:${posPage} (base=${m.hPages.base.fore.sBkFn} 0=${m.hPages['0'].fore.sBkFn} mes=${m.hPages.mes.fore.txs.cssText.match(/color: \\w+;/)}) A:${posPage === lenPage -1} styPaging:${styPaging} week:${week} mark:%o`, mark);\n\t\treturn scrItr.loadFromMark({fn, index}, mark);\n\t}\n\t#exit() {val.setVal_Nochk('tmp', 'const.sn.isPaging', false);}\n\n\tprotected\toverride\tonFinish() {}\n\tprotected\toverride\tonUserAct() {}\n}\n\n// === イベント禁止（ページ移動中・内部処理用） ===\nclass Rs_BanEvPage extends ReadState {\t// fireがない → イベント受付しない\n\tconstructor() {\n\t\tsuper({});\n\t\tfnc_enableEvent = ()=> {\t// RsEvtRsv ぽい\n\t\t\tnew RsPagination({});\n\t\t\tmain.resume();\n\t\t\telmHint.hidden = true;\n\t\t};\n\t\tfnc_disableEvent = ()=> {};\n\t}\n\toverride\tbreakEvent() {}\n}\n"],"names":["Easing","amount","s","power","now","Group","_this","tweenId","tween","time","preserve","tweenIds","i","autoStart","Interpolation","v","k","m","f","fn","b","n","pw","bn","p0","p1","t","fc","a","p2","p3","v0","v1","t2","t3","Sequence","mainGroup","Tween","_object","_group","target","duration","dynamic","overrideStartingValues","property","tmp","prop","_valuesStart","_valuesEnd","_valuesStartRepeat","startValue","startValueIsArray","propType","isInterpolationList","endValues","temp","l","value","nestedObject","numChainedTweens","group","times","yoyo","easingFunction","interpolationFunction","tweens","_i","callback","_a","endTime","elapsedTime","durationAndDelay","totalTime","calculateElapsedPortion","timesRepeated","timeIntoCurrentRepeat","portion","elapsed","completeCount","start","end","startIsArray","endIsArray","endValue","TWEEN","removeAll","remove","update","chgSt","main","val","layMng","scrItr","sndMng","hTag","fcs","goTxt","procWheel4wle","elmHint","cfg","tagL_enabled","skip_all","skip_enabled","auto_enabled","hLocalEvt2Fnc","hGlobalEvt2Fnc","aPage","lenPage","posPage","styPaging","INI_STYPAGE","aKeysAtPaging","cancelAutoSkip","enableEvent","fnc_enableEvent","disableEvent","fnc_disableEvent","RsEvtRsv","Rs_BanEvent","playbackPage","saPageLog","$styPaging","WaitLimitedEventer","#elc","EventListenerCtn","hArg","onIntr","argChk_Boolean","fnc","e","ReadState","$chgSt","$main","$val","$layMng","$scrItr","$sndMng","$hTag","$fcs","$procWheel4wle","$elmHint","$cfg","_name","#wle","KeY","idx","sel","id","frmnm","win","glb","key","e2f","h","#recodePage","Rs_S","Rs_Wait","Rs_WaitClick","#eeCompTxt","#EENM_COMP_TXT","tw","utils.EventEmitter","ret","canUserAct","CmnLib","o","Rs_L_AutoSkip","Rs_L_Wait","Rs_L","Rs_P_AutoSkip","Rs_P_Wait","Rs_P","evnm","onFire","Rs_Any_Wait","Rs_Any","_KEY","_e","style","to","RsPagination","week","p","max_len","Rs_S_fire","KEY","em","Container","ke","Rs_S_Wait","argChk_Num","Rs_BanEvPage","#exit","#waitRsvEvent4Paging","clear","index","mark"],"mappings":"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","x_google_ignoreList":[0]}