{"version":3,"file":"preload.js","sources":["../src/preload.ts"],"sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2021-2022 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport {contextBridge, ipcRenderer} from 'electron';\n\nexport\ttype\tHPROC\t= {\n\tgetInfo\t\t: ()=> Promise<HINFO>;\n\n\texistsSync\t: (path: string)=> Promise<boolean>;\n\tcopySync\t: (path_from: string, path_to: string)=> void;\n\tremoveSync\t: (path: string)=> Promise<void>;\n\tensureFileSync\t: (path: string)=> Promise<void>;\n\treadFileSync: (path: string)=> Promise<string>;\n\treadFile\t: (path: string, callback: (err: NodeJS.ErrnoException, data: Buffer)=> void)=> void;\n\twriteFileSync\t: (path: string, data: string | NodeJS.ArrayBufferView, o?: object)=> Promise<void>;\n\tappendFile\t\t: (path: string, data: string, callback: (err: Error)=> void)=> Promise<void>;\n\n\twindow\t: (centering: boolean, x: number, y: number, w: number, h: number)=> void;\n\tisSimpleFullScreen\t: ()=> Promise<boolean>;\n\tsetSimpleFullScreen\t: (b: boolean)=> Promise<void>;\n\twin_close\t\t: ()=> void;\n\twin_setTitle\t: (title: string)=> void;\n\n\tshowMessageBox\t: (o: Electron.MessageBoxOptions)=> Promise<Electron.MessageBoxReturnValue>;\n\n\tcapturePage\t: (fn: string)=> Promise<void>;\n\tnavigate_to\t: (url: string)=> void;\n\n\topenDevTools\t: ()=> void;\n\twin_ev_devtools_opened\t: (fnc: ()=> void)=> void;\n\n\tStore\t: (o: object)=> Promise<void>;\n\tflush\t: (o: object)=> Promise<void>;\n\tStore_isEmpty\t: ()=> Promise<boolean>;\n\tStore_get\t\t: ()=> Promise<any>;\n\n\tzip\t\t: (inp: string, out: string)=> void;\n\tunzip\t: (inp: string, out: string)=> void;\n\n\t// メイン → レンダラー\n\ton: (channel: string, callback: Function) => void;\n};\n\nexport\ttype\tHINFO\t= {\n\tgetAppPath\t: string;\n\tisPackaged\t: boolean;\n\tdownloads\t: string;\n\tuserData\t: string;\n\tgetVersion\t: string;\n\tenv\t\t\t: {[name: string]: any};\n\tplatform\t: string;\n\tarch\t\t: string;\n}\n\nconst fncE = console.error;\n\nexport const\thProc\t: HPROC\t= {\n\t// console.log は【アプリ】のターミナルに出る\n\tgetInfo\t\t: ()=> ipcRenderer.invoke('getInfo').catch(fncE),\n\n\texistsSync\t: path=> ipcRenderer.invoke('existsSync', path).catch(fncE),\n\tcopySync\t: (path_from, path_to)=>\n\t\tipcRenderer.invoke('copySync', path_from, path_to).catch(fncE),\n\tremoveSync\t: path=> ipcRenderer.invoke('removeSync', path).catch(fncE),\n\tensureFileSync\t: path=>\n\t\tipcRenderer.invoke('ensureFileSync', path).catch(fncE),\n\treadFileSync\t: path=>\n\t\tipcRenderer.invoke('readFileSync', path).catch(fncE),\n\treadFile\t: (path, callback)=>\n\t\tipcRenderer.invoke('readFile', path, callback).catch(fncE),\n\twriteFileSync\t: (path, data, o?)=>\n\t\tipcRenderer.invoke('writeFileSync', path, data, o).catch(fncE),\n\tappendFile\t\t: (path, data, callback)=>\n\t\tipcRenderer.invoke('appendFile', path, data, callback).catch(fncE),\n\n\twin_close\t: ()=> ipcRenderer.invoke('win_close').catch(fncE),\n\twin_setTitle\t: title=>\n\t\tipcRenderer.invoke('win_setTitle', title).catch(fncE),\n\n\tshowMessageBox\t: o=> ipcRenderer.invoke('showMessageBox', o).catch(fncE),\n\n\tcapturePage\t: fn=>\tipcRenderer.invoke('capturePage', fn).catch(fncE),\n\tnavigate_to\t: url=> ipcRenderer.invoke('navigate_to', url).catch(fncE),\n\n\topenDevTools\t: ()=> ipcRenderer.invoke('openDevTools').catch(fncE),\n\twin_ev_devtools_opened\t: fnc=>\n\t\tipcRenderer.invoke('win_ev_devtools_opened', fnc).catch(fncE),\n\n\tStore\t: o=> ipcRenderer.invoke('Store', o).catch(fncE),\n\tflush\t: o=> ipcRenderer.invoke('flush', o).catch(fncE),\n\tStore_isEmpty\t: ()=> ipcRenderer.invoke('Store_isEmpty').catch(fncE),\n\tStore_get\t: ()=> ipcRenderer.invoke('Store_get').catch(fncE),\n\n\tzip\t\t: (inp, out)=> ipcRenderer.invoke('zip', inp, out).catch(fncE),\n\tunzip\t: (inp, out)=> ipcRenderer.invoke('unzip', inp, out).catch(fncE),\n\n\tisSimpleFullScreen\t: ()=>\n\t\tipcRenderer.invoke('isSimpleFullScreen').catch(fncE),\n\tsetSimpleFullScreen\t: b=>\n\t\tipcRenderer.invoke('setSimpleFullScreen', b).catch(fncE),\n\twindow\t: (centering, x, y, w, h)=>\n\t\tipcRenderer.invoke('window', centering, x, y, w, h).catch(fncE),\n\n\n\t// メイン → レンダラー\n\ton\t: (ch, cb)=> {switch (ch) {\n\t\tcase 'save_win_pos':\n\t\t\tipcRenderer.on(ch, (e, x, y)=> cb(e, x, y));\tbreak;\n\t\tcase 'fire':\n\t\t\tipcRenderer.on(ch, (e, KEY)=> cb(e, KEY));\tbreak;\n\t\t//case 'call':\t// 実験・保留コード。セキュリティ懸念\n\t\t//\tipcRenderer.on(ch, (e, fn, label)=> cb(e, fn, label));\tbreak;\n\t}},\n\n};\ncontextBridge.exposeInMainWorld('to_app', hProc);\n"],"names":["ipcRenderer","contextBridge"],"mappings":"mIA0DA,KAAM,GAAO,QAAQ,MAER,EAAgB,CAE5B,QAAW,IAAKA,cAAY,OAAO,WAAW,MAAM,GAEpD,WAAa,GAAOA,cAAY,OAAO,aAAc,GAAM,MAAM,GACjE,SAAW,CAAC,EAAW,IACtBA,cAAY,OAAO,WAAY,EAAW,GAAS,MAAM,GAC1D,WAAa,GAAOA,cAAY,OAAO,aAAc,GAAM,MAAM,GACjE,eAAiB,GAChBA,cAAY,OAAO,iBAAkB,GAAM,MAAM,GAClD,aAAe,GACdA,cAAY,OAAO,eAAgB,GAAM,MAAM,GAChD,SAAW,CAAC,EAAM,IACjBA,cAAY,OAAO,WAAY,EAAM,GAAU,MAAM,GACtD,cAAgB,CAAC,EAAM,EAAM,IAC5BA,cAAY,OAAO,gBAAiB,EAAM,EAAM,GAAG,MAAM,GAC1D,WAAc,CAAC,EAAM,EAAM,IAC1BA,cAAY,OAAO,aAAc,EAAM,EAAM,GAAU,MAAM,GAE9D,UAAY,IAAKA,cAAY,OAAO,aAAa,MAAM,GACvD,aAAe,GACdA,cAAY,OAAO,eAAgB,GAAO,MAAM,GAEjD,eAAiB,GAAIA,cAAY,OAAO,iBAAkB,GAAG,MAAM,GAEnE,YAAc,GAAKA,cAAY,OAAO,cAAe,GAAI,MAAM,GAC/D,YAAc,GAAMA,cAAY,OAAO,cAAe,GAAK,MAAM,GAEjE,aAAe,IAAKA,cAAY,OAAO,gBAAgB,MAAM,GAC7D,uBAAyB,GACxBA,cAAY,OAAO,yBAA0B,GAAK,MAAM,GAEzD,MAAQ,GAAIA,cAAY,OAAO,QAAS,GAAG,MAAM,GACjD,MAAQ,GAAIA,cAAY,OAAO,QAAS,GAAG,MAAM,GACjD,cAAgB,IAAKA,cAAY,OAAO,iBAAiB,MAAM,GAC/D,UAAY,IAAKA,cAAY,OAAO,aAAa,MAAM,GAEvD,IAAO,CAAC,EAAK,IAAOA,cAAY,OAAO,MAAO,EAAK,GAAK,MAAM,GAC9D,MAAQ,CAAC,EAAK,IAAOA,cAAY,OAAO,QAAS,EAAK,GAAK,MAAM,GAEjE,mBAAqB,IACpBA,cAAY,OAAO,sBAAsB,MAAM,GAChD,oBAAsB,GACrBA,cAAY,OAAO,sBAAuB,GAAG,MAAM,GACpD,OAAS,CAAC,EAAW,EAAG,EAAG,EAAG,IAC7BA,cAAY,OAAO,SAAU,EAAW,EAAG,EAAG,EAAG,GAAG,MAAM,GAI3D,GAAK,CAAC,EAAI,IAAM,QAAS,OACnB,6BACQ,GAAG,EAAI,CAAC,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,cACpC,qBACQ,GAAG,EAAI,CAAC,EAAG,IAAO,EAAG,EAAG,aAMvCC,gBAAc,kBAAkB,SAAU"}