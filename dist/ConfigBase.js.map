{"version":3,"file":"ConfigBase.js","names":["sys: T_SysRoots","#existsBreakline","#existsBreakpage","hFn2Ext: {[fn: string]: string}","#REG_PATH","aRet :T_Exts[]","o :T_Exts","o: T_Exts"],"sources":["../src/sn/ConfigBase.ts"],"sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2022-2025 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport {int} from './CmnLib';\n\nexport const enum SEARCH_PATH_ARG_EXT {\t// #searchPath 使用時、第二引数用\n\tDEFAULT\t= '',\n\tSP_GSM\t= 'png|jpg|jpeg|json|svg|webp|mp4|webm',\n\tSCRIPT\t= 'sn|ssn',\n\tFONT\t= 'woff2|woff|otf|ttf',\n\tSOUND\t= 'mp3|m4a|ogg|aac|flac|wav',\n\tHTML\t= 'htm|html',\n\tCSS\t\t=\t'css',\n\tSN\t\t=\t'sn',\n\n\tTST_PNGPNG_\t= 'png|png_',\n\tTST_HH\t\t= 'hh',\n\tTST_EEE\t\t= 'eee',\n\tTST_GGG\t\t= 'ggg',\n\tTST_PNGXML\t= 'png|xml',\n}\n\n\nexport type T_CFG_RAW = {\n\tbook\t: {\n\t\ttitle\t\t: string,\t// 作品タイトル\n\t\tcreator\t\t: string,\t// 著作者\n\t\tcre_url\t\t: string,\t// 連絡先URL\n\t\tpublisher\t: string,\t// 出版者\n\t\tpub_url\t\t: string,\t// 出版社URL\n\t\tdetail\t\t: string,\t// 内容紹介\n\t\tversion\t\t: string,\t// version\n\t},\n\tsave_ns?\t: string,\n\twindow?\t: {\t\t// アプリケーションウインドウサイズ\n\t\twidth\t: number,\n\t\theight\t: number,\n\t},\n\tlog?\t: {max_len: number},\t// プレイヤーが読んだ文章を読み返せる履歴の長さ\n\tinit\t: {\n\t\tbg_color\t\t\t: string | number,\t// 背景色\n\t\ttagch_msecwait\t\t: number,\t// 通常文字表示待ち時間（未読／既読）\n\t\tauto_msecpagewait\t: number,\t// 自動文字表示、行待ち時間（未読／既読）\n\t\tescape\t\t\t\t: string,\t// エスケープ文字\n\t},\n\tdebug\t: {\t// デバッグ情報\n\t\tdevtool\t\t: boolean,\n\t\tdumpHtm\t\t: boolean,\t// テキストレイヤ：HTML部分をファイル出力するか\n\t\ttoken\t\t: boolean,\n\t\ttag\t\t\t: boolean,\n\t\tputCh\t\t: boolean,\n\t\tdebugLog\t: boolean,\n\t\tbaseTx\t\t: boolean,\n\t\tmasume\t\t: boolean,\t// テキストレイヤ：ガイドマス目を表示するか\n\t\tvariable\t: boolean,\n\t},\n\tcode\t: {[fold_nm: string]: boolean,},\t// 暗号化しないフォルダ\n\tdebuger_token\t: string,\t// デバッガとの接続トークン\n}\nexport type T_CFG = T_CFG_RAW & {\n\tsave_ns\t\t: string,\n\twindow\t: {\t\t// アプリケーションウインドウサイズ\n\t\twidth\t: number,\n\t\theight\t: number,\n\t},\n\tlog\t\t: {max_len: number},\t// プレイヤーが読んだ文章を読み返せる履歴の長さ\n}\n\nexport function creCFG(): T_CFG {return {\n\tsave_ns\t\t: '',\t\t// 扱うセーブデータを一意に識別するキーワード文字列\n\twindow\t: {\t\t// アプリケーションウインドウサイズ\n\t\twidth\t: 300,\n\t\theight\t: 300,\n\t},\n\tbook\t: {\t\t// プロジェクトの詳細情報です\n\t\ttitle\t\t: '',\t//作品タイトル\n\t\tcreator\t\t: '',\t//著作者。同人ならペンネーム\n\t\tcre_url\t\t: '',\t//著作者URL。ツイッターやメール、サイトなど\n\t\tpublisher\t: '',\t//出版社。同人ならサークル名\n\t\tpub_url\t\t: '',\t//出版社URL。無ければ省略します\n\t\tdetail\t\t: '',\t// 内容紹介。端的に記入\n\t\tversion\t\t: '1.0',\n\t},\n\tlog\t\t: {max_len: 64},\t// プレイヤーが読んだ文章を読み返せる履歴のページ数\n\tinit\t: {\n\t\tbg_color\t\t\t: '#000000',\t// 背景色\n\t\ttagch_msecwait\t\t: 10,\t// 通常文字表示待ち時間（未読／既読）\n\t\tauto_msecpagewait\t: 3500,\t// 自動文字表示、行クリック待ち時間（未読／既読）\n\t\tescape\t\t\t\t: '',\t// エスケープ文字\n\t},\n\tdebug\t: {\n\t\tdevtool\t\t: false,\n\t\tdumpHtm\t\t: false,\n\t\ttoken\t\t: false,\n\t\ttag\t\t\t: false,\n\t\tputCh\t\t: false,\n\t\tdebugLog\t: false,\n\t\tbaseTx\t\t: false,\n\t\tmasume\t\t: false,\t// テキストレイヤ：ガイドマス目を表示するか\n\t\tvariable\t: false,\n\t},\n\tcode\t: {},\t// 暗号化しないフォルダ\n\tdebuger_token\t: '',\t\t// デバッガとの接続トークン\n}}\n\n\nexport type T_Exts = {\n\t':cnt'?\t\t\t: number;\n} & {\n\t[ext: string]\t: string;\t// pp\n};\nexport type T_Fn2Path = { [fn: string]: T_Exts; };\n\nexport type T_SEARCHPATH = (fn: string, extptn?: SEARCH_PATH_ARG_EXT)=> string;\nexport type T_Config = {\n\toCfg\t\t: T_CFG;\n\theadNs\t\t: string;\n\tsearchPath\t: T_SEARCHPATH;\n\tmatchPath\t: (fnptn: string, extptn?: SEARCH_PATH_ARG_EXT)=> readonly T_Exts[];\n\taddPath\t\t: (fn: string, h_exts: T_Exts)=> void;\n}\n\nexport type T_SysRoots = {\n\tdec(ext: string, tx: string): Promise<string>;\n\tdecAB(ab: ArrayBuffer): Promise<HTMLImageElement | HTMLVideoElement | ArrayBuffer>;\n\n\targ: T_HSysBaseArg;\n\tfetch(url: string): Promise<Response>;\t// ハッシュ値作成ロード用\n\thash(str: string): string;\n}\nexport type T_HSysBaseArg = {\n\tcur\t\t: string;\n\tcrypto\t: boolean;\n\tdip?\t: string;\n}\n\n\nexport class ConfigBase implements T_Config {\n\toCfg\t= creCFG();\n\n\t\t\t\tuserFnTail\t\t= '';\t// 4tst public\n\tprotected\thPathFn2Exts\t: T_Fn2Path\t= {};\n\n\tprotected\tconstructor(readonly sys: T_SysRoots) {}\n\n\t//\tMain.generate() -> Config.generate() -> Config.load() ->\n\tprotected\tasync load(oCfg: T_CFG_RAW) {\n\t\t// this.oCfg = {...this.oCfg, ...oCfg};\t// 一階層目でコピーしてしまう\n\t\tthis.oCfg.save_ns = oCfg.save_ns ?? this.oCfg.save_ns;\n\n\t\toCfg.window ??= {width: 300, height: 300};\n\t\tthis.oCfg.window.width = oCfg.window.width;\n\t\tthis.oCfg.window.height = oCfg.window.height;\n\n\t\tthis.oCfg.book = {...this.oCfg.book, ...oCfg.book};\n\n\t\tthis.oCfg.log.max_len = oCfg.log?.max_len ?? this.oCfg.log.max_len;\n\n\t\tthis.oCfg.init = {...this.oCfg.init, ...oCfg.init};\n\n\t\tthis.oCfg.debug = {...this.oCfg.debug, ...oCfg.debug};\n\n\t\tthis.oCfg.debuger_token = oCfg.debuger_token;\n\n\n\t\t// path.json ロード\n\t\tconst fn = this.sys.arg.cur +'path.json';\n\t\tconst res = await this.sys.fetch(fn);\n\t\tif (! res.ok) throw Error(res.statusText);\n\n\t\tconst src = await res.text();\n\t\tconst oJs = <T_Fn2Path>JSON.parse(await this.sys.dec(fn, src));\n\t\tfor (const [nm, v] of Object.entries(oJs)) {\n\t\t\tconst h = this.hPathFn2Exts[nm] = v;\n\t\t\tfor (const [ext, w] of Object.entries(h)) {\n\t\t\t\tif (ext !== ':cnt') h[ext] = this.sys.arg.cur + <string>w;\n\t\t\t}\n\t\t}\n\n\t\tthis.#existsBreakline = this.matchPath('^breakline$', SEARCH_PATH_ARG_EXT.SP_GSM).length > 0;\n\t\tthis.#existsBreakpage = this.matchPath('^breakpage$', SEARCH_PATH_ARG_EXT.SP_GSM).length > 0;\n\n\t\t// ファイル改竄チェック\n\t\tconst hFn2Ext: {[fn: string]: string}\t= {};\n\t\tif (this.sys.arg.crypto)\n\t\tfor (const [fn0, hExts] of Object.entries(this.hPathFn2Exts)) {\n\t\t\tfor (const [ext, pp] of Object.entries(hExts)) {\n\t\t\t\tif (! ext.startsWith(':')) {hFn2Ext[fn0] = ext; continue}\n\t\t\t\tif (! ext.endsWith(':id')) continue;\n\n\t\t\t\tconst hp = (<string>pp).slice((<string>pp).lastIndexOf('/') +1);\n\t\t\t\tconst fn = hExts[ext.slice(0, -10)] ?? '';\n\t\t\t\tconst res = await this.sys.fetch(fn);\n\t\t\t\tconst src = await res.text();\n\t\t\t\tconst hf = this.sys.hash(src);\n\t\t\t\tif (hp !== hf) throw `ファイル改竄エラーです fn:${fn}`;\n\t\t\t}\n\t\t}\n\t\t// 出力・副作用なしなのでコメントアウト\n\t\t// else for (const [fn0, hExts] of Object.entries(this.hPathFn2Exts)) {\n\t\t// \tfor (const ext of Object.keys(hExts)) {\n\t\t// \t\tif (! ext.startsWith(':')) hFn2Ext[fn0] = ext;\n\t\t// \t}\n\t\t// }\n\t}\n\t#existsBreakline = false;\n\tget existsBreakline(): boolean {return this.#existsBreakline}\n\t#existsBreakpage = false;\n\tget existsBreakpage(): boolean {return this.#existsBreakpage}\n\n\tget headNs() {return `skynovel.${this.oCfg.save_ns} - `}\n\n\treadonly\t#REG_PATH = /([^/\\s]+)\\.([^\\d]\\w+)/;\n\t\t// 4 match 498 step(~1ms)  https://regex101.com/r/tpVgmI/1\n\tsearchPath(fn: string, extptn: SEARCH_PATH_ARG_EXT = SEARCH_PATH_ARG_EXT.DEFAULT): string {\n\t\tif (! fn) throw '[searchPath] fnが空です';\n\t\tif (fn.startsWith('http://')) return fn;\n\n\t\tconst a = fn.match(this.#REG_PATH);\n\t\tlet fn0 = a ?a[1] ?? '' :fn;\n\t\tconst ext = a ?a[2] :'';\n\t\tif (this.userFnTail) {\n\t\t\tconst utn = fn0 +'@@'+ this.userFnTail;\n\t\t\tif (utn in this.hPathFn2Exts) {\n\t\t\t\tif (extptn === SEARCH_PATH_ARG_EXT.DEFAULT) fn0 = utn;\n\t\t\t\telse for (const e3 of Object.keys(this.hPathFn2Exts[utn] ?? {})) {\n\t\t\t\t\tif (`|${extptn}|`.includes(`|${e3}|`)) {fn0 = utn; break}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst h_exts = this.hPathFn2Exts[fn0];\n\t\tif (! h_exts) throw `サーチパスに存在しないファイル【${fn}】です`;\n\n\t\tif (! ext) {\t// fnに拡張子が含まれていない\n\t\t\t//\textのどれかでサーチ（ファイル名サーチ→拡張子群にextが含まれるか）\n\t\t\tconst hcnt = int(h_exts[':cnt']);\n\t\t\tif (extptn === SEARCH_PATH_ARG_EXT.DEFAULT) {\n\t\t\t\tif (hcnt > 1) throw `指定ファイル【${fn}】が複数マッチします。サーチ対象拡張子群【${extptn}】で絞り込むか、ファイル名を個別にして下さい。`;\n\n\t\t\t\treturn fn;\n\t\t\t}\n\n\t\t\tconst search_exts = `|${extptn}|`;\n\t\t\tif (hcnt > 1) {\n\t\t\t\tlet cnt = 0;\n\t\t\t\tfor (const e2 of Object.keys(h_exts)) {\n\t\t\t\t\tif (! search_exts.includes(`|${e2}|`)) continue;\n\t\t\t\t\tif (++cnt > 1) throw `指定ファイル【${fn}】が複数マッチします。サーチ対象拡張子群【${extptn}】で絞り込むか、ファイル名を個別にして下さい。`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [ext, pp] of Object.entries(h_exts)) {\n\t\t\t\tif (search_exts.includes(`|${ext}|`)) return <string>pp;\n\t\t\t}\n\t\t\tthrow `サーチ対象拡張子群【${extptn}】にマッチするファイルがサーチパスに存在しません。探索ファイル名=【${fn}】`;\n\t\t}\n\n\t\t// fnに拡張子xが含まれている\n\t\t//\tファイル名サーチ→拡張子群にxが含まれるか\n\t\tif (extptn !== SEARCH_PATH_ARG_EXT.DEFAULT && ! `|${extptn}|`.includes(`|${ext}|`)) {\n\t\t\tthrow `指定ファイルの拡張子【${ext}】は、サーチ対象拡張子群【${extptn}】にマッチしません。探索ファイル名=【${fn}】`;\n\t\t}\n\n\t\tconst ret = h_exts[ext];\n\t\tif (! ret) throw `サーチパスに存在しない拡張子【${ext}】です。探索ファイル名=【${fn}】、サーチ対象拡張子群【${extptn}】`;\n\n\t\treturn ret;\n\t}\n\n\tmatchPath(fnptn: string, extptn: SEARCH_PATH_ARG_EXT = SEARCH_PATH_ARG_EXT.DEFAULT): readonly T_Exts[] {\n\t\tconst aRet :T_Exts[] = [];\n\t\tconst regPtn = new RegExp(fnptn);\n\t\tconst regExt = new RegExp(extptn);\n\t\tfor (const [fn, h_exts] of Object.entries(this.hPathFn2Exts)) {\n\t\t\tif (fn.search(regPtn) === -1) continue;\n\t\t\tif (extptn === SEARCH_PATH_ARG_EXT.DEFAULT) {aRet.push(h_exts); continue}\n\n\t\t\tconst o :T_Exts = {};\n\t\t\tlet isa = false;\n\t\t\tfor (const ext of Object.keys(h_exts)) {\n\t\t\t\tif (ext.search(regExt) === -1) continue;\n\n\t\t\t\to[ext] = fn;\n\t\t\t\tisa = true;\n\t\t\t}\n\t\t\tif (isa) aRet.push(o);\n\t\t}\n\t\treturn aRet;\n\t}\n\n\taddPath(fn: string, h_exts: T_Exts) {\n\t\tconst o: T_Exts = {};\n\t\tfor (const [ext, v] of Object.entries(h_exts)) {\n\t\t\to[ext] = (ext.startsWith(':') ?'' :this.sys.arg.cur) + String(v);\n\t\t}\n\t\tthis.hPathFn2Exts[fn] = o;\n\t}\n\n}\n"],"mappings":"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"}