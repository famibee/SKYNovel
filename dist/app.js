var Kg = (r, t, e) => {
  if (!t.has(r))
    throw TypeError("Cannot " + e);
};
var f = (r, t, e) => (Kg(r, t, "read from private field"), e ? e.call(r) : t.get(r)), I = (r, t, e) => {
  if (t.has(r))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(r) : t.set(r, e);
}, T = (r, t, e, i) => (Kg(r, t, "write to private field"), i ? i.call(r, e) : t.set(r, e), e), sr = (r, t, e, i) => ({
  set _(n) {
    T(r, t, n, e);
  },
  get _() {
    return f(r, t, i);
  }
}), S = (r, t, e) => (Kg(r, t, "access private method"), e);
import { parse as mS, format as _S, resolve as yS } from "url";
var mp = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, tu = { exports: {} };
/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */
(function(r, t) {
  (function() {
    var e = {
      function: !0,
      object: !0
    }, i = e[typeof window] && window || this, n = t, s = r && !r.nodeType && r, a = n && s && typeof mp == "object" && mp;
    a && (a.global === a || a.window === a || a.self === a) && (i = a);
    var o = Math.pow(2, 53) - 1, u = /\bOpera/, h = Object.prototype, l = h.hasOwnProperty, c = h.toString;
    function d(C) {
      return C = String(C), C.charAt(0).toUpperCase() + C.slice(1);
    }
    function p(C, P, N) {
      var M = {
        "10.0": "10",
        "6.4": "10 Technical Preview",
        "6.3": "8.1",
        "6.2": "8",
        "6.1": "Server 2008 R2 / 7",
        "6.0": "Server 2008 / Vista",
        "5.2": "Server 2003 / XP 64-bit",
        "5.1": "XP",
        "5.01": "2000 SP1",
        "5.0": "2000",
        "4.0": "NT",
        "4.90": "ME"
      };
      return P && N && /^Win/i.test(C) && !/^Windows Phone /i.test(C) && (M = M[/[\d.]+$/.exec(C)]) && (C = "Windows " + M), C = String(C), P && N && (C = C.replace(RegExp(P, "i"), N)), C = v(
        C.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/, "$1").replace(/\/(\d)/, " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").replace(/\b(Chrome OS \w+) [\d.]+\b/, "$1").split(" on ")[0]
      ), C;
    }
    function g(C, P) {
      var N = -1, M = C ? C.length : 0;
      if (typeof M == "number" && M > -1 && M <= o)
        for (; ++N < M; )
          P(C[N], N, C);
      else
        m(C, P);
    }
    function v(C) {
      return C = w(C), /^(?:webOS|i(?:OS|P))/.test(C) ? C : d(C);
    }
    function m(C, P) {
      for (var N in C)
        l.call(C, N) && P(C[N], N, C);
    }
    function _(C) {
      return C == null ? d(C) : c.call(C).slice(8, -1);
    }
    function y(C, P) {
      var N = C != null ? typeof C[P] : "number";
      return !/^(?:boolean|number|string|undefined)$/.test(N) && (N == "object" ? !!C[P] : !0);
    }
    function b(C) {
      return String(C).replace(/([ -])(?!$)/g, "$1?");
    }
    function x(C, P) {
      var N = null;
      return g(C, function(M, A) {
        N = P(N, M, A, C);
      }), N;
    }
    function w(C) {
      return String(C).replace(/^ +| +$/g, "");
    }
    function E(C) {
      var P = i, N = C && typeof C == "object" && _(C) != "String";
      N && (P = C, C = null);
      var M = P.navigator || {}, A = M.userAgent || "";
      C || (C = A);
      var k = N ? !!M.likeChrome : /\bChrome\b/.test(C) && !/internal|\n/i.test(c.toString()), H = "Object", L = N ? H : "ScriptBridgingProxyObject", U = N ? H : "Environment", V = N && P.java ? "JavaPackage" : _(P.java), K = N ? H : "RuntimeObject", G = /\bJava/.test(V) && P.java, B = G && _(P.environment) == U, W = G ? "a" : "\u03B1", Q = G ? "b" : "\u03B2", ut = P.document || {}, it = P.operamini || P.opera, ht = u.test(ht = N && it ? it["[[Class]]"] : _(it)) ? ht : it = null, F, vt = C, nt = [], ft = null, rt = C == A, j = rt && it && typeof it.version == "function" && it.version(), xt, Z = Gt([
        { label: "EdgeHTML", pattern: "Edge" },
        "Trident",
        { label: "WebKit", pattern: "AppleWebKit" },
        "iCab",
        "Presto",
        "NetFront",
        "Tasman",
        "KHTML",
        "Gecko"
      ]), X = ie([
        "Adobe AIR",
        "Arora",
        "Avant Browser",
        "Breach",
        "Camino",
        "Electron",
        "Epiphany",
        "Fennec",
        "Flock",
        "Galeon",
        "GreenBrowser",
        "iCab",
        "Iceweasel",
        "K-Meleon",
        "Konqueror",
        "Lunascape",
        "Maxthon",
        { label: "Microsoft Edge", pattern: "(?:Edge|Edg|EdgA|EdgiOS)" },
        "Midori",
        "Nook Browser",
        "PaleMoon",
        "PhantomJS",
        "Raven",
        "Rekonq",
        "RockMelt",
        { label: "Samsung Internet", pattern: "SamsungBrowser" },
        "SeaMonkey",
        { label: "Silk", pattern: "(?:Cloud9|Silk-Accelerated)" },
        "Sleipnir",
        "SlimBrowser",
        { label: "SRWare Iron", pattern: "Iron" },
        "Sunrise",
        "Swiftfox",
        "Vivaldi",
        "Waterfox",
        "WebPositive",
        { label: "Yandex Browser", pattern: "YaBrowser" },
        { label: "UC Browser", pattern: "UCBrowser" },
        "Opera Mini",
        { label: "Opera Mini", pattern: "OPiOS" },
        "Opera",
        { label: "Opera", pattern: "OPR" },
        "Chromium",
        "Chrome",
        { label: "Chrome", pattern: "(?:HeadlessChrome)" },
        { label: "Chrome Mobile", pattern: "(?:CriOS|CrMo)" },
        { label: "Firefox", pattern: "(?:Firefox|Minefield)" },
        { label: "Firefox for iOS", pattern: "FxiOS" },
        { label: "IE", pattern: "IEMobile" },
        { label: "IE", pattern: "MSIE" },
        "Safari"
      ]), et = _r([
        { label: "BlackBerry", pattern: "BB10" },
        "BlackBerry",
        { label: "Galaxy S", pattern: "GT-I9000" },
        { label: "Galaxy S2", pattern: "GT-I9100" },
        { label: "Galaxy S3", pattern: "GT-I9300" },
        { label: "Galaxy S4", pattern: "GT-I9500" },
        { label: "Galaxy S5", pattern: "SM-G900" },
        { label: "Galaxy S6", pattern: "SM-G920" },
        { label: "Galaxy S6 Edge", pattern: "SM-G925" },
        { label: "Galaxy S7", pattern: "SM-G930" },
        { label: "Galaxy S7 Edge", pattern: "SM-G935" },
        "Google TV",
        "Lumia",
        "iPad",
        "iPod",
        "iPhone",
        "Kindle",
        { label: "Kindle Fire", pattern: "(?:Cloud9|Silk-Accelerated)" },
        "Nexus",
        "Nook",
        "PlayBook",
        "PlayStation Vita",
        "PlayStation",
        "TouchPad",
        "Transformer",
        { label: "Wii U", pattern: "WiiU" },
        "Wii",
        "Xbox One",
        { label: "Xbox 360", pattern: "Xbox" },
        "Xoom"
      ]), ot = Bt({
        Apple: { iPad: 1, iPhone: 1, iPod: 1 },
        Alcatel: {},
        Archos: {},
        Amazon: { Kindle: 1, "Kindle Fire": 1 },
        Asus: { Transformer: 1 },
        "Barnes & Noble": { Nook: 1 },
        BlackBerry: { PlayBook: 1 },
        Google: { "Google TV": 1, Nexus: 1 },
        HP: { TouchPad: 1 },
        HTC: {},
        Huawei: {},
        Lenovo: {},
        LG: {},
        Microsoft: { Xbox: 1, "Xbox One": 1 },
        Motorola: { Xoom: 1 },
        Nintendo: { "Wii U": 1, Wii: 1 },
        Nokia: { Lumia: 1 },
        Oppo: {},
        Samsung: { "Galaxy S": 1, "Galaxy S2": 1, "Galaxy S3": 1, "Galaxy S4": 1 },
        Sony: { PlayStation: 1, "PlayStation Vita": 1 },
        Xiaomi: { Mi: 1, Redmi: 1 }
      }), q = Ve([
        "Windows Phone",
        "KaiOS",
        "Android",
        "CentOS",
        { label: "Chrome OS", pattern: "CrOS" },
        "Debian",
        { label: "DragonFly BSD", pattern: "DragonFly" },
        "Fedora",
        "FreeBSD",
        "Gentoo",
        "Haiku",
        "Kubuntu",
        "Linux Mint",
        "OpenBSD",
        "Red Hat",
        "SuSE",
        "Ubuntu",
        "Xubuntu",
        "Cygwin",
        "Symbian OS",
        "hpwOS",
        "webOS ",
        "webOS",
        "Tablet OS",
        "Tizen",
        "Linux",
        "Mac OS X",
        "Macintosh",
        "Mac",
        "Windows 98;",
        "Windows "
      ]);
      function Gt(oe) {
        return x(oe, function(ne, Vt) {
          return ne || RegExp("\\b" + (Vt.pattern || b(Vt)) + "\\b", "i").exec(C) && (Vt.label || Vt);
        });
      }
      function Bt(oe) {
        return x(oe, function(ne, Vt, cr) {
          return ne || (Vt[et] || Vt[/^[a-z]+(?: +[a-z]+\b)*/i.exec(et)] || RegExp("\\b" + b(cr) + "(?:\\b|\\w*\\d)", "i").exec(C)) && cr;
        });
      }
      function ie(oe) {
        return x(oe, function(ne, Vt) {
          return ne || RegExp("\\b" + (Vt.pattern || b(Vt)) + "\\b", "i").exec(C) && (Vt.label || Vt);
        });
      }
      function Ve(oe) {
        return x(oe, function(ne, Vt) {
          var cr = Vt.pattern || b(Vt);
          return !ne && (ne = RegExp("\\b" + cr + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(C)) && (ne = p(ne, cr, Vt.label || Vt)), ne;
        });
      }
      function _r(oe) {
        return x(oe, function(ne, Vt) {
          var cr = Vt.pattern || b(Vt);
          return !ne && (ne = RegExp("\\b" + cr + " *\\d+[.\\w_]*", "i").exec(C) || RegExp("\\b" + cr + " *\\w+-[\\w]*", "i").exec(C) || RegExp("\\b" + cr + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(C)) && ((ne = String(Vt.label && !RegExp(cr, "i").test(Vt.label) ? Vt.label : ne).split("/"))[1] && !/[\d.]+/.test(ne[0]) && (ne[0] += " " + ne[1]), Vt = Vt.label || Vt, ne = v(ne[0].replace(RegExp(cr, "i"), Vt).replace(RegExp("; *(?:" + Vt + "[_-])?", "i"), " ").replace(RegExp("(" + Vt + ")[-_.]?(\\w)", "i"), "$1 $2"))), ne;
        });
      }
      function Xt(oe) {
        return x(oe, function(ne, Vt) {
          return ne || (RegExp(Vt + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(C) || 0)[1] || null;
        });
      }
      function ir() {
        return this.description || "";
      }
      if (Z && (Z = [Z]), /\bAndroid\b/.test(q) && !et && (F = /\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(C)) && (et = w(F[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i, "") || null), ot && !et ? et = _r([ot]) : ot && et && (et = et.replace(RegExp("^(" + b(ot) + ")[-_.\\s]", "i"), ot + " ").replace(RegExp("^(" + b(ot) + ")[-_.]?(\\w)", "i"), ot + " $2")), (F = /\bGoogle TV\b/.exec(et)) && (et = F[0]), /\bSimulator\b/i.test(C) && (et = (et ? et + " " : "") + "Simulator"), X == "Opera Mini" && /\bOPiOS\b/.test(C) && nt.push("running in Turbo/Uncompressed mode"), X == "IE" && /\blike iPhone OS\b/.test(C) ? (F = E(C.replace(/like iPhone OS/, "")), ot = F.manufacturer, et = F.product) : /^iP/.test(et) ? (X || (X = "Safari"), q = "iOS" + ((F = / OS ([\d_]+)/i.exec(C)) ? " " + F[1].replace(/_/g, ".") : "")) : X == "Konqueror" && /^Linux\b/i.test(q) ? q = "Kubuntu" : ot && ot != "Google" && (/Chrome/.test(X) && !/\bMobile Safari\b/i.test(C) || /\bVita\b/.test(et)) || /\bAndroid\b/.test(q) && /^Chrome/.test(X) && /\bVersion\//i.test(C) ? (X = "Android Browser", q = /\bAndroid\b/.test(q) ? q : "Android") : X == "Silk" ? (/\bMobi/i.test(C) || (q = "Android", nt.unshift("desktop mode")), /Accelerated *= *true/i.test(C) && nt.unshift("accelerated")) : X == "UC Browser" && /\bUCWEB\b/.test(C) ? nt.push("speed mode") : X == "PaleMoon" && (F = /\bFirefox\/([\d.]+)\b/.exec(C)) ? nt.push("identifying as Firefox " + F[1]) : X == "Firefox" && (F = /\b(Mobile|Tablet|TV)\b/i.exec(C)) ? (q || (q = "Firefox OS"), et || (et = F[1])) : !X || (F = !/\bMinefield\b/i.test(C) && /\b(?:Firefox|Safari)\b/.exec(X)) ? (X && !et && /[\/,]|^[^(]+?\)/.test(C.slice(C.indexOf(F + "/") + 8)) && (X = null), (F = et || ot || q) && (et || ot || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(q)) && (X = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(q) ? q : F) + " Browser")) : X == "Electron" && (F = (/\bChrome\/([\d.]+)\b/.exec(C) || 0)[1]) && nt.push("Chromium " + F), j || (j = Xt([
        "(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)",
        "Version",
        b(X),
        "(?:Firefox|Minefield|NetFront)"
      ])), (F = Z == "iCab" && parseFloat(j) > 3 && "WebKit" || /\bOpera\b/.test(X) && (/\bOPR\b/.test(C) ? "Blink" : "Presto") || /\b(?:Midori|Nook|Safari)\b/i.test(C) && !/^(?:Trident|EdgeHTML)$/.test(Z) && "WebKit" || !Z && /\bMSIE\b/i.test(C) && (q == "Mac OS" ? "Tasman" : "Trident") || Z == "WebKit" && /\bPlayStation\b(?! Vita\b)/i.test(X) && "NetFront") && (Z = [F]), X == "IE" && (F = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(C) || 0)[1]) ? (X += " Mobile", q = "Windows Phone " + (/\+$/.test(F) ? F : F + ".x"), nt.unshift("desktop mode")) : /\bWPDesktop\b/i.test(C) ? (X = "IE Mobile", q = "Windows Phone 8.x", nt.unshift("desktop mode"), j || (j = (/\brv:([\d.]+)/.exec(C) || 0)[1])) : X != "IE" && Z == "Trident" && (F = /\brv:([\d.]+)/.exec(C)) && (X && nt.push("identifying as " + X + (j ? " " + j : "")), X = "IE", j = F[1]), rt) {
        if (y(P, "global"))
          if (G && (F = G.lang.System, vt = F.getProperty("os.arch"), q = q || F.getProperty("os.name") + " " + F.getProperty("os.version")), B) {
            try {
              j = P.require("ringo/engine").version.join("."), X = "RingoJS";
            } catch {
              (F = P.system) && F.global.system == P.system && (X = "Narwhal", q || (q = F[0].os || null));
            }
            X || (X = "Rhino");
          } else
            typeof P.process == "object" && !P.process.browser && (F = P.process) && (typeof F.versions == "object" && (typeof F.versions.electron == "string" ? (nt.push("Node " + F.versions.node), X = "Electron", j = F.versions.electron) : typeof F.versions.nw == "string" && (nt.push("Chromium " + j, "Node " + F.versions.node), X = "NW.js", j = F.versions.nw)), X || (X = "Node.js", vt = F.arch, q = F.platform, j = /[\d.]+/.exec(F.version), j = j ? j[0] : null));
        else
          _(F = P.runtime) == L ? (X = "Adobe AIR", q = F.flash.system.Capabilities.os) : _(F = P.phantom) == K ? (X = "PhantomJS", j = (F = F.version || null) && F.major + "." + F.minor + "." + F.patch) : typeof ut.documentMode == "number" && (F = /\bTrident\/(\d+)/i.exec(C)) ? (j = [j, ut.documentMode], (F = +F[1] + 4) != j[1] && (nt.push("IE " + j[1] + " mode"), Z && (Z[1] = ""), j[1] = F), j = X == "IE" ? String(j[1].toFixed(1)) : j[0]) : typeof ut.documentMode == "number" && /^(?:Chrome|Firefox)\b/.test(X) && (nt.push("masking as " + X + " " + j), X = "IE", j = "11.0", Z = ["Trident"], q = "Windows");
        q = q && v(q);
      }
      if (j && (F = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(j) || /(?:alpha|beta)(?: ?\d)?/i.exec(C + ";" + (rt && M.appMinorVersion)) || /\bMinefield\b/i.test(C) && "a") && (ft = /b/i.test(F) ? "beta" : "alpha", j = j.replace(RegExp(F + "\\+?$"), "") + (ft == "beta" ? Q : W) + (/\d+\+?/.exec(F) || "")), X == "Fennec" || X == "Firefox" && /\b(?:Android|Firefox OS|KaiOS)\b/.test(q))
        X = "Firefox Mobile";
      else if (X == "Maxthon" && j)
        j = j.replace(/\.[\d.]+/, ".x");
      else if (/\bXbox\b/i.test(et))
        et == "Xbox 360" && (q = null), et == "Xbox 360" && /\bIEMobile\b/.test(C) && nt.unshift("mobile mode");
      else if ((/^(?:Chrome|IE|Opera)$/.test(X) || X && !et && !/Browser|Mobi/.test(X)) && (q == "Windows CE" || /Mobi/i.test(C)))
        X += " Mobile";
      else if (X == "IE" && rt)
        try {
          P.external === null && nt.unshift("platform preview");
        } catch {
          nt.unshift("embedded");
        }
      else
        (/\bBlackBerry\b/.test(et) || /\bBB10\b/.test(C)) && (F = (RegExp(et.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(C) || 0)[1] || j) ? (F = [F, /BB10/.test(C)], q = (F[1] ? (et = null, ot = "BlackBerry") : "Device Software") + " " + F[0], j = null) : this != m && et != "Wii" && (rt && it || /Opera/.test(X) && /\b(?:MSIE|Firefox)\b/i.test(C) || X == "Firefox" && /\bOS X (?:\d+\.){2,}/.test(q) || X == "IE" && (q && !/^Win/.test(q) && j > 5.5 || /\bWindows XP\b/.test(q) && j > 8 || j == 8 && !/\bTrident\b/.test(C))) && !u.test(F = E.call(m, C.replace(u, "") + ";")) && F.name && (F = "ing as " + F.name + ((F = F.version) ? " " + F : ""), u.test(X) ? (/\bIE\b/.test(F) && q == "Mac OS" && (q = null), F = "identify" + F) : (F = "mask" + F, ht ? X = v(ht.replace(/([a-z])([A-Z])/g, "$1 $2")) : X = "Opera", /\bIE\b/.test(F) && (q = null), rt || (j = null)), Z = ["Presto"], nt.push(F));
      (F = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(C) || 0)[1]) && (F = [parseFloat(F.replace(/\.(\d)$/, ".0$1")), F], X == "Safari" && F[1].slice(-1) == "+" ? (X = "WebKit Nightly", ft = "alpha", j = F[1].slice(0, -1)) : (j == F[1] || j == (F[2] = (/\bSafari\/([\d.]+\+?)/i.exec(C) || 0)[1])) && (j = null), F[1] = (/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(C) || 0)[1], F[0] == 537.36 && F[2] == 537.36 && parseFloat(F[1]) >= 28 && Z == "WebKit" && (Z = ["Blink"]), !rt || !k && !F[1] ? (Z && (Z[1] = "like Safari"), F = (F = F[0], F < 400 ? 1 : F < 500 ? 2 : F < 526 ? 3 : F < 533 ? 4 : F < 534 ? "4+" : F < 535 ? 5 : F < 537 ? 6 : F < 538 ? 7 : F < 601 ? 8 : F < 602 ? 9 : F < 604 ? 10 : F < 606 ? 11 : F < 608 ? 12 : "12")) : (Z && (Z[1] = "like Chrome"), F = F[1] || (F = F[0], F < 530 ? 1 : F < 532 ? 2 : F < 532.05 ? 3 : F < 533 ? 4 : F < 534.03 ? 5 : F < 534.07 ? 6 : F < 534.1 ? 7 : F < 534.13 ? 8 : F < 534.16 ? 9 : F < 534.24 ? 10 : F < 534.3 ? 11 : F < 535.01 ? 12 : F < 535.02 ? "13+" : F < 535.07 ? 15 : F < 535.11 ? 16 : F < 535.19 ? 17 : F < 536.05 ? 18 : F < 536.1 ? 19 : F < 537.01 ? 20 : F < 537.11 ? "21+" : F < 537.13 ? 23 : F < 537.18 ? 24 : F < 537.24 ? 25 : F < 537.36 ? 26 : Z != "Blink" ? "27" : "28")), Z && (Z[1] += " " + (F += typeof F == "number" ? ".x" : /[.+]/.test(F) ? "" : "+")), X == "Safari" && (!j || parseInt(j) > 45) ? j = F : X == "Chrome" && /\bHeadlessChrome/i.test(C) && nt.unshift("headless")), X == "Opera" && (F = /\bzbov|zvav$/.exec(q)) ? (X += " ", nt.unshift("desktop mode"), F == "zvav" ? (X += "Mini", j = null) : X += "Mobile", q = q.replace(RegExp(" *" + F + "$"), "")) : X == "Safari" && /\bChrome\b/.exec(Z && Z[1]) ? (nt.unshift("desktop mode"), X = "Chrome Mobile", j = null, /\bOS X\b/.test(q) ? (ot = "Apple", q = "iOS 4.3+") : q = null) : /\bSRWare Iron\b/.test(X) && !j && (j = Xt("Chrome")), j && j.indexOf(F = /[\d.]+$/.exec(q)) == 0 && C.indexOf("/" + F + "-") > -1 && (q = w(q.replace(F, ""))), q && q.indexOf(X) != -1 && !RegExp(X + " OS").test(q) && (q = q.replace(RegExp(" *" + b(X) + " *"), "")), Z && !/\b(?:Avant|Nook)\b/.test(X) && (/Browser|Lunascape|Maxthon/.test(X) || X != "Safari" && /^iOS/.test(q) && /\bSafari\b/.test(Z[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(X) && Z[1]) && (F = Z[Z.length - 1]) && nt.push(F), nt.length && (nt = ["(" + nt.join("; ") + ")"]), ot && et && et.indexOf(ot) < 0 && nt.push("on " + ot), et && nt.push((/^on /.test(nt[nt.length - 1]) ? "" : "on ") + et), q && (F = / ([\d.+]+)$/.exec(q), xt = F && q.charAt(q.length - F[0].length - 1) == "/", q = {
        architecture: 32,
        family: F && !xt ? q.replace(F[0], "") : q,
        version: F ? F[1] : null,
        toString: function() {
          var oe = this.version;
          return this.family + (oe && !xt ? " " + oe : "") + (this.architecture == 64 ? " 64-bit" : "");
        }
      }), (F = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(vt)) && !/\bi686\b/i.test(vt) ? (q && (q.architecture = 64, q.family = q.family.replace(RegExp(" *" + F), "")), X && (/\bWOW64\b/i.test(C) || rt && /\w(?:86|32)$/.test(M.cpuClass || M.platform) && !/\bWin64; x64\b/i.test(C)) && nt.unshift("32-bit")) : q && /^OS X/.test(q.family) && X == "Chrome" && parseFloat(j) >= 39 && (q.architecture = 64), C || (C = null);
      var _e = {};
      return _e.description = C, _e.layout = Z && Z[0], _e.manufacturer = ot, _e.name = X, _e.prerelease = ft, _e.product = et, _e.ua = C, _e.version = X && j, _e.os = q || {
        architecture: null,
        family: null,
        version: null,
        toString: function() {
          return "null";
        }
      }, _e.parse = E, _e.toString = ir, _e.version && nt.unshift(j), _e.name && nt.unshift(X), q && X && !(q == String(q).split(" ")[0] && (q == X.split(" ")[0] || et)) && nt.push(et ? "(" + q + ")" : "on " + q), nt.length && (_e.description = nt.join(" ")), _e;
    }
    var R = E();
    n && s ? m(R, function(C, P) {
      n[P] = C;
    }) : i.platform = R;
  }).call(mp);
})(tu, tu.exports);
const vT = tu.exports;
function jt(r) {
  return parseInt(String(r), 10);
}
function vi(r) {
  const t = parseInt(String(r), 10);
  return t < 0 ? -t : t;
}
"toInt" in String.prototype || (String.prototype.toInt = function() {
  return jt(this);
});
"toUint" in String.prototype || (String.prototype.toUint = function() {
  const r = jt(this);
  return r < 0 ? -r : r;
});
function Mc(r = "/", t = " ", e = ":", i = "") {
  const n = new Date();
  return n.getFullYear() + r + String(100 + n.getMonth() + 1).slice(1, 3) + r + String(100 + n.getDate()).slice(1, 3) + t + String(100 + n.getHours()).slice(1, 3) + e + String(100 + n.getMinutes()).slice(1, 3) + (i === "" ? "" : i + String(n.getMilliseconds()));
}
const gT = {
  alpha: 0,
  height: 0,
  rotation: 0,
  scale_x: 0,
  scale_y: 0,
  pivot_x: 0,
  pivot_y: 0,
  width: 0,
  x: 0,
  y: 0
};
function mT(r, t) {
  const e = {};
  for (const i in gT) {
    if (!(i in r))
      continue;
    const n = String(r[i]), s = (n.charAt(0) === "=" ? n.slice(1) : n).split(","), a = e[i] = parseFloat(s[0]);
    s.length > 1 && (e[i] += Math.round(Math.random() * (parseFloat(s[1]) - a + 1))), n.charAt(0) === "=" && (e[i] += parseFloat(t[i]));
  }
  return e;
}
const _T = "/* SKYNovel */";
function bS() {
  const r = document.getElementsByTagName("head")[0], t = r.children.length;
  for (let e = t - 1; e >= 0; --e) {
    const i = r.children[e];
    i instanceof HTMLStyleElement && i.innerText.slice(0, 14) === _T && r.removeChild(i);
  }
}
function Wu(r) {
  const t = document.createElement("style");
  t.innerHTML = _T + r, document.getElementsByTagName("head")[0].appendChild(t);
}
function tt(r, t, e) {
  const i = r[t];
  if (!(t in r)) {
    if (isNaN(e))
      throw `[${r[":\u30BF\u30B0\u540D"]}]\u5C5E\u6027 ${t} \u306F\u5FC5\u9808\u3067\u3059`;
    return r[t] = e, e;
  }
  const n = String(i).slice(0, 2) === "0x" ? parseInt(i) : parseFloat(i);
  if (isNaN(n))
    throw `[${r[":\u30BF\u30B0\u540D"]}]\u5C5E\u6027 ${t} \u306E\u5024\u3010${i}\u3011\u304C\u6570\u5024\u3067\u306F\u3042\u308A\u307E\u305B\u3093`;
  return r[t] = n;
}
function pt(r, t, e) {
  if (!(t in r))
    return r[t] = e;
  const i = r[t];
  if (i === null)
    return !1;
  const n = String(i);
  return r[t] = n === "false" ? !1 : Boolean(n);
}
function Cb(r) {
  if (r.charAt(0) === "#")
    return parseInt(r.slice(1), 16);
  const t = Number(r);
  if (!isNaN(t))
    return t;
  if (r === "black")
    return 0;
  Y.cc4ColorName.fillStyle = r;
  const e = Y.cc4ColorName.fillStyle;
  if (e === "#000000")
    throw `\u8272\u540D\u524D ${r} \u304C\u7570\u5E38\u3067\u3059`;
  return parseInt(e.slice(1), 16);
}
function yT(r, t, e) {
  const i = r[t];
  return i ? r[t] = Cb(String(i)) : r[t] = e;
}
const xS = /JSON at position (\d+)$/;
function _p(r, t = "", e = "") {
  var n;
  const i = ((n = e.match(xS)) != null ? n : ["", ""])[1];
  return `[${r[":\u30BF\u30B0\u540D"]}] ${t} \u5C5E\u6027\u306E\u89E3\u6790\u30A8\u30E9\u30FC : ${e}
${r[t]}${i ? `
${"^".padStart(Number(i))}` : ""}`;
}
const ES = /^[^\/\.]+$|[^\/]+(?=\.)/;
function vc(r) {
  var t;
  return ((t = r.match(ES)) != null ? t : [""])[0];
}
const wS = /\.([^\.]+)$/;
function qm(r) {
  var t;
  return ((t = r.match(wS)) != null ? t : ["", ""])[1];
}
class Y {
}
Y.stageW = 0;
Y.stageH = 0;
Y.debugLog = !1;
Y.isSafari = tu.exports.name === "Safari";
Y.isFirefox = tu.exports.name === "Firefox";
var cT, fT;
Y.isMac = new RegExp("OS X").test((fT = (cT = tu.exports.os) == null ? void 0 : cT.family) != null ? fT : "");
var dT, pT;
Y.isMobile = !new RegExp("(Windows|OS X)").test((pT = (dT = tu.exports.os) == null ? void 0 : dT.family) != null ? pT : "");
Y.hDip = {};
Y.isDbg = !1;
Y.isPackaged = !1;
Y.isDarkMode = !1;
function TS(r) {
  var t = this.constructor;
  return this.then(
    function(e) {
      return t.resolve(r()).then(function() {
        return e;
      });
    },
    function(e) {
      return t.resolve(r()).then(function() {
        return t.reject(e);
      });
    }
  );
}
function CS(r) {
  var t = this;
  return new t(function(e, i) {
    if (!(r && typeof r.length < "u"))
      return i(
        new TypeError(
          typeof r + " " + r + " is not iterable(cannot read property Symbol(Symbol.iterator))"
        )
      );
    var n = Array.prototype.slice.call(r);
    if (n.length === 0)
      return e([]);
    var s = n.length;
    function a(u, h) {
      if (h && (typeof h == "object" || typeof h == "function")) {
        var l = h.then;
        if (typeof l == "function") {
          l.call(
            h,
            function(c) {
              a(u, c);
            },
            function(c) {
              n[u] = { status: "rejected", reason: c }, --s === 0 && e(n);
            }
          );
          return;
        }
      }
      n[u] = { status: "fulfilled", value: h }, --s === 0 && e(n);
    }
    for (var o = 0; o < n.length; o++)
      a(o, n[o]);
  });
}
var IS = setTimeout;
function bT(r) {
  return Boolean(r && typeof r.length < "u");
}
function RS() {
}
function SS(r, t) {
  return function() {
    r.apply(t, arguments);
  };
}
function je(r) {
  if (!(this instanceof je))
    throw new TypeError("Promises must be constructed via new");
  if (typeof r != "function")
    throw new TypeError("not a function");
  this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], ET(r, this);
}
function xT(r, t) {
  for (; r._state === 3; )
    r = r._value;
  if (r._state === 0) {
    r._deferreds.push(t);
    return;
  }
  r._handled = !0, je._immediateFn(function() {
    var e = r._state === 1 ? t.onFulfilled : t.onRejected;
    if (e === null) {
      (r._state === 1 ? Zm : kc)(t.promise, r._value);
      return;
    }
    var i;
    try {
      i = e(r._value);
    } catch (n) {
      kc(t.promise, n);
      return;
    }
    Zm(t.promise, i);
  });
}
function Zm(r, t) {
  try {
    if (t === r)
      throw new TypeError("A promise cannot be resolved with itself.");
    if (t && (typeof t == "object" || typeof t == "function")) {
      var e = t.then;
      if (t instanceof je) {
        r._state = 3, r._value = t, Jm(r);
        return;
      } else if (typeof e == "function") {
        ET(SS(e, t), r);
        return;
      }
    }
    r._state = 1, r._value = t, Jm(r);
  } catch (i) {
    kc(r, i);
  }
}
function kc(r, t) {
  r._state = 2, r._value = t, Jm(r);
}
function Jm(r) {
  r._state === 2 && r._deferreds.length === 0 && je._immediateFn(function() {
    r._handled || je._unhandledRejectionFn(r._value);
  });
  for (var t = 0, e = r._deferreds.length; t < e; t++)
    xT(r, r._deferreds[t]);
  r._deferreds = null;
}
function PS(r, t, e) {
  this.onFulfilled = typeof r == "function" ? r : null, this.onRejected = typeof t == "function" ? t : null, this.promise = e;
}
function ET(r, t) {
  var e = !1;
  try {
    r(
      function(i) {
        e || (e = !0, Zm(t, i));
      },
      function(i) {
        e || (e = !0, kc(t, i));
      }
    );
  } catch (i) {
    if (e)
      return;
    e = !0, kc(t, i);
  }
}
je.prototype.catch = function(r) {
  return this.then(null, r);
};
je.prototype.then = function(r, t) {
  var e = new this.constructor(RS);
  return xT(this, new PS(r, t, e)), e;
};
je.prototype.finally = TS;
je.all = function(r) {
  return new je(function(t, e) {
    if (!bT(r))
      return e(new TypeError("Promise.all accepts an array"));
    var i = Array.prototype.slice.call(r);
    if (i.length === 0)
      return t([]);
    var n = i.length;
    function s(o, u) {
      try {
        if (u && (typeof u == "object" || typeof u == "function")) {
          var h = u.then;
          if (typeof h == "function") {
            h.call(
              u,
              function(l) {
                s(o, l);
              },
              e
            );
            return;
          }
        }
        i[o] = u, --n === 0 && t(i);
      } catch (l) {
        e(l);
      }
    }
    for (var a = 0; a < i.length; a++)
      s(a, i[a]);
  });
};
je.allSettled = CS;
je.resolve = function(r) {
  return r && typeof r == "object" && r.constructor === je ? r : new je(function(t) {
    t(r);
  });
};
je.reject = function(r) {
  return new je(function(t, e) {
    e(r);
  });
};
je.race = function(r) {
  return new je(function(t, e) {
    if (!bT(r))
      return e(new TypeError("Promise.race accepts an array"));
    for (var i = 0, n = r.length; i < n; i++)
      je.resolve(r[i]).then(t, e);
  });
};
je._immediateFn = typeof setImmediate == "function" && function(r) {
  setImmediate(r);
} || function(r) {
  IS(r, 0);
};
je._unhandledRejectionFn = function(t) {
  typeof console < "u" && console && console.warn("Possible Unhandled Promise Rejection:", t);
};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var G1 = Object.getOwnPropertySymbols, NS = Object.prototype.hasOwnProperty, OS = Object.prototype.propertyIsEnumerable;
function AS(r) {
  if (r == null)
    throw new TypeError("Object.assign cannot be called with null or undefined");
  return Object(r);
}
function FS() {
  try {
    if (!Object.assign)
      return !1;
    var r = new String("abc");
    if (r[5] = "de", Object.getOwnPropertyNames(r)[0] === "5")
      return !1;
    for (var t = {}, e = 0; e < 10; e++)
      t["_" + String.fromCharCode(e)] = e;
    var i = Object.getOwnPropertyNames(t).map(function(s) {
      return t[s];
    });
    if (i.join("") !== "0123456789")
      return !1;
    var n = {};
    return "abcdefghijklmnopqrst".split("").forEach(function(s) {
      n[s] = s;
    }), Object.keys(Object.assign({}, n)).join("") === "abcdefghijklmnopqrst";
  } catch {
    return !1;
  }
}
var MS = FS() ? Object.assign : function(r, t) {
  for (var e, i = AS(r), n, s = 1; s < arguments.length; s++) {
    e = Object(arguments[s]);
    for (var a in e)
      NS.call(e, a) && (i[a] = e[a]);
    if (G1) {
      n = G1(e);
      for (var o = 0; o < n.length; o++)
        OS.call(e, n[o]) && (i[n[o]] = e[n[o]]);
    }
  }
  return i;
};
/*!
 * @pixi/polyfill - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
typeof globalThis > "u" && (typeof self < "u" ? self.globalThis = self : typeof global < "u" && (global.globalThis = global));
globalThis.Promise || (globalThis.Promise = je);
Object.assign || (Object.assign = MS);
var kS = 16;
Date.now && Date.prototype.getTime || (Date.now = function() {
  return new Date().getTime();
});
if (!(globalThis.performance && globalThis.performance.now)) {
  var BS = Date.now();
  globalThis.performance || (globalThis.performance = {}), globalThis.performance.now = function() {
    return Date.now() - BS;
  };
}
var Qg = Date.now(), H1 = ["ms", "moz", "webkit", "o"];
for (var tm = 0; tm < H1.length && !globalThis.requestAnimationFrame; ++tm) {
  var em = H1[tm];
  globalThis.requestAnimationFrame = globalThis[em + "RequestAnimationFrame"], globalThis.cancelAnimationFrame = globalThis[em + "CancelAnimationFrame"] || globalThis[em + "CancelRequestAnimationFrame"];
}
globalThis.requestAnimationFrame || (globalThis.requestAnimationFrame = function(r) {
  if (typeof r != "function")
    throw new TypeError(r + "is not a function");
  var t = Date.now(), e = kS + Qg - t;
  return e < 0 && (e = 0), Qg = t, globalThis.self.setTimeout(function() {
    Qg = Date.now(), r(performance.now());
  }, e);
});
globalThis.cancelAnimationFrame || (globalThis.cancelAnimationFrame = function(r) {
  return clearTimeout(r);
});
Math.sign || (Math.sign = function(t) {
  return t = Number(t), t === 0 || isNaN(t) ? t : t > 0 ? 1 : -1;
});
Number.isInteger || (Number.isInteger = function(t) {
  return typeof t == "number" && isFinite(t) && Math.floor(t) === t;
});
globalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array);
globalThis.Float32Array || (globalThis.Float32Array = Array);
globalThis.Uint32Array || (globalThis.Uint32Array = Array);
globalThis.Uint16Array || (globalThis.Uint16Array = Array);
globalThis.Uint8Array || (globalThis.Uint8Array = Array);
globalThis.Int32Array || (globalThis.Int32Array = Array);
/*!
 * @pixi/settings - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var z1;
(function(r) {
  r[r.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", r[r.WEBGL = 1] = "WEBGL", r[r.WEBGL2 = 2] = "WEBGL2";
})(z1 || (z1 = {}));
var j1;
(function(r) {
  r[r.UNKNOWN = 0] = "UNKNOWN", r[r.WEBGL = 1] = "WEBGL", r[r.CANVAS = 2] = "CANVAS";
})(j1 || (j1 = {}));
var $1;
(function(r) {
  r[r.COLOR = 16384] = "COLOR", r[r.DEPTH = 256] = "DEPTH", r[r.STENCIL = 1024] = "STENCIL";
})($1 || ($1 = {}));
var V1;
(function(r) {
  r[r.NORMAL = 0] = "NORMAL", r[r.ADD = 1] = "ADD", r[r.MULTIPLY = 2] = "MULTIPLY", r[r.SCREEN = 3] = "SCREEN", r[r.OVERLAY = 4] = "OVERLAY", r[r.DARKEN = 5] = "DARKEN", r[r.LIGHTEN = 6] = "LIGHTEN", r[r.COLOR_DODGE = 7] = "COLOR_DODGE", r[r.COLOR_BURN = 8] = "COLOR_BURN", r[r.HARD_LIGHT = 9] = "HARD_LIGHT", r[r.SOFT_LIGHT = 10] = "SOFT_LIGHT", r[r.DIFFERENCE = 11] = "DIFFERENCE", r[r.EXCLUSION = 12] = "EXCLUSION", r[r.HUE = 13] = "HUE", r[r.SATURATION = 14] = "SATURATION", r[r.COLOR = 15] = "COLOR", r[r.LUMINOSITY = 16] = "LUMINOSITY", r[r.NORMAL_NPM = 17] = "NORMAL_NPM", r[r.ADD_NPM = 18] = "ADD_NPM", r[r.SCREEN_NPM = 19] = "SCREEN_NPM", r[r.NONE = 20] = "NONE", r[r.SRC_OVER = 0] = "SRC_OVER", r[r.SRC_IN = 21] = "SRC_IN", r[r.SRC_OUT = 22] = "SRC_OUT", r[r.SRC_ATOP = 23] = "SRC_ATOP", r[r.DST_OVER = 24] = "DST_OVER", r[r.DST_IN = 25] = "DST_IN", r[r.DST_OUT = 26] = "DST_OUT", r[r.DST_ATOP = 27] = "DST_ATOP", r[r.ERASE = 26] = "ERASE", r[r.SUBTRACT = 28] = "SUBTRACT", r[r.XOR = 29] = "XOR";
})(V1 || (V1 = {}));
var X1;
(function(r) {
  r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(X1 || (X1 = {}));
var W1;
(function(r) {
  r[r.RGBA = 6408] = "RGBA", r[r.RGB = 6407] = "RGB", r[r.RG = 33319] = "RG", r[r.RED = 6403] = "RED", r[r.RGBA_INTEGER = 36249] = "RGBA_INTEGER", r[r.RGB_INTEGER = 36248] = "RGB_INTEGER", r[r.RG_INTEGER = 33320] = "RG_INTEGER", r[r.RED_INTEGER = 36244] = "RED_INTEGER", r[r.ALPHA = 6406] = "ALPHA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(W1 || (W1 = {}));
var Y1;
(function(r) {
  r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Y1 || (Y1 = {}));
var q1;
(function(r) {
  r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", r[r.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", r[r.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", r[r.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", r[r.BYTE = 5120] = "BYTE", r[r.SHORT = 5122] = "SHORT", r[r.INT = 5124] = "INT", r[r.FLOAT = 5126] = "FLOAT", r[r.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", r[r.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(q1 || (q1 = {}));
var Z1;
(function(r) {
  r[r.FLOAT = 0] = "FLOAT", r[r.INT = 1] = "INT", r[r.UINT = 2] = "UINT";
})(Z1 || (Z1 = {}));
var Km;
(function(r) {
  r[r.NEAREST = 0] = "NEAREST", r[r.LINEAR = 1] = "LINEAR";
})(Km || (Km = {}));
var Qm;
(function(r) {
  r[r.CLAMP = 33071] = "CLAMP", r[r.REPEAT = 10497] = "REPEAT", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Qm || (Qm = {}));
var t_;
(function(r) {
  r[r.OFF = 0] = "OFF", r[r.POW2 = 1] = "POW2", r[r.ON = 2] = "ON", r[r.ON_MANUAL = 3] = "ON_MANUAL";
})(t_ || (t_ = {}));
var J1;
(function(r) {
  r[r.NPM = 0] = "NPM", r[r.UNPACK = 1] = "UNPACK", r[r.PMA = 2] = "PMA", r[r.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", r[r.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", r[r.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", r[r.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(J1 || (J1 = {}));
var K1;
(function(r) {
  r[r.NO = 0] = "NO", r[r.YES = 1] = "YES", r[r.AUTO = 2] = "AUTO", r[r.BLEND = 0] = "BLEND", r[r.CLEAR = 1] = "CLEAR", r[r.BLIT = 2] = "BLIT";
})(K1 || (K1 = {}));
var e_;
(function(r) {
  r[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL";
})(e_ || (e_ = {}));
var gc;
(function(r) {
  r.LOW = "lowp", r.MEDIUM = "mediump", r.HIGH = "highp";
})(gc || (gc = {}));
var Q1;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.SCISSOR = 1] = "SCISSOR", r[r.STENCIL = 2] = "STENCIL", r[r.SPRITE = 3] = "SPRITE", r[r.COLOR = 4] = "COLOR";
})(Q1 || (Q1 = {}));
var tx;
(function(r) {
  r[r.RED = 1] = "RED", r[r.GREEN = 2] = "GREEN", r[r.BLUE = 4] = "BLUE", r[r.ALPHA = 8] = "ALPHA";
})(tx || (tx = {}));
var r_;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.LOW = 2] = "LOW", r[r.MEDIUM = 4] = "MEDIUM", r[r.HIGH = 8] = "HIGH";
})(r_ || (r_ = {}));
var ex;
(function(r) {
  r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(ex || (ex = {}));
var LS = {
  createCanvas: function(r, t) {
    var e = document.createElement("canvas");
    return e.width = r, e.height = t, e;
  },
  getWebGLRenderingContext: function() {
    return WebGLRenderingContext;
  },
  getNavigator: function() {
    return navigator;
  },
  getBaseUrl: function() {
    var r;
    return (r = document.baseURI) !== null && r !== void 0 ? r : window.location.href;
  },
  fetch: function(r, t) {
    return fetch(r, t);
  }
}, rm = /iPhone/i, rx = /iPod/i, ix = /iPad/i, nx = /\biOS-universal(?:.+)Mac\b/i, im = /\bAndroid(?:.+)Mobile\b/i, sx = /Android/i, mu = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i, Od = /Silk/i, Gn = /Windows Phone/i, ax = /\bWindows(?:.+)ARM\b/i, ox = /BlackBerry/i, ux = /BB10/i, hx = /Opera Mini/i, lx = /\b(CriOS|Chrome)(?:.+)Mobile/i, cx = /Mobile(?:.+)Firefox\b/i, fx = function(r) {
  return typeof r < "u" && r.platform === "MacIntel" && typeof r.maxTouchPoints == "number" && r.maxTouchPoints > 1 && typeof MSStream > "u";
};
function DS(r) {
  return function(t) {
    return t.test(r);
  };
}
function US(r) {
  var t = {
    userAgent: "",
    platform: "",
    maxTouchPoints: 0
  };
  !r && typeof navigator < "u" ? t = {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    maxTouchPoints: navigator.maxTouchPoints || 0
  } : typeof r == "string" ? t.userAgent = r : r && r.userAgent && (t = {
    userAgent: r.userAgent,
    platform: r.platform,
    maxTouchPoints: r.maxTouchPoints || 0
  });
  var e = t.userAgent, i = e.split("[FBAN");
  typeof i[1] < "u" && (e = i[0]), i = e.split("Twitter"), typeof i[1] < "u" && (e = i[0]);
  var n = DS(e), s = {
    apple: {
      phone: n(rm) && !n(Gn),
      ipod: n(rx),
      tablet: !n(rm) && (n(ix) || fx(t)) && !n(Gn),
      universal: n(nx),
      device: (n(rm) || n(rx) || n(ix) || n(nx) || fx(t)) && !n(Gn)
    },
    amazon: {
      phone: n(mu),
      tablet: !n(mu) && n(Od),
      device: n(mu) || n(Od)
    },
    android: {
      phone: !n(Gn) && n(mu) || !n(Gn) && n(im),
      tablet: !n(Gn) && !n(mu) && !n(im) && (n(Od) || n(sx)),
      device: !n(Gn) && (n(mu) || n(Od) || n(im) || n(sx)) || n(/\bokhttp\b/i)
    },
    windows: {
      phone: n(Gn),
      tablet: n(ax),
      device: n(Gn) || n(ax)
    },
    other: {
      blackberry: n(ox),
      blackberry10: n(ux),
      opera: n(hx),
      firefox: n(cx),
      chrome: n(lx),
      device: n(ox) || n(ux) || n(hx) || n(cx) || n(lx)
    },
    any: !1,
    phone: !1,
    tablet: !1
  };
  return s.any = s.apple.device || s.android.device || s.windows.device || s.other.device, s.phone = s.apple.phone || s.android.phone || s.windows.phone, s.tablet = s.apple.tablet || s.android.tablet || s.windows.tablet, s;
}
var wn = US(globalThis.navigator);
function GS() {
  return !wn.apple.device;
}
function HS(r) {
  var t = !0;
  if (wn.tablet || wn.phone) {
    if (wn.apple.device) {
      var e = navigator.userAgent.match(/OS (\d+)_(\d+)?/);
      if (e) {
        var i = parseInt(e[1], 10);
        i < 11 && (t = !1);
      }
    }
    if (wn.android.device) {
      var e = navigator.userAgent.match(/Android\s([0-9.]*)/);
      if (e) {
        var i = parseInt(e[1], 10);
        i < 7 && (t = !1);
      }
    }
  }
  return t ? r : 4;
}
var gt = {
  ADAPTER: LS,
  MIPMAP_TEXTURES: t_.POW2,
  ANISOTROPIC_LEVEL: 0,
  RESOLUTION: 1,
  FILTER_RESOLUTION: 1,
  FILTER_MULTISAMPLE: r_.NONE,
  SPRITE_MAX_TEXTURES: HS(32),
  SPRITE_BATCH_SIZE: 4096,
  RENDER_OPTIONS: {
    view: null,
    antialias: !1,
    autoDensity: !1,
    backgroundColor: 0,
    backgroundAlpha: 1,
    useContextAlpha: !0,
    clearBeforeRender: !0,
    preserveDrawingBuffer: !1,
    width: 800,
    height: 600,
    legacy: !1
  },
  GC_MODE: e_.AUTO,
  GC_MAX_IDLE: 60 * 60,
  GC_MAX_CHECK_COUNT: 60 * 10,
  WRAP_MODE: Qm.CLAMP,
  SCALE_MODE: Km.LINEAR,
  PRECISION_VERTEX: gc.HIGH,
  PRECISION_FRAGMENT: wn.apple.device ? gc.HIGH : gc.MEDIUM,
  CAN_UPLOAD_SAME_BUFFER: GS(),
  CREATE_IMAGE_BITMAP: !1,
  ROUND_PIXELS: !1
}, wT = { exports: {} };
(function(r) {
  var t = Object.prototype.hasOwnProperty, e = "~";
  function i() {
  }
  Object.create && (i.prototype = /* @__PURE__ */ Object.create(null), new i().__proto__ || (e = !1));
  function n(u, h, l) {
    this.fn = u, this.context = h, this.once = l || !1;
  }
  function s(u, h, l, c, d) {
    if (typeof l != "function")
      throw new TypeError("The listener must be a function");
    var p = new n(l, c || u, d), g = e ? e + h : h;
    return u._events[g] ? u._events[g].fn ? u._events[g] = [u._events[g], p] : u._events[g].push(p) : (u._events[g] = p, u._eventsCount++), u;
  }
  function a(u, h) {
    --u._eventsCount === 0 ? u._events = new i() : delete u._events[h];
  }
  function o() {
    this._events = new i(), this._eventsCount = 0;
  }
  o.prototype.eventNames = function() {
    var h = [], l, c;
    if (this._eventsCount === 0)
      return h;
    for (c in l = this._events)
      t.call(l, c) && h.push(e ? c.slice(1) : c);
    return Object.getOwnPropertySymbols ? h.concat(Object.getOwnPropertySymbols(l)) : h;
  }, o.prototype.listeners = function(h) {
    var l = e ? e + h : h, c = this._events[l];
    if (!c)
      return [];
    if (c.fn)
      return [c.fn];
    for (var d = 0, p = c.length, g = new Array(p); d < p; d++)
      g[d] = c[d].fn;
    return g;
  }, o.prototype.listenerCount = function(h) {
    var l = e ? e + h : h, c = this._events[l];
    return c ? c.fn ? 1 : c.length : 0;
  }, o.prototype.emit = function(h, l, c, d, p, g) {
    var v = e ? e + h : h;
    if (!this._events[v])
      return !1;
    var m = this._events[v], _ = arguments.length, y, b;
    if (m.fn) {
      switch (m.once && this.removeListener(h, m.fn, void 0, !0), _) {
        case 1:
          return m.fn.call(m.context), !0;
        case 2:
          return m.fn.call(m.context, l), !0;
        case 3:
          return m.fn.call(m.context, l, c), !0;
        case 4:
          return m.fn.call(m.context, l, c, d), !0;
        case 5:
          return m.fn.call(m.context, l, c, d, p), !0;
        case 6:
          return m.fn.call(m.context, l, c, d, p, g), !0;
      }
      for (b = 1, y = new Array(_ - 1); b < _; b++)
        y[b - 1] = arguments[b];
      m.fn.apply(m.context, y);
    } else {
      var x = m.length, w;
      for (b = 0; b < x; b++)
        switch (m[b].once && this.removeListener(h, m[b].fn, void 0, !0), _) {
          case 1:
            m[b].fn.call(m[b].context);
            break;
          case 2:
            m[b].fn.call(m[b].context, l);
            break;
          case 3:
            m[b].fn.call(m[b].context, l, c);
            break;
          case 4:
            m[b].fn.call(m[b].context, l, c, d);
            break;
          default:
            if (!y)
              for (w = 1, y = new Array(_ - 1); w < _; w++)
                y[w - 1] = arguments[w];
            m[b].fn.apply(m[b].context, y);
        }
    }
    return !0;
  }, o.prototype.on = function(h, l, c) {
    return s(this, h, l, c, !1);
  }, o.prototype.once = function(h, l, c) {
    return s(this, h, l, c, !0);
  }, o.prototype.removeListener = function(h, l, c, d) {
    var p = e ? e + h : h;
    if (!this._events[p])
      return this;
    if (!l)
      return a(this, p), this;
    var g = this._events[p];
    if (g.fn)
      g.fn === l && (!d || g.once) && (!c || g.context === c) && a(this, p);
    else {
      for (var v = 0, m = [], _ = g.length; v < _; v++)
        (g[v].fn !== l || d && !g[v].once || c && g[v].context !== c) && m.push(g[v]);
      m.length ? this._events[p] = m.length === 1 ? m[0] : m : a(this, p);
    }
    return this;
  }, o.prototype.removeAllListeners = function(h) {
    var l;
    return h ? (l = e ? e + h : h, this._events[l] && a(this, l)) : (this._events = new i(), this._eventsCount = 0), this;
  }, o.prototype.off = o.prototype.removeListener, o.prototype.addListener = o.prototype.on, o.prefixed = e, o.EventEmitter = o, r.exports = o;
})(wT);
const Fi = wT.exports;
var Sg = { exports: {} };
Sg.exports = Pg;
Sg.exports.default = Pg;
function Pg(r, t, e) {
  e = e || 2;
  var i = t && t.length, n = i ? t[0] * e : r.length, s = TT(r, 0, n, e, !0), a = [];
  if (!s || s.next === s.prev)
    return a;
  var o, u, h, l, c, d, p;
  if (i && (s = XS(r, t, s, e)), r.length > 80 * e) {
    o = h = r[0], u = l = r[1];
    for (var g = e; g < n; g += e)
      c = r[g], d = r[g + 1], c < o && (o = c), d < u && (u = d), c > h && (h = c), d > l && (l = d);
    p = Math.max(h - o, l - u), p = p !== 0 ? 32767 / p : 0;
  }
  return Bc(s, a, e, o, u, p, 0), a;
}
function TT(r, t, e, i, n) {
  var s, a;
  if (n === s_(r, t, e, i) > 0)
    for (s = t; s < e; s += i)
      a = dx(s, r[s], r[s + 1], a);
  else
    for (s = e - i; s >= t; s -= i)
      a = dx(s, r[s], r[s + 1], a);
  return a && Ng(a, a.next) && (Dc(a), a = a.next), a;
}
function eu(r, t) {
  if (!r)
    return r;
  t || (t = r);
  var e = r, i;
  do
    if (i = !1, !e.steiner && (Ng(e, e.next) || Ue(e.prev, e, e.next) === 0)) {
      if (Dc(e), e = t = e.prev, e === e.next)
        break;
      i = !0;
    } else
      e = e.next;
  while (i || e !== t);
  return t;
}
function Bc(r, t, e, i, n, s, a) {
  if (!!r) {
    !a && s && JS(r, i, n, s);
    for (var o = r, u, h; r.prev !== r.next; ) {
      if (u = r.prev, h = r.next, s ? jS(r, i, n, s) : zS(r)) {
        t.push(u.i / e | 0), t.push(r.i / e | 0), t.push(h.i / e | 0), Dc(r), r = h.next, o = h.next;
        continue;
      }
      if (r = h, r === o) {
        a ? a === 1 ? (r = $S(eu(r), t, e), Bc(r, t, e, i, n, s, 2)) : a === 2 && VS(r, t, e, i, n, s) : Bc(eu(r), t, e, i, n, s, 1);
        break;
      }
    }
  }
}
function zS(r) {
  var t = r.prev, e = r, i = r.next;
  if (Ue(t, e, i) >= 0)
    return !1;
  for (var n = t.x, s = e.x, a = i.x, o = t.y, u = e.y, h = i.y, l = n < s ? n < a ? n : a : s < a ? s : a, c = o < u ? o < h ? o : h : u < h ? u : h, d = n > s ? n > a ? n : a : s > a ? s : a, p = o > u ? o > h ? o : h : u > h ? u : h, g = i.next; g !== t; ) {
    if (g.x >= l && g.x <= d && g.y >= c && g.y <= p && Mu(n, o, s, u, a, h, g.x, g.y) && Ue(g.prev, g, g.next) >= 0)
      return !1;
    g = g.next;
  }
  return !0;
}
function jS(r, t, e, i) {
  var n = r.prev, s = r, a = r.next;
  if (Ue(n, s, a) >= 0)
    return !1;
  for (var o = n.x, u = s.x, h = a.x, l = n.y, c = s.y, d = a.y, p = o < u ? o < h ? o : h : u < h ? u : h, g = l < c ? l < d ? l : d : c < d ? c : d, v = o > u ? o > h ? o : h : u > h ? u : h, m = l > c ? l > d ? l : d : c > d ? c : d, _ = i_(p, g, t, e, i), y = i_(v, m, t, e, i), b = r.prevZ, x = r.nextZ; b && b.z >= _ && x && x.z <= y; ) {
    if (b.x >= p && b.x <= v && b.y >= g && b.y <= m && b !== n && b !== a && Mu(o, l, u, c, h, d, b.x, b.y) && Ue(b.prev, b, b.next) >= 0 || (b = b.prevZ, x.x >= p && x.x <= v && x.y >= g && x.y <= m && x !== n && x !== a && Mu(o, l, u, c, h, d, x.x, x.y) && Ue(x.prev, x, x.next) >= 0))
      return !1;
    x = x.nextZ;
  }
  for (; b && b.z >= _; ) {
    if (b.x >= p && b.x <= v && b.y >= g && b.y <= m && b !== n && b !== a && Mu(o, l, u, c, h, d, b.x, b.y) && Ue(b.prev, b, b.next) >= 0)
      return !1;
    b = b.prevZ;
  }
  for (; x && x.z <= y; ) {
    if (x.x >= p && x.x <= v && x.y >= g && x.y <= m && x !== n && x !== a && Mu(o, l, u, c, h, d, x.x, x.y) && Ue(x.prev, x, x.next) >= 0)
      return !1;
    x = x.nextZ;
  }
  return !0;
}
function $S(r, t, e) {
  var i = r;
  do {
    var n = i.prev, s = i.next.next;
    !Ng(n, s) && CT(n, i, i.next, s) && Lc(n, s) && Lc(s, n) && (t.push(n.i / e | 0), t.push(i.i / e | 0), t.push(s.i / e | 0), Dc(i), Dc(i.next), i = r = s), i = i.next;
  } while (i !== r);
  return eu(i);
}
function VS(r, t, e, i, n, s) {
  var a = r;
  do {
    for (var o = a.next.next; o !== a.prev; ) {
      if (a.i !== o.i && tP(a, o)) {
        var u = IT(a, o);
        a = eu(a, a.next), u = eu(u, u.next), Bc(a, t, e, i, n, s, 0), Bc(u, t, e, i, n, s, 0);
        return;
      }
      o = o.next;
    }
    a = a.next;
  } while (a !== r);
}
function XS(r, t, e, i) {
  var n = [], s, a, o, u, h;
  for (s = 0, a = t.length; s < a; s++)
    o = t[s] * i, u = s < a - 1 ? t[s + 1] * i : r.length, h = TT(r, o, u, i, !1), h === h.next && (h.steiner = !0), n.push(QS(h));
  for (n.sort(WS), s = 0; s < n.length; s++)
    e = YS(n[s], e);
  return e;
}
function WS(r, t) {
  return r.x - t.x;
}
function YS(r, t) {
  var e = qS(r, t);
  if (!e)
    return t;
  var i = IT(e, r);
  return eu(i, i.next), eu(e, e.next);
}
function qS(r, t) {
  var e = t, i = r.x, n = r.y, s = -1 / 0, a;
  do {
    if (n <= e.y && n >= e.next.y && e.next.y !== e.y) {
      var o = e.x + (n - e.y) * (e.next.x - e.x) / (e.next.y - e.y);
      if (o <= i && o > s && (s = o, a = e.x < e.next.x ? e : e.next, o === i))
        return a;
    }
    e = e.next;
  } while (e !== t);
  if (!a)
    return null;
  var u = a, h = a.x, l = a.y, c = 1 / 0, d;
  e = a;
  do
    i >= e.x && e.x >= h && i !== e.x && Mu(n < l ? i : s, n, h, l, n < l ? s : i, n, e.x, e.y) && (d = Math.abs(n - e.y) / (i - e.x), Lc(e, r) && (d < c || d === c && (e.x > a.x || e.x === a.x && ZS(a, e))) && (a = e, c = d)), e = e.next;
  while (e !== u);
  return a;
}
function ZS(r, t) {
  return Ue(r.prev, r, t.prev) < 0 && Ue(t.next, r, r.next) < 0;
}
function JS(r, t, e, i) {
  var n = r;
  do
    n.z === 0 && (n.z = i_(n.x, n.y, t, e, i)), n.prevZ = n.prev, n.nextZ = n.next, n = n.next;
  while (n !== r);
  n.prevZ.nextZ = null, n.prevZ = null, KS(n);
}
function KS(r) {
  var t, e, i, n, s, a, o, u, h = 1;
  do {
    for (e = r, r = null, s = null, a = 0; e; ) {
      for (a++, i = e, o = 0, t = 0; t < h && (o++, i = i.nextZ, !!i); t++)
        ;
      for (u = h; o > 0 || u > 0 && i; )
        o !== 0 && (u === 0 || !i || e.z <= i.z) ? (n = e, e = e.nextZ, o--) : (n = i, i = i.nextZ, u--), s ? s.nextZ = n : r = n, n.prevZ = s, s = n;
      e = i;
    }
    s.nextZ = null, h *= 2;
  } while (a > 1);
  return r;
}
function i_(r, t, e, i, n) {
  return r = (r - e) * n | 0, t = (t - i) * n | 0, r = (r | r << 8) & 16711935, r = (r | r << 4) & 252645135, r = (r | r << 2) & 858993459, r = (r | r << 1) & 1431655765, t = (t | t << 8) & 16711935, t = (t | t << 4) & 252645135, t = (t | t << 2) & 858993459, t = (t | t << 1) & 1431655765, r | t << 1;
}
function QS(r) {
  var t = r, e = r;
  do
    (t.x < e.x || t.x === e.x && t.y < e.y) && (e = t), t = t.next;
  while (t !== r);
  return e;
}
function Mu(r, t, e, i, n, s, a, o) {
  return (n - a) * (t - o) >= (r - a) * (s - o) && (r - a) * (i - o) >= (e - a) * (t - o) && (e - a) * (s - o) >= (n - a) * (i - o);
}
function tP(r, t) {
  return r.next.i !== t.i && r.prev.i !== t.i && !eP(r, t) && (Lc(r, t) && Lc(t, r) && rP(r, t) && (Ue(r.prev, r, t.prev) || Ue(r, t.prev, t)) || Ng(r, t) && Ue(r.prev, r, r.next) > 0 && Ue(t.prev, t, t.next) > 0);
}
function Ue(r, t, e) {
  return (t.y - r.y) * (e.x - t.x) - (t.x - r.x) * (e.y - t.y);
}
function Ng(r, t) {
  return r.x === t.x && r.y === t.y;
}
function CT(r, t, e, i) {
  var n = Fd(Ue(r, t, e)), s = Fd(Ue(r, t, i)), a = Fd(Ue(e, i, r)), o = Fd(Ue(e, i, t));
  return !!(n !== s && a !== o || n === 0 && Ad(r, e, t) || s === 0 && Ad(r, i, t) || a === 0 && Ad(e, r, i) || o === 0 && Ad(e, t, i));
}
function Ad(r, t, e) {
  return t.x <= Math.max(r.x, e.x) && t.x >= Math.min(r.x, e.x) && t.y <= Math.max(r.y, e.y) && t.y >= Math.min(r.y, e.y);
}
function Fd(r) {
  return r > 0 ? 1 : r < 0 ? -1 : 0;
}
function eP(r, t) {
  var e = r;
  do {
    if (e.i !== r.i && e.next.i !== r.i && e.i !== t.i && e.next.i !== t.i && CT(e, e.next, r, t))
      return !0;
    e = e.next;
  } while (e !== r);
  return !1;
}
function Lc(r, t) {
  return Ue(r.prev, r, r.next) < 0 ? Ue(r, t, r.next) >= 0 && Ue(r, r.prev, t) >= 0 : Ue(r, t, r.prev) < 0 || Ue(r, r.next, t) < 0;
}
function rP(r, t) {
  var e = r, i = !1, n = (r.x + t.x) / 2, s = (r.y + t.y) / 2;
  do
    e.y > s != e.next.y > s && e.next.y !== e.y && n < (e.next.x - e.x) * (s - e.y) / (e.next.y - e.y) + e.x && (i = !i), e = e.next;
  while (e !== r);
  return i;
}
function IT(r, t) {
  var e = new n_(r.i, r.x, r.y), i = new n_(t.i, t.x, t.y), n = r.next, s = t.prev;
  return r.next = t, t.prev = r, e.next = n, n.prev = e, i.next = e, e.prev = i, s.next = i, i.prev = s, i;
}
function dx(r, t, e, i) {
  var n = new n_(r, t, e);
  return i ? (n.next = i.next, n.prev = i, i.next.prev = n, i.next = n) : (n.prev = n, n.next = n), n;
}
function Dc(r) {
  r.next.prev = r.prev, r.prev.next = r.next, r.prevZ && (r.prevZ.nextZ = r.nextZ), r.nextZ && (r.nextZ.prevZ = r.prevZ);
}
function n_(r, t, e) {
  this.i = r, this.x = t, this.y = e, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1;
}
Pg.deviation = function(r, t, e, i) {
  var n = t && t.length, s = n ? t[0] * e : r.length, a = Math.abs(s_(r, 0, s, e));
  if (n)
    for (var o = 0, u = t.length; o < u; o++) {
      var h = t[o] * e, l = o < u - 1 ? t[o + 1] * e : r.length;
      a -= Math.abs(s_(r, h, l, e));
    }
  var c = 0;
  for (o = 0; o < i.length; o += 3) {
    var d = i[o] * e, p = i[o + 1] * e, g = i[o + 2] * e;
    c += Math.abs(
      (r[d] - r[g]) * (r[p + 1] - r[d + 1]) - (r[d] - r[p]) * (r[g + 1] - r[d + 1])
    );
  }
  return a === 0 && c === 0 ? 0 : Math.abs((c - a) / a);
};
function s_(r, t, e, i) {
  for (var n = 0, s = t, a = e - i; s < e; s += i)
    n += (r[a] - r[s]) * (r[s + 1] + r[a + 1]), a = s;
  return n;
}
Pg.flatten = function(r) {
  for (var t = r[0][0].length, e = { vertices: [], holes: [], dimensions: t }, i = 0, n = 0; n < r.length; n++) {
    for (var s = 0; s < r[n].length; s++)
      for (var a = 0; a < t; a++)
        e.vertices.push(r[n][s][a]);
    n > 0 && (i += r[n - 1].length, e.holes.push(i));
  }
  return e;
};
/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Is;
(function(r) {
  r[r.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", r[r.WEBGL = 1] = "WEBGL", r[r.WEBGL2 = 2] = "WEBGL2";
})(Is || (Is = {}));
var Uc;
(function(r) {
  r[r.UNKNOWN = 0] = "UNKNOWN", r[r.WEBGL = 1] = "WEBGL", r[r.CANVAS = 2] = "CANVAS";
})(Uc || (Uc = {}));
var sv;
(function(r) {
  r[r.COLOR = 16384] = "COLOR", r[r.DEPTH = 256] = "DEPTH", r[r.STENCIL = 1024] = "STENCIL";
})(sv || (sv = {}));
var bt;
(function(r) {
  r[r.NORMAL = 0] = "NORMAL", r[r.ADD = 1] = "ADD", r[r.MULTIPLY = 2] = "MULTIPLY", r[r.SCREEN = 3] = "SCREEN", r[r.OVERLAY = 4] = "OVERLAY", r[r.DARKEN = 5] = "DARKEN", r[r.LIGHTEN = 6] = "LIGHTEN", r[r.COLOR_DODGE = 7] = "COLOR_DODGE", r[r.COLOR_BURN = 8] = "COLOR_BURN", r[r.HARD_LIGHT = 9] = "HARD_LIGHT", r[r.SOFT_LIGHT = 10] = "SOFT_LIGHT", r[r.DIFFERENCE = 11] = "DIFFERENCE", r[r.EXCLUSION = 12] = "EXCLUSION", r[r.HUE = 13] = "HUE", r[r.SATURATION = 14] = "SATURATION", r[r.COLOR = 15] = "COLOR", r[r.LUMINOSITY = 16] = "LUMINOSITY", r[r.NORMAL_NPM = 17] = "NORMAL_NPM", r[r.ADD_NPM = 18] = "ADD_NPM", r[r.SCREEN_NPM = 19] = "SCREEN_NPM", r[r.NONE = 20] = "NONE", r[r.SRC_OVER = 0] = "SRC_OVER", r[r.SRC_IN = 21] = "SRC_IN", r[r.SRC_OUT = 22] = "SRC_OUT", r[r.SRC_ATOP = 23] = "SRC_ATOP", r[r.DST_OVER = 24] = "DST_OVER", r[r.DST_IN = 25] = "DST_IN", r[r.DST_OUT = 26] = "DST_OUT", r[r.DST_ATOP = 27] = "DST_ATOP", r[r.ERASE = 26] = "ERASE", r[r.SUBTRACT = 28] = "SUBTRACT", r[r.XOR = 29] = "XOR";
})(bt || (bt = {}));
var qi;
(function(r) {
  r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(qi || (qi = {}));
var lt;
(function(r) {
  r[r.RGBA = 6408] = "RGBA", r[r.RGB = 6407] = "RGB", r[r.RG = 33319] = "RG", r[r.RED = 6403] = "RED", r[r.RGBA_INTEGER = 36249] = "RGBA_INTEGER", r[r.RGB_INTEGER = 36248] = "RGB_INTEGER", r[r.RG_INTEGER = 33320] = "RG_INTEGER", r[r.RED_INTEGER = 36244] = "RED_INTEGER", r[r.ALPHA = 6406] = "ALPHA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(lt || (lt = {}));
var Jo;
(function(r) {
  r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Jo || (Jo = {}));
var Tt;
(function(r) {
  r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", r[r.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", r[r.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", r[r.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", r[r.BYTE = 5120] = "BYTE", r[r.SHORT = 5122] = "SHORT", r[r.INT = 5124] = "INT", r[r.FLOAT = 5126] = "FLOAT", r[r.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", r[r.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(Tt || (Tt = {}));
var av;
(function(r) {
  r[r.FLOAT = 0] = "FLOAT", r[r.INT = 1] = "INT", r[r.UINT = 2] = "UINT";
})(av || (av = {}));
var bs;
(function(r) {
  r[r.NEAREST = 0] = "NEAREST", r[r.LINEAR = 1] = "LINEAR";
})(bs || (bs = {}));
var xs;
(function(r) {
  r[r.CLAMP = 33071] = "CLAMP", r[r.REPEAT = 10497] = "REPEAT", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(xs || (xs = {}));
var Rs;
(function(r) {
  r[r.OFF = 0] = "OFF", r[r.POW2 = 1] = "POW2", r[r.ON = 2] = "ON", r[r.ON_MANUAL = 3] = "ON_MANUAL";
})(Rs || (Rs = {}));
var tn;
(function(r) {
  r[r.NPM = 0] = "NPM", r[r.UNPACK = 1] = "UNPACK", r[r.PMA = 2] = "PMA", r[r.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", r[r.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", r[r.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", r[r.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(tn || (tn = {}));
var Gs;
(function(r) {
  r[r.NO = 0] = "NO", r[r.YES = 1] = "YES", r[r.AUTO = 2] = "AUTO", r[r.BLEND = 0] = "BLEND", r[r.CLEAR = 1] = "CLEAR", r[r.BLIT = 2] = "BLIT";
})(Gs || (Gs = {}));
var a_;
(function(r) {
  r[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL";
})(a_ || (a_ = {}));
var Tn;
(function(r) {
  r.LOW = "lowp", r.MEDIUM = "mediump", r.HIGH = "highp";
})(Tn || (Tn = {}));
var ar;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.SCISSOR = 1] = "SCISSOR", r[r.STENCIL = 2] = "STENCIL", r[r.SPRITE = 3] = "SPRITE", r[r.COLOR = 4] = "COLOR";
})(ar || (ar = {}));
var px;
(function(r) {
  r[r.RED = 1] = "RED", r[r.GREEN = 2] = "GREEN", r[r.BLUE = 4] = "BLUE", r[r.ALPHA = 8] = "ALPHA";
})(px || (px = {}));
var tr;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.LOW = 2] = "LOW", r[r.MEDIUM = 4] = "MEDIUM", r[r.HIGH = 8] = "HIGH";
})(tr || (tr = {}));
var In;
(function(r) {
  r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(In || (In = {}));
/*!
 * @pixi/utils - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ku = {
  parse: mS,
  format: _S,
  resolve: yS
};
gt.RETINA_PREFIX = /@([0-9\.]+)x/;
gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1;
var o_ = !1, vx = "6.5.3";
function iP() {
  o_ = !0;
}
function nP(r) {
  var t;
  if (!o_) {
    if (gt.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome") > -1) {
      var e = [
        `
 %c %c %c PixiJS ` + vx + " - \u2730 " + r + ` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,
        "background: #ff66a5; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff66a5; background: #030307; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "background: #ffc3dc; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;"
      ];
      (t = globalThis.console).log.apply(t, e);
    } else
      globalThis.console && globalThis.console.log("PixiJS " + vx + " - " + r + " - http://www.pixijs.com/");
    o_ = !0;
  }
}
var nm;
function sP() {
  return typeof nm > "u" && (nm = function() {
    var t = {
      stencil: !0,
      failIfMajorPerformanceCaveat: gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT
    };
    try {
      if (!gt.ADAPTER.getWebGLRenderingContext())
        return !1;
      var e = gt.ADAPTER.createCanvas(), i = e.getContext("webgl", t) || e.getContext("experimental-webgl", t), n = !!(i && i.getContextAttributes().stencil);
      if (i) {
        var s = i.getExtension("WEBGL_lose_context");
        s && s.loseContext();
      }
      return i = null, n;
    } catch {
      return !1;
    }
  }()), nm;
}
var aP = "#f0f8ff", oP = "#faebd7", uP = "#00ffff", hP = "#7fffd4", lP = "#f0ffff", cP = "#f5f5dc", fP = "#ffe4c4", dP = "#000000", pP = "#ffebcd", vP = "#0000ff", gP = "#8a2be2", mP = "#a52a2a", _P = "#deb887", yP = "#5f9ea0", bP = "#7fff00", xP = "#d2691e", EP = "#ff7f50", wP = "#6495ed", TP = "#fff8dc", CP = "#dc143c", IP = "#00ffff", RP = "#00008b", SP = "#008b8b", PP = "#b8860b", NP = "#a9a9a9", OP = "#006400", AP = "#a9a9a9", FP = "#bdb76b", MP = "#8b008b", kP = "#556b2f", BP = "#ff8c00", LP = "#9932cc", DP = "#8b0000", UP = "#e9967a", GP = "#8fbc8f", HP = "#483d8b", zP = "#2f4f4f", jP = "#2f4f4f", $P = "#00ced1", VP = "#9400d3", XP = "#ff1493", WP = "#00bfff", YP = "#696969", qP = "#696969", ZP = "#1e90ff", JP = "#b22222", KP = "#fffaf0", QP = "#228b22", tN = "#ff00ff", eN = "#dcdcdc", rN = "#f8f8ff", iN = "#daa520", nN = "#ffd700", sN = "#808080", aN = "#008000", oN = "#adff2f", uN = "#808080", hN = "#f0fff0", lN = "#ff69b4", cN = "#cd5c5c", fN = "#4b0082", dN = "#fffff0", pN = "#f0e68c", vN = "#fff0f5", gN = "#e6e6fa", mN = "#7cfc00", _N = "#fffacd", yN = "#add8e6", bN = "#f08080", xN = "#e0ffff", EN = "#fafad2", wN = "#d3d3d3", TN = "#90ee90", CN = "#d3d3d3", IN = "#ffb6c1", RN = "#ffa07a", SN = "#20b2aa", PN = "#87cefa", NN = "#778899", ON = "#778899", AN = "#b0c4de", FN = "#ffffe0", MN = "#00ff00", kN = "#32cd32", BN = "#faf0e6", LN = "#ff00ff", DN = "#800000", UN = "#66cdaa", GN = "#0000cd", HN = "#ba55d3", zN = "#9370db", jN = "#3cb371", $N = "#7b68ee", VN = "#00fa9a", XN = "#48d1cc", WN = "#c71585", YN = "#191970", qN = "#f5fffa", ZN = "#ffe4e1", JN = "#ffe4b5", KN = "#ffdead", QN = "#000080", tO = "#fdf5e6", eO = "#808000", rO = "#6b8e23", iO = "#ffa500", nO = "#ff4500", sO = "#da70d6", aO = "#eee8aa", oO = "#98fb98", uO = "#afeeee", hO = "#db7093", lO = "#ffefd5", cO = "#ffdab9", fO = "#cd853f", dO = "#ffc0cb", pO = "#dda0dd", vO = "#b0e0e6", gO = "#800080", mO = "#663399", _O = "#ff0000", yO = "#bc8f8f", bO = "#4169e1", xO = "#8b4513", EO = "#fa8072", wO = "#f4a460", TO = "#2e8b57", CO = "#fff5ee", IO = "#a0522d", RO = "#c0c0c0", SO = "#87ceeb", PO = "#6a5acd", NO = "#708090", OO = "#708090", AO = "#fffafa", FO = "#00ff7f", MO = "#4682b4", kO = "#d2b48c", BO = "#008080", LO = "#d8bfd8", DO = "#ff6347", UO = "#40e0d0", GO = "#ee82ee", HO = "#f5deb3", zO = "#ffffff", jO = "#f5f5f5", $O = "#ffff00", VO = "#9acd32", XO = {
  aliceblue: aP,
  antiquewhite: oP,
  aqua: uP,
  aquamarine: hP,
  azure: lP,
  beige: cP,
  bisque: fP,
  black: dP,
  blanchedalmond: pP,
  blue: vP,
  blueviolet: gP,
  brown: mP,
  burlywood: _P,
  cadetblue: yP,
  chartreuse: bP,
  chocolate: xP,
  coral: EP,
  cornflowerblue: wP,
  cornsilk: TP,
  crimson: CP,
  cyan: IP,
  darkblue: RP,
  darkcyan: SP,
  darkgoldenrod: PP,
  darkgray: NP,
  darkgreen: OP,
  darkgrey: AP,
  darkkhaki: FP,
  darkmagenta: MP,
  darkolivegreen: kP,
  darkorange: BP,
  darkorchid: LP,
  darkred: DP,
  darksalmon: UP,
  darkseagreen: GP,
  darkslateblue: HP,
  darkslategray: zP,
  darkslategrey: jP,
  darkturquoise: $P,
  darkviolet: VP,
  deeppink: XP,
  deepskyblue: WP,
  dimgray: YP,
  dimgrey: qP,
  dodgerblue: ZP,
  firebrick: JP,
  floralwhite: KP,
  forestgreen: QP,
  fuchsia: tN,
  gainsboro: eN,
  ghostwhite: rN,
  goldenrod: iN,
  gold: nN,
  gray: sN,
  green: aN,
  greenyellow: oN,
  grey: uN,
  honeydew: hN,
  hotpink: lN,
  indianred: cN,
  indigo: fN,
  ivory: dN,
  khaki: pN,
  lavenderblush: vN,
  lavender: gN,
  lawngreen: mN,
  lemonchiffon: _N,
  lightblue: yN,
  lightcoral: bN,
  lightcyan: xN,
  lightgoldenrodyellow: EN,
  lightgray: wN,
  lightgreen: TN,
  lightgrey: CN,
  lightpink: IN,
  lightsalmon: RN,
  lightseagreen: SN,
  lightskyblue: PN,
  lightslategray: NN,
  lightslategrey: ON,
  lightsteelblue: AN,
  lightyellow: FN,
  lime: MN,
  limegreen: kN,
  linen: BN,
  magenta: LN,
  maroon: DN,
  mediumaquamarine: UN,
  mediumblue: GN,
  mediumorchid: HN,
  mediumpurple: zN,
  mediumseagreen: jN,
  mediumslateblue: $N,
  mediumspringgreen: VN,
  mediumturquoise: XN,
  mediumvioletred: WN,
  midnightblue: YN,
  mintcream: qN,
  mistyrose: ZN,
  moccasin: JN,
  navajowhite: KN,
  navy: QN,
  oldlace: tO,
  olive: eO,
  olivedrab: rO,
  orange: iO,
  orangered: nO,
  orchid: sO,
  palegoldenrod: aO,
  palegreen: oO,
  paleturquoise: uO,
  palevioletred: hO,
  papayawhip: lO,
  peachpuff: cO,
  peru: fO,
  pink: dO,
  plum: pO,
  powderblue: vO,
  purple: gO,
  rebeccapurple: mO,
  red: _O,
  rosybrown: yO,
  royalblue: bO,
  saddlebrown: xO,
  salmon: EO,
  sandybrown: wO,
  seagreen: TO,
  seashell: CO,
  sienna: IO,
  silver: RO,
  skyblue: SO,
  slateblue: PO,
  slategray: NO,
  slategrey: OO,
  snow: AO,
  springgreen: FO,
  steelblue: MO,
  tan: kO,
  teal: BO,
  thistle: LO,
  tomato: DO,
  turquoise: UO,
  violet: GO,
  wheat: HO,
  white: zO,
  whitesmoke: jO,
  yellow: $O,
  yellowgreen: VO
};
function vl(r, t) {
  return t === void 0 && (t = []), t[0] = (r >> 16 & 255) / 255, t[1] = (r >> 8 & 255) / 255, t[2] = (r & 255) / 255, t;
}
function RT(r) {
  var t = r.toString(16);
  return t = "000000".substring(0, 6 - t.length) + t, "#" + t;
}
function ST(r) {
  return typeof r == "string" && (r = XO[r.toLowerCase()] || r, r[0] === "#" && (r = r.slice(1))), parseInt(r, 16);
}
function WO() {
  for (var r = [], t = [], e = 0; e < 32; e++)
    r[e] = e, t[e] = e;
  r[bt.NORMAL_NPM] = bt.NORMAL, r[bt.ADD_NPM] = bt.ADD, r[bt.SCREEN_NPM] = bt.SCREEN, t[bt.NORMAL] = bt.NORMAL_NPM, t[bt.ADD] = bt.ADD_NPM, t[bt.SCREEN] = bt.SCREEN_NPM;
  var i = [];
  return i.push(t), i.push(r), i;
}
var PT = WO();
function NT(r, t) {
  return PT[t ? 1 : 0][r];
}
function YO(r, t, e, i) {
  return e = e || new Float32Array(4), i || i === void 0 ? (e[0] = r[0] * t, e[1] = r[1] * t, e[2] = r[2] * t) : (e[0] = r[0], e[1] = r[1], e[2] = r[2]), e[3] = t, e;
}
function Ib(r, t) {
  if (t === 1)
    return (t * 255 << 24) + r;
  if (t === 0)
    return 0;
  var e = r >> 16 & 255, i = r >> 8 & 255, n = r & 255;
  return e = e * t + 0.5 | 0, i = i * t + 0.5 | 0, n = n * t + 0.5 | 0, (t * 255 << 24) + (e << 16) + (i << 8) + n;
}
function OT(r, t, e, i) {
  return e = e || new Float32Array(4), e[0] = (r >> 16 & 255) / 255, e[1] = (r >> 8 & 255) / 255, e[2] = (r & 255) / 255, (i || i === void 0) && (e[0] *= t, e[1] *= t, e[2] *= t), e[3] = t, e;
}
function qO(r, t) {
  t === void 0 && (t = null);
  var e = r * 6;
  if (t = t || new Uint16Array(e), t.length !== e)
    throw new Error("Out buffer length is incorrect, got " + t.length + " and expected " + e);
  for (var i = 0, n = 0; i < e; i += 6, n += 4)
    t[i + 0] = n + 0, t[i + 1] = n + 1, t[i + 2] = n + 2, t[i + 3] = n + 0, t[i + 4] = n + 2, t[i + 5] = n + 3;
  return t;
}
function AT(r) {
  if (r.BYTES_PER_ELEMENT === 4)
    return r instanceof Float32Array ? "Float32Array" : r instanceof Uint32Array ? "Uint32Array" : "Int32Array";
  if (r.BYTES_PER_ELEMENT === 2) {
    if (r instanceof Uint16Array)
      return "Uint16Array";
  } else if (r.BYTES_PER_ELEMENT === 1 && r instanceof Uint8Array)
    return "Uint8Array";
  return null;
}
function ov(r) {
  return r += r === 0 ? 1 : 0, --r, r |= r >>> 1, r |= r >>> 2, r |= r >>> 4, r |= r >>> 8, r |= r >>> 16, r + 1;
}
function gx(r) {
  return !(r & r - 1) && !!r;
}
function mx(r) {
  var t = (r > 65535 ? 1 : 0) << 4;
  r >>>= t;
  var e = (r > 255 ? 1 : 0) << 3;
  return r >>>= e, t |= e, e = (r > 15 ? 1 : 0) << 2, r >>>= e, t |= e, e = (r > 3 ? 1 : 0) << 1, r >>>= e, t |= e, t | r >> 1;
}
function Yu(r, t, e) {
  var i = r.length, n;
  if (!(t >= i || e === 0)) {
    e = t + e > i ? i - t : e;
    var s = i - e;
    for (n = t; n < s; ++n)
      r[n] = r[n + e];
    r.length = s;
  }
}
function Bu(r) {
  return r === 0 ? 0 : r < 0 ? -1 : 1;
}
var ZO = 0;
function ru() {
  return ++ZO;
}
var _x = {};
function Rn(r, t, e) {
  if (e === void 0 && (e = 3), !_x[t]) {
    var i = new Error().stack;
    typeof i > "u" ? console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + r) : (i = i.split(`
`).splice(e).join(`
`), console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", t + `
Deprecated since v` + r), console.warn(i), console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + r), console.warn(i))), _x[t] = !0;
  }
}
var yx = {}, Zr = /* @__PURE__ */ Object.create(null), Xn = /* @__PURE__ */ Object.create(null);
function JO() {
  var r;
  for (r in Zr)
    delete Zr[r];
  for (r in Xn)
    delete Xn[r];
}
var bx = function() {
  function r(t, e, i) {
    this.canvas = gt.ADAPTER.createCanvas(), this.context = this.canvas.getContext("2d"), this.resolution = i || gt.RESOLUTION, this.resize(t, e);
  }
  return r.prototype.clear = function() {
    this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }, r.prototype.resize = function(t, e) {
    this.canvas.width = Math.round(t * this.resolution), this.canvas.height = Math.round(e * this.resolution);
  }, r.prototype.destroy = function() {
    this.context = null, this.canvas = null;
  }, Object.defineProperty(r.prototype, "width", {
    get: function() {
      return this.canvas.width;
    },
    set: function(t) {
      this.canvas.width = Math.round(t);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "height", {
    get: function() {
      return this.canvas.height;
    },
    set: function(t) {
      this.canvas.height = Math.round(t);
    },
    enumerable: !1,
    configurable: !0
  }), r;
}();
function KO(r) {
  var t = r.width, e = r.height, i = r.getContext("2d"), n = i.getImageData(0, 0, t, e), s = n.data, a = s.length, o = {
    top: null,
    left: null,
    right: null,
    bottom: null
  }, u = null, h, l, c;
  for (h = 0; h < a; h += 4)
    s[h + 3] !== 0 && (l = h / 4 % t, c = ~~(h / 4 / t), o.top === null && (o.top = c), (o.left === null || l < o.left) && (o.left = l), (o.right === null || o.right < l) && (o.right = l + 1), (o.bottom === null || o.bottom < c) && (o.bottom = c));
  return o.top !== null && (t = o.right - o.left, e = o.bottom - o.top + 1, u = i.getImageData(o.left, o.top, t, e)), {
    height: e,
    width: t,
    data: u
  };
}
var Md;
function QO(r, t) {
  if (t === void 0 && (t = globalThis.location), r.indexOf("data:") === 0)
    return "";
  t = t || globalThis.location, Md || (Md = document.createElement("a")), Md.href = r;
  var e = ku.parse(Md.href), i = !e.port && t.port === "" || e.port === t.port;
  return e.hostname !== t.hostname || !i || e.protocol !== t.protocol ? "anonymous" : "";
}
function uv(r, t) {
  var e = gt.RETINA_PREFIX.exec(r);
  return e ? parseFloat(e[1]) : t !== void 0 ? t : 1;
}
/*!
 * @pixi/math - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var hv = Math.PI * 2, tA = 180 / Math.PI, eA = Math.PI / 180, gr;
(function(r) {
  r[r.POLY = 0] = "POLY", r[r.RECT = 1] = "RECT", r[r.CIRC = 2] = "CIRC", r[r.ELIP = 3] = "ELIP", r[r.RREC = 4] = "RREC";
})(gr || (gr = {}));
var Ee = function() {
  function r(t, e) {
    t === void 0 && (t = 0), e === void 0 && (e = 0), this.x = 0, this.y = 0, this.x = t, this.y = e;
  }
  return r.prototype.clone = function() {
    return new r(this.x, this.y);
  }, r.prototype.copyFrom = function(t) {
    return this.set(t.x, t.y), this;
  }, r.prototype.copyTo = function(t) {
    return t.set(this.x, this.y), t;
  }, r.prototype.equals = function(t) {
    return t.x === this.x && t.y === this.y;
  }, r.prototype.set = function(t, e) {
    return t === void 0 && (t = 0), e === void 0 && (e = t), this.x = t, this.y = e, this;
  }, r.prototype.toString = function() {
    return "[@pixi/math:Point x=" + this.x + " y=" + this.y + "]";
  }, r;
}(), kd = [new Ee(), new Ee(), new Ee(), new Ee()], Pt = function() {
  function r(t, e, i, n) {
    t === void 0 && (t = 0), e === void 0 && (e = 0), i === void 0 && (i = 0), n === void 0 && (n = 0), this.x = Number(t), this.y = Number(e), this.width = Number(i), this.height = Number(n), this.type = gr.RECT;
  }
  return Object.defineProperty(r.prototype, "left", {
    get: function() {
      return this.x;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "right", {
    get: function() {
      return this.x + this.width;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "top", {
    get: function() {
      return this.y;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "bottom", {
    get: function() {
      return this.y + this.height;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "EMPTY", {
    get: function() {
      return new r(0, 0, 0, 0);
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.clone = function() {
    return new r(this.x, this.y, this.width, this.height);
  }, r.prototype.copyFrom = function(t) {
    return this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height, this;
  }, r.prototype.copyTo = function(t) {
    return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t;
  }, r.prototype.contains = function(t, e) {
    return this.width <= 0 || this.height <= 0 ? !1 : t >= this.x && t < this.x + this.width && e >= this.y && e < this.y + this.height;
  }, r.prototype.intersects = function(t, e) {
    if (!e) {
      var i = this.x < t.x ? t.x : this.x, n = this.right > t.right ? t.right : this.right;
      if (n <= i)
        return !1;
      var s = this.y < t.y ? t.y : this.y, a = this.bottom > t.bottom ? t.bottom : this.bottom;
      return a > s;
    }
    var o = this.left, u = this.right, h = this.top, l = this.bottom;
    if (u <= o || l <= h)
      return !1;
    var c = kd[0].set(t.left, t.top), d = kd[1].set(t.left, t.bottom), p = kd[2].set(t.right, t.top), g = kd[3].set(t.right, t.bottom);
    if (p.x <= c.x || d.y <= c.y)
      return !1;
    var v = Math.sign(e.a * e.d - e.b * e.c);
    if (v === 0 || (e.apply(c, c), e.apply(d, d), e.apply(p, p), e.apply(g, g), Math.max(c.x, d.x, p.x, g.x) <= o || Math.min(c.x, d.x, p.x, g.x) >= u || Math.max(c.y, d.y, p.y, g.y) <= h || Math.min(c.y, d.y, p.y, g.y) >= l))
      return !1;
    var m = v * (d.y - c.y), _ = v * (c.x - d.x), y = m * o + _ * h, b = m * u + _ * h, x = m * o + _ * l, w = m * u + _ * l;
    if (Math.max(y, b, x, w) <= m * c.x + _ * c.y || Math.min(y, b, x, w) >= m * g.x + _ * g.y)
      return !1;
    var E = v * (c.y - p.y), R = v * (p.x - c.x), C = E * o + R * h, P = E * u + R * h, N = E * o + R * l, M = E * u + R * l;
    return !(Math.max(C, P, N, M) <= E * c.x + R * c.y || Math.min(C, P, N, M) >= E * g.x + R * g.y);
  }, r.prototype.pad = function(t, e) {
    return t === void 0 && (t = 0), e === void 0 && (e = t), this.x -= t, this.y -= e, this.width += t * 2, this.height += e * 2, this;
  }, r.prototype.fit = function(t) {
    var e = Math.max(this.x, t.x), i = Math.min(this.x + this.width, t.x + t.width), n = Math.max(this.y, t.y), s = Math.min(this.y + this.height, t.y + t.height);
    return this.x = e, this.width = Math.max(i - e, 0), this.y = n, this.height = Math.max(s - n, 0), this;
  }, r.prototype.ceil = function(t, e) {
    t === void 0 && (t = 1), e === void 0 && (e = 1e-3);
    var i = Math.ceil((this.x + this.width - e) * t) / t, n = Math.ceil((this.y + this.height - e) * t) / t;
    return this.x = Math.floor((this.x + e) * t) / t, this.y = Math.floor((this.y + e) * t) / t, this.width = i - this.x, this.height = n - this.y, this;
  }, r.prototype.enlarge = function(t) {
    var e = Math.min(this.x, t.x), i = Math.max(this.x + this.width, t.x + t.width), n = Math.min(this.y, t.y), s = Math.max(this.y + this.height, t.y + t.height);
    return this.x = e, this.width = i - e, this.y = n, this.height = s - n, this;
  }, r.prototype.toString = function() {
    return "[@pixi/math:Rectangle x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]";
  }, r;
}(), rA = function() {
  function r(t, e, i) {
    t === void 0 && (t = 0), e === void 0 && (e = 0), i === void 0 && (i = 0), this.x = t, this.y = e, this.radius = i, this.type = gr.CIRC;
  }
  return r.prototype.clone = function() {
    return new r(this.x, this.y, this.radius);
  }, r.prototype.contains = function(t, e) {
    if (this.radius <= 0)
      return !1;
    var i = this.radius * this.radius, n = this.x - t, s = this.y - e;
    return n *= n, s *= s, n + s <= i;
  }, r.prototype.getBounds = function() {
    return new Pt(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);
  }, r.prototype.toString = function() {
    return "[@pixi/math:Circle x=" + this.x + " y=" + this.y + " radius=" + this.radius + "]";
  }, r;
}(), iA = function() {
  function r(t, e, i, n) {
    t === void 0 && (t = 0), e === void 0 && (e = 0), i === void 0 && (i = 0), n === void 0 && (n = 0), this.x = t, this.y = e, this.width = i, this.height = n, this.type = gr.ELIP;
  }
  return r.prototype.clone = function() {
    return new r(this.x, this.y, this.width, this.height);
  }, r.prototype.contains = function(t, e) {
    if (this.width <= 0 || this.height <= 0)
      return !1;
    var i = (t - this.x) / this.width, n = (e - this.y) / this.height;
    return i *= i, n *= n, i + n <= 1;
  }, r.prototype.getBounds = function() {
    return new Pt(this.x - this.width, this.y - this.height, this.width, this.height);
  }, r.prototype.toString = function() {
    return "[@pixi/math:Ellipse x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]";
  }, r;
}(), yp = function() {
  function r() {
    for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
      e[i] = t[i];
    var n = Array.isArray(e[0]) ? e[0] : e;
    if (typeof n[0] != "number") {
      for (var s = [], a = 0, o = n.length; a < o; a++)
        s.push(n[a].x, n[a].y);
      n = s;
    }
    this.points = n, this.type = gr.POLY, this.closeStroke = !0;
  }
  return r.prototype.clone = function() {
    var t = this.points.slice(), e = new r(t);
    return e.closeStroke = this.closeStroke, e;
  }, r.prototype.contains = function(t, e) {
    for (var i = !1, n = this.points.length / 2, s = 0, a = n - 1; s < n; a = s++) {
      var o = this.points[s * 2], u = this.points[s * 2 + 1], h = this.points[a * 2], l = this.points[a * 2 + 1], c = u > e != l > e && t < (h - o) * ((e - u) / (l - u)) + o;
      c && (i = !i);
    }
    return i;
  }, r.prototype.toString = function() {
    return "[@pixi/math:Polygon" + ("closeStroke=" + this.closeStroke) + ("points=" + this.points.reduce(function(t, e) {
      return t + ", " + e;
    }, "") + "]");
  }, r;
}(), nA = function() {
  function r(t, e, i, n, s) {
    t === void 0 && (t = 0), e === void 0 && (e = 0), i === void 0 && (i = 0), n === void 0 && (n = 0), s === void 0 && (s = 20), this.x = t, this.y = e, this.width = i, this.height = n, this.radius = s, this.type = gr.RREC;
  }
  return r.prototype.clone = function() {
    return new r(this.x, this.y, this.width, this.height, this.radius);
  }, r.prototype.contains = function(t, e) {
    if (this.width <= 0 || this.height <= 0)
      return !1;
    if (t >= this.x && t <= this.x + this.width && e >= this.y && e <= this.y + this.height) {
      var i = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));
      if (e >= this.y + i && e <= this.y + this.height - i || t >= this.x + i && t <= this.x + this.width - i)
        return !0;
      var n = t - (this.x + i), s = e - (this.y + i), a = i * i;
      if (n * n + s * s <= a || (n = t - (this.x + this.width - i), n * n + s * s <= a) || (s = e - (this.y + this.height - i), n * n + s * s <= a) || (n = t - (this.x + i), n * n + s * s <= a))
        return !0;
    }
    return !1;
  }, r.prototype.toString = function() {
    return "[@pixi/math:RoundedRectangle x=" + this.x + " y=" + this.y + ("width=" + this.width + " height=" + this.height + " radius=" + this.radius + "]");
  }, r;
}(), Lu = function() {
  function r(t, e, i, n) {
    i === void 0 && (i = 0), n === void 0 && (n = 0), this._x = i, this._y = n, this.cb = t, this.scope = e;
  }
  return r.prototype.clone = function(t, e) {
    return t === void 0 && (t = this.cb), e === void 0 && (e = this.scope), new r(t, e, this._x, this._y);
  }, r.prototype.set = function(t, e) {
    return t === void 0 && (t = 0), e === void 0 && (e = t), (this._x !== t || this._y !== e) && (this._x = t, this._y = e, this.cb.call(this.scope)), this;
  }, r.prototype.copyFrom = function(t) {
    return (this._x !== t.x || this._y !== t.y) && (this._x = t.x, this._y = t.y, this.cb.call(this.scope)), this;
  }, r.prototype.copyTo = function(t) {
    return t.set(this._x, this._y), t;
  }, r.prototype.equals = function(t) {
    return t.x === this._x && t.y === this._y;
  }, r.prototype.toString = function() {
    return "[@pixi/math:ObservablePoint x=" + 0 + " y=" + 0 + " scope=" + this.scope + "]";
  }, Object.defineProperty(r.prototype, "x", {
    get: function() {
      return this._x;
    },
    set: function(t) {
      this._x !== t && (this._x = t, this.cb.call(this.scope));
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "y", {
    get: function() {
      return this._y;
    },
    set: function(t) {
      this._y !== t && (this._y = t, this.cb.call(this.scope));
    },
    enumerable: !1,
    configurable: !0
  }), r;
}(), lr = function() {
  function r(t, e, i, n, s, a) {
    t === void 0 && (t = 1), e === void 0 && (e = 0), i === void 0 && (i = 0), n === void 0 && (n = 1), s === void 0 && (s = 0), a === void 0 && (a = 0), this.array = null, this.a = t, this.b = e, this.c = i, this.d = n, this.tx = s, this.ty = a;
  }
  return r.prototype.fromArray = function(t) {
    this.a = t[0], this.b = t[1], this.c = t[3], this.d = t[4], this.tx = t[2], this.ty = t[5];
  }, r.prototype.set = function(t, e, i, n, s, a) {
    return this.a = t, this.b = e, this.c = i, this.d = n, this.tx = s, this.ty = a, this;
  }, r.prototype.toArray = function(t, e) {
    this.array || (this.array = new Float32Array(9));
    var i = e || this.array;
    return t ? (i[0] = this.a, i[1] = this.b, i[2] = 0, i[3] = this.c, i[4] = this.d, i[5] = 0, i[6] = this.tx, i[7] = this.ty, i[8] = 1) : (i[0] = this.a, i[1] = this.c, i[2] = this.tx, i[3] = this.b, i[4] = this.d, i[5] = this.ty, i[6] = 0, i[7] = 0, i[8] = 1), i;
  }, r.prototype.apply = function(t, e) {
    e = e || new Ee();
    var i = t.x, n = t.y;
    return e.x = this.a * i + this.c * n + this.tx, e.y = this.b * i + this.d * n + this.ty, e;
  }, r.prototype.applyInverse = function(t, e) {
    e = e || new Ee();
    var i = 1 / (this.a * this.d + this.c * -this.b), n = t.x, s = t.y;
    return e.x = this.d * i * n + -this.c * i * s + (this.ty * this.c - this.tx * this.d) * i, e.y = this.a * i * s + -this.b * i * n + (-this.ty * this.a + this.tx * this.b) * i, e;
  }, r.prototype.translate = function(t, e) {
    return this.tx += t, this.ty += e, this;
  }, r.prototype.scale = function(t, e) {
    return this.a *= t, this.d *= e, this.c *= t, this.b *= e, this.tx *= t, this.ty *= e, this;
  }, r.prototype.rotate = function(t) {
    var e = Math.cos(t), i = Math.sin(t), n = this.a, s = this.c, a = this.tx;
    return this.a = n * e - this.b * i, this.b = n * i + this.b * e, this.c = s * e - this.d * i, this.d = s * i + this.d * e, this.tx = a * e - this.ty * i, this.ty = a * i + this.ty * e, this;
  }, r.prototype.append = function(t) {
    var e = this.a, i = this.b, n = this.c, s = this.d;
    return this.a = t.a * e + t.b * n, this.b = t.a * i + t.b * s, this.c = t.c * e + t.d * n, this.d = t.c * i + t.d * s, this.tx = t.tx * e + t.ty * n + this.tx, this.ty = t.tx * i + t.ty * s + this.ty, this;
  }, r.prototype.setTransform = function(t, e, i, n, s, a, o, u, h) {
    return this.a = Math.cos(o + h) * s, this.b = Math.sin(o + h) * s, this.c = -Math.sin(o - u) * a, this.d = Math.cos(o - u) * a, this.tx = t - (i * this.a + n * this.c), this.ty = e - (i * this.b + n * this.d), this;
  }, r.prototype.prepend = function(t) {
    var e = this.tx;
    if (t.a !== 1 || t.b !== 0 || t.c !== 0 || t.d !== 1) {
      var i = this.a, n = this.c;
      this.a = i * t.a + this.b * t.c, this.b = i * t.b + this.b * t.d, this.c = n * t.a + this.d * t.c, this.d = n * t.b + this.d * t.d;
    }
    return this.tx = e * t.a + this.ty * t.c + t.tx, this.ty = e * t.b + this.ty * t.d + t.ty, this;
  }, r.prototype.decompose = function(t) {
    var e = this.a, i = this.b, n = this.c, s = this.d, a = t.pivot, o = -Math.atan2(-n, s), u = Math.atan2(i, e), h = Math.abs(o + u);
    return h < 1e-5 || Math.abs(hv - h) < 1e-5 ? (t.rotation = u, t.skew.x = t.skew.y = 0) : (t.rotation = 0, t.skew.x = o, t.skew.y = u), t.scale.x = Math.sqrt(e * e + i * i), t.scale.y = Math.sqrt(n * n + s * s), t.position.x = this.tx + (a.x * e + a.y * n), t.position.y = this.ty + (a.x * i + a.y * s), t;
  }, r.prototype.invert = function() {
    var t = this.a, e = this.b, i = this.c, n = this.d, s = this.tx, a = t * n - e * i;
    return this.a = n / a, this.b = -e / a, this.c = -i / a, this.d = t / a, this.tx = (i * this.ty - n * s) / a, this.ty = -(t * this.ty - e * s) / a, this;
  }, r.prototype.identity = function() {
    return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this;
  }, r.prototype.clone = function() {
    var t = new r();
    return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t;
  }, r.prototype.copyTo = function(t) {
    return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t;
  }, r.prototype.copyFrom = function(t) {
    return this.a = t.a, this.b = t.b, this.c = t.c, this.d = t.d, this.tx = t.tx, this.ty = t.ty, this;
  }, r.prototype.toString = function() {
    return "[@pixi/math:Matrix a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + "]";
  }, Object.defineProperty(r, "IDENTITY", {
    get: function() {
      return new r();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "TEMP_MATRIX", {
    get: function() {
      return new r();
    },
    enumerable: !1,
    configurable: !0
  }), r;
}(), Ga = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1], Ha = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1], za = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1], ja = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1], u_ = [], FT = [], Bd = Math.sign;
function sA() {
  for (var r = 0; r < 16; r++) {
    var t = [];
    u_.push(t);
    for (var e = 0; e < 16; e++)
      for (var i = Bd(Ga[r] * Ga[e] + za[r] * Ha[e]), n = Bd(Ha[r] * Ga[e] + ja[r] * Ha[e]), s = Bd(Ga[r] * za[e] + za[r] * ja[e]), a = Bd(Ha[r] * za[e] + ja[r] * ja[e]), o = 0; o < 16; o++)
        if (Ga[o] === i && Ha[o] === n && za[o] === s && ja[o] === a) {
          t.push(o);
          break;
        }
  }
  for (var r = 0; r < 16; r++) {
    var u = new lr();
    u.set(Ga[r], Ha[r], za[r], ja[r], 0, 0), FT.push(u);
  }
}
sA();
var ke = {
  E: 0,
  SE: 1,
  S: 2,
  SW: 3,
  W: 4,
  NW: 5,
  N: 6,
  NE: 7,
  MIRROR_VERTICAL: 8,
  MAIN_DIAGONAL: 10,
  MIRROR_HORIZONTAL: 12,
  REVERSE_DIAGONAL: 14,
  uX: function(r) {
    return Ga[r];
  },
  uY: function(r) {
    return Ha[r];
  },
  vX: function(r) {
    return za[r];
  },
  vY: function(r) {
    return ja[r];
  },
  inv: function(r) {
    return r & 8 ? r & 15 : -r & 7;
  },
  add: function(r, t) {
    return u_[r][t];
  },
  sub: function(r, t) {
    return u_[r][ke.inv(t)];
  },
  rotate180: function(r) {
    return r ^ 4;
  },
  isVertical: function(r) {
    return (r & 3) === 2;
  },
  byDirection: function(r, t) {
    return Math.abs(r) * 2 <= Math.abs(t) ? t >= 0 ? ke.S : ke.N : Math.abs(t) * 2 <= Math.abs(r) ? r > 0 ? ke.E : ke.W : t > 0 ? r > 0 ? ke.SE : ke.SW : r > 0 ? ke.NE : ke.NW;
  },
  matrixAppendRotationInv: function(r, t, e, i) {
    e === void 0 && (e = 0), i === void 0 && (i = 0);
    var n = FT[ke.inv(t)];
    n.tx = e, n.ty = i, r.append(n);
  }
}, MT = function() {
  function r() {
    this.worldTransform = new lr(), this.localTransform = new lr(), this.position = new Lu(this.onChange, this, 0, 0), this.scale = new Lu(this.onChange, this, 1, 1), this.pivot = new Lu(this.onChange, this, 0, 0), this.skew = new Lu(this.updateSkew, this, 0, 0), this._rotation = 0, this._cx = 1, this._sx = 0, this._cy = 0, this._sy = 1, this._localID = 0, this._currentLocalID = 0, this._worldID = 0, this._parentID = 0;
  }
  return r.prototype.onChange = function() {
    this._localID++;
  }, r.prototype.updateSkew = function() {
    this._cx = Math.cos(this._rotation + this.skew.y), this._sx = Math.sin(this._rotation + this.skew.y), this._cy = -Math.sin(this._rotation - this.skew.x), this._sy = Math.cos(this._rotation - this.skew.x), this._localID++;
  }, r.prototype.toString = function() {
    return "[@pixi/math:Transform " + ("position=(" + this.position.x + ", " + this.position.y + ") ") + ("rotation=" + this.rotation + " ") + ("scale=(" + this.scale.x + ", " + this.scale.y + ") ") + ("skew=(" + this.skew.x + ", " + this.skew.y + ") ") + "]";
  }, r.prototype.updateLocalTransform = function() {
    var t = this.localTransform;
    this._localID !== this._currentLocalID && (t.a = this._cx * this.scale.x, t.b = this._sx * this.scale.x, t.c = this._cy * this.scale.y, t.d = this._sy * this.scale.y, t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c), t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d), this._currentLocalID = this._localID, this._parentID = -1);
  }, r.prototype.updateTransform = function(t) {
    var e = this.localTransform;
    if (this._localID !== this._currentLocalID && (e.a = this._cx * this.scale.x, e.b = this._sx * this.scale.x, e.c = this._cy * this.scale.y, e.d = this._sy * this.scale.y, e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c), e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== t._worldID) {
      var i = t.worldTransform, n = this.worldTransform;
      n.a = e.a * i.a + e.b * i.c, n.b = e.a * i.b + e.b * i.d, n.c = e.c * i.a + e.d * i.c, n.d = e.c * i.b + e.d * i.d, n.tx = e.tx * i.a + e.ty * i.c + i.tx, n.ty = e.tx * i.b + e.ty * i.d + i.ty, this._parentID = t._worldID, this._worldID++;
    }
  }, r.prototype.setFromMatrix = function(t) {
    t.decompose(this), this._localID++;
  }, Object.defineProperty(r.prototype, "rotation", {
    get: function() {
      return this._rotation;
    },
    set: function(t) {
      this._rotation !== t && (this._rotation = t, this.updateSkew());
    },
    enumerable: !1,
    configurable: !0
  }), r.IDENTITY = new r(), r;
}();
/*!
 * @pixi/display - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
gt.SORTABLE_CHILDREN = !1;
var lv = function() {
  function r() {
    this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0, this.rect = null, this.updateID = -1;
  }
  return r.prototype.isEmpty = function() {
    return this.minX > this.maxX || this.minY > this.maxY;
  }, r.prototype.clear = function() {
    this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0;
  }, r.prototype.getRectangle = function(t) {
    return this.minX > this.maxX || this.minY > this.maxY ? Pt.EMPTY : (t = t || new Pt(0, 0, 1, 1), t.x = this.minX, t.y = this.minY, t.width = this.maxX - this.minX, t.height = this.maxY - this.minY, t);
  }, r.prototype.addPoint = function(t) {
    this.minX = Math.min(this.minX, t.x), this.maxX = Math.max(this.maxX, t.x), this.minY = Math.min(this.minY, t.y), this.maxY = Math.max(this.maxY, t.y);
  }, r.prototype.addPointMatrix = function(t, e) {
    var i = t.a, n = t.b, s = t.c, a = t.d, o = t.tx, u = t.ty, h = i * e.x + s * e.y + o, l = n * e.x + a * e.y + u;
    this.minX = Math.min(this.minX, h), this.maxX = Math.max(this.maxX, h), this.minY = Math.min(this.minY, l), this.maxY = Math.max(this.maxY, l);
  }, r.prototype.addQuad = function(t) {
    var e = this.minX, i = this.minY, n = this.maxX, s = this.maxY, a = t[0], o = t[1];
    e = a < e ? a : e, i = o < i ? o : i, n = a > n ? a : n, s = o > s ? o : s, a = t[2], o = t[3], e = a < e ? a : e, i = o < i ? o : i, n = a > n ? a : n, s = o > s ? o : s, a = t[4], o = t[5], e = a < e ? a : e, i = o < i ? o : i, n = a > n ? a : n, s = o > s ? o : s, a = t[6], o = t[7], e = a < e ? a : e, i = o < i ? o : i, n = a > n ? a : n, s = o > s ? o : s, this.minX = e, this.minY = i, this.maxX = n, this.maxY = s;
  }, r.prototype.addFrame = function(t, e, i, n, s) {
    this.addFrameMatrix(t.worldTransform, e, i, n, s);
  }, r.prototype.addFrameMatrix = function(t, e, i, n, s) {
    var a = t.a, o = t.b, u = t.c, h = t.d, l = t.tx, c = t.ty, d = this.minX, p = this.minY, g = this.maxX, v = this.maxY, m = a * e + u * i + l, _ = o * e + h * i + c;
    d = m < d ? m : d, p = _ < p ? _ : p, g = m > g ? m : g, v = _ > v ? _ : v, m = a * n + u * i + l, _ = o * n + h * i + c, d = m < d ? m : d, p = _ < p ? _ : p, g = m > g ? m : g, v = _ > v ? _ : v, m = a * e + u * s + l, _ = o * e + h * s + c, d = m < d ? m : d, p = _ < p ? _ : p, g = m > g ? m : g, v = _ > v ? _ : v, m = a * n + u * s + l, _ = o * n + h * s + c, d = m < d ? m : d, p = _ < p ? _ : p, g = m > g ? m : g, v = _ > v ? _ : v, this.minX = d, this.minY = p, this.maxX = g, this.maxY = v;
  }, r.prototype.addVertexData = function(t, e, i) {
    for (var n = this.minX, s = this.minY, a = this.maxX, o = this.maxY, u = e; u < i; u += 2) {
      var h = t[u], l = t[u + 1];
      n = h < n ? h : n, s = l < s ? l : s, a = h > a ? h : a, o = l > o ? l : o;
    }
    this.minX = n, this.minY = s, this.maxX = a, this.maxY = o;
  }, r.prototype.addVertices = function(t, e, i, n) {
    this.addVerticesMatrix(t.worldTransform, e, i, n);
  }, r.prototype.addVerticesMatrix = function(t, e, i, n, s, a) {
    s === void 0 && (s = 0), a === void 0 && (a = s);
    for (var o = t.a, u = t.b, h = t.c, l = t.d, c = t.tx, d = t.ty, p = this.minX, g = this.minY, v = this.maxX, m = this.maxY, _ = i; _ < n; _ += 2) {
      var y = e[_], b = e[_ + 1], x = o * y + h * b + c, w = l * b + u * y + d;
      p = Math.min(p, x - s), v = Math.max(v, x + s), g = Math.min(g, w - a), m = Math.max(m, w + a);
    }
    this.minX = p, this.minY = g, this.maxX = v, this.maxY = m;
  }, r.prototype.addBounds = function(t) {
    var e = this.minX, i = this.minY, n = this.maxX, s = this.maxY;
    this.minX = t.minX < e ? t.minX : e, this.minY = t.minY < i ? t.minY : i, this.maxX = t.maxX > n ? t.maxX : n, this.maxY = t.maxY > s ? t.maxY : s;
  }, r.prototype.addBoundsMask = function(t, e) {
    var i = t.minX > e.minX ? t.minX : e.minX, n = t.minY > e.minY ? t.minY : e.minY, s = t.maxX < e.maxX ? t.maxX : e.maxX, a = t.maxY < e.maxY ? t.maxY : e.maxY;
    if (i <= s && n <= a) {
      var o = this.minX, u = this.minY, h = this.maxX, l = this.maxY;
      this.minX = i < o ? i : o, this.minY = n < u ? n : u, this.maxX = s > h ? s : h, this.maxY = a > l ? a : l;
    }
  }, r.prototype.addBoundsMatrix = function(t, e) {
    this.addFrameMatrix(e, t.minX, t.minY, t.maxX, t.maxY);
  }, r.prototype.addBoundsArea = function(t, e) {
    var i = t.minX > e.x ? t.minX : e.x, n = t.minY > e.y ? t.minY : e.y, s = t.maxX < e.x + e.width ? t.maxX : e.x + e.width, a = t.maxY < e.y + e.height ? t.maxY : e.y + e.height;
    if (i <= s && n <= a) {
      var o = this.minX, u = this.minY, h = this.maxX, l = this.maxY;
      this.minX = i < o ? i : o, this.minY = n < u ? n : u, this.maxX = s > h ? s : h, this.maxY = a > l ? a : l;
    }
  }, r.prototype.pad = function(t, e) {
    t === void 0 && (t = 0), e === void 0 && (e = t), this.isEmpty() || (this.minX -= t, this.maxX += t, this.minY -= e, this.maxY += e);
  }, r.prototype.addFramePad = function(t, e, i, n, s, a) {
    t -= s, e -= a, i += s, n += a, this.minX = this.minX < t ? this.minX : t, this.maxX = this.maxX > i ? this.maxX : i, this.minY = this.minY < e ? this.minY : e, this.maxY = this.maxY > n ? this.maxY : n;
  }, r;
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var h_ = function(r, t) {
  return h_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, h_(r, t);
};
function Rb(r, t) {
  h_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Ze = function(r) {
  Rb(t, r);
  function t() {
    var e = r.call(this) || this;
    return e.tempDisplayObjectParent = null, e.transform = new MT(), e.alpha = 1, e.visible = !0, e.renderable = !0, e.cullable = !1, e.cullArea = null, e.parent = null, e.worldAlpha = 1, e._lastSortedIndex = 0, e._zIndex = 0, e.filterArea = null, e.filters = null, e._enabledFilters = null, e._bounds = new lv(), e._localBounds = null, e._boundsID = 0, e._boundsRect = null, e._localBoundsRect = null, e._mask = null, e._maskRefCount = 0, e._destroyed = !1, e.isSprite = !1, e.isMask = !1, e;
  }
  return t.mixin = function(e) {
    for (var i = Object.keys(e), n = 0; n < i.length; ++n) {
      var s = i[n];
      Object.defineProperty(t.prototype, s, Object.getOwnPropertyDescriptor(e, s));
    }
  }, Object.defineProperty(t.prototype, "destroyed", {
    get: function() {
      return this._destroyed;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype._recursivePostUpdateTransform = function() {
    this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform);
  }, t.prototype.updateTransform = function() {
    this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
  }, t.prototype.getBounds = function(e, i) {
    return e || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._bounds.updateID !== this._boundsID && (this.calculateBounds(), this._bounds.updateID = this._boundsID), i || (this._boundsRect || (this._boundsRect = new Pt()), i = this._boundsRect), this._bounds.getRectangle(i);
  }, t.prototype.getLocalBounds = function(e) {
    e || (this._localBoundsRect || (this._localBoundsRect = new Pt()), e = this._localBoundsRect), this._localBounds || (this._localBounds = new lv());
    var i = this.transform, n = this.parent;
    this.parent = null, this.transform = this._tempDisplayObjectParent.transform;
    var s = this._bounds, a = this._boundsID;
    this._bounds = this._localBounds;
    var o = this.getBounds(!1, e);
    return this.parent = n, this.transform = i, this._bounds = s, this._bounds.updateID += this._boundsID - a, o;
  }, t.prototype.toGlobal = function(e, i, n) {
    return n === void 0 && (n = !1), n || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(e, i);
  }, t.prototype.toLocal = function(e, i, n, s) {
    return i && (e = i.toGlobal(e, n, s)), s || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(e, n);
  }, t.prototype.setParent = function(e) {
    if (!e || !e.addChild)
      throw new Error("setParent: Argument must be a Container");
    return e.addChild(this), e;
  }, t.prototype.setTransform = function(e, i, n, s, a, o, u, h, l) {
    return e === void 0 && (e = 0), i === void 0 && (i = 0), n === void 0 && (n = 1), s === void 0 && (s = 1), a === void 0 && (a = 0), o === void 0 && (o = 0), u === void 0 && (u = 0), h === void 0 && (h = 0), l === void 0 && (l = 0), this.position.x = e, this.position.y = i, this.scale.x = n || 1, this.scale.y = s || 1, this.rotation = a, this.skew.x = o, this.skew.y = u, this.pivot.x = h, this.pivot.y = l, this;
  }, t.prototype.destroy = function(e) {
    this.parent && this.parent.removeChild(this), this._destroyed = !0, this.transform = null, this.parent = null, this._bounds = null, this.mask = null, this.cullArea = null, this.filters = null, this.filterArea = null, this.hitArea = null, this.interactive = !1, this.interactiveChildren = !1, this.emit("destroyed"), this.removeAllListeners();
  }, Object.defineProperty(t.prototype, "_tempDisplayObjectParent", {
    get: function() {
      return this.tempDisplayObjectParent === null && (this.tempDisplayObjectParent = new kT()), this.tempDisplayObjectParent;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.enableTempParent = function() {
    var e = this.parent;
    return this.parent = this._tempDisplayObjectParent, e;
  }, t.prototype.disableTempParent = function(e) {
    this.parent = e;
  }, Object.defineProperty(t.prototype, "x", {
    get: function() {
      return this.position.x;
    },
    set: function(e) {
      this.transform.position.x = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "y", {
    get: function() {
      return this.position.y;
    },
    set: function(e) {
      this.transform.position.y = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "worldTransform", {
    get: function() {
      return this.transform.worldTransform;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "localTransform", {
    get: function() {
      return this.transform.localTransform;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "position", {
    get: function() {
      return this.transform.position;
    },
    set: function(e) {
      this.transform.position.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "scale", {
    get: function() {
      return this.transform.scale;
    },
    set: function(e) {
      this.transform.scale.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "pivot", {
    get: function() {
      return this.transform.pivot;
    },
    set: function(e) {
      this.transform.pivot.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "skew", {
    get: function() {
      return this.transform.skew;
    },
    set: function(e) {
      this.transform.skew.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "rotation", {
    get: function() {
      return this.transform.rotation;
    },
    set: function(e) {
      this.transform.rotation = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "angle", {
    get: function() {
      return this.transform.rotation * tA;
    },
    set: function(e) {
      this.transform.rotation = e * eA;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "zIndex", {
    get: function() {
      return this._zIndex;
    },
    set: function(e) {
      this._zIndex = e, this.parent && (this.parent.sortDirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "worldVisible", {
    get: function() {
      var e = this;
      do {
        if (!e.visible)
          return !1;
        e = e.parent;
      } while (e);
      return !0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "mask", {
    get: function() {
      return this._mask;
    },
    set: function(e) {
      if (this._mask !== e) {
        if (this._mask) {
          var i = this._mask.isMaskData ? this._mask.maskObject : this._mask;
          i && (i._maskRefCount--, i._maskRefCount === 0 && (i.renderable = !0, i.isMask = !1));
        }
        if (this._mask = e, this._mask) {
          var i = this._mask.isMaskData ? this._mask.maskObject : this._mask;
          i && (i._maskRefCount === 0 && (i.renderable = !1, i.isMask = !0), i._maskRefCount++);
        }
      }
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(Fi), kT = function(r) {
  Rb(t, r);
  function t() {
    var e = r !== null && r.apply(this, arguments) || this;
    return e.sortDirty = null, e;
  }
  return t;
}(Ze);
Ze.prototype.displayObjectUpdateTransform = Ze.prototype.updateTransform;
/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var xx;
(function(r) {
  r[r.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", r[r.WEBGL = 1] = "WEBGL", r[r.WEBGL2 = 2] = "WEBGL2";
})(xx || (xx = {}));
var Ex;
(function(r) {
  r[r.UNKNOWN = 0] = "UNKNOWN", r[r.WEBGL = 1] = "WEBGL", r[r.CANVAS = 2] = "CANVAS";
})(Ex || (Ex = {}));
var wx;
(function(r) {
  r[r.COLOR = 16384] = "COLOR", r[r.DEPTH = 256] = "DEPTH", r[r.STENCIL = 1024] = "STENCIL";
})(wx || (wx = {}));
var Tx;
(function(r) {
  r[r.NORMAL = 0] = "NORMAL", r[r.ADD = 1] = "ADD", r[r.MULTIPLY = 2] = "MULTIPLY", r[r.SCREEN = 3] = "SCREEN", r[r.OVERLAY = 4] = "OVERLAY", r[r.DARKEN = 5] = "DARKEN", r[r.LIGHTEN = 6] = "LIGHTEN", r[r.COLOR_DODGE = 7] = "COLOR_DODGE", r[r.COLOR_BURN = 8] = "COLOR_BURN", r[r.HARD_LIGHT = 9] = "HARD_LIGHT", r[r.SOFT_LIGHT = 10] = "SOFT_LIGHT", r[r.DIFFERENCE = 11] = "DIFFERENCE", r[r.EXCLUSION = 12] = "EXCLUSION", r[r.HUE = 13] = "HUE", r[r.SATURATION = 14] = "SATURATION", r[r.COLOR = 15] = "COLOR", r[r.LUMINOSITY = 16] = "LUMINOSITY", r[r.NORMAL_NPM = 17] = "NORMAL_NPM", r[r.ADD_NPM = 18] = "ADD_NPM", r[r.SCREEN_NPM = 19] = "SCREEN_NPM", r[r.NONE = 20] = "NONE", r[r.SRC_OVER = 0] = "SRC_OVER", r[r.SRC_IN = 21] = "SRC_IN", r[r.SRC_OUT = 22] = "SRC_OUT", r[r.SRC_ATOP = 23] = "SRC_ATOP", r[r.DST_OVER = 24] = "DST_OVER", r[r.DST_IN = 25] = "DST_IN", r[r.DST_OUT = 26] = "DST_OUT", r[r.DST_ATOP = 27] = "DST_ATOP", r[r.ERASE = 26] = "ERASE", r[r.SUBTRACT = 28] = "SUBTRACT", r[r.XOR = 29] = "XOR";
})(Tx || (Tx = {}));
var Cx;
(function(r) {
  r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(Cx || (Cx = {}));
var Ix;
(function(r) {
  r[r.RGBA = 6408] = "RGBA", r[r.RGB = 6407] = "RGB", r[r.RG = 33319] = "RG", r[r.RED = 6403] = "RED", r[r.RGBA_INTEGER = 36249] = "RGBA_INTEGER", r[r.RGB_INTEGER = 36248] = "RGB_INTEGER", r[r.RG_INTEGER = 33320] = "RG_INTEGER", r[r.RED_INTEGER = 36244] = "RED_INTEGER", r[r.ALPHA = 6406] = "ALPHA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(Ix || (Ix = {}));
var Rx;
(function(r) {
  r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Rx || (Rx = {}));
var Sx;
(function(r) {
  r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", r[r.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", r[r.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", r[r.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", r[r.BYTE = 5120] = "BYTE", r[r.SHORT = 5122] = "SHORT", r[r.INT = 5124] = "INT", r[r.FLOAT = 5126] = "FLOAT", r[r.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", r[r.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(Sx || (Sx = {}));
var Px;
(function(r) {
  r[r.FLOAT = 0] = "FLOAT", r[r.INT = 1] = "INT", r[r.UINT = 2] = "UINT";
})(Px || (Px = {}));
var Nx;
(function(r) {
  r[r.NEAREST = 0] = "NEAREST", r[r.LINEAR = 1] = "LINEAR";
})(Nx || (Nx = {}));
var Ox;
(function(r) {
  r[r.CLAMP = 33071] = "CLAMP", r[r.REPEAT = 10497] = "REPEAT", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Ox || (Ox = {}));
var Ax;
(function(r) {
  r[r.OFF = 0] = "OFF", r[r.POW2 = 1] = "POW2", r[r.ON = 2] = "ON", r[r.ON_MANUAL = 3] = "ON_MANUAL";
})(Ax || (Ax = {}));
var Fx;
(function(r) {
  r[r.NPM = 0] = "NPM", r[r.UNPACK = 1] = "UNPACK", r[r.PMA = 2] = "PMA", r[r.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", r[r.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", r[r.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", r[r.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(Fx || (Fx = {}));
var Mx;
(function(r) {
  r[r.NO = 0] = "NO", r[r.YES = 1] = "YES", r[r.AUTO = 2] = "AUTO", r[r.BLEND = 0] = "BLEND", r[r.CLEAR = 1] = "CLEAR", r[r.BLIT = 2] = "BLIT";
})(Mx || (Mx = {}));
var kx;
(function(r) {
  r[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL";
})(kx || (kx = {}));
var Bx;
(function(r) {
  r.LOW = "lowp", r.MEDIUM = "mediump", r.HIGH = "highp";
})(Bx || (Bx = {}));
var l_;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.SCISSOR = 1] = "SCISSOR", r[r.STENCIL = 2] = "STENCIL", r[r.SPRITE = 3] = "SPRITE", r[r.COLOR = 4] = "COLOR";
})(l_ || (l_ = {}));
var Lx;
(function(r) {
  r[r.RED = 1] = "RED", r[r.GREEN = 2] = "GREEN", r[r.BLUE = 4] = "BLUE", r[r.ALPHA = 8] = "ALPHA";
})(Lx || (Lx = {}));
var Dx;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.LOW = 2] = "LOW", r[r.MEDIUM = 4] = "MEDIUM", r[r.HIGH = 8] = "HIGH";
})(Dx || (Dx = {}));
var Ux;
(function(r) {
  r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(Ux || (Ux = {}));
function aA(r, t) {
  return r.zIndex === t.zIndex ? r._lastSortedIndex - t._lastSortedIndex : r.zIndex - t.zIndex;
}
var ge = function(r) {
  Rb(t, r);
  function t() {
    var e = r.call(this) || this;
    return e.children = [], e.sortableChildren = gt.SORTABLE_CHILDREN, e.sortDirty = !1, e;
  }
  return t.prototype.onChildrenChange = function(e) {
  }, t.prototype.addChild = function() {
    for (var e = arguments, i = [], n = 0; n < arguments.length; n++)
      i[n] = e[n];
    if (i.length > 1)
      for (var s = 0; s < i.length; s++)
        this.addChild(i[s]);
    else {
      var a = i[0];
      a.parent && a.parent.removeChild(a), a.parent = this, this.sortDirty = !0, a.transform._parentID = -1, this.children.push(a), this._boundsID++, this.onChildrenChange(this.children.length - 1), this.emit("childAdded", a, this, this.children.length - 1), a.emit("added", this);
    }
    return i[0];
  }, t.prototype.addChildAt = function(e, i) {
    if (i < 0 || i > this.children.length)
      throw new Error(e + "addChildAt: The index " + i + " supplied is out of bounds " + this.children.length);
    return e.parent && e.parent.removeChild(e), e.parent = this, this.sortDirty = !0, e.transform._parentID = -1, this.children.splice(i, 0, e), this._boundsID++, this.onChildrenChange(i), e.emit("added", this), this.emit("childAdded", e, this, i), e;
  }, t.prototype.swapChildren = function(e, i) {
    if (e !== i) {
      var n = this.getChildIndex(e), s = this.getChildIndex(i);
      this.children[n] = i, this.children[s] = e, this.onChildrenChange(n < s ? n : s);
    }
  }, t.prototype.getChildIndex = function(e) {
    var i = this.children.indexOf(e);
    if (i === -1)
      throw new Error("The supplied DisplayObject must be a child of the caller");
    return i;
  }, t.prototype.setChildIndex = function(e, i) {
    if (i < 0 || i >= this.children.length)
      throw new Error("The index " + i + " supplied is out of bounds " + this.children.length);
    var n = this.getChildIndex(e);
    Yu(this.children, n, 1), this.children.splice(i, 0, e), this.onChildrenChange(i);
  }, t.prototype.getChildAt = function(e) {
    if (e < 0 || e >= this.children.length)
      throw new Error("getChildAt: Index (" + e + ") does not exist.");
    return this.children[e];
  }, t.prototype.removeChild = function() {
    for (var e = arguments, i = [], n = 0; n < arguments.length; n++)
      i[n] = e[n];
    if (i.length > 1)
      for (var s = 0; s < i.length; s++)
        this.removeChild(i[s]);
    else {
      var a = i[0], o = this.children.indexOf(a);
      if (o === -1)
        return null;
      a.parent = null, a.transform._parentID = -1, Yu(this.children, o, 1), this._boundsID++, this.onChildrenChange(o), a.emit("removed", this), this.emit("childRemoved", a, this, o);
    }
    return i[0];
  }, t.prototype.removeChildAt = function(e) {
    var i = this.getChildAt(e);
    return i.parent = null, i.transform._parentID = -1, Yu(this.children, e, 1), this._boundsID++, this.onChildrenChange(e), i.emit("removed", this), this.emit("childRemoved", i, this, e), i;
  }, t.prototype.removeChildren = function(e, i) {
    e === void 0 && (e = 0), i === void 0 && (i = this.children.length);
    var n = e, s = i, a = s - n, o;
    if (a > 0 && a <= s) {
      o = this.children.splice(n, a);
      for (var u = 0; u < o.length; ++u)
        o[u].parent = null, o[u].transform && (o[u].transform._parentID = -1);
      this._boundsID++, this.onChildrenChange(e);
      for (var u = 0; u < o.length; ++u)
        o[u].emit("removed", this), this.emit("childRemoved", o[u], this, u);
      return o;
    } else if (a === 0 && this.children.length === 0)
      return [];
    throw new RangeError("removeChildren: numeric values are outside the acceptable range.");
  }, t.prototype.sortChildren = function() {
    for (var e = !1, i = 0, n = this.children.length; i < n; ++i) {
      var s = this.children[i];
      s._lastSortedIndex = i, !e && s.zIndex !== 0 && (e = !0);
    }
    e && this.children.length > 1 && this.children.sort(aA), this.sortDirty = !1;
  }, t.prototype.updateTransform = function() {
    this.sortableChildren && this.sortDirty && this.sortChildren(), this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
    for (var e = 0, i = this.children.length; e < i; ++e) {
      var n = this.children[e];
      n.visible && n.updateTransform();
    }
  }, t.prototype.calculateBounds = function() {
    this._bounds.clear(), this._calculateBounds();
    for (var e = 0; e < this.children.length; e++) {
      var i = this.children[e];
      if (!(!i.visible || !i.renderable))
        if (i.calculateBounds(), i._mask) {
          var n = i._mask.isMaskData ? i._mask.maskObject : i._mask;
          n ? (n.calculateBounds(), this._bounds.addBoundsMask(i._bounds, n._bounds)) : this._bounds.addBounds(i._bounds);
        } else
          i.filterArea ? this._bounds.addBoundsArea(i._bounds, i.filterArea) : this._bounds.addBounds(i._bounds);
    }
    this._bounds.updateID = this._boundsID;
  }, t.prototype.getLocalBounds = function(e, i) {
    i === void 0 && (i = !1);
    var n = r.prototype.getLocalBounds.call(this, e);
    if (!i)
      for (var s = 0, a = this.children.length; s < a; ++s) {
        var o = this.children[s];
        o.visible && o.updateTransform();
      }
    return n;
  }, t.prototype._calculateBounds = function() {
  }, t.prototype._renderWithCulling = function(e) {
    var i = e.renderTexture.sourceFrame;
    if (i.width > 0 && i.height > 0) {
      var n, s;
      if (this.cullArea ? (n = this.cullArea, s = this.worldTransform) : this._render !== t.prototype._render && (n = this.getBounds(!0)), n && i.intersects(n, s))
        this._render(e);
      else if (this.cullArea)
        return;
      for (var a = 0, o = this.children.length; a < o; ++a) {
        var u = this.children[a], h = u.cullable;
        u.cullable = h || !this.cullArea, u.render(e), u.cullable = h;
      }
    }
  }, t.prototype.render = function(e) {
    if (!(!this.visible || this.worldAlpha <= 0 || !this.renderable))
      if (this._mask || this.filters && this.filters.length)
        this.renderAdvanced(e);
      else if (this.cullable)
        this._renderWithCulling(e);
      else {
        this._render(e);
        for (var i = 0, n = this.children.length; i < n; ++i)
          this.children[i].render(e);
      }
  }, t.prototype.renderAdvanced = function(e) {
    var i = this.filters, n = this._mask;
    if (i) {
      this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0;
      for (var s = 0; s < i.length; s++)
        i[s].enabled && this._enabledFilters.push(i[s]);
    }
    var a = i && this._enabledFilters && this._enabledFilters.length || n && (!n.isMaskData || n.enabled && (n.autoDetect || n.type !== l_.NONE));
    if (a && e.batch.flush(), i && this._enabledFilters && this._enabledFilters.length && e.filter.push(this, this._enabledFilters), n && e.mask.push(this, this._mask), this.cullable)
      this._renderWithCulling(e);
    else {
      this._render(e);
      for (var s = 0, o = this.children.length; s < o; ++s)
        this.children[s].render(e);
    }
    a && e.batch.flush(), n && e.mask.pop(this), i && this._enabledFilters && this._enabledFilters.length && e.filter.pop();
  }, t.prototype._render = function(e) {
  }, t.prototype.destroy = function(e) {
    r.prototype.destroy.call(this), this.sortDirty = !1;
    var i = typeof e == "boolean" ? e : e && e.children, n = this.removeChildren(0, this.children.length);
    if (i)
      for (var s = 0; s < n.length; ++s)
        n[s].destroy(e);
  }, Object.defineProperty(t.prototype, "width", {
    get: function() {
      return this.scale.x * this.getLocalBounds().width;
    },
    set: function(e) {
      var i = this.getLocalBounds().width;
      i !== 0 ? this.scale.x = e / i : this.scale.x = 1, this._width = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    get: function() {
      return this.scale.y * this.getLocalBounds().height;
    },
    set: function(e) {
      var i = this.getLocalBounds().height;
      i !== 0 ? this.scale.y = e / i : this.scale.y = 1, this._height = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(Ze);
ge.prototype.containerUpdateTransform = ge.prototype.updateTransform;
/*!
 * @pixi/extensions - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var mc = function() {
  return mc = Object.assign || function(t) {
    for (var e = arguments, i, n = 1, s = arguments.length; n < s; n++) {
      i = e[n];
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (t[a] = i[a]);
    }
    return t;
  }, mc.apply(this, arguments);
}, me;
(function(r) {
  r.Application = "application", r.RendererPlugin = "renderer-webgl-plugin", r.CanvasRendererPlugin = "renderer-canvas-plugin", r.Loader = "loader", r.LoadParser = "load-parser", r.ResolveParser = "resolve-parser", r.CacheParser = "cache-parser", r.DetectionParser = "detection-parser";
})(me || (me = {}));
var Gx = function(r) {
  if (typeof r == "function" || typeof r == "object" && r.extension) {
    if (!r.extension)
      throw new Error("Extension class must have an extension object");
    var t = typeof r.extension != "object" ? { type: r.extension } : r.extension;
    r = mc(mc({}, t), { ref: r });
  }
  if (typeof r == "object")
    r = mc({}, r);
  else
    throw new Error("Invalid extension type");
  return typeof r.type == "string" && (r.type = [r.type]), r;
}, Ns = {
  _addHandlers: null,
  _removeHandlers: null,
  _queue: {},
  remove: function() {
    for (var r = arguments, t = this, e = [], i = 0; i < arguments.length; i++)
      e[i] = r[i];
    return e.map(Gx).forEach(function(n) {
      n.type.forEach(function(s) {
        var a, o;
        return (o = (a = t._removeHandlers)[s]) === null || o === void 0 ? void 0 : o.call(a, n);
      });
    }), this;
  },
  add: function() {
    for (var r = arguments, t = this, e = [], i = 0; i < arguments.length; i++)
      e[i] = r[i];
    return e.map(Gx).forEach(function(n) {
      n.type.forEach(function(s) {
        var a = t._addHandlers, o = t._queue;
        a[s] ? a[s](n) : (o[s] = o[s] || [], o[s].push(n));
      });
    }), this;
  },
  handle: function(r, t, e) {
    var i = this._addHandlers = this._addHandlers || {}, n = this._removeHandlers = this._removeHandlers || {};
    if (i[r] || n[r])
      throw new Error("Extension type " + r + " already has a handler");
    i[r] = t, n[r] = e;
    var s = this._queue;
    return s[r] && (s[r].forEach(function(a) {
      return t(a);
    }), delete s[r]), this;
  },
  handleByMap: function(r, t) {
    return this.handle(r, function(e) {
      t[e.name] = e.ref;
    }, function(e) {
      delete t[e.name];
    });
  },
  handleByList: function(r, t) {
    return this.handle(r, function(e) {
      var i, n;
      t.push(e.ref), r === me.Loader && ((n = (i = e.ref).add) === null || n === void 0 || n.call(i));
    }, function(e) {
      var i = t.indexOf(e.ref);
      i !== -1 && t.splice(i, 1);
    });
  }
};
/*!
 * @pixi/runner - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ir = function() {
  function r(t) {
    this.items = [], this._name = t, this._aliasCount = 0;
  }
  return r.prototype.emit = function(t, e, i, n, s, a, o, u) {
    if (arguments.length > 8)
      throw new Error("max arguments reached");
    var h = this, l = h.name, c = h.items;
    this._aliasCount++;
    for (var d = 0, p = c.length; d < p; d++)
      c[d][l](t, e, i, n, s, a, o, u);
    return c === this.items && this._aliasCount--, this;
  }, r.prototype.ensureNonAliasedItems = function() {
    this._aliasCount > 0 && this.items.length > 1 && (this._aliasCount = 0, this.items = this.items.slice(0));
  }, r.prototype.add = function(t) {
    return t[this._name] && (this.ensureNonAliasedItems(), this.remove(t), this.items.push(t)), this;
  }, r.prototype.remove = function(t) {
    var e = this.items.indexOf(t);
    return e !== -1 && (this.ensureNonAliasedItems(), this.items.splice(e, 1)), this;
  }, r.prototype.contains = function(t) {
    return this.items.indexOf(t) !== -1;
  }, r.prototype.removeAll = function() {
    return this.ensureNonAliasedItems(), this.items.length = 0, this;
  }, r.prototype.destroy = function() {
    this.removeAll(), this.items = null, this._name = null;
  }, Object.defineProperty(r.prototype, "empty", {
    get: function() {
      return this.items.length === 0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "name", {
    get: function() {
      return this._name;
    },
    enumerable: !1,
    configurable: !0
  }), r;
}();
Object.defineProperties(Ir.prototype, {
  dispatch: { value: Ir.prototype.emit },
  run: { value: Ir.prototype.emit }
});
/*!
 * @pixi/ticker - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
gt.TARGET_FPMS = 0.06;
var Ss;
(function(r) {
  r[r.INTERACTION = 50] = "INTERACTION", r[r.HIGH = 25] = "HIGH", r[r.NORMAL = 0] = "NORMAL", r[r.LOW = -25] = "LOW", r[r.UTILITY = -50] = "UTILITY";
})(Ss || (Ss = {}));
var sm = function() {
  function r(t, e, i, n) {
    e === void 0 && (e = null), i === void 0 && (i = 0), n === void 0 && (n = !1), this.next = null, this.previous = null, this._destroyed = !1, this.fn = t, this.context = e, this.priority = i, this.once = n;
  }
  return r.prototype.match = function(t, e) {
    return e === void 0 && (e = null), this.fn === t && this.context === e;
  }, r.prototype.emit = function(t) {
    this.fn && (this.context ? this.fn.call(this.context, t) : this.fn(t));
    var e = this.next;
    return this.once && this.destroy(!0), this._destroyed && (this.next = null), e;
  }, r.prototype.connect = function(t) {
    this.previous = t, t.next && (t.next.previous = this), this.next = t.next, t.next = this;
  }, r.prototype.destroy = function(t) {
    t === void 0 && (t = !1), this._destroyed = !0, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous);
    var e = this.next;
    return this.next = t ? null : e, this.previous = null, e;
  }, r;
}(), He = function() {
  function r() {
    var t = this;
    this.autoStart = !1, this.deltaTime = 1, this.lastTime = -1, this.speed = 1, this.started = !1, this._requestId = null, this._maxElapsedMS = 100, this._minElapsedMS = 0, this._protected = !1, this._lastFrame = -1, this._head = new sm(null, null, 1 / 0), this.deltaMS = 1 / gt.TARGET_FPMS, this.elapsedMS = 1 / gt.TARGET_FPMS, this._tick = function(e) {
      t._requestId = null, t.started && (t.update(e), t.started && t._requestId === null && t._head.next && (t._requestId = requestAnimationFrame(t._tick)));
    };
  }
  return r.prototype._requestIfNeeded = function() {
    this._requestId === null && this._head.next && (this.lastTime = performance.now(), this._lastFrame = this.lastTime, this._requestId = requestAnimationFrame(this._tick));
  }, r.prototype._cancelIfNeeded = function() {
    this._requestId !== null && (cancelAnimationFrame(this._requestId), this._requestId = null);
  }, r.prototype._startIfPossible = function() {
    this.started ? this._requestIfNeeded() : this.autoStart && this.start();
  }, r.prototype.add = function(t, e, i) {
    return i === void 0 && (i = Ss.NORMAL), this._addListener(new sm(t, e, i));
  }, r.prototype.addOnce = function(t, e, i) {
    return i === void 0 && (i = Ss.NORMAL), this._addListener(new sm(t, e, i, !0));
  }, r.prototype._addListener = function(t) {
    var e = this._head.next, i = this._head;
    if (!e)
      t.connect(i);
    else {
      for (; e; ) {
        if (t.priority > e.priority) {
          t.connect(i);
          break;
        }
        i = e, e = e.next;
      }
      t.previous || t.connect(i);
    }
    return this._startIfPossible(), this;
  }, r.prototype.remove = function(t, e) {
    for (var i = this._head.next; i; )
      i.match(t, e) ? i = i.destroy() : i = i.next;
    return this._head.next || this._cancelIfNeeded(), this;
  }, Object.defineProperty(r.prototype, "count", {
    get: function() {
      if (!this._head)
        return 0;
      for (var t = 0, e = this._head; e = e.next; )
        t++;
      return t;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.start = function() {
    this.started || (this.started = !0, this._requestIfNeeded());
  }, r.prototype.stop = function() {
    this.started && (this.started = !1, this._cancelIfNeeded());
  }, r.prototype.destroy = function() {
    if (!this._protected) {
      this.stop();
      for (var t = this._head.next; t; )
        t = t.destroy(!0);
      this._head.destroy(), this._head = null;
    }
  }, r.prototype.update = function(t) {
    t === void 0 && (t = performance.now());
    var e;
    if (t > this.lastTime) {
      if (e = this.elapsedMS = t - this.lastTime, e > this._maxElapsedMS && (e = this._maxElapsedMS), e *= this.speed, this._minElapsedMS) {
        var i = t - this._lastFrame | 0;
        if (i < this._minElapsedMS)
          return;
        this._lastFrame = t - i % this._minElapsedMS;
      }
      this.deltaMS = e, this.deltaTime = this.deltaMS * gt.TARGET_FPMS;
      for (var n = this._head, s = n.next; s; )
        s = s.emit(this.deltaTime);
      n.next || this._cancelIfNeeded();
    } else
      this.deltaTime = this.deltaMS = this.elapsedMS = 0;
    this.lastTime = t;
  }, Object.defineProperty(r.prototype, "FPS", {
    get: function() {
      return 1e3 / this.elapsedMS;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "minFPS", {
    get: function() {
      return 1e3 / this._maxElapsedMS;
    },
    set: function(t) {
      var e = Math.min(this.maxFPS, t), i = Math.min(Math.max(0, e) / 1e3, gt.TARGET_FPMS);
      this._maxElapsedMS = 1 / i;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "maxFPS", {
    get: function() {
      return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0;
    },
    set: function(t) {
      if (t === 0)
        this._minElapsedMS = 0;
      else {
        var e = Math.max(this.minFPS, t);
        this._minElapsedMS = 1 / (e / 1e3);
      }
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "shared", {
    get: function() {
      if (!r._shared) {
        var t = r._shared = new r();
        t.autoStart = !0, t._protected = !0;
      }
      return r._shared;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "system", {
    get: function() {
      if (!r._system) {
        var t = r._system = new r();
        t.autoStart = !0, t._protected = !0;
      }
      return r._system;
    },
    enumerable: !1,
    configurable: !0
  }), r;
}(), oA = function() {
  function r() {
  }
  return r.init = function(t) {
    var e = this;
    t = Object.assign({
      autoStart: !0,
      sharedTicker: !1
    }, t), Object.defineProperty(this, "ticker", {
      set: function(i) {
        this._ticker && this._ticker.remove(this.render, this), this._ticker = i, i && i.add(this.render, this, Ss.LOW);
      },
      get: function() {
        return this._ticker;
      }
    }), this.stop = function() {
      e._ticker.stop();
    }, this.start = function() {
      e._ticker.start();
    }, this._ticker = null, this.ticker = t.sharedTicker ? He.shared : new He(), t.autoStart && this.start();
  }, r.destroy = function() {
    if (this._ticker) {
      var t = this._ticker;
      this.ticker = null, t.destroy();
    }
  }, r.extension = me.Application, r;
}();
/*!
 * @pixi/core - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
gt.PREFER_ENV = wn.any ? Is.WEBGL : Is.WEBGL2;
gt.STRICT_TEXTURE_CACHE = !1;
var c_ = [];
function BT(r, t) {
  if (!r)
    return null;
  var e = "";
  if (typeof r == "string") {
    var i = /\.(\w{3,4})(?:$|\?|#)/i.exec(r);
    i && (e = i[1].toLowerCase());
  }
  for (var n = c_.length - 1; n >= 0; --n) {
    var s = c_[n];
    if (s.test && s.test(r, e))
      return new s(r, t);
  }
  throw new Error("Unrecognized source type to auto-detect Resource");
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var f_ = function(r, t) {
  return f_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, f_(r, t);
};
function Se(r, t) {
  f_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var d_ = function() {
  return d_ = Object.assign || function(t) {
    for (var e = arguments, i, n = 1, s = arguments.length; n < s; n++) {
      i = e[n];
      for (var a in i)
        Object.prototype.hasOwnProperty.call(i, a) && (t[a] = i[a]);
    }
    return t;
  }, d_.apply(this, arguments);
};
function uA(r, t) {
  var e = {};
  for (var i in r)
    Object.prototype.hasOwnProperty.call(r, i) && t.indexOf(i) < 0 && (e[i] = r[i]);
  if (r != null && typeof Object.getOwnPropertySymbols == "function")
    for (var n = 0, i = Object.getOwnPropertySymbols(r); n < i.length; n++)
      t.indexOf(i[n]) < 0 && Object.prototype.propertyIsEnumerable.call(r, i[n]) && (e[i[n]] = r[i[n]]);
  return e;
}
var Gc = function() {
  function r(t, e) {
    t === void 0 && (t = 0), e === void 0 && (e = 0), this._width = t, this._height = e, this.destroyed = !1, this.internal = !1, this.onResize = new Ir("setRealSize"), this.onUpdate = new Ir("update"), this.onError = new Ir("onError");
  }
  return r.prototype.bind = function(t) {
    this.onResize.add(t), this.onUpdate.add(t), this.onError.add(t), (this._width || this._height) && this.onResize.emit(this._width, this._height);
  }, r.prototype.unbind = function(t) {
    this.onResize.remove(t), this.onUpdate.remove(t), this.onError.remove(t);
  }, r.prototype.resize = function(t, e) {
    (t !== this._width || e !== this._height) && (this._width = t, this._height = e, this.onResize.emit(t, e));
  }, Object.defineProperty(r.prototype, "valid", {
    get: function() {
      return !!this._width && !!this._height;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.update = function() {
    this.destroyed || this.onUpdate.emit();
  }, r.prototype.load = function() {
    return Promise.resolve(this);
  }, Object.defineProperty(r.prototype, "width", {
    get: function() {
      return this._width;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "height", {
    get: function() {
      return this._height;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.style = function(t, e, i) {
    return !1;
  }, r.prototype.dispose = function() {
  }, r.prototype.destroy = function() {
    this.destroyed || (this.destroyed = !0, this.dispose(), this.onError.removeAll(), this.onError = null, this.onResize.removeAll(), this.onResize = null, this.onUpdate.removeAll(), this.onUpdate = null);
  }, r.test = function(t, e) {
    return !1;
  }, r;
}(), pd = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = this, s = i || {}, a = s.width, o = s.height;
    if (!a || !o)
      throw new Error("BufferResource width or height invalid");
    return n = r.call(this, a, o) || this, n.data = e, n;
  }
  return t.prototype.upload = function(e, i, n) {
    var s = e.gl;
    s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.alphaMode === tn.UNPACK);
    var a = i.realWidth, o = i.realHeight;
    return n.width === a && n.height === o ? s.texSubImage2D(i.target, 0, 0, 0, a, o, i.format, n.type, this.data) : (n.width = a, n.height = o, s.texImage2D(i.target, 0, n.internalFormat, a, o, 0, i.format, n.type, this.data)), !0;
  }, t.prototype.dispose = function() {
    this.data = null;
  }, t.test = function(e) {
    return e instanceof Float32Array || e instanceof Uint8Array || e instanceof Uint32Array;
  }, t;
}(Gc), hA = {
  scaleMode: bs.NEAREST,
  format: lt.RGBA,
  alphaMode: tn.NPM
}, Zt = function(r) {
  Se(t, r);
  function t(e, i) {
    e === void 0 && (e = null), i === void 0 && (i = null);
    var n = r.call(this) || this;
    i = i || {};
    var s = i.alphaMode, a = i.mipmap, o = i.anisotropicLevel, u = i.scaleMode, h = i.width, l = i.height, c = i.wrapMode, d = i.format, p = i.type, g = i.target, v = i.resolution, m = i.resourceOptions;
    return e && !(e instanceof Gc) && (e = BT(e, m), e.internal = !0), n.resolution = v || gt.RESOLUTION, n.width = Math.round((h || 0) * n.resolution) / n.resolution, n.height = Math.round((l || 0) * n.resolution) / n.resolution, n._mipmap = a !== void 0 ? a : gt.MIPMAP_TEXTURES, n.anisotropicLevel = o !== void 0 ? o : gt.ANISOTROPIC_LEVEL, n._wrapMode = c || gt.WRAP_MODE, n._scaleMode = u !== void 0 ? u : gt.SCALE_MODE, n.format = d || lt.RGBA, n.type = p || Tt.UNSIGNED_BYTE, n.target = g || Jo.TEXTURE_2D, n.alphaMode = s !== void 0 ? s : tn.UNPACK, n.uid = ru(), n.touched = 0, n.isPowerOfTwo = !1, n._refreshPOT(), n._glTextures = {}, n.dirtyId = 0, n.dirtyStyleId = 0, n.cacheId = null, n.valid = h > 0 && l > 0, n.textureCacheIds = [], n.destroyed = !1, n.resource = null, n._batchEnabled = 0, n._batchLocation = 0, n.parentTextureArray = null, n.setResource(e), n;
  }
  return Object.defineProperty(t.prototype, "realWidth", {
    get: function() {
      return Math.round(this.width * this.resolution);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "realHeight", {
    get: function() {
      return Math.round(this.height * this.resolution);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "mipmap", {
    get: function() {
      return this._mipmap;
    },
    set: function(e) {
      this._mipmap !== e && (this._mipmap = e, this.dirtyStyleId++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "scaleMode", {
    get: function() {
      return this._scaleMode;
    },
    set: function(e) {
      this._scaleMode !== e && (this._scaleMode = e, this.dirtyStyleId++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "wrapMode", {
    get: function() {
      return this._wrapMode;
    },
    set: function(e) {
      this._wrapMode !== e && (this._wrapMode = e, this.dirtyStyleId++);
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.setStyle = function(e, i) {
    var n;
    return e !== void 0 && e !== this.scaleMode && (this.scaleMode = e, n = !0), i !== void 0 && i !== this.mipmap && (this.mipmap = i, n = !0), n && this.dirtyStyleId++, this;
  }, t.prototype.setSize = function(e, i, n) {
    return n = n || this.resolution, this.setRealSize(e * n, i * n, n);
  }, t.prototype.setRealSize = function(e, i, n) {
    return this.resolution = n || this.resolution, this.width = Math.round(e) / this.resolution, this.height = Math.round(i) / this.resolution, this._refreshPOT(), this.update(), this;
  }, t.prototype._refreshPOT = function() {
    this.isPowerOfTwo = gx(this.realWidth) && gx(this.realHeight);
  }, t.prototype.setResolution = function(e) {
    var i = this.resolution;
    return i === e ? this : (this.resolution = e, this.valid && (this.width = Math.round(this.width * i) / e, this.height = Math.round(this.height * i) / e, this.emit("update", this)), this._refreshPOT(), this);
  }, t.prototype.setResource = function(e) {
    if (this.resource === e)
      return this;
    if (this.resource)
      throw new Error("Resource can be set only once");
    return e.bind(this), this.resource = e, this;
  }, t.prototype.update = function() {
    this.valid ? (this.dirtyId++, this.dirtyStyleId++, this.emit("update", this)) : this.width > 0 && this.height > 0 && (this.valid = !0, this.emit("loaded", this), this.emit("update", this));
  }, t.prototype.onError = function(e) {
    this.emit("error", this, e);
  }, t.prototype.destroy = function() {
    this.resource && (this.resource.unbind(this), this.resource.internal && this.resource.destroy(), this.resource = null), this.cacheId && (delete Xn[this.cacheId], delete Zr[this.cacheId], this.cacheId = null), this.dispose(), t.removeFromCache(this), this.textureCacheIds = null, this.destroyed = !0;
  }, t.prototype.dispose = function() {
    this.emit("dispose", this);
  }, t.prototype.castToBaseTexture = function() {
    return this;
  }, t.from = function(e, i, n) {
    n === void 0 && (n = gt.STRICT_TEXTURE_CACHE);
    var s = typeof e == "string", a = null;
    if (s)
      a = e;
    else {
      if (!e._pixiId) {
        var o = i && i.pixiIdPrefix || "pixiid";
        e._pixiId = o + "_" + ru();
      }
      a = e._pixiId;
    }
    var u = Xn[a];
    if (s && n && !u)
      throw new Error('The cacheId "' + a + '" does not exist in BaseTextureCache.');
    return u || (u = new t(e, i), u.cacheId = a, t.addToCache(u, a)), u;
  }, t.fromBuffer = function(e, i, n, s) {
    e = e || new Float32Array(i * n * 4);
    var a = new pd(e, { width: i, height: n }), o = e instanceof Float32Array ? Tt.FLOAT : Tt.UNSIGNED_BYTE;
    return new t(a, Object.assign(hA, s || { width: i, height: n, type: o }));
  }, t.addToCache = function(e, i) {
    i && (e.textureCacheIds.indexOf(i) === -1 && e.textureCacheIds.push(i), Xn[i] && console.warn("BaseTexture added to the cache with an id [" + i + "] that already had an entry"), Xn[i] = e);
  }, t.removeFromCache = function(e) {
    if (typeof e == "string") {
      var i = Xn[e];
      if (i) {
        var n = i.textureCacheIds.indexOf(e);
        return n > -1 && i.textureCacheIds.splice(n, 1), delete Xn[e], i;
      }
    } else if (e && e.textureCacheIds) {
      for (var s = 0; s < e.textureCacheIds.length; ++s)
        delete Xn[e.textureCacheIds[s]];
      return e.textureCacheIds.length = 0, e;
    }
    return null;
  }, t._globalBatch = 0, t;
}(Fi), LT = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = this, s = i || {}, a = s.width, o = s.height;
    n = r.call(this, a, o) || this, n.items = [], n.itemDirtyIds = [];
    for (var u = 0; u < e; u++) {
      var h = new Zt();
      n.items.push(h), n.itemDirtyIds.push(-2);
    }
    return n.length = e, n._load = null, n.baseTexture = null, n;
  }
  return t.prototype.initFromArray = function(e, i) {
    for (var n = 0; n < this.length; n++)
      !e[n] || (e[n].castToBaseTexture ? this.addBaseTextureAt(e[n].castToBaseTexture(), n) : e[n] instanceof Gc ? this.addResourceAt(e[n], n) : this.addResourceAt(BT(e[n], i), n));
  }, t.prototype.dispose = function() {
    for (var e = 0, i = this.length; e < i; e++)
      this.items[e].destroy();
    this.items = null, this.itemDirtyIds = null, this._load = null;
  }, t.prototype.addResourceAt = function(e, i) {
    if (!this.items[i])
      throw new Error("Index " + i + " is out of bounds");
    return e.valid && !this.valid && this.resize(e.width, e.height), this.items[i].setResource(e), this;
  }, t.prototype.bind = function(e) {
    if (this.baseTexture !== null)
      throw new Error("Only one base texture per TextureArray is allowed");
    r.prototype.bind.call(this, e);
    for (var i = 0; i < this.length; i++)
      this.items[i].parentTextureArray = e, this.items[i].on("update", e.update, e);
  }, t.prototype.unbind = function(e) {
    r.prototype.unbind.call(this, e);
    for (var i = 0; i < this.length; i++)
      this.items[i].parentTextureArray = null, this.items[i].off("update", e.update, e);
  }, t.prototype.load = function() {
    var e = this;
    if (this._load)
      return this._load;
    var i = this.items.map(function(s) {
      return s.resource;
    }).filter(function(s) {
      return s;
    }), n = i.map(function(s) {
      return s.load();
    });
    return this._load = Promise.all(n).then(function() {
      var s = e.items[0], a = s.realWidth, o = s.realHeight;
      return e.resize(a, o), Promise.resolve(e);
    }), this._load;
  }, t;
}(Gc), lA = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = this, s = i || {}, a = s.width, o = s.height, u, h;
    return Array.isArray(e) ? (u = e, h = e.length) : h = e, n = r.call(this, h, { width: a, height: o }) || this, u && n.initFromArray(u, i), n;
  }
  return t.prototype.addBaseTextureAt = function(e, i) {
    if (e.resource)
      this.addResourceAt(e.resource, i);
    else
      throw new Error("ArrayResource does not support RenderTexture");
    return this;
  }, t.prototype.bind = function(e) {
    r.prototype.bind.call(this, e), e.target = Jo.TEXTURE_2D_ARRAY;
  }, t.prototype.upload = function(e, i, n) {
    var s = this, a = s.length, o = s.itemDirtyIds, u = s.items, h = e.gl;
    n.dirtyId < 0 && h.texImage3D(h.TEXTURE_2D_ARRAY, 0, n.internalFormat, this._width, this._height, a, 0, i.format, n.type, null);
    for (var l = 0; l < a; l++) {
      var c = u[l];
      o[l] < c.dirtyId && (o[l] = c.dirtyId, c.valid && h.texSubImage3D(
        h.TEXTURE_2D_ARRAY,
        0,
        0,
        0,
        l,
        c.resource.width,
        c.resource.height,
        1,
        i.format,
        n.type,
        c.resource.source
      ));
    }
    return !0;
  }, t;
}(LT), Sa = function(r) {
  Se(t, r);
  function t(e) {
    var i = this, n = e, s = n.naturalWidth || n.videoWidth || n.width, a = n.naturalHeight || n.videoHeight || n.height;
    return i = r.call(this, s, a) || this, i.source = e, i.noSubImage = !1, i;
  }
  return t.crossOrigin = function(e, i, n) {
    n === void 0 && i.indexOf("data:") !== 0 ? e.crossOrigin = QO(i) : n !== !1 && (e.crossOrigin = typeof n == "string" ? n : "anonymous");
  }, t.prototype.upload = function(e, i, n, s) {
    var a = e.gl, o = i.realWidth, u = i.realHeight;
    if (s = s || this.source, s instanceof HTMLImageElement) {
      if (!s.complete || s.naturalWidth === 0)
        return !1;
    } else if (s instanceof HTMLVideoElement && s.readyState <= 1)
      return !1;
    return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.alphaMode === tn.UNPACK), !this.noSubImage && i.target === a.TEXTURE_2D && n.width === o && n.height === u ? a.texSubImage2D(a.TEXTURE_2D, 0, 0, 0, i.format, n.type, s) : (n.width = o, n.height = u, a.texImage2D(i.target, 0, n.internalFormat, i.format, n.type, s)), !0;
  }, t.prototype.update = function() {
    if (!this.destroyed) {
      var e = this.source, i = e.naturalWidth || e.videoWidth || e.width, n = e.naturalHeight || e.videoHeight || e.height;
      this.resize(i, n), r.prototype.update.call(this);
    }
  }, t.prototype.dispose = function() {
    this.source = null;
  }, t;
}(Gc), cA = function(r) {
  Se(t, r);
  function t(e) {
    return r.call(this, e) || this;
  }
  return t.test = function(e) {
    var i = globalThis.OffscreenCanvas;
    return i && e instanceof i ? !0 : globalThis.HTMLCanvasElement && e instanceof HTMLCanvasElement;
  }, t;
}(Sa), fA = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = this, s = i || {}, a = s.width, o = s.height, u = s.autoLoad, h = s.linkBaseTexture;
    if (e && e.length !== t.SIDES)
      throw new Error("Invalid length. Got " + e.length + ", expected 6");
    n = r.call(this, 6, { width: a, height: o }) || this;
    for (var l = 0; l < t.SIDES; l++)
      n.items[l].target = Jo.TEXTURE_CUBE_MAP_POSITIVE_X + l;
    return n.linkBaseTexture = h !== !1, e && n.initFromArray(e, i), u !== !1 && n.load(), n;
  }
  return t.prototype.bind = function(e) {
    r.prototype.bind.call(this, e), e.target = Jo.TEXTURE_CUBE_MAP;
  }, t.prototype.addBaseTextureAt = function(e, i, n) {
    if (!this.items[i])
      throw new Error("Index " + i + " is out of bounds");
    if (!this.linkBaseTexture || e.parentTextureArray || Object.keys(e._glTextures).length > 0)
      if (e.resource)
        this.addResourceAt(e.resource, i);
      else
        throw new Error("CubeResource does not support copying of renderTexture.");
    else
      e.target = Jo.TEXTURE_CUBE_MAP_POSITIVE_X + i, e.parentTextureArray = this.baseTexture, this.items[i] = e;
    return e.valid && !this.valid && this.resize(e.realWidth, e.realHeight), this.items[i] = e, this;
  }, t.prototype.upload = function(e, i, n) {
    for (var s = this.itemDirtyIds, a = 0; a < t.SIDES; a++) {
      var o = this.items[a];
      (s[a] < o.dirtyId || n.dirtyId < i.dirtyId) && (o.valid && o.resource ? (o.resource.upload(e, o, n), s[a] = o.dirtyId) : s[a] < -1 && (e.gl.texImage2D(o.target, 0, n.internalFormat, i.realWidth, i.realHeight, 0, i.format, n.type, null), s[a] = -1));
    }
    return !0;
  }, t.test = function(e) {
    return Array.isArray(e) && e.length === t.SIDES;
  }, t.SIDES = 6, t;
}(LT), DT = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = this;
    if (i = i || {}, !(e instanceof HTMLImageElement)) {
      var s = new Image();
      Sa.crossOrigin(s, e, i.crossorigin), s.src = e, e = s;
    }
    return n = r.call(this, e) || this, !e.complete && !!n._width && !!n._height && (n._width = 0, n._height = 0), n.url = e.src, n._process = null, n.preserveBitmap = !1, n.createBitmap = (i.createBitmap !== void 0 ? i.createBitmap : gt.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap, n.alphaMode = typeof i.alphaMode == "number" ? i.alphaMode : null, n.bitmap = null, n._load = null, i.autoLoad !== !1 && n.load(), n;
  }
  return t.prototype.load = function(e) {
    var i = this;
    return this._load ? this._load : (e !== void 0 && (this.createBitmap = e), this._load = new Promise(function(n, s) {
      var a = i.source;
      i.url = a.src;
      var o = function() {
        i.destroyed || (a.onload = null, a.onerror = null, i.resize(a.width, a.height), i._load = null, i.createBitmap ? n(i.process()) : n(i));
      };
      a.complete && a.src ? o() : (a.onload = o, a.onerror = function(u) {
        s(u), i.onError.emit(u);
      });
    }), this._load);
  }, t.prototype.process = function() {
    var e = this, i = this.source;
    if (this._process !== null)
      return this._process;
    if (this.bitmap !== null || !globalThis.createImageBitmap)
      return Promise.resolve(this);
    var n = globalThis.createImageBitmap, s = !i.crossOrigin || i.crossOrigin === "anonymous";
    return this._process = fetch(i.src, {
      mode: s ? "cors" : "no-cors"
    }).then(function(a) {
      return a.blob();
    }).then(function(a) {
      return n(a, 0, 0, i.width, i.height, {
        premultiplyAlpha: e.alphaMode === tn.UNPACK ? "premultiply" : "none"
      });
    }).then(function(a) {
      return e.destroyed ? Promise.reject() : (e.bitmap = a, e.update(), e._process = null, Promise.resolve(e));
    }), this._process;
  }, t.prototype.upload = function(e, i, n) {
    if (typeof this.alphaMode == "number" && (i.alphaMode = this.alphaMode), !this.createBitmap)
      return r.prototype.upload.call(this, e, i, n);
    if (!this.bitmap && (this.process(), !this.bitmap))
      return !1;
    if (r.prototype.upload.call(this, e, i, n, this.bitmap), !this.preserveBitmap) {
      var s = !0, a = i._glTextures;
      for (var o in a) {
        var u = a[o];
        if (u !== n && u.dirtyId !== i.dirtyId) {
          s = !1;
          break;
        }
      }
      s && (this.bitmap.close && this.bitmap.close(), this.bitmap = null);
    }
    return !0;
  }, t.prototype.dispose = function() {
    this.source.onload = null, this.source.onerror = null, r.prototype.dispose.call(this), this.bitmap && (this.bitmap.close(), this.bitmap = null), this._process = null, this._load = null;
  }, t.test = function(e) {
    return typeof e == "string" || e instanceof HTMLImageElement;
  }, t;
}(Sa), dA = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = this;
    return i = i || {}, n = r.call(this, gt.ADAPTER.createCanvas()) || this, n._width = 0, n._height = 0, n.svg = e, n.scale = i.scale || 1, n._overrideWidth = i.width, n._overrideHeight = i.height, n._resolve = null, n._crossorigin = i.crossorigin, n._load = null, i.autoLoad !== !1 && n.load(), n;
  }
  return t.prototype.load = function() {
    var e = this;
    return this._load ? this._load : (this._load = new Promise(function(i) {
      if (e._resolve = function() {
        e.resize(e.source.width, e.source.height), i(e);
      }, t.SVG_XML.test(e.svg.trim())) {
        if (!btoa)
          throw new Error("Your browser doesn't support base64 conversions.");
        e.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(e.svg)));
      }
      e._loadSvg();
    }), this._load);
  }, t.prototype._loadSvg = function() {
    var e = this, i = new Image();
    Sa.crossOrigin(i, this.svg, this._crossorigin), i.src = this.svg, i.onerror = function(n) {
      !e._resolve || (i.onerror = null, e.onError.emit(n));
    }, i.onload = function() {
      if (!!e._resolve) {
        var n = i.width, s = i.height;
        if (!n || !s)
          throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
        var a = n * e.scale, o = s * e.scale;
        (e._overrideWidth || e._overrideHeight) && (a = e._overrideWidth || e._overrideHeight / s * n, o = e._overrideHeight || e._overrideWidth / n * s), a = Math.round(a), o = Math.round(o);
        var u = e.source;
        u.width = a, u.height = o, u._pixiId = "canvas_" + ru(), u.getContext("2d").drawImage(i, 0, 0, n, s, 0, 0, a, o), e._resolve(), e._resolve = null;
      }
    };
  }, t.getSize = function(e) {
    var i = t.SVG_SIZE.exec(e), n = {};
    return i && (n[i[1]] = Math.round(parseFloat(i[3])), n[i[5]] = Math.round(parseFloat(i[7]))), n;
  }, t.prototype.dispose = function() {
    r.prototype.dispose.call(this), this._resolve = null, this._crossorigin = null;
  }, t.test = function(e, i) {
    return i === "svg" || typeof e == "string" && /^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e) || typeof e == "string" && t.SVG_XML.test(e);
  }, t.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m, t.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i, t;
}(Sa), pA = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = this;
    if (i = i || {}, !(e instanceof HTMLVideoElement)) {
      var s = document.createElement("video");
      s.setAttribute("preload", "auto"), s.setAttribute("webkit-playsinline", ""), s.setAttribute("playsinline", ""), typeof e == "string" && (e = [e]);
      var a = e[0].src || e[0];
      Sa.crossOrigin(s, a, i.crossorigin);
      for (var o = 0; o < e.length; ++o) {
        var u = document.createElement("source"), h = e[o], l = h.src, c = h.mime;
        l = l || e[o];
        var d = l.split("?").shift().toLowerCase(), p = d.slice(d.lastIndexOf(".") + 1);
        c = c || t.MIME_TYPES[p] || "video/" + p, u.src = l, u.type = c, s.appendChild(u);
      }
      e = s;
    }
    return n = r.call(this, e) || this, n.noSubImage = !0, n._autoUpdate = !0, n._isConnectedToTicker = !1, n._updateFPS = i.updateFPS || 0, n._msToNextUpdate = 0, n.autoPlay = i.autoPlay !== !1, n._load = null, n._resolve = null, n._onCanPlay = n._onCanPlay.bind(n), n._onError = n._onError.bind(n), i.autoLoad !== !1 && n.load(), n;
  }
  return t.prototype.update = function(e) {
    if (!this.destroyed) {
      var i = He.shared.elapsedMS * this.source.playbackRate;
      this._msToNextUpdate = Math.floor(this._msToNextUpdate - i), (!this._updateFPS || this._msToNextUpdate <= 0) && (r.prototype.update.call(this), this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0);
    }
  }, t.prototype.load = function() {
    var e = this;
    if (this._load)
      return this._load;
    var i = this.source;
    return (i.readyState === i.HAVE_ENOUGH_DATA || i.readyState === i.HAVE_FUTURE_DATA) && i.width && i.height && (i.complete = !0), i.addEventListener("play", this._onPlayStart.bind(this)), i.addEventListener("pause", this._onPlayStop.bind(this)), this._isSourceReady() ? this._onCanPlay() : (i.addEventListener("canplay", this._onCanPlay), i.addEventListener("canplaythrough", this._onCanPlay), i.addEventListener("error", this._onError, !0)), this._load = new Promise(function(n) {
      e.valid ? n(e) : (e._resolve = n, i.load());
    }), this._load;
  }, t.prototype._onError = function(e) {
    this.source.removeEventListener("error", this._onError, !0), this.onError.emit(e);
  }, t.prototype._isSourcePlaying = function() {
    var e = this.source;
    return e.currentTime > 0 && e.paused === !1 && e.ended === !1 && e.readyState > 2;
  }, t.prototype._isSourceReady = function() {
    var e = this.source;
    return e.readyState === 3 || e.readyState === 4;
  }, t.prototype._onPlayStart = function() {
    this.valid || this._onCanPlay(), this.autoUpdate && !this._isConnectedToTicker && (He.shared.add(this.update, this), this._isConnectedToTicker = !0);
  }, t.prototype._onPlayStop = function() {
    this._isConnectedToTicker && (He.shared.remove(this.update, this), this._isConnectedToTicker = !1);
  }, t.prototype._onCanPlay = function() {
    var e = this.source;
    e.removeEventListener("canplay", this._onCanPlay), e.removeEventListener("canplaythrough", this._onCanPlay);
    var i = this.valid;
    this.resize(e.videoWidth, e.videoHeight), !i && this._resolve && (this._resolve(this), this._resolve = null), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && e.play();
  }, t.prototype.dispose = function() {
    this._isConnectedToTicker && (He.shared.remove(this.update, this), this._isConnectedToTicker = !1);
    var e = this.source;
    e && (e.removeEventListener("error", this._onError, !0), e.pause(), e.src = "", e.load()), r.prototype.dispose.call(this);
  }, Object.defineProperty(t.prototype, "autoUpdate", {
    get: function() {
      return this._autoUpdate;
    },
    set: function(e) {
      e !== this._autoUpdate && (this._autoUpdate = e, !this._autoUpdate && this._isConnectedToTicker ? (He.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (He.shared.add(this.update, this), this._isConnectedToTicker = !0));
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "updateFPS", {
    get: function() {
      return this._updateFPS;
    },
    set: function(e) {
      e !== this._updateFPS && (this._updateFPS = e);
    },
    enumerable: !1,
    configurable: !0
  }), t.test = function(e, i) {
    return globalThis.HTMLVideoElement && e instanceof HTMLVideoElement || t.TYPES.indexOf(i) > -1;
  }, t.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"], t.MIME_TYPES = {
    ogv: "video/ogg",
    mov: "video/quicktime",
    m4v: "video/mp4"
  }, t;
}(Sa), vA = function(r) {
  Se(t, r);
  function t(e) {
    return r.call(this, e) || this;
  }
  return t.test = function(e) {
    return !!globalThis.createImageBitmap && typeof ImageBitmap < "u" && e instanceof ImageBitmap;
  }, t;
}(Sa);
c_.push(DT, vA, cA, pA, dA, pd, fA, lA);
var gA = function(r) {
  Se(t, r);
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  return t.prototype.upload = function(e, i, n) {
    var s = e.gl;
    s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.alphaMode === tn.UNPACK);
    var a = i.realWidth, o = i.realHeight;
    return n.width === a && n.height === o ? s.texSubImage2D(i.target, 0, 0, 0, a, o, i.format, n.type, this.data) : (n.width = a, n.height = o, s.texImage2D(i.target, 0, n.internalFormat, a, o, 0, i.format, n.type, this.data)), !0;
  }, t;
}(pd), p_ = function() {
  function r(t, e) {
    this.width = Math.round(t || 100), this.height = Math.round(e || 100), this.stencil = !1, this.depth = !1, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.depthTexture = null, this.colorTextures = [], this.glFramebuffers = {}, this.disposeRunner = new Ir("disposeFramebuffer"), this.multisample = tr.NONE;
  }
  return Object.defineProperty(r.prototype, "colorTexture", {
    get: function() {
      return this.colorTextures[0];
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.addColorTexture = function(t, e) {
    return t === void 0 && (t = 0), this.colorTextures[t] = e || new Zt(null, {
      scaleMode: bs.NEAREST,
      resolution: 1,
      mipmap: Rs.OFF,
      width: this.width,
      height: this.height
    }), this.dirtyId++, this.dirtyFormat++, this;
  }, r.prototype.addDepthTexture = function(t) {
    return this.depthTexture = t || new Zt(new gA(null, { width: this.width, height: this.height }), {
      scaleMode: bs.NEAREST,
      resolution: 1,
      width: this.width,
      height: this.height,
      mipmap: Rs.OFF,
      format: lt.DEPTH_COMPONENT,
      type: Tt.UNSIGNED_SHORT
    }), this.dirtyId++, this.dirtyFormat++, this;
  }, r.prototype.enableDepth = function() {
    return this.depth = !0, this.dirtyId++, this.dirtyFormat++, this;
  }, r.prototype.enableStencil = function() {
    return this.stencil = !0, this.dirtyId++, this.dirtyFormat++, this;
  }, r.prototype.resize = function(t, e) {
    if (t = Math.round(t), e = Math.round(e), !(t === this.width && e === this.height)) {
      this.width = t, this.height = e, this.dirtyId++, this.dirtySize++;
      for (var i = 0; i < this.colorTextures.length; i++) {
        var n = this.colorTextures[i], s = n.resolution;
        n.setSize(t / s, e / s);
      }
      if (this.depthTexture) {
        var s = this.depthTexture.resolution;
        this.depthTexture.setSize(t / s, e / s);
      }
    }
  }, r.prototype.dispose = function() {
    this.disposeRunner.emit(this, !1);
  }, r.prototype.destroyDepthTexture = function() {
    this.depthTexture && (this.depthTexture.destroy(), this.depthTexture = null, ++this.dirtyId, ++this.dirtyFormat);
  }, r;
}(), UT = function(r) {
  Se(t, r);
  function t(e) {
    e === void 0 && (e = {});
    var i = this;
    if (typeof e == "number") {
      var n = arguments[0], s = arguments[1], a = arguments[2], o = arguments[3];
      e = { width: n, height: s, scaleMode: a, resolution: o };
    }
    return e.width = e.width || 100, e.height = e.height || 100, e.multisample = e.multisample !== void 0 ? e.multisample : tr.NONE, i = r.call(this, null, e) || this, i.mipmap = Rs.OFF, i.valid = !0, i.clearColor = [0, 0, 0, 0], i.framebuffer = new p_(i.realWidth, i.realHeight).addColorTexture(0, i), i.framebuffer.multisample = e.multisample, i.maskStack = [], i.filterStack = [{}], i;
  }
  return t.prototype.resize = function(e, i) {
    this.framebuffer.resize(e * this.resolution, i * this.resolution), this.setRealSize(this.framebuffer.width, this.framebuffer.height);
  }, t.prototype.dispose = function() {
    this.framebuffer.dispose(), r.prototype.dispose.call(this);
  }, t.prototype.destroy = function() {
    r.prototype.destroy.call(this), this.framebuffer.destroyDepthTexture(), this.framebuffer = null;
  }, t;
}(Zt), GT = function() {
  function r() {
    this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsFloat32 = new Float32Array(8);
  }
  return r.prototype.set = function(t, e, i) {
    var n = e.width, s = e.height;
    if (i) {
      var a = t.width / 2 / n, o = t.height / 2 / s, u = t.x / n + a, h = t.y / s + o;
      i = ke.add(i, ke.NW), this.x0 = u + a * ke.uX(i), this.y0 = h + o * ke.uY(i), i = ke.add(i, 2), this.x1 = u + a * ke.uX(i), this.y1 = h + o * ke.uY(i), i = ke.add(i, 2), this.x2 = u + a * ke.uX(i), this.y2 = h + o * ke.uY(i), i = ke.add(i, 2), this.x3 = u + a * ke.uX(i), this.y3 = h + o * ke.uY(i);
    } else
      this.x0 = t.x / n, this.y0 = t.y / s, this.x1 = (t.x + t.width) / n, this.y1 = t.y / s, this.x2 = (t.x + t.width) / n, this.y2 = (t.y + t.height) / s, this.x3 = t.x / n, this.y3 = (t.y + t.height) / s;
    this.uvsFloat32[0] = this.x0, this.uvsFloat32[1] = this.y0, this.uvsFloat32[2] = this.x1, this.uvsFloat32[3] = this.y1, this.uvsFloat32[4] = this.x2, this.uvsFloat32[5] = this.y2, this.uvsFloat32[6] = this.x3, this.uvsFloat32[7] = this.y3;
  }, r.prototype.toString = function() {
    return "[@pixi/core:TextureUvs " + ("x0=" + this.x0 + " y0=" + this.y0 + " ") + ("x1=" + this.x1 + " y1=" + this.y1 + " x2=" + this.x2 + " ") + ("y2=" + this.y2 + " x3=" + this.x3 + " y3=" + this.y3) + "]";
  }, r;
}(), Hx = new GT();
function Ld(r) {
  r.destroy = function() {
  }, r.on = function() {
  }, r.once = function() {
  }, r.emit = function() {
  };
}
var It = function(r) {
  Se(t, r);
  function t(e, i, n, s, a, o) {
    var u = r.call(this) || this;
    if (u.noFrame = !1, i || (u.noFrame = !0, i = new Pt(0, 0, 1, 1)), e instanceof t && (e = e.baseTexture), u.baseTexture = e, u._frame = i, u.trim = s, u.valid = !1, u._uvs = Hx, u.uvMatrix = null, u.orig = n || i, u._rotate = Number(a || 0), a === !0)
      u._rotate = 2;
    else if (u._rotate % 2 !== 0)
      throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
    return u.defaultAnchor = o ? new Ee(o.x, o.y) : new Ee(0, 0), u._updateID = 0, u.textureCacheIds = [], e.valid ? u.noFrame ? e.valid && u.onBaseTextureUpdated(e) : u.frame = i : e.once("loaded", u.onBaseTextureUpdated, u), u.noFrame && e.on("update", u.onBaseTextureUpdated, u), u;
  }
  return t.prototype.update = function() {
    this.baseTexture.resource && this.baseTexture.resource.update();
  }, t.prototype.onBaseTextureUpdated = function(e) {
    if (this.noFrame) {
      if (!this.baseTexture.valid)
        return;
      this._frame.width = e.width, this._frame.height = e.height, this.valid = !0, this.updateUvs();
    } else
      this.frame = this._frame;
    this.emit("update", this);
  }, t.prototype.destroy = function(e) {
    if (this.baseTexture) {
      if (e) {
        var i = this.baseTexture.resource;
        i && i.url && Zr[i.url] && t.removeFromCache(i.url), this.baseTexture.destroy();
      }
      this.baseTexture.off("loaded", this.onBaseTextureUpdated, this), this.baseTexture.off("update", this.onBaseTextureUpdated, this), this.baseTexture = null;
    }
    this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = !1, t.removeFromCache(this), this.textureCacheIds = null;
  }, t.prototype.clone = function() {
    var e = this._frame.clone(), i = this._frame === this.orig ? e : this.orig.clone(), n = new t(this.baseTexture, !this.noFrame && e, i, this.trim && this.trim.clone(), this.rotate, this.defaultAnchor);
    return this.noFrame && (n._frame = e), n;
  }, t.prototype.updateUvs = function() {
    this._uvs === Hx && (this._uvs = new GT()), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++;
  }, t.from = function(e, i, n) {
    i === void 0 && (i = {}), n === void 0 && (n = gt.STRICT_TEXTURE_CACHE);
    var s = typeof e == "string", a = null;
    if (s)
      a = e;
    else if (e instanceof Zt) {
      if (!e.cacheId) {
        var o = i && i.pixiIdPrefix || "pixiid";
        e.cacheId = o + "-" + ru(), Zt.addToCache(e, e.cacheId);
      }
      a = e.cacheId;
    } else {
      if (!e._pixiId) {
        var o = i && i.pixiIdPrefix || "pixiid";
        e._pixiId = o + "_" + ru();
      }
      a = e._pixiId;
    }
    var u = Zr[a];
    if (s && n && !u)
      throw new Error('The cacheId "' + a + '" does not exist in TextureCache.');
    return !u && !(e instanceof Zt) ? (i.resolution || (i.resolution = uv(e)), u = new t(new Zt(e, i)), u.baseTexture.cacheId = a, Zt.addToCache(u.baseTexture, a), t.addToCache(u, a)) : !u && e instanceof Zt && (u = new t(e), t.addToCache(u, a)), u;
  }, t.fromURL = function(e, i) {
    var n = Object.assign({ autoLoad: !1 }, i == null ? void 0 : i.resourceOptions), s = t.from(e, Object.assign({ resourceOptions: n }, i), !1), a = s.baseTexture.resource;
    return s.baseTexture.valid ? Promise.resolve(s) : a.load().then(function() {
      return Promise.resolve(s);
    });
  }, t.fromBuffer = function(e, i, n, s) {
    return new t(Zt.fromBuffer(e, i, n, s));
  }, t.fromLoader = function(e, i, n, s) {
    var a = new Zt(e, Object.assign({
      scaleMode: gt.SCALE_MODE,
      resolution: uv(i)
    }, s)), o = a.resource;
    o instanceof DT && (o.url = i);
    var u = new t(a);
    return n || (n = i), Zt.addToCache(u.baseTexture, n), t.addToCache(u, n), n !== i && (Zt.addToCache(u.baseTexture, i), t.addToCache(u, i)), u.baseTexture.valid ? Promise.resolve(u) : new Promise(function(h) {
      u.baseTexture.once("loaded", function() {
        return h(u);
      });
    });
  }, t.addToCache = function(e, i) {
    i && (e.textureCacheIds.indexOf(i) === -1 && e.textureCacheIds.push(i), Zr[i] && console.warn("Texture added to the cache with an id [" + i + "] that already had an entry"), Zr[i] = e);
  }, t.removeFromCache = function(e) {
    if (typeof e == "string") {
      var i = Zr[e];
      if (i) {
        var n = i.textureCacheIds.indexOf(e);
        return n > -1 && i.textureCacheIds.splice(n, 1), delete Zr[e], i;
      }
    } else if (e && e.textureCacheIds) {
      for (var s = 0; s < e.textureCacheIds.length; ++s)
        Zr[e.textureCacheIds[s]] === e && delete Zr[e.textureCacheIds[s]];
      return e.textureCacheIds.length = 0, e;
    }
    return null;
  }, Object.defineProperty(t.prototype, "resolution", {
    get: function() {
      return this.baseTexture.resolution;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "frame", {
    get: function() {
      return this._frame;
    },
    set: function(e) {
      this._frame = e, this.noFrame = !1;
      var i = e.x, n = e.y, s = e.width, a = e.height, o = i + s > this.baseTexture.width, u = n + a > this.baseTexture.height;
      if (o || u) {
        var h = o && u ? "and" : "or", l = "X: " + i + " + " + s + " = " + (i + s) + " > " + this.baseTexture.width, c = "Y: " + n + " + " + a + " = " + (n + a) + " > " + this.baseTexture.height;
        throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + (l + " " + h + " " + c));
      }
      this.valid = s && a && this.baseTexture.valid, !this.trim && !this.rotate && (this.orig = e), this.valid && this.updateUvs();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "rotate", {
    get: function() {
      return this._rotate;
    },
    set: function(e) {
      this._rotate = e, this.valid && this.updateUvs();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "width", {
    get: function() {
      return this.orig.width;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    get: function() {
      return this.orig.height;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.castToBaseTexture = function() {
    return this.baseTexture;
  }, Object.defineProperty(t, "EMPTY", {
    get: function() {
      return t._EMPTY || (t._EMPTY = new t(new Zt()), Ld(t._EMPTY), Ld(t._EMPTY.baseTexture)), t._EMPTY;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t, "WHITE", {
    get: function() {
      if (!t._WHITE) {
        var e = gt.ADAPTER.createCanvas(16, 16), i = e.getContext("2d");
        e.width = 16, e.height = 16, i.fillStyle = "white", i.fillRect(0, 0, 16, 16), t._WHITE = new t(Zt.from(e)), Ld(t._WHITE), Ld(t._WHITE.baseTexture);
      }
      return t._WHITE;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(Fi), Ji = function(r) {
  Se(t, r);
  function t(e, i) {
    var n = r.call(this, e, i) || this;
    return n.valid = !0, n.filterFrame = null, n.filterPoolKey = null, n.updateUvs(), n;
  }
  return Object.defineProperty(t.prototype, "framebuffer", {
    get: function() {
      return this.baseTexture.framebuffer;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "multisample", {
    get: function() {
      return this.framebuffer.multisample;
    },
    set: function(e) {
      this.framebuffer.multisample = e;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.resize = function(e, i, n) {
    n === void 0 && (n = !0);
    var s = this.baseTexture.resolution, a = Math.round(e * s) / s, o = Math.round(i * s) / s;
    this.valid = a > 0 && o > 0, this._frame.width = this.orig.width = a, this._frame.height = this.orig.height = o, n && this.baseTexture.resize(a, o), this.updateUvs();
  }, t.prototype.setResolution = function(e) {
    var i = this.baseTexture;
    i.resolution !== e && (i.setResolution(e), this.resize(i.width, i.height, !1));
  }, t.create = function(e) {
    for (var i = arguments, n = [], s = 1; s < arguments.length; s++)
      n[s - 1] = i[s];
    return typeof e == "number" && (Rn("6.0.0", "Arguments (width, height, scaleMode, resolution) have been deprecated."), e = {
      width: e,
      height: n[0],
      scaleMode: n[1],
      resolution: n[2]
    }), new t(new UT(e));
  }, t;
}(It), mA = function() {
  function r(t) {
    this.texturePool = {}, this.textureOptions = t || {}, this.enableFullScreen = !1, this._pixelsWidth = 0, this._pixelsHeight = 0;
  }
  return r.prototype.createTexture = function(t, e, i) {
    i === void 0 && (i = tr.NONE);
    var n = new UT(Object.assign({
      width: t,
      height: e,
      resolution: 1,
      multisample: i
    }, this.textureOptions));
    return new Ji(n);
  }, r.prototype.getOptimalTexture = function(t, e, i, n) {
    i === void 0 && (i = 1), n === void 0 && (n = tr.NONE);
    var s;
    t = Math.ceil(t * i - 1e-6), e = Math.ceil(e * i - 1e-6), !this.enableFullScreen || t !== this._pixelsWidth || e !== this._pixelsHeight ? (t = ov(t), e = ov(e), s = ((t & 65535) << 16 | e & 65535) >>> 0, n > 1 && (s += n * 4294967296)) : s = n > 1 ? -n : -1, this.texturePool[s] || (this.texturePool[s] = []);
    var a = this.texturePool[s].pop();
    return a || (a = this.createTexture(t, e, n)), a.filterPoolKey = s, a.setResolution(i), a;
  }, r.prototype.getFilterTexture = function(t, e, i) {
    var n = this.getOptimalTexture(t.width, t.height, e || t.resolution, i || tr.NONE);
    return n.filterFrame = t.filterFrame, n;
  }, r.prototype.returnTexture = function(t) {
    var e = t.filterPoolKey;
    t.filterFrame = null, this.texturePool[e].push(t);
  }, r.prototype.returnFilterTexture = function(t) {
    this.returnTexture(t);
  }, r.prototype.clear = function(t) {
    if (t = t !== !1, t)
      for (var e in this.texturePool) {
        var i = this.texturePool[e];
        if (i)
          for (var n = 0; n < i.length; n++)
            i[n].destroy(!0);
      }
    this.texturePool = {};
  }, r.prototype.setScreenSize = function(t) {
    if (!(t.width === this._pixelsWidth && t.height === this._pixelsHeight)) {
      this.enableFullScreen = t.width > 0 && t.height > 0;
      for (var e in this.texturePool)
        if (Number(e) < 0) {
          var i = this.texturePool[e];
          if (i)
            for (var n = 0; n < i.length; n++)
              i[n].destroy(!0);
          this.texturePool[e] = [];
        }
      this._pixelsWidth = t.width, this._pixelsHeight = t.height;
    }
  }, r.SCREEN_KEY = -1, r;
}(), zx = function() {
  function r(t, e, i, n, s, a, o) {
    e === void 0 && (e = 0), i === void 0 && (i = !1), n === void 0 && (n = Tt.FLOAT), this.buffer = t, this.size = e, this.normalized = i, this.type = n, this.stride = s, this.start = a, this.instance = o;
  }
  return r.prototype.destroy = function() {
    this.buffer = null;
  }, r.from = function(t, e, i, n, s) {
    return new r(t, e, i, n, s);
  }, r;
}(), _A = 0, or = function() {
  function r(t, e, i) {
    e === void 0 && (e = !0), i === void 0 && (i = !1), this.data = t || new Float32Array(1), this._glBuffers = {}, this._updateID = 0, this.index = i, this.static = e, this.id = _A++, this.disposeRunner = new Ir("disposeBuffer");
  }
  return r.prototype.update = function(t) {
    t instanceof Array && (t = new Float32Array(t)), this.data = t || this.data, this._updateID++;
  }, r.prototype.dispose = function() {
    this.disposeRunner.emit(this, !1);
  }, r.prototype.destroy = function() {
    this.dispose(), this.data = null;
  }, Object.defineProperty(r.prototype, "index", {
    get: function() {
      return this.type === In.ELEMENT_ARRAY_BUFFER;
    },
    set: function(t) {
      this.type = t ? In.ELEMENT_ARRAY_BUFFER : In.ARRAY_BUFFER;
    },
    enumerable: !1,
    configurable: !0
  }), r.from = function(t) {
    return t instanceof Array && (t = new Float32Array(t)), new r(t);
  }, r;
}(), yA = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array
};
function bA(r, t) {
  for (var e = 0, i = 0, n = {}, s = 0; s < r.length; s++)
    i += t[s], e += r[s].length;
  for (var a = new ArrayBuffer(e * 4), o = null, u = 0, s = 0; s < r.length; s++) {
    var h = t[s], l = r[s], c = AT(l);
    n[c] || (n[c] = new yA[c](a)), o = n[c];
    for (var d = 0; d < l.length; d++) {
      var p = (d / h | 0) * i + u, g = d % h;
      o[p + g] = l[d];
    }
    u += h;
  }
  return new Float32Array(a);
}
var jx = { 5126: 4, 5123: 2, 5121: 1 }, xA = 0, EA = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array,
  Uint16Array
}, vd = function() {
  function r(t, e) {
    t === void 0 && (t = []), e === void 0 && (e = {}), this.buffers = t, this.indexBuffer = null, this.attributes = e, this.glVertexArrayObjects = {}, this.id = xA++, this.instanced = !1, this.instanceCount = 1, this.disposeRunner = new Ir("disposeGeometry"), this.refCount = 0;
  }
  return r.prototype.addAttribute = function(t, e, i, n, s, a, o, u) {
    if (i === void 0 && (i = 0), n === void 0 && (n = !1), u === void 0 && (u = !1), !e)
      throw new Error("You must pass a buffer when creating an attribute");
    e instanceof or || (e instanceof Array && (e = new Float32Array(e)), e = new or(e));
    var h = t.split("|");
    if (h.length > 1) {
      for (var l = 0; l < h.length; l++)
        this.addAttribute(h[l], e, i, n, s);
      return this;
    }
    var c = this.buffers.indexOf(e);
    return c === -1 && (this.buffers.push(e), c = this.buffers.length - 1), this.attributes[t] = new zx(c, i, n, s, a, o, u), this.instanced = this.instanced || u, this;
  }, r.prototype.getAttribute = function(t) {
    return this.attributes[t];
  }, r.prototype.getBuffer = function(t) {
    return this.buffers[this.getAttribute(t).buffer];
  }, r.prototype.addIndex = function(t) {
    return t instanceof or || (t instanceof Array && (t = new Uint16Array(t)), t = new or(t)), t.type = In.ELEMENT_ARRAY_BUFFER, this.indexBuffer = t, this.buffers.indexOf(t) === -1 && this.buffers.push(t), this;
  }, r.prototype.getIndex = function() {
    return this.indexBuffer;
  }, r.prototype.interleave = function() {
    if (this.buffers.length === 1 || this.buffers.length === 2 && this.indexBuffer)
      return this;
    var t = [], e = [], i = new or(), n;
    for (n in this.attributes) {
      var s = this.attributes[n], a = this.buffers[s.buffer];
      t.push(a.data), e.push(s.size * jx[s.type] / 4), s.buffer = 0;
    }
    for (i.data = bA(t, e), n = 0; n < this.buffers.length; n++)
      this.buffers[n] !== this.indexBuffer && this.buffers[n].destroy();
    return this.buffers = [i], this.indexBuffer && this.buffers.push(this.indexBuffer), this;
  }, r.prototype.getSize = function() {
    for (var t in this.attributes) {
      var e = this.attributes[t], i = this.buffers[e.buffer];
      return i.data.length / (e.stride / 4 || e.size);
    }
    return 0;
  }, r.prototype.dispose = function() {
    this.disposeRunner.emit(this, !1);
  }, r.prototype.destroy = function() {
    this.dispose(), this.buffers = null, this.indexBuffer = null, this.attributes = null;
  }, r.prototype.clone = function() {
    for (var t = new r(), e = 0; e < this.buffers.length; e++)
      t.buffers[e] = new or(this.buffers[e].data.slice(0));
    for (var e in this.attributes) {
      var i = this.attributes[e];
      t.attributes[e] = new zx(i.buffer, i.size, i.normalized, i.type, i.stride, i.start, i.instance);
    }
    return this.indexBuffer && (t.indexBuffer = t.buffers[this.buffers.indexOf(this.indexBuffer)], t.indexBuffer.type = In.ELEMENT_ARRAY_BUFFER), t;
  }, r.merge = function(t) {
    for (var e = new r(), i = [], n = [], s = [], a, o = 0; o < t.length; o++) {
      a = t[o];
      for (var u = 0; u < a.buffers.length; u++)
        n[u] = n[u] || 0, n[u] += a.buffers[u].data.length, s[u] = 0;
    }
    for (var o = 0; o < a.buffers.length; o++)
      i[o] = new EA[AT(a.buffers[o].data)](n[o]), e.buffers[o] = new or(i[o]);
    for (var o = 0; o < t.length; o++) {
      a = t[o];
      for (var u = 0; u < a.buffers.length; u++)
        i[u].set(a.buffers[u].data, s[u]), s[u] += a.buffers[u].data.length;
    }
    if (e.attributes = a.attributes, a.indexBuffer) {
      e.indexBuffer = e.buffers[a.buffers.indexOf(a.indexBuffer)], e.indexBuffer.type = In.ELEMENT_ARRAY_BUFFER;
      for (var h = 0, l = 0, c = 0, d = 0, o = 0; o < a.buffers.length; o++)
        if (a.buffers[o] !== a.indexBuffer) {
          d = o;
          break;
        }
      for (var o in a.attributes) {
        var p = a.attributes[o];
        (p.buffer | 0) === d && (l += p.size * jx[p.type] / 4);
      }
      for (var o = 0; o < t.length; o++) {
        for (var g = t[o].indexBuffer.data, u = 0; u < g.length; u++)
          e.indexBuffer.data[u + c] += h;
        h += t[o].buffers[d].data.length / l, c += g.length;
      }
    }
    return e;
  }, r;
}(), wA = function(r) {
  Se(t, r);
  function t() {
    var e = r.call(this) || this;
    return e.addAttribute("aVertexPosition", new Float32Array([
      0,
      0,
      1,
      0,
      1,
      1,
      0,
      1
    ])).addIndex([0, 1, 3, 2]), e;
  }
  return t;
}(vd), HT = function(r) {
  Se(t, r);
  function t() {
    var e = r.call(this) || this;
    return e.vertices = new Float32Array([
      -1,
      -1,
      1,
      -1,
      1,
      1,
      -1,
      1
    ]), e.uvs = new Float32Array([
      0,
      0,
      1,
      0,
      1,
      1,
      0,
      1
    ]), e.vertexBuffer = new or(e.vertices), e.uvBuffer = new or(e.uvs), e.addAttribute("aVertexPosition", e.vertexBuffer).addAttribute("aTextureCoord", e.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]), e;
  }
  return t.prototype.map = function(e, i) {
    var n = 0, s = 0;
    return this.uvs[0] = n, this.uvs[1] = s, this.uvs[2] = n + i.width / e.width, this.uvs[3] = s, this.uvs[4] = n + i.width / e.width, this.uvs[5] = s + i.height / e.height, this.uvs[6] = n, this.uvs[7] = s + i.height / e.height, n = i.x, s = i.y, this.vertices[0] = n, this.vertices[1] = s, this.vertices[2] = n + i.width, this.vertices[3] = s, this.vertices[4] = n + i.width, this.vertices[5] = s + i.height, this.vertices[6] = n, this.vertices[7] = s + i.height, this.invalidate(), this;
  }, t.prototype.invalidate = function() {
    return this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this;
  }, t;
}(vd), TA = 0, Ko = function() {
  function r(t, e, i) {
    this.group = !0, this.syncUniforms = {}, this.dirtyId = 0, this.id = TA++, this.static = !!e, this.ubo = !!i, t instanceof or ? (this.buffer = t, this.buffer.type = In.UNIFORM_BUFFER, this.autoManage = !1, this.ubo = !0) : (this.uniforms = t, this.ubo && (this.buffer = new or(new Float32Array(1)), this.buffer.type = In.UNIFORM_BUFFER, this.autoManage = !0));
  }
  return r.prototype.update = function() {
    this.dirtyId++, !this.autoManage && this.buffer && this.buffer.update();
  }, r.prototype.add = function(t, e, i) {
    if (!this.ubo)
      this.uniforms[t] = new r(e, i);
    else
      throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");
  }, r.from = function(t, e, i) {
    return new r(t, e, i);
  }, r.uboFrom = function(t, e) {
    return new r(t, e != null ? e : !0, !0);
  }, r;
}(), CA = function() {
  function r() {
    this.renderTexture = null, this.target = null, this.legacy = !1, this.resolution = 1, this.multisample = tr.NONE, this.sourceFrame = new Pt(), this.destinationFrame = new Pt(), this.bindingSourceFrame = new Pt(), this.bindingDestinationFrame = new Pt(), this.filters = [], this.transform = null;
  }
  return r.prototype.clear = function() {
    this.target = null, this.filters = null, this.renderTexture = null;
  }, r;
}(), Dd = [new Ee(), new Ee(), new Ee(), new Ee()], am = new lr(), IA = function() {
  function r(t) {
    this.renderer = t, this.defaultFilterStack = [{}], this.texturePool = new mA(), this.texturePool.setScreenSize(t.view), this.statePool = [], this.quad = new wA(), this.quadUv = new HT(), this.tempRect = new Pt(), this.activeState = {}, this.globalUniforms = new Ko({
      outputFrame: new Pt(),
      inputSize: new Float32Array(4),
      inputPixel: new Float32Array(4),
      inputClamp: new Float32Array(4),
      resolution: 1,
      filterArea: new Float32Array(4),
      filterClamp: new Float32Array(4)
    }, !0), this.forceClear = !1, this.useMaxPadding = !1;
  }
  return r.prototype.push = function(t, e) {
    for (var i, n, s = this.renderer, a = this.defaultFilterStack, o = this.statePool.pop() || new CA(), u = this.renderer.renderTexture, h = e[0].resolution, l = e[0].multisample, c = e[0].padding, d = e[0].autoFit, p = (i = e[0].legacy) !== null && i !== void 0 ? i : !0, g = 1; g < e.length; g++) {
      var v = e[g];
      h = Math.min(h, v.resolution), l = Math.min(l, v.multisample), c = this.useMaxPadding ? Math.max(c, v.padding) : c + v.padding, d = d && v.autoFit, p = p || ((n = v.legacy) !== null && n !== void 0 ? n : !0);
    }
    a.length === 1 && (this.defaultFilterStack[0].renderTexture = u.current), a.push(o), o.resolution = h, o.multisample = l, o.legacy = p, o.target = t, o.sourceFrame.copyFrom(t.filterArea || t.getBounds(!0)), o.sourceFrame.pad(c);
    var m = this.tempRect.copyFrom(u.sourceFrame);
    s.projection.transform && this.transformAABB(am.copyFrom(s.projection.transform).invert(), m), d ? (o.sourceFrame.fit(m), (o.sourceFrame.width <= 0 || o.sourceFrame.height <= 0) && (o.sourceFrame.width = 0, o.sourceFrame.height = 0)) : o.sourceFrame.intersects(m) || (o.sourceFrame.width = 0, o.sourceFrame.height = 0), this.roundFrame(o.sourceFrame, u.current ? u.current.resolution : s.resolution, u.sourceFrame, u.destinationFrame, s.projection.transform), o.renderTexture = this.getOptimalFilterTexture(o.sourceFrame.width, o.sourceFrame.height, h, l), o.filters = e, o.destinationFrame.width = o.renderTexture.width, o.destinationFrame.height = o.renderTexture.height;
    var _ = this.tempRect;
    _.x = 0, _.y = 0, _.width = o.sourceFrame.width, _.height = o.sourceFrame.height, o.renderTexture.filterFrame = o.sourceFrame, o.bindingSourceFrame.copyFrom(u.sourceFrame), o.bindingDestinationFrame.copyFrom(u.destinationFrame), o.transform = s.projection.transform, s.projection.transform = null, u.bind(o.renderTexture, o.sourceFrame, _), s.framebuffer.clear(0, 0, 0, 0);
  }, r.prototype.pop = function() {
    var t = this.defaultFilterStack, e = t.pop(), i = e.filters;
    this.activeState = e;
    var n = this.globalUniforms.uniforms;
    n.outputFrame = e.sourceFrame, n.resolution = e.resolution;
    var s = n.inputSize, a = n.inputPixel, o = n.inputClamp;
    if (s[0] = e.destinationFrame.width, s[1] = e.destinationFrame.height, s[2] = 1 / s[0], s[3] = 1 / s[1], a[0] = Math.round(s[0] * e.resolution), a[1] = Math.round(s[1] * e.resolution), a[2] = 1 / a[0], a[3] = 1 / a[1], o[0] = 0.5 * a[2], o[1] = 0.5 * a[3], o[2] = e.sourceFrame.width * s[2] - 0.5 * a[2], o[3] = e.sourceFrame.height * s[3] - 0.5 * a[3], e.legacy) {
      var u = n.filterArea;
      u[0] = e.destinationFrame.width, u[1] = e.destinationFrame.height, u[2] = e.sourceFrame.x, u[3] = e.sourceFrame.y, n.filterClamp = n.inputClamp;
    }
    this.globalUniforms.update();
    var h = t[t.length - 1];
    if (this.renderer.framebuffer.blit(), i.length === 1)
      i[0].apply(this, e.renderTexture, h.renderTexture, Gs.BLEND, e), this.returnFilterTexture(e.renderTexture);
    else {
      var l = e.renderTexture, c = this.getOptimalFilterTexture(l.width, l.height, e.resolution);
      c.filterFrame = l.filterFrame;
      var d = 0;
      for (d = 0; d < i.length - 1; ++d) {
        d === 1 && e.multisample > 1 && (c = this.getOptimalFilterTexture(l.width, l.height, e.resolution), c.filterFrame = l.filterFrame), i[d].apply(this, l, c, Gs.CLEAR, e);
        var p = l;
        l = c, c = p;
      }
      i[d].apply(this, l, h.renderTexture, Gs.BLEND, e), d > 1 && e.multisample > 1 && this.returnFilterTexture(e.renderTexture), this.returnFilterTexture(l), this.returnFilterTexture(c);
    }
    e.clear(), this.statePool.push(e);
  }, r.prototype.bindAndClear = function(t, e) {
    e === void 0 && (e = Gs.CLEAR);
    var i = this.renderer, n = i.renderTexture, s = i.state;
    if (t === this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? this.renderer.projection.transform = this.activeState.transform : this.renderer.projection.transform = null, t && t.filterFrame) {
      var a = this.tempRect;
      a.x = 0, a.y = 0, a.width = t.filterFrame.width, a.height = t.filterFrame.height, n.bind(t, t.filterFrame, a);
    } else
      t !== this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? n.bind(t) : this.renderer.renderTexture.bind(t, this.activeState.bindingSourceFrame, this.activeState.bindingDestinationFrame);
    var o = s.stateId & 1 || this.forceClear;
    (e === Gs.CLEAR || e === Gs.BLIT && o) && this.renderer.framebuffer.clear(0, 0, 0, 0);
  }, r.prototype.applyFilter = function(t, e, i, n) {
    var s = this.renderer;
    s.state.set(t.state), this.bindAndClear(i, n), t.uniforms.uSampler = e, t.uniforms.filterGlobals = this.globalUniforms, s.shader.bind(t), t.legacy = !!t.program.attributeData.aTextureCoord, t.legacy ? (this.quadUv.map(e._frame, e.filterFrame), s.geometry.bind(this.quadUv), s.geometry.draw(qi.TRIANGLES)) : (s.geometry.bind(this.quad), s.geometry.draw(qi.TRIANGLE_STRIP));
  }, r.prototype.calculateSpriteMatrix = function(t, e) {
    var i = this.activeState, n = i.sourceFrame, s = i.destinationFrame, a = e._texture.orig, o = t.set(s.width, 0, 0, s.height, n.x, n.y), u = e.worldTransform.copyTo(lr.TEMP_MATRIX);
    return u.invert(), o.prepend(u), o.scale(1 / a.width, 1 / a.height), o.translate(e.anchor.x, e.anchor.y), o;
  }, r.prototype.destroy = function() {
    this.renderer = null, this.texturePool.clear(!1);
  }, r.prototype.getOptimalFilterTexture = function(t, e, i, n) {
    return i === void 0 && (i = 1), n === void 0 && (n = tr.NONE), this.texturePool.getOptimalTexture(t, e, i, n);
  }, r.prototype.getFilterTexture = function(t, e, i) {
    if (typeof t == "number") {
      var n = t;
      t = e, e = n;
    }
    t = t || this.activeState.renderTexture;
    var s = this.texturePool.getOptimalTexture(t.width, t.height, e || t.resolution, i || tr.NONE);
    return s.filterFrame = t.filterFrame, s;
  }, r.prototype.returnFilterTexture = function(t) {
    this.texturePool.returnTexture(t);
  }, r.prototype.emptyPool = function() {
    this.texturePool.clear(!0);
  }, r.prototype.resize = function() {
    this.texturePool.setScreenSize(this.renderer.view);
  }, r.prototype.transformAABB = function(t, e) {
    var i = Dd[0], n = Dd[1], s = Dd[2], a = Dd[3];
    i.set(e.left, e.top), n.set(e.left, e.bottom), s.set(e.right, e.top), a.set(e.right, e.bottom), t.apply(i, i), t.apply(n, n), t.apply(s, s), t.apply(a, a);
    var o = Math.min(i.x, n.x, s.x, a.x), u = Math.min(i.y, n.y, s.y, a.y), h = Math.max(i.x, n.x, s.x, a.x), l = Math.max(i.y, n.y, s.y, a.y);
    e.x = o, e.y = u, e.width = h - o, e.height = l - u;
  }, r.prototype.roundFrame = function(t, e, i, n, s) {
    if (!(t.width <= 0 || t.height <= 0 || i.width <= 0 || i.height <= 0)) {
      if (s) {
        var a = s.a, o = s.b, u = s.c, h = s.d;
        if ((Math.abs(o) > 1e-4 || Math.abs(u) > 1e-4) && (Math.abs(a) > 1e-4 || Math.abs(h) > 1e-4))
          return;
      }
      s = s ? am.copyFrom(s) : am.identity(), s.translate(-i.x, -i.y).scale(n.width / i.width, n.height / i.height).translate(n.x, n.y), this.transformAABB(s, t), t.ceil(e), this.transformAABB(s.invert(), t);
    }
  }, r;
}(), Og = function() {
  function r(t) {
    this.renderer = t;
  }
  return r.prototype.flush = function() {
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r.prototype.start = function() {
  }, r.prototype.stop = function() {
    this.flush();
  }, r.prototype.render = function(t) {
  }, r;
}(), RA = function() {
  function r(t) {
    this.renderer = t, this.emptyRenderer = new Og(t), this.currentRenderer = this.emptyRenderer;
  }
  return r.prototype.setObjectRenderer = function(t) {
    this.currentRenderer !== t && (this.currentRenderer.stop(), this.currentRenderer = t, this.currentRenderer.start());
  }, r.prototype.flush = function() {
    this.setObjectRenderer(this.emptyRenderer);
  }, r.prototype.reset = function() {
    this.setObjectRenderer(this.emptyRenderer);
  }, r.prototype.copyBoundTextures = function(t, e) {
    for (var i = this.renderer.texture.boundTextures, n = e - 1; n >= 0; --n)
      t[n] = i[n] || null, t[n] && (t[n]._batchLocation = n);
  }, r.prototype.boundArray = function(t, e, i, n) {
    for (var s = t.elements, a = t.ids, o = t.count, u = 0, h = 0; h < o; h++) {
      var l = s[h], c = l._batchLocation;
      if (c >= 0 && c < n && e[c] === l) {
        a[h] = c;
        continue;
      }
      for (; u < n; ) {
        var d = e[u];
        if (d && d._batchEnabled === i && d._batchLocation === u) {
          u++;
          continue;
        }
        a[h] = u, l._batchLocation = u, e[u] = l;
        break;
      }
    }
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}(), $x = 0, SA = function() {
  function r(t) {
    this.renderer = t, this.webGLVersion = 1, this.extensions = {}, this.supports = {
      uint32Indices: !1
    }, this.handleContextLost = this.handleContextLost.bind(this), this.handleContextRestored = this.handleContextRestored.bind(this), t.view.addEventListener("webglcontextlost", this.handleContextLost, !1), t.view.addEventListener("webglcontextrestored", this.handleContextRestored, !1);
  }
  return Object.defineProperty(r.prototype, "isLost", {
    get: function() {
      return !this.gl || this.gl.isContextLost();
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.contextChange = function(t) {
    this.gl = t, this.renderer.gl = t, this.renderer.CONTEXT_UID = $x++, t.isContextLost() && t.getExtension("WEBGL_lose_context") && t.getExtension("WEBGL_lose_context").restoreContext();
  }, r.prototype.initFromContext = function(t) {
    this.gl = t, this.validateContext(t), this.renderer.gl = t, this.renderer.CONTEXT_UID = $x++, this.renderer.runners.contextChange.emit(t);
  }, r.prototype.initFromOptions = function(t) {
    var e = this.createContext(this.renderer.view, t);
    this.initFromContext(e);
  }, r.prototype.createContext = function(t, e) {
    var i;
    if (gt.PREFER_ENV >= Is.WEBGL2 && (i = t.getContext("webgl2", e)), i)
      this.webGLVersion = 2;
    else if (this.webGLVersion = 1, i = t.getContext("webgl", e) || t.getContext("experimental-webgl", e), !i)
      throw new Error("This browser does not support WebGL. Try using the canvas renderer");
    return this.gl = i, this.getExtensions(), this.gl;
  }, r.prototype.getExtensions = function() {
    var t = this.gl, e = {
      anisotropicFiltering: t.getExtension("EXT_texture_filter_anisotropic"),
      floatTextureLinear: t.getExtension("OES_texture_float_linear"),
      s3tc: t.getExtension("WEBGL_compressed_texture_s3tc"),
      s3tc_sRGB: t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
      etc: t.getExtension("WEBGL_compressed_texture_etc"),
      etc1: t.getExtension("WEBGL_compressed_texture_etc1"),
      pvrtc: t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
      atc: t.getExtension("WEBGL_compressed_texture_atc"),
      astc: t.getExtension("WEBGL_compressed_texture_astc")
    };
    this.webGLVersion === 1 ? Object.assign(this.extensions, e, {
      drawBuffers: t.getExtension("WEBGL_draw_buffers"),
      depthTexture: t.getExtension("WEBGL_depth_texture"),
      loseContext: t.getExtension("WEBGL_lose_context"),
      vertexArrayObject: t.getExtension("OES_vertex_array_object") || t.getExtension("MOZ_OES_vertex_array_object") || t.getExtension("WEBKIT_OES_vertex_array_object"),
      uint32ElementIndex: t.getExtension("OES_element_index_uint"),
      floatTexture: t.getExtension("OES_texture_float"),
      floatTextureLinear: t.getExtension("OES_texture_float_linear"),
      textureHalfFloat: t.getExtension("OES_texture_half_float"),
      textureHalfFloatLinear: t.getExtension("OES_texture_half_float_linear")
    }) : this.webGLVersion === 2 && Object.assign(this.extensions, e, {
      colorBufferFloat: t.getExtension("EXT_color_buffer_float")
    });
  }, r.prototype.handleContextLost = function(t) {
    t.preventDefault();
  }, r.prototype.handleContextRestored = function() {
    this.renderer.runners.contextChange.emit(this.gl);
  }, r.prototype.destroy = function() {
    var t = this.renderer.view;
    this.renderer = null, t.removeEventListener("webglcontextlost", this.handleContextLost), t.removeEventListener("webglcontextrestored", this.handleContextRestored), this.gl.useProgram(null), this.extensions.loseContext && this.extensions.loseContext.loseContext();
  }, r.prototype.postrender = function() {
    this.renderer.renderingToScreen && this.gl.flush();
  }, r.prototype.validateContext = function(t) {
    var e = t.getContextAttributes(), i = "WebGL2RenderingContext" in globalThis && t instanceof globalThis.WebGL2RenderingContext;
    i && (this.webGLVersion = 2), e && !e.stencil && console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");
    var n = i || !!t.getExtension("OES_element_index_uint");
    this.supports.uint32Indices = n, n || console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly");
  }, r;
}(), PA = function() {
  function r(t) {
    this.framebuffer = t, this.stencil = null, this.dirtyId = -1, this.dirtyFormat = -1, this.dirtySize = -1, this.multisample = tr.NONE, this.msaaBuffer = null, this.blitFramebuffer = null, this.mipLevel = 0;
  }
  return r;
}(), NA = new Pt(), OA = function() {
  function r(t) {
    this.renderer = t, this.managedFramebuffers = [], this.unknownFramebuffer = new p_(10, 10), this.msaaSamples = null;
  }
  return r.prototype.contextChange = function() {
    var t = this.gl = this.renderer.gl;
    if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.current = this.unknownFramebuffer, this.viewport = new Pt(), this.hasMRT = !0, this.writeDepthTexture = !0, this.disposeAll(!0), this.renderer.context.webGLVersion === 1) {
      var e = this.renderer.context.extensions.drawBuffers, i = this.renderer.context.extensions.depthTexture;
      gt.PREFER_ENV === Is.WEBGL_LEGACY && (e = null, i = null), e ? t.drawBuffers = function(n) {
        return e.drawBuffersWEBGL(n);
      } : (this.hasMRT = !1, t.drawBuffers = function() {
      }), i || (this.writeDepthTexture = !1);
    } else
      this.msaaSamples = t.getInternalformatParameter(t.RENDERBUFFER, t.RGBA8, t.SAMPLES);
  }, r.prototype.bind = function(t, e, i) {
    i === void 0 && (i = 0);
    var n = this.gl;
    if (t) {
      var s = t.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(t);
      this.current !== t && (this.current = t, n.bindFramebuffer(n.FRAMEBUFFER, s.framebuffer)), s.mipLevel !== i && (t.dirtyId++, t.dirtyFormat++, s.mipLevel = i), s.dirtyId !== t.dirtyId && (s.dirtyId = t.dirtyId, s.dirtyFormat !== t.dirtyFormat ? (s.dirtyFormat = t.dirtyFormat, s.dirtySize = t.dirtySize, this.updateFramebuffer(t, i)) : s.dirtySize !== t.dirtySize && (s.dirtySize = t.dirtySize, this.resizeFramebuffer(t)));
      for (var a = 0; a < t.colorTextures.length; a++) {
        var o = t.colorTextures[a];
        this.renderer.texture.unbind(o.parentTextureArray || o);
      }
      if (t.depthTexture && this.renderer.texture.unbind(t.depthTexture), e) {
        var u = e.width >> i, h = e.height >> i, l = u / e.width;
        this.setViewport(e.x * l, e.y * l, u, h);
      } else {
        var u = t.width >> i, h = t.height >> i;
        this.setViewport(0, 0, u, h);
      }
    } else
      this.current && (this.current = null, n.bindFramebuffer(n.FRAMEBUFFER, null)), e ? this.setViewport(e.x, e.y, e.width, e.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height);
  }, r.prototype.setViewport = function(t, e, i, n) {
    var s = this.viewport;
    t = Math.round(t), e = Math.round(e), i = Math.round(i), n = Math.round(n), (s.width !== i || s.height !== n || s.x !== t || s.y !== e) && (s.x = t, s.y = e, s.width = i, s.height = n, this.gl.viewport(t, e, i, n));
  }, Object.defineProperty(r.prototype, "size", {
    get: function() {
      return this.current ? { x: 0, y: 0, width: this.current.width, height: this.current.height } : { x: 0, y: 0, width: this.renderer.width, height: this.renderer.height };
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.clear = function(t, e, i, n, s) {
    s === void 0 && (s = sv.COLOR | sv.DEPTH);
    var a = this.gl;
    a.clearColor(t, e, i, n), a.clear(s);
  }, r.prototype.initFramebuffer = function(t) {
    var e = this.gl, i = new PA(e.createFramebuffer());
    return i.multisample = this.detectSamples(t.multisample), t.glFramebuffers[this.CONTEXT_UID] = i, this.managedFramebuffers.push(t), t.disposeRunner.add(this), i;
  }, r.prototype.resizeFramebuffer = function(t) {
    var e = this.gl, i = t.glFramebuffers[this.CONTEXT_UID];
    i.msaaBuffer && (e.bindRenderbuffer(e.RENDERBUFFER, i.msaaBuffer), e.renderbufferStorageMultisample(e.RENDERBUFFER, i.multisample, e.RGBA8, t.width, t.height)), i.stencil && (e.bindRenderbuffer(e.RENDERBUFFER, i.stencil), i.msaaBuffer ? e.renderbufferStorageMultisample(e.RENDERBUFFER, i.multisample, e.DEPTH24_STENCIL8, t.width, t.height) : e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, t.width, t.height));
    var n = t.colorTextures, s = n.length;
    e.drawBuffers || (s = Math.min(s, 1));
    for (var a = 0; a < s; a++) {
      var o = n[a], u = o.parentTextureArray || o;
      this.renderer.texture.bind(u, 0);
    }
    t.depthTexture && this.writeDepthTexture && this.renderer.texture.bind(t.depthTexture, 0);
  }, r.prototype.updateFramebuffer = function(t, e) {
    var i = this.gl, n = t.glFramebuffers[this.CONTEXT_UID], s = t.colorTextures, a = s.length;
    i.drawBuffers || (a = Math.min(a, 1)), n.multisample > 1 && this.canMultisampleFramebuffer(t) ? (n.msaaBuffer = n.msaaBuffer || i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, n.msaaBuffer), i.renderbufferStorageMultisample(i.RENDERBUFFER, n.multisample, i.RGBA8, t.width, t.height), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0, i.RENDERBUFFER, n.msaaBuffer)) : n.msaaBuffer && (i.deleteRenderbuffer(n.msaaBuffer), n.msaaBuffer = null, n.blitFramebuffer && (n.blitFramebuffer.dispose(), n.blitFramebuffer = null));
    for (var o = [], u = 0; u < a; u++) {
      var h = s[u], l = h.parentTextureArray || h;
      this.renderer.texture.bind(l, 0), !(u === 0 && n.msaaBuffer) && (i.framebufferTexture2D(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0 + u, h.target, l._glTextures[this.CONTEXT_UID].texture, e), o.push(i.COLOR_ATTACHMENT0 + u));
    }
    if (o.length > 1 && i.drawBuffers(o), t.depthTexture) {
      var c = this.writeDepthTexture;
      if (c) {
        var d = t.depthTexture;
        this.renderer.texture.bind(d, 0), i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_ATTACHMENT, i.TEXTURE_2D, d._glTextures[this.CONTEXT_UID].texture, e);
      }
    }
    (t.stencil || t.depth) && !(t.depthTexture && this.writeDepthTexture) ? (n.stencil = n.stencil || i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, n.stencil), n.msaaBuffer ? i.renderbufferStorageMultisample(i.RENDERBUFFER, n.multisample, i.DEPTH24_STENCIL8, t.width, t.height) : i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, t.width, t.height), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.RENDERBUFFER, n.stencil)) : n.stencil && (i.deleteRenderbuffer(n.stencil), n.stencil = null);
  }, r.prototype.canMultisampleFramebuffer = function(t) {
    return this.renderer.context.webGLVersion !== 1 && t.colorTextures.length <= 1 && !t.depthTexture;
  }, r.prototype.detectSamples = function(t) {
    var e = this.msaaSamples, i = tr.NONE;
    if (t <= 1 || e === null)
      return i;
    for (var n = 0; n < e.length; n++)
      if (e[n] <= t) {
        i = e[n];
        break;
      }
    return i === 1 && (i = tr.NONE), i;
  }, r.prototype.blit = function(t, e, i) {
    var n = this, s = n.current, a = n.renderer, o = n.gl, u = n.CONTEXT_UID;
    if (a.context.webGLVersion === 2 && !!s) {
      var h = s.glFramebuffers[u];
      if (!!h) {
        if (!t) {
          if (!h.msaaBuffer)
            return;
          var l = s.colorTextures[0];
          if (!l)
            return;
          h.blitFramebuffer || (h.blitFramebuffer = new p_(s.width, s.height), h.blitFramebuffer.addColorTexture(0, l)), t = h.blitFramebuffer, t.colorTextures[0] !== l && (t.colorTextures[0] = l, t.dirtyId++, t.dirtyFormat++), (t.width !== s.width || t.height !== s.height) && (t.width = s.width, t.height = s.height, t.dirtyId++, t.dirtySize++);
        }
        e || (e = NA, e.width = s.width, e.height = s.height), i || (i = e);
        var c = e.width === i.width && e.height === i.height;
        this.bind(t), o.bindFramebuffer(o.READ_FRAMEBUFFER, h.framebuffer), o.blitFramebuffer(e.left, e.top, e.right, e.bottom, i.left, i.top, i.right, i.bottom, o.COLOR_BUFFER_BIT, c ? o.NEAREST : o.LINEAR);
      }
    }
  }, r.prototype.disposeFramebuffer = function(t, e) {
    var i = t.glFramebuffers[this.CONTEXT_UID], n = this.gl;
    if (!!i) {
      delete t.glFramebuffers[this.CONTEXT_UID];
      var s = this.managedFramebuffers.indexOf(t);
      s >= 0 && this.managedFramebuffers.splice(s, 1), t.disposeRunner.remove(this), e || (n.deleteFramebuffer(i.framebuffer), i.msaaBuffer && n.deleteRenderbuffer(i.msaaBuffer), i.stencil && n.deleteRenderbuffer(i.stencil)), i.blitFramebuffer && i.blitFramebuffer.dispose();
    }
  }, r.prototype.disposeAll = function(t) {
    var e = this.managedFramebuffers;
    this.managedFramebuffers = [];
    for (var i = 0; i < e.length; i++)
      this.disposeFramebuffer(e[i], t);
  }, r.prototype.forceStencil = function() {
    var t = this.current;
    if (!!t) {
      var e = t.glFramebuffers[this.CONTEXT_UID];
      if (!(!e || e.stencil)) {
        t.stencil = !0;
        var i = t.width, n = t.height, s = this.gl, a = s.createRenderbuffer();
        s.bindRenderbuffer(s.RENDERBUFFER, a), e.msaaBuffer ? s.renderbufferStorageMultisample(s.RENDERBUFFER, e.multisample, s.DEPTH24_STENCIL8, i, n) : s.renderbufferStorage(s.RENDERBUFFER, s.DEPTH_STENCIL, i, n), e.stencil = a, s.framebufferRenderbuffer(s.FRAMEBUFFER, s.DEPTH_STENCIL_ATTACHMENT, s.RENDERBUFFER, a);
      }
    }
  }, r.prototype.reset = function() {
    this.current = this.unknownFramebuffer, this.viewport = new Pt();
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}(), om = { 5126: 4, 5123: 2, 5121: 1 }, AA = function() {
  function r(t) {
    this.renderer = t, this._activeGeometry = null, this._activeVao = null, this.hasVao = !0, this.hasInstance = !0, this.canUseUInt32ElementIndex = !1, this.managedGeometries = {};
  }
  return r.prototype.contextChange = function() {
    this.disposeAll(!0);
    var t = this.gl = this.renderer.gl, e = this.renderer.context;
    if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, e.webGLVersion !== 2) {
      var i = this.renderer.context.extensions.vertexArrayObject;
      gt.PREFER_ENV === Is.WEBGL_LEGACY && (i = null), i ? (t.createVertexArray = function() {
        return i.createVertexArrayOES();
      }, t.bindVertexArray = function(s) {
        return i.bindVertexArrayOES(s);
      }, t.deleteVertexArray = function(s) {
        return i.deleteVertexArrayOES(s);
      }) : (this.hasVao = !1, t.createVertexArray = function() {
        return null;
      }, t.bindVertexArray = function() {
        return null;
      }, t.deleteVertexArray = function() {
        return null;
      });
    }
    if (e.webGLVersion !== 2) {
      var n = t.getExtension("ANGLE_instanced_arrays");
      n ? (t.vertexAttribDivisor = function(s, a) {
        return n.vertexAttribDivisorANGLE(s, a);
      }, t.drawElementsInstanced = function(s, a, o, u, h) {
        return n.drawElementsInstancedANGLE(s, a, o, u, h);
      }, t.drawArraysInstanced = function(s, a, o, u) {
        return n.drawArraysInstancedANGLE(s, a, o, u);
      }) : this.hasInstance = !1;
    }
    this.canUseUInt32ElementIndex = e.webGLVersion === 2 || !!e.extensions.uint32ElementIndex;
  }, r.prototype.bind = function(t, e) {
    e = e || this.renderer.shader.shader;
    var i = this.gl, n = t.glVertexArrayObjects[this.CONTEXT_UID], s = !1;
    n || (this.managedGeometries[t.id] = t, t.disposeRunner.add(this), t.glVertexArrayObjects[this.CONTEXT_UID] = n = {}, s = !0);
    var a = n[e.program.id] || this.initGeometryVao(t, e, s);
    this._activeGeometry = t, this._activeVao !== a && (this._activeVao = a, this.hasVao ? i.bindVertexArray(a) : this.activateVao(t, e.program)), this.updateBuffers();
  }, r.prototype.reset = function() {
    this.unbind();
  }, r.prototype.updateBuffers = function() {
    for (var t = this._activeGeometry, e = this.renderer.buffer, i = 0; i < t.buffers.length; i++) {
      var n = t.buffers[i];
      e.update(n);
    }
  }, r.prototype.checkCompatibility = function(t, e) {
    var i = t.attributes, n = e.attributeData;
    for (var s in n)
      if (!i[s])
        throw new Error('shader and geometry incompatible, geometry missing the "' + s + '" attribute');
  }, r.prototype.getSignature = function(t, e) {
    var i = t.attributes, n = e.attributeData, s = ["g", t.id];
    for (var a in i)
      n[a] && s.push(a, n[a].location);
    return s.join("-");
  }, r.prototype.initGeometryVao = function(t, e, i) {
    i === void 0 && (i = !0);
    var n = this.gl, s = this.CONTEXT_UID, a = this.renderer.buffer, o = e.program;
    o.glPrograms[s] || this.renderer.shader.generateProgram(e), this.checkCompatibility(t, o);
    var u = this.getSignature(t, o), h = t.glVertexArrayObjects[this.CONTEXT_UID], l = h[u];
    if (l)
      return h[o.id] = l, l;
    var c = t.buffers, d = t.attributes, p = {}, g = {};
    for (var v in c)
      p[v] = 0, g[v] = 0;
    for (var v in d)
      !d[v].size && o.attributeData[v] ? d[v].size = o.attributeData[v].size : d[v].size || console.warn("PIXI Geometry attribute '" + v + "' size cannot be determined (likely the bound shader does not have the attribute)"), p[d[v].buffer] += d[v].size * om[d[v].type];
    for (var v in d) {
      var m = d[v], _ = m.size;
      m.stride === void 0 && (p[m.buffer] === _ * om[m.type] ? m.stride = 0 : m.stride = p[m.buffer]), m.start === void 0 && (m.start = g[m.buffer], g[m.buffer] += _ * om[m.type]);
    }
    l = n.createVertexArray(), n.bindVertexArray(l);
    for (var y = 0; y < c.length; y++) {
      var b = c[y];
      a.bind(b), i && b._glBuffers[s].refCount++;
    }
    return this.activateVao(t, o), this._activeVao = l, h[o.id] = l, h[u] = l, l;
  }, r.prototype.disposeGeometry = function(t, e) {
    var i;
    if (!!this.managedGeometries[t.id]) {
      delete this.managedGeometries[t.id];
      var n = t.glVertexArrayObjects[this.CONTEXT_UID], s = this.gl, a = t.buffers, o = (i = this.renderer) === null || i === void 0 ? void 0 : i.buffer;
      if (t.disposeRunner.remove(this), !!n) {
        if (o)
          for (var u = 0; u < a.length; u++) {
            var h = a[u]._glBuffers[this.CONTEXT_UID];
            h && (h.refCount--, h.refCount === 0 && !e && o.dispose(a[u], e));
          }
        if (!e) {
          for (var l in n)
            if (l[0] === "g") {
              var c = n[l];
              this._activeVao === c && this.unbind(), s.deleteVertexArray(c);
            }
        }
        delete t.glVertexArrayObjects[this.CONTEXT_UID];
      }
    }
  }, r.prototype.disposeAll = function(t) {
    for (var e = Object.keys(this.managedGeometries), i = 0; i < e.length; i++)
      this.disposeGeometry(this.managedGeometries[e[i]], t);
  }, r.prototype.activateVao = function(t, e) {
    var i = this.gl, n = this.CONTEXT_UID, s = this.renderer.buffer, a = t.buffers, o = t.attributes;
    t.indexBuffer && s.bind(t.indexBuffer);
    var u = null;
    for (var h in o) {
      var l = o[h], c = a[l.buffer], d = c._glBuffers[n];
      if (e.attributeData[h]) {
        u !== d && (s.bind(c), u = d);
        var p = e.attributeData[h].location;
        if (i.enableVertexAttribArray(p), i.vertexAttribPointer(p, l.size, l.type || i.FLOAT, l.normalized, l.stride, l.start), l.instance)
          if (this.hasInstance)
            i.vertexAttribDivisor(p, 1);
          else
            throw new Error("geometry error, GPU Instancing is not supported on this device");
      }
    }
  }, r.prototype.draw = function(t, e, i, n) {
    var s = this.gl, a = this._activeGeometry;
    if (a.indexBuffer) {
      var o = a.indexBuffer.data.BYTES_PER_ELEMENT, u = o === 2 ? s.UNSIGNED_SHORT : s.UNSIGNED_INT;
      o === 2 || o === 4 && this.canUseUInt32ElementIndex ? a.instanced ? s.drawElementsInstanced(t, e || a.indexBuffer.data.length, u, (i || 0) * o, n || 1) : s.drawElements(t, e || a.indexBuffer.data.length, u, (i || 0) * o) : console.warn("unsupported index buffer type: uint32");
    } else
      a.instanced ? s.drawArraysInstanced(t, i, e || a.getSize(), n || 1) : s.drawArrays(t, i, e || a.getSize());
    return this;
  }, r.prototype.unbind = function() {
    this.gl.bindVertexArray(null), this._activeVao = null, this._activeGeometry = null;
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}(), FA = function() {
  function r(t) {
    t === void 0 && (t = null), this.type = ar.NONE, this.autoDetect = !0, this.maskObject = t || null, this.pooled = !1, this.isMaskData = !0, this.resolution = null, this.multisample = gt.FILTER_MULTISAMPLE, this.enabled = !0, this.colorMask = 15, this._filters = null, this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null, this._scissorRectLocal = null, this._colorMask = 15, this._target = null;
  }
  return Object.defineProperty(r.prototype, "filter", {
    get: function() {
      return this._filters ? this._filters[0] : null;
    },
    set: function(t) {
      t ? this._filters ? this._filters[0] = t : this._filters = [t] : this._filters = null;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.reset = function() {
    this.pooled && (this.maskObject = null, this.type = ar.NONE, this.autoDetect = !0), this._target = null, this._scissorRectLocal = null;
  }, r.prototype.copyCountersOrReset = function(t) {
    t ? (this._stencilCounter = t._stencilCounter, this._scissorCounter = t._scissorCounter, this._scissorRect = t._scissorRect) : (this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null);
  }, r;
}();
function Vx(r, t, e) {
  var i = r.createShader(t);
  return r.shaderSource(i, e), r.compileShader(i), i;
}
function Xx(r, t) {
  var e = r.getShaderSource(t).split(`
`).map(function(h, l) {
    return l + ": " + h;
  }), i = r.getShaderInfoLog(t), n = i.split(`
`), s = {}, a = n.map(function(h) {
    return parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1"));
  }).filter(function(h) {
    return h && !s[h] ? (s[h] = !0, !0) : !1;
  }), o = [""];
  a.forEach(function(h) {
    e[h - 1] = "%c" + e[h - 1] + "%c", o.push("background: #FF0000; color:#FFFFFF; font-size: 10px", "font-size: 10px");
  });
  var u = e.join(`
`);
  o[0] = u, console.error(i), console.groupCollapsed("click to view full shader code"), console.warn.apply(console, o), console.groupEnd();
}
function MA(r, t, e, i) {
  r.getProgramParameter(t, r.LINK_STATUS) || (r.getShaderParameter(e, r.COMPILE_STATUS) || Xx(r, e), r.getShaderParameter(i, r.COMPILE_STATUS) || Xx(r, i), console.error("PixiJS Error: Could not initialize shader."), r.getProgramInfoLog(t) !== "" && console.warn("PixiJS Warning: gl.getProgramInfoLog()", r.getProgramInfoLog(t)));
}
function um(r) {
  for (var t = new Array(r), e = 0; e < t.length; e++)
    t[e] = !1;
  return t;
}
function zT(r, t) {
  switch (r) {
    case "float":
      return 0;
    case "vec2":
      return new Float32Array(2 * t);
    case "vec3":
      return new Float32Array(3 * t);
    case "vec4":
      return new Float32Array(4 * t);
    case "int":
    case "uint":
    case "sampler2D":
    case "sampler2DArray":
      return 0;
    case "ivec2":
      return new Int32Array(2 * t);
    case "ivec3":
      return new Int32Array(3 * t);
    case "ivec4":
      return new Int32Array(4 * t);
    case "uvec2":
      return new Uint32Array(2 * t);
    case "uvec3":
      return new Uint32Array(3 * t);
    case "uvec4":
      return new Uint32Array(4 * t);
    case "bool":
      return !1;
    case "bvec2":
      return um(2 * t);
    case "bvec3":
      return um(3 * t);
    case "bvec4":
      return um(4 * t);
    case "mat2":
      return new Float32Array([
        1,
        0,
        0,
        1
      ]);
    case "mat3":
      return new Float32Array([
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1
      ]);
    case "mat4":
      return new Float32Array([
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1
      ]);
  }
  return null;
}
var jT = {}, kl = jT;
function kA() {
  if (kl === jT || kl && kl.isContextLost()) {
    var r = gt.ADAPTER.createCanvas(), t = void 0;
    gt.PREFER_ENV >= Is.WEBGL2 && (t = r.getContext("webgl2", {})), t || (t = r.getContext("webgl", {}) || r.getContext("experimental-webgl", {}), t ? t.getExtension("WEBGL_draw_buffers") : t = null), kl = t;
  }
  return kl;
}
var Ud;
function BA() {
  if (!Ud) {
    Ud = Tn.MEDIUM;
    var r = kA();
    if (r && r.getShaderPrecisionFormat) {
      var t = r.getShaderPrecisionFormat(r.FRAGMENT_SHADER, r.HIGH_FLOAT);
      Ud = t.precision ? Tn.HIGH : Tn.MEDIUM;
    }
  }
  return Ud;
}
function Wx(r, t, e) {
  if (r.substring(0, 9) !== "precision") {
    var i = t;
    return t === Tn.HIGH && e !== Tn.HIGH && (i = Tn.MEDIUM), "precision " + i + ` float;
` + r;
  } else if (e !== Tn.HIGH && r.substring(0, 15) === "precision highp")
    return r.replace("precision highp", "precision mediump");
  return r;
}
var LA = {
  float: 1,
  vec2: 2,
  vec3: 3,
  vec4: 4,
  int: 1,
  ivec2: 2,
  ivec3: 3,
  ivec4: 4,
  uint: 1,
  uvec2: 2,
  uvec3: 3,
  uvec4: 4,
  bool: 1,
  bvec2: 2,
  bvec3: 3,
  bvec4: 4,
  mat2: 4,
  mat3: 9,
  mat4: 16,
  sampler2D: 1
};
function $T(r) {
  return LA[r];
}
var Gd = null, Yx = {
  FLOAT: "float",
  FLOAT_VEC2: "vec2",
  FLOAT_VEC3: "vec3",
  FLOAT_VEC4: "vec4",
  INT: "int",
  INT_VEC2: "ivec2",
  INT_VEC3: "ivec3",
  INT_VEC4: "ivec4",
  UNSIGNED_INT: "uint",
  UNSIGNED_INT_VEC2: "uvec2",
  UNSIGNED_INT_VEC3: "uvec3",
  UNSIGNED_INT_VEC4: "uvec4",
  BOOL: "bool",
  BOOL_VEC2: "bvec2",
  BOOL_VEC3: "bvec3",
  BOOL_VEC4: "bvec4",
  FLOAT_MAT2: "mat2",
  FLOAT_MAT3: "mat3",
  FLOAT_MAT4: "mat4",
  SAMPLER_2D: "sampler2D",
  INT_SAMPLER_2D: "sampler2D",
  UNSIGNED_INT_SAMPLER_2D: "sampler2D",
  SAMPLER_CUBE: "samplerCube",
  INT_SAMPLER_CUBE: "samplerCube",
  UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
  SAMPLER_2D_ARRAY: "sampler2DArray",
  INT_SAMPLER_2D_ARRAY: "sampler2DArray",
  UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray"
};
function VT(r, t) {
  if (!Gd) {
    var e = Object.keys(Yx);
    Gd = {};
    for (var i = 0; i < e.length; ++i) {
      var n = e[i];
      Gd[r[n]] = Yx[n];
    }
  }
  return Gd[t];
}
var qu = [
  {
    test: function(r) {
      return r.type === "float" && r.size === 1;
    },
    code: function(r) {
      return `
            if(uv["` + r + '"] !== ud["' + r + `"].value)
            {
                ud["` + r + '"].value = uv["' + r + `"]
                gl.uniform1f(ud["` + r + '"].location, uv["' + r + `"])
            }
            `;
    }
  },
  {
    test: function(r, t) {
      return (r.type === "sampler2D" || r.type === "samplerCube" || r.type === "sampler2DArray") && r.size === 1 && !r.isArray && (t == null || t.castToBaseTexture !== void 0);
    },
    code: function(r) {
      return `t = syncData.textureCount++;

            renderer.texture.bind(uv["` + r + `"], t);

            if(ud["` + r + `"].value !== t)
            {
                ud["` + r + `"].value = t;
                gl.uniform1i(ud["` + r + `"].location, t);
; // eslint-disable-line max-len
            }`;
    }
  },
  {
    test: function(r, t) {
      return r.type === "mat3" && r.size === 1 && t.a !== void 0;
    },
    code: function(r) {
      return `
            gl.uniformMatrix3fv(ud["` + r + '"].location, false, uv["' + r + `"].toArray(true));
            `;
    },
    codeUbo: function(r) {
      return `
                var ` + r + "_matrix = uv." + r + `.toArray(true);

                data[offset] = ` + r + `_matrix[0];
                data[offset+1] = ` + r + `_matrix[1];
                data[offset+2] = ` + r + `_matrix[2];
        
                data[offset + 4] = ` + r + `_matrix[3];
                data[offset + 5] = ` + r + `_matrix[4];
                data[offset + 6] = ` + r + `_matrix[5];
        
                data[offset + 8] = ` + r + `_matrix[6];
                data[offset + 9] = ` + r + `_matrix[7];
                data[offset + 10] = ` + r + `_matrix[8];
            `;
    }
  },
  {
    test: function(r, t) {
      return r.type === "vec2" && r.size === 1 && t.x !== void 0;
    },
    code: function(r) {
      return `
                cv = ud["` + r + `"].value;
                v = uv["` + r + `"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["` + r + `"].location, v.x, v.y);
                }`;
    },
    codeUbo: function(r) {
      return `
                v = uv.` + r + `;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `;
    }
  },
  {
    test: function(r) {
      return r.type === "vec2" && r.size === 1;
    },
    code: function(r) {
      return `
                cv = ud["` + r + `"].value;
                v = uv["` + r + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["` + r + `"].location, v[0], v[1]);
                }
            `;
    }
  },
  {
    test: function(r, t) {
      return r.type === "vec4" && r.size === 1 && t.width !== void 0;
    },
    code: function(r) {
      return `
                cv = ud["` + r + `"].value;
                v = uv["` + r + `"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["` + r + `"].location, v.x, v.y, v.width, v.height)
                }`;
    },
    codeUbo: function(r) {
      return `
                    v = uv.` + r + `;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `;
    }
  },
  {
    test: function(r) {
      return r.type === "vec4" && r.size === 1;
    },
    code: function(r) {
      return `
                cv = ud["` + r + `"].value;
                v = uv["` + r + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["` + r + `"].location, v[0], v[1], v[2], v[3])
                }`;
    }
  }
], DA = {
  float: `
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,
  vec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,
  vec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,
  vec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,
  int: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,
  ivec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,
  ivec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,
  ivec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,
  uint: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,
  uvec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,
  uvec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,
  uvec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,
  bool: `
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,
  bvec2: `
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,
  bvec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,
  bvec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  sampler2D: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,
  samplerCube: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,
  sampler2DArray: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`
}, UA = {
  float: "gl.uniform1fv(location, v)",
  vec2: "gl.uniform2fv(location, v)",
  vec3: "gl.uniform3fv(location, v)",
  vec4: "gl.uniform4fv(location, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  int: "gl.uniform1iv(location, v)",
  ivec2: "gl.uniform2iv(location, v)",
  ivec3: "gl.uniform3iv(location, v)",
  ivec4: "gl.uniform4iv(location, v)",
  uint: "gl.uniform1uiv(location, v)",
  uvec2: "gl.uniform2uiv(location, v)",
  uvec3: "gl.uniform3uiv(location, v)",
  uvec4: "gl.uniform4uiv(location, v)",
  bool: "gl.uniform1iv(location, v)",
  bvec2: "gl.uniform2iv(location, v)",
  bvec3: "gl.uniform3iv(location, v)",
  bvec4: "gl.uniform4iv(location, v)",
  sampler2D: "gl.uniform1iv(location, v)",
  samplerCube: "gl.uniform1iv(location, v)",
  sampler2DArray: "gl.uniform1iv(location, v)"
};
function GA(r, t) {
  var e, i = [`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];
  for (var n in r.uniforms) {
    var s = t[n];
    if (!s) {
      !((e = r.uniforms[n]) === null || e === void 0) && e.group && (r.uniforms[n].ubo ? i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.` + n + ", '" + n + `');
                    `) : i.push(`
                        renderer.shader.syncUniformGroup(uv.` + n + `, syncData);
                    `));
      continue;
    }
    for (var a = r.uniforms[n], o = !1, u = 0; u < qu.length; u++)
      if (qu[u].test(s, a)) {
        i.push(qu[u].code(n, a)), o = !0;
        break;
      }
    if (!o) {
      var h = s.size === 1 ? DA : UA, l = h[s.type].replace("location", 'ud["' + n + '"].location');
      i.push(`
            cu = ud["` + n + `"];
            cv = cu.value;
            v = uv["` + n + `"];
            ` + l + ";");
    }
  }
  return new Function("ud", "uv", "renderer", "syncData", i.join(`
`));
}
var HA = [
  "precision mediump float;",
  "void main(void){",
  "float test = 0.1;",
  "%forloop%",
  "gl_FragColor = vec4(0.0);",
  "}"
].join(`
`);
function zA(r) {
  for (var t = "", e = 0; e < r; ++e)
    e > 0 && (t += `
else `), e < r - 1 && (t += "if(test == " + e + ".0){}");
  return t;
}
function jA(r, t) {
  if (r === 0)
    throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");
  for (var e = t.createShader(t.FRAGMENT_SHADER); ; ) {
    var i = HA.replace(/%forloop%/gi, zA(r));
    if (t.shaderSource(e, i), t.compileShader(e), !t.getShaderParameter(e, t.COMPILE_STATUS))
      r = r / 2 | 0;
    else
      break;
  }
  return r;
}
var Bl;
function $A() {
  if (typeof Bl == "boolean")
    return Bl;
  try {
    var r = new Function("param1", "param2", "param3", "return param1[param2] === param3;");
    Bl = r({ a: "b" }, "a", "b") === !0;
  } catch {
    Bl = !1;
  }
  return Bl;
}
var VA = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`, XA = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`, WA = 0, Hd = {}, gd = function() {
  function r(t, e, i) {
    i === void 0 && (i = "pixi-shader"), this.id = WA++, this.vertexSrc = t || r.defaultVertexSrc, this.fragmentSrc = e || r.defaultFragmentSrc, this.vertexSrc = this.vertexSrc.trim(), this.fragmentSrc = this.fragmentSrc.trim(), this.vertexSrc.substring(0, 8) !== "#version" && (i = i.replace(/\s+/g, "-"), Hd[i] ? (Hd[i]++, i += "-" + Hd[i]) : Hd[i] = 1, this.vertexSrc = "#define SHADER_NAME " + i + `
` + this.vertexSrc, this.fragmentSrc = "#define SHADER_NAME " + i + `
` + this.fragmentSrc, this.vertexSrc = Wx(this.vertexSrc, gt.PRECISION_VERTEX, Tn.HIGH), this.fragmentSrc = Wx(this.fragmentSrc, gt.PRECISION_FRAGMENT, BA())), this.glPrograms = {}, this.syncUniforms = null;
  }
  return Object.defineProperty(r, "defaultVertexSrc", {
    get: function() {
      return XA;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "defaultFragmentSrc", {
    get: function() {
      return VA;
    },
    enumerable: !1,
    configurable: !0
  }), r.from = function(t, e, i) {
    var n = t + e, s = yx[n];
    return s || (yx[n] = s = new r(t, e, i)), s;
  }, r;
}(), Ra = function() {
  function r(t, e) {
    this.uniformBindCount = 0, this.program = t, e ? e instanceof Ko ? this.uniformGroup = e : this.uniformGroup = new Ko(e) : this.uniformGroup = new Ko({});
  }
  return r.prototype.checkUniformExists = function(t, e) {
    if (e.uniforms[t])
      return !0;
    for (var i in e.uniforms) {
      var n = e.uniforms[i];
      if (n.group && this.checkUniformExists(t, n))
        return !0;
    }
    return !1;
  }, r.prototype.destroy = function() {
    this.uniformGroup = null;
  }, Object.defineProperty(r.prototype, "uniforms", {
    get: function() {
      return this.uniformGroup.uniforms;
    },
    enumerable: !1,
    configurable: !0
  }), r.from = function(t, e, i) {
    var n = gd.from(t, e);
    return new r(n, i);
  }, r;
}(), hm = 0, lm = 1, cm = 2, fm = 3, dm = 4, pm = 5, uu = function() {
  function r() {
    this.data = 0, this.blendMode = bt.NORMAL, this.polygonOffset = 0, this.blend = !0, this.depthMask = !0;
  }
  return Object.defineProperty(r.prototype, "blend", {
    get: function() {
      return !!(this.data & 1 << hm);
    },
    set: function(t) {
      !!(this.data & 1 << hm) !== t && (this.data ^= 1 << hm);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "offsets", {
    get: function() {
      return !!(this.data & 1 << lm);
    },
    set: function(t) {
      !!(this.data & 1 << lm) !== t && (this.data ^= 1 << lm);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "culling", {
    get: function() {
      return !!(this.data & 1 << cm);
    },
    set: function(t) {
      !!(this.data & 1 << cm) !== t && (this.data ^= 1 << cm);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "depthTest", {
    get: function() {
      return !!(this.data & 1 << fm);
    },
    set: function(t) {
      !!(this.data & 1 << fm) !== t && (this.data ^= 1 << fm);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "depthMask", {
    get: function() {
      return !!(this.data & 1 << pm);
    },
    set: function(t) {
      !!(this.data & 1 << pm) !== t && (this.data ^= 1 << pm);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "clockwiseFrontFace", {
    get: function() {
      return !!(this.data & 1 << dm);
    },
    set: function(t) {
      !!(this.data & 1 << dm) !== t && (this.data ^= 1 << dm);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "blendMode", {
    get: function() {
      return this._blendMode;
    },
    set: function(t) {
      this.blend = t !== bt.NONE, this._blendMode = t;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "polygonOffset", {
    get: function() {
      return this._polygonOffset;
    },
    set: function(t) {
      this.offsets = !!t, this._polygonOffset = t;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.toString = function() {
    return "[@pixi/core:State " + ("blendMode=" + this.blendMode + " ") + ("clockwiseFrontFace=" + this.clockwiseFrontFace + " ") + ("culling=" + this.culling + " ") + ("depthMask=" + this.depthMask + " ") + ("polygonOffset=" + this.polygonOffset) + "]";
  }, r.for2d = function() {
    var t = new r();
    return t.depthTest = !1, t.blend = !0, t;
  }, r;
}(), YA = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`, qA = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`, Nn = function(r) {
  Se(t, r);
  function t(e, i, n) {
    var s = this, a = gd.from(e || t.defaultVertexSrc, i || t.defaultFragmentSrc);
    return s = r.call(this, a, n) || this, s.padding = 0, s.resolution = gt.FILTER_RESOLUTION, s.multisample = gt.FILTER_MULTISAMPLE, s.enabled = !0, s.autoFit = !0, s.state = new uu(), s;
  }
  return t.prototype.apply = function(e, i, n, s, a) {
    e.applyFilter(this, i, n, s);
  }, Object.defineProperty(t.prototype, "blendMode", {
    get: function() {
      return this.state.blendMode;
    },
    set: function(e) {
      this.state.blendMode = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "resolution", {
    get: function() {
      return this._resolution;
    },
    set: function(e) {
      this._resolution = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t, "defaultVertexSrc", {
    get: function() {
      return qA;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t, "defaultFragmentSrc", {
    get: function() {
      return YA;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(Ra), ZA = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`, JA = `varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`, qx = new lr(), Sb = function() {
  function r(t, e) {
    this._texture = t, this.mapCoord = new lr(), this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._textureID = -1, this._updateID = 0, this.clampOffset = 0, this.clampMargin = typeof e > "u" ? 0.5 : e, this.isSimple = !1;
  }
  return Object.defineProperty(r.prototype, "texture", {
    get: function() {
      return this._texture;
    },
    set: function(t) {
      this._texture = t, this._textureID = -1;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.multiplyUvs = function(t, e) {
    e === void 0 && (e = t);
    for (var i = this.mapCoord, n = 0; n < t.length; n += 2) {
      var s = t[n], a = t[n + 1];
      e[n] = s * i.a + a * i.c + i.tx, e[n + 1] = s * i.b + a * i.d + i.ty;
    }
    return e;
  }, r.prototype.update = function(t) {
    var e = this._texture;
    if (!e || !e.valid || !t && this._textureID === e._updateID)
      return !1;
    this._textureID = e._updateID, this._updateID++;
    var i = e._uvs;
    this.mapCoord.set(i.x1 - i.x0, i.y1 - i.y0, i.x3 - i.x0, i.y3 - i.y0, i.x0, i.y0);
    var n = e.orig, s = e.trim;
    s && (qx.set(n.width / s.width, 0, 0, n.height / s.height, -s.x / s.width, -s.y / s.height), this.mapCoord.append(qx));
    var a = e.baseTexture, o = this.uClampFrame, u = this.clampMargin / a.resolution, h = this.clampOffset;
    return o[0] = (e._frame.x + u + h) / a.width, o[1] = (e._frame.y + u + h) / a.height, o[2] = (e._frame.x + e._frame.width - u + h) / a.width, o[3] = (e._frame.y + e._frame.height - u + h) / a.height, this.uClampOffset[0] = h / a.realWidth, this.uClampOffset[1] = h / a.realHeight, this.isSimple = e._frame.width === a.width && e._frame.height === a.height && e.rotate === 0, !0;
  }, r;
}(), KA = function(r) {
  Se(t, r);
  function t(e, i, n) {
    var s = this, a = null;
    return typeof e != "string" && i === void 0 && n === void 0 && (a = e, e = void 0, i = void 0, n = void 0), s = r.call(this, e || ZA, i || JA, n) || this, s.maskSprite = a, s.maskMatrix = new lr(), s;
  }
  return Object.defineProperty(t.prototype, "maskSprite", {
    get: function() {
      return this._maskSprite;
    },
    set: function(e) {
      this._maskSprite = e, this._maskSprite && (this._maskSprite.renderable = !1);
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.apply = function(e, i, n, s) {
    var a = this._maskSprite, o = a._texture;
    !o.valid || (o.uvMatrix || (o.uvMatrix = new Sb(o, 0)), o.uvMatrix.update(), this.uniforms.npmAlpha = o.baseTexture.alphaMode ? 0 : 1, this.uniforms.mask = o, this.uniforms.otherMatrix = e.calculateSpriteMatrix(this.maskMatrix, a).prepend(o.uvMatrix.mapCoord), this.uniforms.alpha = a.worldAlpha, this.uniforms.maskClamp = o.uvMatrix.uClampFrame, e.applyFilter(this, i, n, s));
  }, t;
}(Nn), QA = function() {
  function r(t) {
    this.renderer = t, this.enableScissor = !0, this.alphaMaskPool = [], this.maskDataPool = [], this.maskStack = [], this.alphaMaskIndex = 0;
  }
  return r.prototype.setMaskStack = function(t) {
    this.maskStack = t, this.renderer.scissor.setMaskStack(t), this.renderer.stencil.setMaskStack(t);
  }, r.prototype.push = function(t, e) {
    var i = e;
    if (!i.isMaskData) {
      var n = this.maskDataPool.pop() || new FA();
      n.pooled = !0, n.maskObject = e, i = n;
    }
    var s = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null;
    if (i.copyCountersOrReset(s), i._colorMask = s ? s._colorMask : 15, i.autoDetect && this.detect(i), i._target = t, i.type !== ar.SPRITE && this.maskStack.push(i), i.enabled)
      switch (i.type) {
        case ar.SCISSOR:
          this.renderer.scissor.push(i);
          break;
        case ar.STENCIL:
          this.renderer.stencil.push(i);
          break;
        case ar.SPRITE:
          i.copyCountersOrReset(null), this.pushSpriteMask(i);
          break;
        case ar.COLOR:
          this.pushColorMask(i);
          break;
      }
    i.type === ar.SPRITE && this.maskStack.push(i);
  }, r.prototype.pop = function(t) {
    var e = this.maskStack.pop();
    if (!(!e || e._target !== t)) {
      if (e.enabled)
        switch (e.type) {
          case ar.SCISSOR:
            this.renderer.scissor.pop(e);
            break;
          case ar.STENCIL:
            this.renderer.stencil.pop(e.maskObject);
            break;
          case ar.SPRITE:
            this.popSpriteMask(e);
            break;
          case ar.COLOR:
            this.popColorMask(e);
            break;
        }
      if (e.reset(), e.pooled && this.maskDataPool.push(e), this.maskStack.length !== 0) {
        var i = this.maskStack[this.maskStack.length - 1];
        i.type === ar.SPRITE && i._filters && (i._filters[0].maskSprite = i.maskObject);
      }
    }
  }, r.prototype.detect = function(t) {
    var e = t.maskObject;
    e ? e.isSprite ? t.type = ar.SPRITE : this.enableScissor && this.renderer.scissor.testScissor(t) ? t.type = ar.SCISSOR : t.type = ar.STENCIL : t.type = ar.COLOR;
  }, r.prototype.pushSpriteMask = function(t) {
    var e, i, n = t.maskObject, s = t._target, a = t._filters;
    a || (a = this.alphaMaskPool[this.alphaMaskIndex], a || (a = this.alphaMaskPool[this.alphaMaskIndex] = [new KA()]));
    var o = this.renderer, u = o.renderTexture, h, l;
    if (u.current) {
      var c = u.current;
      h = t.resolution || c.resolution, l = (e = t.multisample) !== null && e !== void 0 ? e : c.multisample;
    } else
      h = t.resolution || o.resolution, l = (i = t.multisample) !== null && i !== void 0 ? i : o.multisample;
    a[0].resolution = h, a[0].multisample = l, a[0].maskSprite = n;
    var d = s.filterArea;
    s.filterArea = n.getBounds(!0), o.filter.push(s, a), s.filterArea = d, t._filters || this.alphaMaskIndex++;
  }, r.prototype.popSpriteMask = function(t) {
    this.renderer.filter.pop(), t._filters ? t._filters[0].maskSprite = null : (this.alphaMaskIndex--, this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite = null);
  }, r.prototype.pushColorMask = function(t) {
    var e = t._colorMask, i = t._colorMask = e & t.colorMask;
    i !== e && this.renderer.gl.colorMask((i & 1) !== 0, (i & 2) !== 0, (i & 4) !== 0, (i & 8) !== 0);
  }, r.prototype.popColorMask = function(t) {
    var e = t._colorMask, i = this.maskStack.length > 0 ? this.maskStack[this.maskStack.length - 1]._colorMask : 15;
    i !== e && this.renderer.gl.colorMask((i & 1) !== 0, (i & 2) !== 0, (i & 4) !== 0, (i & 8) !== 0);
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}(), XT = function() {
  function r(t) {
    this.renderer = t, this.maskStack = [], this.glConst = 0;
  }
  return r.prototype.getStackLength = function() {
    return this.maskStack.length;
  }, r.prototype.setMaskStack = function(t) {
    var e = this.renderer.gl, i = this.getStackLength();
    this.maskStack = t;
    var n = this.getStackLength();
    n !== i && (n === 0 ? e.disable(this.glConst) : (e.enable(this.glConst), this._useCurrent()));
  }, r.prototype._useCurrent = function() {
  }, r.prototype.destroy = function() {
    this.renderer = null, this.maskStack = null;
  }, r;
}(), Zx = new lr(), Jx = [], tF = function(r) {
  Se(t, r);
  function t(e) {
    var i = r.call(this, e) || this;
    return i.glConst = gt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST, i;
  }
  return t.prototype.getStackLength = function() {
    var e = this.maskStack[this.maskStack.length - 1];
    return e ? e._scissorCounter : 0;
  }, t.prototype.calcScissorRect = function(e) {
    var i;
    if (!e._scissorRectLocal) {
      var n = e._scissorRect, s = e.maskObject, a = this.renderer, o = a.renderTexture, u = s.getBounds(!0, (i = Jx.pop()) !== null && i !== void 0 ? i : new Pt());
      this.roundFrameToPixels(u, o.current ? o.current.resolution : a.resolution, o.sourceFrame, o.destinationFrame, a.projection.transform), n && u.fit(n), e._scissorRectLocal = u;
    }
  }, t.isMatrixRotated = function(e) {
    if (!e)
      return !1;
    var i = e.a, n = e.b, s = e.c, a = e.d;
    return (Math.abs(n) > 1e-4 || Math.abs(s) > 1e-4) && (Math.abs(i) > 1e-4 || Math.abs(a) > 1e-4);
  }, t.prototype.testScissor = function(e) {
    var i = e.maskObject;
    if (!i.isFastRect || !i.isFastRect() || t.isMatrixRotated(i.worldTransform) || t.isMatrixRotated(this.renderer.projection.transform))
      return !1;
    this.calcScissorRect(e);
    var n = e._scissorRectLocal;
    return n.width > 0 && n.height > 0;
  }, t.prototype.roundFrameToPixels = function(e, i, n, s, a) {
    t.isMatrixRotated(a) || (a = a ? Zx.copyFrom(a) : Zx.identity(), a.translate(-n.x, -n.y).scale(s.width / n.width, s.height / n.height).translate(s.x, s.y), this.renderer.filter.transformAABB(a, e), e.fit(s), e.x = Math.round(e.x * i), e.y = Math.round(e.y * i), e.width = Math.round(e.width * i), e.height = Math.round(e.height * i));
  }, t.prototype.push = function(e) {
    e._scissorRectLocal || this.calcScissorRect(e);
    var i = this.renderer.gl;
    e._scissorRect || i.enable(i.SCISSOR_TEST), e._scissorCounter++, e._scissorRect = e._scissorRectLocal, this._useCurrent();
  }, t.prototype.pop = function(e) {
    var i = this.renderer.gl;
    e && Jx.push(e._scissorRectLocal), this.getStackLength() > 0 ? this._useCurrent() : i.disable(i.SCISSOR_TEST);
  }, t.prototype._useCurrent = function() {
    var e = this.maskStack[this.maskStack.length - 1]._scissorRect, i;
    this.renderer.renderTexture.current ? i = e.y : i = this.renderer.height - e.height - e.y, this.renderer.gl.scissor(e.x, i, e.width, e.height);
  }, t;
}(XT), eF = function(r) {
  Se(t, r);
  function t(e) {
    var i = r.call(this, e) || this;
    return i.glConst = gt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST, i;
  }
  return t.prototype.getStackLength = function() {
    var e = this.maskStack[this.maskStack.length - 1];
    return e ? e._stencilCounter : 0;
  }, t.prototype.push = function(e) {
    var i = e.maskObject, n = this.renderer.gl, s = e._stencilCounter;
    s === 0 && (this.renderer.framebuffer.forceStencil(), n.clearStencil(0), n.clear(n.STENCIL_BUFFER_BIT), n.enable(n.STENCIL_TEST)), e._stencilCounter++;
    var a = e._colorMask;
    a !== 0 && (e._colorMask = 0, n.colorMask(!1, !1, !1, !1)), n.stencilFunc(n.EQUAL, s, 4294967295), n.stencilOp(n.KEEP, n.KEEP, n.INCR), i.renderable = !0, i.render(this.renderer), this.renderer.batch.flush(), i.renderable = !1, a !== 0 && (e._colorMask = a, n.colorMask((a & 1) !== 0, (a & 2) !== 0, (a & 4) !== 0, (a & 8) !== 0)), this._useCurrent();
  }, t.prototype.pop = function(e) {
    var i = this.renderer.gl;
    if (this.getStackLength() === 0)
      i.disable(i.STENCIL_TEST);
    else {
      var n = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null, s = n ? n._colorMask : 15;
      s !== 0 && (n._colorMask = 0, i.colorMask(!1, !1, !1, !1)), i.stencilOp(i.KEEP, i.KEEP, i.DECR), e.renderable = !0, e.render(this.renderer), this.renderer.batch.flush(), e.renderable = !1, s !== 0 && (n._colorMask = s, i.colorMask((s & 1) !== 0, (s & 2) !== 0, (s & 4) !== 0, (s & 8) !== 0)), this._useCurrent();
    }
  }, t.prototype._useCurrent = function() {
    var e = this.renderer.gl;
    e.stencilFunc(e.EQUAL, this.getStackLength(), 4294967295), e.stencilOp(e.KEEP, e.KEEP, e.KEEP);
  }, t;
}(XT), rF = function() {
  function r(t) {
    this.renderer = t, this.destinationFrame = null, this.sourceFrame = null, this.defaultFrame = null, this.projectionMatrix = new lr(), this.transform = null;
  }
  return r.prototype.update = function(t, e, i, n) {
    this.destinationFrame = t || this.destinationFrame || this.defaultFrame, this.sourceFrame = e || this.sourceFrame || t, this.calculateProjection(this.destinationFrame, this.sourceFrame, i, n), this.transform && this.projectionMatrix.append(this.transform);
    var s = this.renderer;
    s.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix, s.globalUniforms.update(), s.shader.shader && s.shader.syncUniformGroup(s.shader.shader.uniforms.globals);
  }, r.prototype.calculateProjection = function(t, e, i, n) {
    var s = this.projectionMatrix, a = n ? -1 : 1;
    s.identity(), s.a = 1 / e.width * 2, s.d = a * (1 / e.height * 2), s.tx = -1 - e.x * s.a, s.ty = -a - e.y * s.d;
  }, r.prototype.setTransform = function(t) {
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}(), Ba = new Pt(), Ll = new Pt(), iF = function() {
  function r(t) {
    this.renderer = t, this.clearColor = t._backgroundColorRgba, this.defaultMaskStack = [], this.current = null, this.sourceFrame = new Pt(), this.destinationFrame = new Pt(), this.viewportFrame = new Pt();
  }
  return r.prototype.bind = function(t, e, i) {
    t === void 0 && (t = null);
    var n = this.renderer;
    this.current = t;
    var s, a, o;
    t ? (s = t.baseTexture, o = s.resolution, e || (Ba.width = t.frame.width, Ba.height = t.frame.height, e = Ba), i || (Ll.x = t.frame.x, Ll.y = t.frame.y, Ll.width = e.width, Ll.height = e.height, i = Ll), a = s.framebuffer) : (o = n.resolution, e || (Ba.width = n.screen.width, Ba.height = n.screen.height, e = Ba), i || (i = Ba, i.width = e.width, i.height = e.height));
    var u = this.viewportFrame;
    u.x = i.x * o, u.y = i.y * o, u.width = i.width * o, u.height = i.height * o, t || (u.y = n.view.height - (u.y + u.height)), u.ceil(), this.renderer.framebuffer.bind(a, u), this.renderer.projection.update(i, e, o, !a), t ? this.renderer.mask.setMaskStack(s.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack), this.sourceFrame.copyFrom(e), this.destinationFrame.copyFrom(i);
  }, r.prototype.clear = function(t, e) {
    this.current ? t = t || this.current.baseTexture.clearColor : t = t || this.clearColor;
    var i = this.destinationFrame, n = this.current ? this.current.baseTexture : this.renderer.screen, s = i.width !== n.width || i.height !== n.height;
    if (s) {
      var a = this.viewportFrame, o = a.x, u = a.y, h = a.width, l = a.height;
      o = Math.round(o), u = Math.round(u), h = Math.round(h), l = Math.round(l), this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST), this.renderer.gl.scissor(o, u, h, l);
    }
    this.renderer.framebuffer.clear(t[0], t[1], t[2], t[3], e), s && this.renderer.scissor.pop();
  }, r.prototype.resize = function() {
    this.bind(null);
  }, r.prototype.reset = function() {
    this.bind(null);
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}();
function nF(r, t, e, i, n) {
  e.buffer.update(n);
}
var sF = {
  float: `
        data[offset] = v;
    `,
  vec2: `
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,
  vec3: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,
  vec4: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,
  mat2: `
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,
  mat3: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,
  mat4: `
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `
}, WT = {
  float: 4,
  vec2: 8,
  vec3: 12,
  vec4: 16,
  int: 4,
  ivec2: 8,
  ivec3: 12,
  ivec4: 16,
  uint: 4,
  uvec2: 8,
  uvec3: 12,
  uvec4: 16,
  bool: 4,
  bvec2: 8,
  bvec3: 12,
  bvec4: 16,
  mat2: 16 * 2,
  mat3: 16 * 3,
  mat4: 16 * 4
};
function aF(r) {
  for (var t = r.map(function(u) {
    return {
      data: u,
      offset: 0,
      dataLen: 0,
      dirty: 0
    };
  }), e = 0, i = 0, n = 0, s = 0; s < t.length; s++) {
    var a = t[s];
    if (e = WT[a.data.type], a.data.size > 1 && (e = Math.max(e, 16) * a.data.size), a.dataLen = e, i % e !== 0 && i < 16) {
      var o = i % e % 16;
      i += o, n += o;
    }
    i + e > 16 ? (n = Math.ceil(n / 16) * 16, a.offset = n, n += e, i = e) : (a.offset = n, i += e, n += e);
  }
  return n = Math.ceil(n / 16) * 16, { uboElements: t, size: n };
}
function oF(r, t) {
  var e = [];
  for (var i in r)
    t[i] && e.push(t[i]);
  return e.sort(function(n, s) {
    return n.index - s.index;
  }), e;
}
function uF(r, t) {
  if (!r.autoManage)
    return { size: 0, syncFunc: nF };
  for (var e = oF(r.uniforms, t), i = aF(e), n = i.uboElements, s = i.size, a = [`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `], o = 0; o < n.length; o++) {
    for (var u = n[o], h = r.uniforms[u.data.name], l = u.data.name, c = !1, d = 0; d < qu.length; d++) {
      var p = qu[d];
      if (p.codeUbo && p.test(u.data, h)) {
        a.push("offset = " + u.offset / 4 + ";", qu[d].codeUbo(u.data.name, h)), c = !0;
        break;
      }
    }
    if (!c)
      if (u.data.size > 1) {
        var g = $T(u.data.type), v = Math.max(WT[u.data.type] / 16, 1), m = g / v, _ = (4 - m % 4) % 4;
        a.push(`
                cv = ud.` + l + `.value;
                v = uv.` + l + `;
                offset = ` + u.offset / 4 + `;

                t = 0;

                for(var i=0; i < ` + u.data.size * v + `; i++)
                {
                    for(var j = 0; j < ` + m + `; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ` + _ + `;
                }

                `);
      } else {
        var y = sF[u.data.type];
        a.push(`
                cv = ud.` + l + `.value;
                v = uv.` + l + `;
                offset = ` + u.offset / 4 + `;
                ` + y + `;
                `);
      }
  }
  return a.push(`
       renderer.buffer.update(buffer);
    `), {
    size: s,
    syncFunc: new Function("ud", "uv", "renderer", "syncData", "buffer", a.join(`
`))
  };
}
var hF = function() {
  function r(t, e) {
    this.program = t, this.uniformData = e, this.uniformGroups = {}, this.uniformDirtyGroups = {}, this.uniformBufferBindings = {};
  }
  return r.prototype.destroy = function() {
    this.uniformData = null, this.uniformGroups = null, this.uniformDirtyGroups = null, this.uniformBufferBindings = null, this.program = null;
  }, r;
}();
function lF(r, t) {
  for (var e = {}, i = t.getProgramParameter(r, t.ACTIVE_ATTRIBUTES), n = 0; n < i; n++) {
    var s = t.getActiveAttrib(r, n);
    if (s.name.indexOf("gl_") !== 0) {
      var a = VT(t, s.type), o = {
        type: a,
        name: s.name,
        size: $T(a),
        location: t.getAttribLocation(r, s.name)
      };
      e[s.name] = o;
    }
  }
  return e;
}
function cF(r, t) {
  for (var e = {}, i = t.getProgramParameter(r, t.ACTIVE_UNIFORMS), n = 0; n < i; n++) {
    var s = t.getActiveUniform(r, n), a = s.name.replace(/\[.*?\]$/, ""), o = !!s.name.match(/\[.*?\]$/), u = VT(t, s.type);
    e[a] = {
      name: a,
      index: n,
      type: u,
      size: s.size,
      isArray: o,
      value: zT(u, s.size)
    };
  }
  return e;
}
function fF(r, t) {
  var e = Vx(r, r.VERTEX_SHADER, t.vertexSrc), i = Vx(r, r.FRAGMENT_SHADER, t.fragmentSrc), n = r.createProgram();
  if (r.attachShader(n, e), r.attachShader(n, i), r.linkProgram(n), r.getProgramParameter(n, r.LINK_STATUS) || MA(r, n, e, i), t.attributeData = lF(n, r), t.uniformData = cF(n, r), !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)) {
    var s = Object.keys(t.attributeData);
    s.sort(function(l, c) {
      return l > c ? 1 : -1;
    });
    for (var a = 0; a < s.length; a++)
      t.attributeData[s[a]].location = a, r.bindAttribLocation(n, a, s[a]);
    r.linkProgram(n);
  }
  r.deleteShader(e), r.deleteShader(i);
  var o = {};
  for (var a in t.uniformData) {
    var u = t.uniformData[a];
    o[a] = {
      location: r.getUniformLocation(n, a),
      value: zT(u.type, u.size)
    };
  }
  var h = new hF(n, o);
  return h;
}
var dF = 0, zd = { textureCount: 0, uboCount: 0 }, pF = function() {
  function r(t) {
    this.destroyed = !1, this.renderer = t, this.systemCheck(), this.gl = null, this.shader = null, this.program = null, this.cache = {}, this._uboCache = {}, this.id = dF++;
  }
  return r.prototype.systemCheck = function() {
    if (!$A())
      throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.");
  }, r.prototype.contextChange = function(t) {
    this.gl = t, this.reset();
  }, r.prototype.bind = function(t, e) {
    t.uniforms.globals = this.renderer.globalUniforms;
    var i = t.program, n = i.glPrograms[this.renderer.CONTEXT_UID] || this.generateProgram(t);
    return this.shader = t, this.program !== i && (this.program = i, this.gl.useProgram(n.program)), e || (zd.textureCount = 0, zd.uboCount = 0, this.syncUniformGroup(t.uniformGroup, zd)), n;
  }, r.prototype.setUniforms = function(t) {
    var e = this.shader.program, i = e.glPrograms[this.renderer.CONTEXT_UID];
    e.syncUniforms(i.uniformData, t, this.renderer);
  }, r.prototype.syncUniformGroup = function(t, e) {
    var i = this.getGlProgram();
    (!t.static || t.dirtyId !== i.uniformDirtyGroups[t.id]) && (i.uniformDirtyGroups[t.id] = t.dirtyId, this.syncUniforms(t, i, e));
  }, r.prototype.syncUniforms = function(t, e, i) {
    var n = t.syncUniforms[this.shader.program.id] || this.createSyncGroups(t);
    n(e.uniformData, t.uniforms, this.renderer, i);
  }, r.prototype.createSyncGroups = function(t) {
    var e = this.getSignature(t, this.shader.program.uniformData, "u");
    return this.cache[e] || (this.cache[e] = GA(t, this.shader.program.uniformData)), t.syncUniforms[this.shader.program.id] = this.cache[e], t.syncUniforms[this.shader.program.id];
  }, r.prototype.syncUniformBufferGroup = function(t, e) {
    var i = this.getGlProgram();
    if (!t.static || t.dirtyId !== 0 || !i.uniformGroups[t.id]) {
      t.dirtyId = 0;
      var n = i.uniformGroups[t.id] || this.createSyncBufferGroup(t, i, e);
      t.buffer.update(), n(i.uniformData, t.uniforms, this.renderer, zd, t.buffer);
    }
    this.renderer.buffer.bindBufferBase(t.buffer, i.uniformBufferBindings[e]);
  }, r.prototype.createSyncBufferGroup = function(t, e, i) {
    var n = this.renderer.gl;
    this.renderer.buffer.bind(t.buffer);
    var s = this.gl.getUniformBlockIndex(e.program, i);
    e.uniformBufferBindings[i] = this.shader.uniformBindCount, n.uniformBlockBinding(e.program, s, this.shader.uniformBindCount), this.shader.uniformBindCount++;
    var a = this.getSignature(t, this.shader.program.uniformData, "ubo"), o = this._uboCache[a];
    if (o || (o = this._uboCache[a] = uF(t, this.shader.program.uniformData)), t.autoManage) {
      var u = new Float32Array(o.size / 4);
      t.buffer.update(u);
    }
    return e.uniformGroups[t.id] = o.syncFunc, e.uniformGroups[t.id];
  }, r.prototype.getSignature = function(t, e, i) {
    var n = t.uniforms, s = [i + "-"];
    for (var a in n)
      s.push(a), e[a] && s.push(e[a].type);
    return s.join("-");
  }, r.prototype.getGlProgram = function() {
    return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null;
  }, r.prototype.generateProgram = function(t) {
    var e = this.gl, i = t.program, n = fF(e, i);
    return i.glPrograms[this.renderer.CONTEXT_UID] = n, n;
  }, r.prototype.reset = function() {
    this.program = null, this.shader = null;
  }, r.prototype.destroy = function() {
    this.renderer = null, this.destroyed = !0;
  }, r;
}();
function vF(r, t) {
  return t === void 0 && (t = []), t[bt.NORMAL] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.ADD] = [r.ONE, r.ONE], t[bt.MULTIPLY] = [r.DST_COLOR, r.ONE_MINUS_SRC_ALPHA, r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.SCREEN] = [r.ONE, r.ONE_MINUS_SRC_COLOR, r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.OVERLAY] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.DARKEN] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.LIGHTEN] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.COLOR_DODGE] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.COLOR_BURN] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.HARD_LIGHT] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.SOFT_LIGHT] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.DIFFERENCE] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.EXCLUSION] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.HUE] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.SATURATION] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.COLOR] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.LUMINOSITY] = [r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.NONE] = [0, 0], t[bt.NORMAL_NPM] = [r.SRC_ALPHA, r.ONE_MINUS_SRC_ALPHA, r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.ADD_NPM] = [r.SRC_ALPHA, r.ONE, r.ONE, r.ONE], t[bt.SCREEN_NPM] = [r.SRC_ALPHA, r.ONE_MINUS_SRC_COLOR, r.ONE, r.ONE_MINUS_SRC_ALPHA], t[bt.SRC_IN] = [r.DST_ALPHA, r.ZERO], t[bt.SRC_OUT] = [r.ONE_MINUS_DST_ALPHA, r.ZERO], t[bt.SRC_ATOP] = [r.DST_ALPHA, r.ONE_MINUS_SRC_ALPHA], t[bt.DST_OVER] = [r.ONE_MINUS_DST_ALPHA, r.ONE], t[bt.DST_IN] = [r.ZERO, r.SRC_ALPHA], t[bt.DST_OUT] = [r.ZERO, r.ONE_MINUS_SRC_ALPHA], t[bt.DST_ATOP] = [r.ONE_MINUS_DST_ALPHA, r.SRC_ALPHA], t[bt.XOR] = [r.ONE_MINUS_DST_ALPHA, r.ONE_MINUS_SRC_ALPHA], t[bt.SUBTRACT] = [r.ONE, r.ONE, r.ONE, r.ONE, r.FUNC_REVERSE_SUBTRACT, r.FUNC_ADD], t;
}
var gF = 0, mF = 1, _F = 2, yF = 3, bF = 4, xF = 5, EF = function() {
  function r() {
    this.gl = null, this.stateId = 0, this.polygonOffset = 0, this.blendMode = bt.NONE, this._blendEq = !1, this.map = [], this.map[gF] = this.setBlend, this.map[mF] = this.setOffset, this.map[_F] = this.setCullFace, this.map[yF] = this.setDepthTest, this.map[bF] = this.setFrontFace, this.map[xF] = this.setDepthMask, this.checks = [], this.defaultState = new uu(), this.defaultState.blend = !0;
  }
  return r.prototype.contextChange = function(t) {
    this.gl = t, this.blendModes = vF(t), this.set(this.defaultState), this.reset();
  }, r.prototype.set = function(t) {
    if (t = t || this.defaultState, this.stateId !== t.data) {
      for (var e = this.stateId ^ t.data, i = 0; e; )
        e & 1 && this.map[i].call(this, !!(t.data & 1 << i)), e = e >> 1, i++;
      this.stateId = t.data;
    }
    for (var i = 0; i < this.checks.length; i++)
      this.checks[i](this, t);
  }, r.prototype.forceState = function(t) {
    t = t || this.defaultState;
    for (var e = 0; e < this.map.length; e++)
      this.map[e].call(this, !!(t.data & 1 << e));
    for (var e = 0; e < this.checks.length; e++)
      this.checks[e](this, t);
    this.stateId = t.data;
  }, r.prototype.setBlend = function(t) {
    this.updateCheck(r.checkBlendMode, t), this.gl[t ? "enable" : "disable"](this.gl.BLEND);
  }, r.prototype.setOffset = function(t) {
    this.updateCheck(r.checkPolygonOffset, t), this.gl[t ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
  }, r.prototype.setDepthTest = function(t) {
    this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST);
  }, r.prototype.setDepthMask = function(t) {
    this.gl.depthMask(t);
  }, r.prototype.setCullFace = function(t) {
    this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE);
  }, r.prototype.setFrontFace = function(t) {
    this.gl.frontFace(this.gl[t ? "CW" : "CCW"]);
  }, r.prototype.setBlendMode = function(t) {
    if (t !== this.blendMode) {
      this.blendMode = t;
      var e = this.blendModes[t], i = this.gl;
      e.length === 2 ? i.blendFunc(e[0], e[1]) : i.blendFuncSeparate(e[0], e[1], e[2], e[3]), e.length === 6 ? (this._blendEq = !0, i.blendEquationSeparate(e[4], e[5])) : this._blendEq && (this._blendEq = !1, i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD));
    }
  }, r.prototype.setPolygonOffset = function(t, e) {
    this.gl.polygonOffset(t, e);
  }, r.prototype.reset = function() {
    this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1), this.forceState(this.defaultState), this._blendEq = !0, this.blendMode = -1, this.setBlendMode(0);
  }, r.prototype.updateCheck = function(t, e) {
    var i = this.checks.indexOf(t);
    e && i === -1 ? this.checks.push(t) : !e && i !== -1 && this.checks.splice(i, 1);
  }, r.checkBlendMode = function(t, e) {
    t.setBlendMode(e.blendMode);
  }, r.checkPolygonOffset = function(t, e) {
    t.setPolygonOffset(1, e.polygonOffset);
  }, r.prototype.destroy = function() {
    this.gl = null;
  }, r;
}(), wF = function() {
  function r(t) {
    this.renderer = t, this.count = 0, this.checkCount = 0, this.maxIdle = gt.GC_MAX_IDLE, this.checkCountMax = gt.GC_MAX_CHECK_COUNT, this.mode = gt.GC_MODE;
  }
  return r.prototype.postrender = function() {
    !this.renderer.renderingToScreen || (this.count++, this.mode !== a_.MANUAL && (this.checkCount++, this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run())));
  }, r.prototype.run = function() {
    for (var t = this.renderer.texture, e = t.managedTextures, i = !1, n = 0; n < e.length; n++) {
      var s = e[n];
      !s.framebuffer && this.count - s.touched > this.maxIdle && (t.destroyTexture(s, !0), e[n] = null, i = !0);
    }
    if (i) {
      for (var a = 0, n = 0; n < e.length; n++)
        e[n] !== null && (e[a++] = e[n]);
      e.length = a;
    }
  }, r.prototype.unload = function(t) {
    var e = this.renderer.texture, i = t._texture;
    i && !i.framebuffer && e.destroyTexture(i);
    for (var n = t.children.length - 1; n >= 0; n--)
      this.unload(t.children[n]);
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}();
function TF(r) {
  var t, e, i, n, s, a, o, u, h, l, c, d, p, g, v, m, _, y, b, x, w, E, R;
  return "WebGL2RenderingContext" in globalThis && r instanceof globalThis.WebGL2RenderingContext ? R = (t = {}, t[Tt.UNSIGNED_BYTE] = (e = {}, e[lt.RGBA] = r.RGBA8, e[lt.RGB] = r.RGB8, e[lt.RG] = r.RG8, e[lt.RED] = r.R8, e[lt.RGBA_INTEGER] = r.RGBA8UI, e[lt.RGB_INTEGER] = r.RGB8UI, e[lt.RG_INTEGER] = r.RG8UI, e[lt.RED_INTEGER] = r.R8UI, e[lt.ALPHA] = r.ALPHA, e[lt.LUMINANCE] = r.LUMINANCE, e[lt.LUMINANCE_ALPHA] = r.LUMINANCE_ALPHA, e), t[Tt.BYTE] = (i = {}, i[lt.RGBA] = r.RGBA8_SNORM, i[lt.RGB] = r.RGB8_SNORM, i[lt.RG] = r.RG8_SNORM, i[lt.RED] = r.R8_SNORM, i[lt.RGBA_INTEGER] = r.RGBA8I, i[lt.RGB_INTEGER] = r.RGB8I, i[lt.RG_INTEGER] = r.RG8I, i[lt.RED_INTEGER] = r.R8I, i), t[Tt.UNSIGNED_SHORT] = (n = {}, n[lt.RGBA_INTEGER] = r.RGBA16UI, n[lt.RGB_INTEGER] = r.RGB16UI, n[lt.RG_INTEGER] = r.RG16UI, n[lt.RED_INTEGER] = r.R16UI, n[lt.DEPTH_COMPONENT] = r.DEPTH_COMPONENT16, n), t[Tt.SHORT] = (s = {}, s[lt.RGBA_INTEGER] = r.RGBA16I, s[lt.RGB_INTEGER] = r.RGB16I, s[lt.RG_INTEGER] = r.RG16I, s[lt.RED_INTEGER] = r.R16I, s), t[Tt.UNSIGNED_INT] = (a = {}, a[lt.RGBA_INTEGER] = r.RGBA32UI, a[lt.RGB_INTEGER] = r.RGB32UI, a[lt.RG_INTEGER] = r.RG32UI, a[lt.RED_INTEGER] = r.R32UI, a[lt.DEPTH_COMPONENT] = r.DEPTH_COMPONENT24, a), t[Tt.INT] = (o = {}, o[lt.RGBA_INTEGER] = r.RGBA32I, o[lt.RGB_INTEGER] = r.RGB32I, o[lt.RG_INTEGER] = r.RG32I, o[lt.RED_INTEGER] = r.R32I, o), t[Tt.FLOAT] = (u = {}, u[lt.RGBA] = r.RGBA32F, u[lt.RGB] = r.RGB32F, u[lt.RG] = r.RG32F, u[lt.RED] = r.R32F, u[lt.DEPTH_COMPONENT] = r.DEPTH_COMPONENT32F, u), t[Tt.HALF_FLOAT] = (h = {}, h[lt.RGBA] = r.RGBA16F, h[lt.RGB] = r.RGB16F, h[lt.RG] = r.RG16F, h[lt.RED] = r.R16F, h), t[Tt.UNSIGNED_SHORT_5_6_5] = (l = {}, l[lt.RGB] = r.RGB565, l), t[Tt.UNSIGNED_SHORT_4_4_4_4] = (c = {}, c[lt.RGBA] = r.RGBA4, c), t[Tt.UNSIGNED_SHORT_5_5_5_1] = (d = {}, d[lt.RGBA] = r.RGB5_A1, d), t[Tt.UNSIGNED_INT_2_10_10_10_REV] = (p = {}, p[lt.RGBA] = r.RGB10_A2, p[lt.RGBA_INTEGER] = r.RGB10_A2UI, p), t[Tt.UNSIGNED_INT_10F_11F_11F_REV] = (g = {}, g[lt.RGB] = r.R11F_G11F_B10F, g), t[Tt.UNSIGNED_INT_5_9_9_9_REV] = (v = {}, v[lt.RGB] = r.RGB9_E5, v), t[Tt.UNSIGNED_INT_24_8] = (m = {}, m[lt.DEPTH_STENCIL] = r.DEPTH24_STENCIL8, m), t[Tt.FLOAT_32_UNSIGNED_INT_24_8_REV] = (_ = {}, _[lt.DEPTH_STENCIL] = r.DEPTH32F_STENCIL8, _), t) : R = (y = {}, y[Tt.UNSIGNED_BYTE] = (b = {}, b[lt.RGBA] = r.RGBA, b[lt.RGB] = r.RGB, b[lt.ALPHA] = r.ALPHA, b[lt.LUMINANCE] = r.LUMINANCE, b[lt.LUMINANCE_ALPHA] = r.LUMINANCE_ALPHA, b), y[Tt.UNSIGNED_SHORT_5_6_5] = (x = {}, x[lt.RGB] = r.RGB, x), y[Tt.UNSIGNED_SHORT_4_4_4_4] = (w = {}, w[lt.RGBA] = r.RGBA, w), y[Tt.UNSIGNED_SHORT_5_5_5_1] = (E = {}, E[lt.RGBA] = r.RGBA, E), y), R;
}
var vm = function() {
  function r(t) {
    this.texture = t, this.width = -1, this.height = -1, this.dirtyId = -1, this.dirtyStyleId = -1, this.mipmap = !1, this.wrapMode = 33071, this.type = Tt.UNSIGNED_BYTE, this.internalFormat = lt.RGBA, this.samplerType = 0;
  }
  return r;
}(), CF = function() {
  function r(t) {
    this.renderer = t, this.boundTextures = [], this.currentLocation = -1, this.managedTextures = [], this._unknownBoundTextures = !1, this.unknownTexture = new Zt(), this.hasIntegerTextures = !1;
  }
  return r.prototype.contextChange = function() {
    var t = this.gl = this.renderer.gl;
    this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.webGLVersion = this.renderer.context.webGLVersion, this.internalFormats = TF(t);
    var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
    this.boundTextures.length = e;
    for (var i = 0; i < e; i++)
      this.boundTextures[i] = null;
    this.emptyTextures = {};
    var n = new vm(t.createTexture());
    t.bindTexture(t.TEXTURE_2D, n.texture), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, new Uint8Array(4)), this.emptyTextures[t.TEXTURE_2D] = n, this.emptyTextures[t.TEXTURE_CUBE_MAP] = new vm(t.createTexture()), t.bindTexture(t.TEXTURE_CUBE_MAP, this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);
    for (var i = 0; i < 6; i++)
      t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, null);
    t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MIN_FILTER, t.LINEAR);
    for (var i = 0; i < this.boundTextures.length; i++)
      this.bind(null, i);
  }, r.prototype.bind = function(t, e) {
    e === void 0 && (e = 0);
    var i = this.gl;
    if (t = t == null ? void 0 : t.castToBaseTexture(), t && t.valid && !t.parentTextureArray) {
      t.touched = this.renderer.textureGC.count;
      var n = t._glTextures[this.CONTEXT_UID] || this.initTexture(t);
      this.boundTextures[e] !== t && (this.currentLocation !== e && (this.currentLocation = e, i.activeTexture(i.TEXTURE0 + e)), i.bindTexture(t.target, n.texture)), n.dirtyId !== t.dirtyId && (this.currentLocation !== e && (this.currentLocation = e, i.activeTexture(i.TEXTURE0 + e)), this.updateTexture(t)), this.boundTextures[e] = t;
    } else
      this.currentLocation !== e && (this.currentLocation = e, i.activeTexture(i.TEXTURE0 + e)), i.bindTexture(i.TEXTURE_2D, this.emptyTextures[i.TEXTURE_2D].texture), this.boundTextures[e] = null;
  }, r.prototype.reset = function() {
    this._unknownBoundTextures = !0, this.hasIntegerTextures = !1, this.currentLocation = -1;
    for (var t = 0; t < this.boundTextures.length; t++)
      this.boundTextures[t] = this.unknownTexture;
  }, r.prototype.unbind = function(t) {
    var e = this, i = e.gl, n = e.boundTextures;
    if (this._unknownBoundTextures) {
      this._unknownBoundTextures = !1;
      for (var s = 0; s < n.length; s++)
        n[s] === this.unknownTexture && this.bind(null, s);
    }
    for (var s = 0; s < n.length; s++)
      n[s] === t && (this.currentLocation !== s && (i.activeTexture(i.TEXTURE0 + s), this.currentLocation = s), i.bindTexture(t.target, this.emptyTextures[t.target].texture), n[s] = null);
  }, r.prototype.ensureSamplerType = function(t) {
    var e = this, i = e.boundTextures, n = e.hasIntegerTextures, s = e.CONTEXT_UID;
    if (!!n)
      for (var a = t - 1; a >= 0; --a) {
        var o = i[a];
        if (o) {
          var u = o._glTextures[s];
          u.samplerType !== av.FLOAT && this.renderer.texture.unbind(o);
        }
      }
  }, r.prototype.initTexture = function(t) {
    var e = new vm(this.gl.createTexture());
    return e.dirtyId = -1, t._glTextures[this.CONTEXT_UID] = e, this.managedTextures.push(t), t.on("dispose", this.destroyTexture, this), e;
  }, r.prototype.initTextureType = function(t, e) {
    var i, n;
    e.internalFormat = (n = (i = this.internalFormats[t.type]) === null || i === void 0 ? void 0 : i[t.format]) !== null && n !== void 0 ? n : t.format, this.webGLVersion === 2 && t.type === Tt.HALF_FLOAT ? e.type = this.gl.HALF_FLOAT : e.type = t.type;
  }, r.prototype.updateTexture = function(t) {
    var e = t._glTextures[this.CONTEXT_UID];
    if (!!e) {
      var i = this.renderer;
      if (this.initTextureType(t, e), t.resource && t.resource.upload(i, t, e))
        e.samplerType !== av.FLOAT && (this.hasIntegerTextures = !0);
      else {
        var n = t.realWidth, s = t.realHeight, a = i.gl;
        (e.width !== n || e.height !== s || e.dirtyId < 0) && (e.width = n, e.height = s, a.texImage2D(t.target, 0, e.internalFormat, n, s, 0, t.format, e.type, null));
      }
      t.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(t), e.dirtyId = t.dirtyId;
    }
  }, r.prototype.destroyTexture = function(t, e) {
    var i = this.gl;
    if (t = t.castToBaseTexture(), t._glTextures[this.CONTEXT_UID] && (this.unbind(t), i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture), t.off("dispose", this.destroyTexture, this), delete t._glTextures[this.CONTEXT_UID], !e)) {
      var n = this.managedTextures.indexOf(t);
      n !== -1 && Yu(this.managedTextures, n, 1);
    }
  }, r.prototype.updateTextureStyle = function(t) {
    var e = t._glTextures[this.CONTEXT_UID];
    !e || ((t.mipmap === Rs.POW2 || this.webGLVersion !== 2) && !t.isPowerOfTwo ? e.mipmap = !1 : e.mipmap = t.mipmap >= 1, this.webGLVersion !== 2 && !t.isPowerOfTwo ? e.wrapMode = xs.CLAMP : e.wrapMode = t.wrapMode, t.resource && t.resource.style(this.renderer, t, e) || this.setStyle(t, e), e.dirtyStyleId = t.dirtyStyleId);
  }, r.prototype.setStyle = function(t, e) {
    var i = this.gl;
    if (e.mipmap && t.mipmap !== Rs.ON_MANUAL && i.generateMipmap(t.target), i.texParameteri(t.target, i.TEXTURE_WRAP_S, e.wrapMode), i.texParameteri(t.target, i.TEXTURE_WRAP_T, e.wrapMode), e.mipmap) {
      i.texParameteri(t.target, i.TEXTURE_MIN_FILTER, t.scaleMode === bs.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST);
      var n = this.renderer.context.extensions.anisotropicFiltering;
      if (n && t.anisotropicLevel > 0 && t.scaleMode === bs.LINEAR) {
        var s = Math.min(t.anisotropicLevel, i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
        i.texParameterf(t.target, n.TEXTURE_MAX_ANISOTROPY_EXT, s);
      }
    } else
      i.texParameteri(t.target, i.TEXTURE_MIN_FILTER, t.scaleMode === bs.LINEAR ? i.LINEAR : i.NEAREST);
    i.texParameteri(t.target, i.TEXTURE_MAG_FILTER, t.scaleMode === bs.LINEAR ? i.LINEAR : i.NEAREST);
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r;
}(), gm = new lr(), IF = function(r) {
  Se(t, r);
  function t(e, i) {
    e === void 0 && (e = Uc.UNKNOWN);
    var n = r.call(this) || this;
    return i = Object.assign({}, gt.RENDER_OPTIONS, i), n.options = i, n.type = e, n.screen = new Pt(0, 0, i.width, i.height), n.view = i.view || gt.ADAPTER.createCanvas(), n.resolution = i.resolution || gt.RESOLUTION, n.useContextAlpha = i.useContextAlpha, n.autoDensity = !!i.autoDensity, n.preserveDrawingBuffer = i.preserveDrawingBuffer, n.clearBeforeRender = i.clearBeforeRender, n._backgroundColor = 0, n._backgroundColorRgba = [0, 0, 0, 1], n._backgroundColorString = "#000000", n.backgroundColor = i.backgroundColor || n._backgroundColor, n.backgroundAlpha = i.backgroundAlpha, i.transparent !== void 0 && (Rn("6.0.0", "Option transparent is deprecated, please use backgroundAlpha instead."), n.useContextAlpha = i.transparent, n.backgroundAlpha = i.transparent ? 0 : 1), n._lastObjectRendered = null, n.plugins = {}, n;
  }
  return t.prototype.initPlugins = function(e) {
    for (var i in e)
      this.plugins[i] = new e[i](this);
  }, Object.defineProperty(t.prototype, "width", {
    get: function() {
      return this.view.width;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    get: function() {
      return this.view.height;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.resize = function(e, i) {
    this.view.width = Math.round(e * this.resolution), this.view.height = Math.round(i * this.resolution);
    var n = this.view.width / this.resolution, s = this.view.height / this.resolution;
    this.screen.width = n, this.screen.height = s, this.autoDensity && (this.view.style.width = n + "px", this.view.style.height = s + "px"), this.emit("resize", n, s);
  }, t.prototype.generateTexture = function(e, i, n, s) {
    i === void 0 && (i = {}), typeof i == "number" && (Rn("6.1.0", "generateTexture options (scaleMode, resolution, region) are now object options."), i = { scaleMode: i, resolution: n, region: s });
    var a = i.region, o = uA(i, ["region"]);
    s = a || e.getLocalBounds(null, !0), s.width === 0 && (s.width = 1), s.height === 0 && (s.height = 1);
    var u = Ji.create(d_({ width: s.width, height: s.height }, o));
    return gm.tx = -s.x, gm.ty = -s.y, this.render(e, {
      renderTexture: u,
      clear: !1,
      transform: gm,
      skipUpdateTransform: !!e.parent
    }), u;
  }, t.prototype.destroy = function(e) {
    for (var i in this.plugins)
      this.plugins[i].destroy(), this.plugins[i] = null;
    e && this.view.parentNode && this.view.parentNode.removeChild(this.view);
    var n = this;
    n.plugins = null, n.type = Uc.UNKNOWN, n.view = null, n.screen = null, n._tempDisplayObjectParent = null, n.options = null, this._backgroundColorRgba = null, this._backgroundColorString = null, this._lastObjectRendered = null;
  }, Object.defineProperty(t.prototype, "backgroundColor", {
    get: function() {
      return this._backgroundColor;
    },
    set: function(e) {
      this._backgroundColor = e, this._backgroundColorString = RT(e), vl(e, this._backgroundColorRgba);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "backgroundAlpha", {
    get: function() {
      return this._backgroundColorRgba[3];
    },
    set: function(e) {
      this._backgroundColorRgba[3] = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(Fi), RF = function() {
  function r(t) {
    this.buffer = t || null, this.updateID = -1, this.byteLength = -1, this.refCount = 0;
  }
  return r;
}(), SF = function() {
  function r(t) {
    this.renderer = t, this.managedBuffers = {}, this.boundBufferBases = {};
  }
  return r.prototype.destroy = function() {
    this.renderer = null;
  }, r.prototype.contextChange = function() {
    this.disposeAll(!0), this.gl = this.renderer.gl, this.CONTEXT_UID = this.renderer.CONTEXT_UID;
  }, r.prototype.bind = function(t) {
    var e = this, i = e.gl, n = e.CONTEXT_UID, s = t._glBuffers[n] || this.createGLBuffer(t);
    i.bindBuffer(t.type, s.buffer);
  }, r.prototype.bindBufferBase = function(t, e) {
    var i = this, n = i.gl, s = i.CONTEXT_UID;
    if (this.boundBufferBases[e] !== t) {
      var a = t._glBuffers[s] || this.createGLBuffer(t);
      this.boundBufferBases[e] = t, n.bindBufferBase(n.UNIFORM_BUFFER, e, a.buffer);
    }
  }, r.prototype.bindBufferRange = function(t, e, i) {
    var n = this, s = n.gl, a = n.CONTEXT_UID;
    i = i || 0;
    var o = t._glBuffers[a] || this.createGLBuffer(t);
    s.bindBufferRange(s.UNIFORM_BUFFER, e || 0, o.buffer, i * 256, 256);
  }, r.prototype.update = function(t) {
    var e = this, i = e.gl, n = e.CONTEXT_UID, s = t._glBuffers[n];
    if (t._updateID !== s.updateID)
      if (s.updateID = t._updateID, i.bindBuffer(t.type, s.buffer), s.byteLength >= t.data.byteLength)
        i.bufferSubData(t.type, 0, t.data);
      else {
        var a = t.static ? i.STATIC_DRAW : i.DYNAMIC_DRAW;
        s.byteLength = t.data.byteLength, i.bufferData(t.type, t.data, a);
      }
  }, r.prototype.dispose = function(t, e) {
    if (!!this.managedBuffers[t.id]) {
      delete this.managedBuffers[t.id];
      var i = t._glBuffers[this.CONTEXT_UID], n = this.gl;
      t.disposeRunner.remove(this), i && (e || n.deleteBuffer(i.buffer), delete t._glBuffers[this.CONTEXT_UID]);
    }
  }, r.prototype.disposeAll = function(t) {
    for (var e = Object.keys(this.managedBuffers), i = 0; i < e.length; i++)
      this.dispose(this.managedBuffers[e[i]], t);
  }, r.prototype.createGLBuffer = function(t) {
    var e = this, i = e.CONTEXT_UID, n = e.gl;
    return t._glBuffers[i] = new RF(n.createBuffer()), this.managedBuffers[t.id] = t, t.disposeRunner.add(this), t._glBuffers[i];
  }, r;
}(), YT = function(r) {
  Se(t, r);
  function t(e) {
    var i = r.call(this, Uc.WEBGL, e) || this;
    return e = i.options, i.gl = null, i.CONTEXT_UID = 0, i.runners = {
      destroy: new Ir("destroy"),
      contextChange: new Ir("contextChange"),
      reset: new Ir("reset"),
      update: new Ir("update"),
      postrender: new Ir("postrender"),
      prerender: new Ir("prerender"),
      resize: new Ir("resize")
    }, i.runners.contextChange.add(i), i.globalUniforms = new Ko({
      projectionMatrix: new lr()
    }, !0), i.addSystem(QA, "mask").addSystem(SA, "context").addSystem(EF, "state").addSystem(pF, "shader").addSystem(CF, "texture").addSystem(SF, "buffer").addSystem(AA, "geometry").addSystem(OA, "framebuffer").addSystem(tF, "scissor").addSystem(eF, "stencil").addSystem(rF, "projection").addSystem(wF, "textureGC").addSystem(IA, "filter").addSystem(iF, "renderTexture").addSystem(RA, "batch"), i.initPlugins(t.__plugins), i.multisample = void 0, e.context ? i.context.initFromContext(e.context) : i.context.initFromOptions({
      alpha: !!i.useContextAlpha,
      antialias: e.antialias,
      premultipliedAlpha: i.useContextAlpha && i.useContextAlpha !== "notMultiplied",
      stencil: !0,
      preserveDrawingBuffer: e.preserveDrawingBuffer,
      powerPreference: i.options.powerPreference
    }), i.renderingToScreen = !0, nP(i.context.webGLVersion === 2 ? "WebGL 2" : "WebGL 1"), i.resize(i.options.width, i.options.height), i;
  }
  return t.create = function(e) {
    if (sP())
      return new t(e);
    throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.');
  }, t.prototype.contextChange = function() {
    var e = this.gl, i;
    if (this.context.webGLVersion === 1) {
      var n = e.getParameter(e.FRAMEBUFFER_BINDING);
      e.bindFramebuffer(e.FRAMEBUFFER, null), i = e.getParameter(e.SAMPLES), e.bindFramebuffer(e.FRAMEBUFFER, n);
    } else {
      var n = e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);
      e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null), i = e.getParameter(e.SAMPLES), e.bindFramebuffer(e.DRAW_FRAMEBUFFER, n);
    }
    i >= tr.HIGH ? this.multisample = tr.HIGH : i >= tr.MEDIUM ? this.multisample = tr.MEDIUM : i >= tr.LOW ? this.multisample = tr.LOW : this.multisample = tr.NONE;
  }, t.prototype.addSystem = function(e, i) {
    var n = new e(this);
    if (this[i])
      throw new Error('Whoops! The name "' + i + '" is already in use');
    this[i] = n;
    for (var s in this.runners)
      this.runners[s].add(n);
    return this;
  }, t.prototype.render = function(e, i) {
    var n, s, a, o;
    if (i && (i instanceof Ji ? (Rn("6.0.0", "Renderer#render arguments changed, use options instead."), n = i, s = arguments[2], a = arguments[3], o = arguments[4]) : (n = i.renderTexture, s = i.clear, a = i.transform, o = i.skipUpdateTransform)), this.renderingToScreen = !n, this.runners.prerender.emit(), this.emit("prerender"), this.projection.transform = a, !this.context.isLost) {
      if (n || (this._lastObjectRendered = e), !o) {
        var u = e.enableTempParent();
        e.updateTransform(), e.disableTempParent(u);
      }
      this.renderTexture.bind(n), this.batch.currentRenderer.start(), (s !== void 0 ? s : this.clearBeforeRender) && this.renderTexture.clear(), e.render(this), this.batch.currentRenderer.flush(), n && n.baseTexture.update(), this.runners.postrender.emit(), this.projection.transform = null, this.emit("postrender");
    }
  }, t.prototype.generateTexture = function(e, i, n, s) {
    i === void 0 && (i = {});
    var a = r.prototype.generateTexture.call(this, e, i, n, s);
    return this.framebuffer.blit(), a;
  }, t.prototype.resize = function(e, i) {
    r.prototype.resize.call(this, e, i), this.runners.resize.emit(this.screen.height, this.screen.width);
  }, t.prototype.reset = function() {
    return this.runners.reset.emit(), this;
  }, t.prototype.clear = function() {
    this.renderTexture.bind(), this.renderTexture.clear();
  }, t.prototype.destroy = function(e) {
    this.runners.destroy.emit();
    for (var i in this.runners)
      this.runners[i].destroy();
    r.prototype.destroy.call(this, e), this.gl = null;
  }, Object.defineProperty(t.prototype, "extract", {
    get: function() {
      return Rn("6.0.0", "Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."), this.plugins.extract;
    },
    enumerable: !1,
    configurable: !0
  }), t.registerPlugin = function(e, i) {
    Rn("6.5.0", "Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."), Ns.add({
      name: e,
      type: me.RendererPlugin,
      ref: i
    });
  }, t.__plugins = {}, t;
}(IF);
Ns.handleByMap(me.RendererPlugin, YT.__plugins);
function qT(r) {
  return YT.create(r);
}
var PF = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`, NF = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`, OF = PF, ZT = NF, v_ = function() {
  function r() {
    this.texArray = null, this.blend = 0, this.type = qi.TRIANGLES, this.start = 0, this.size = 0, this.data = null;
  }
  return r;
}(), g_ = function() {
  function r() {
    this.elements = [], this.ids = [], this.count = 0;
  }
  return r.prototype.clear = function() {
    for (var t = 0; t < this.count; t++)
      this.elements[t] = null;
    this.count = 0;
  }, r;
}(), m_ = function() {
  function r(t) {
    typeof t == "number" ? this.rawBinaryData = new ArrayBuffer(t) : t instanceof Uint8Array ? this.rawBinaryData = t.buffer : this.rawBinaryData = t, this.uint32View = new Uint32Array(this.rawBinaryData), this.float32View = new Float32Array(this.rawBinaryData);
  }
  return Object.defineProperty(r.prototype, "int8View", {
    get: function() {
      return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)), this._int8View;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "uint8View", {
    get: function() {
      return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)), this._uint8View;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "int16View", {
    get: function() {
      return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)), this._int16View;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "uint16View", {
    get: function() {
      return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)), this._uint16View;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "int32View", {
    get: function() {
      return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)), this._int32View;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.view = function(t) {
    return this[t + "View"];
  }, r.prototype.destroy = function() {
    this.rawBinaryData = null, this._int8View = null, this._uint8View = null, this._int16View = null, this._uint16View = null, this._int32View = null, this.uint32View = null, this.float32View = null;
  }, r.sizeOf = function(t) {
    switch (t) {
      case "int8":
      case "uint8":
        return 1;
      case "int16":
      case "uint16":
        return 2;
      case "int32":
      case "uint32":
      case "float32":
        return 4;
      default:
        throw new Error(t + " isn't a valid view type");
    }
  }, r;
}(), AF = function(r) {
  Se(t, r);
  function t(e) {
    var i = r.call(this, e) || this;
    return i.shaderGenerator = null, i.geometryClass = null, i.vertexSize = null, i.state = uu.for2d(), i.size = gt.SPRITE_BATCH_SIZE * 4, i._vertexCount = 0, i._indexCount = 0, i._bufferedElements = [], i._bufferedTextures = [], i._bufferSize = 0, i._shader = null, i._packedGeometries = [], i._packedGeometryPoolSize = 2, i._flushId = 0, i._aBuffers = {}, i._iBuffers = {}, i.MAX_TEXTURES = 1, i.renderer.on("prerender", i.onPrerender, i), e.runners.contextChange.add(i), i._dcIndex = 0, i._aIndex = 0, i._iIndex = 0, i._attributeBuffer = null, i._indexBuffer = null, i._tempBoundTextures = [], i;
  }
  return t.prototype.contextChange = function() {
    var e = this.renderer.gl;
    gt.PREFER_ENV === Is.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), gt.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = jA(this.MAX_TEXTURES, e)), this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);
    for (var i = 0; i < this._packedGeometryPoolSize; i++)
      this._packedGeometries[i] = new this.geometryClass();
    this.initFlushBuffers();
  }, t.prototype.initFlushBuffers = function() {
    for (var e = t._drawCallPool, i = t._textureArrayPool, n = this.size / 4, s = Math.floor(n / this.MAX_TEXTURES) + 1; e.length < n; )
      e.push(new v_());
    for (; i.length < s; )
      i.push(new g_());
    for (var a = 0; a < this.MAX_TEXTURES; a++)
      this._tempBoundTextures[a] = null;
  }, t.prototype.onPrerender = function() {
    this._flushId = 0;
  }, t.prototype.render = function(e) {
    !e._texture.valid || (this._vertexCount + e.vertexData.length / 2 > this.size && this.flush(), this._vertexCount += e.vertexData.length / 2, this._indexCount += e.indices.length, this._bufferedTextures[this._bufferSize] = e._texture.baseTexture, this._bufferedElements[this._bufferSize++] = e);
  }, t.prototype.buildTexturesAndDrawCalls = function() {
    var e = this, i = e._bufferedTextures, n = e.MAX_TEXTURES, s = t._textureArrayPool, a = this.renderer.batch, o = this._tempBoundTextures, u = this.renderer.textureGC.count, h = ++Zt._globalBatch, l = 0, c = s[0], d = 0;
    a.copyBoundTextures(o, n);
    for (var p = 0; p < this._bufferSize; ++p) {
      var g = i[p];
      i[p] = null, g._batchEnabled !== h && (c.count >= n && (a.boundArray(c, o, h, n), this.buildDrawCalls(c, d, p), d = p, c = s[++l], ++h), g._batchEnabled = h, g.touched = u, c.elements[c.count++] = g);
    }
    c.count > 0 && (a.boundArray(c, o, h, n), this.buildDrawCalls(c, d, this._bufferSize), ++l, ++h);
    for (var p = 0; p < o.length; p++)
      o[p] = null;
    Zt._globalBatch = h;
  }, t.prototype.buildDrawCalls = function(e, i, n) {
    var s = this, a = s._bufferedElements, o = s._attributeBuffer, u = s._indexBuffer, h = s.vertexSize, l = t._drawCallPool, c = this._dcIndex, d = this._aIndex, p = this._iIndex, g = l[c];
    g.start = this._iIndex, g.texArray = e;
    for (var v = i; v < n; ++v) {
      var m = a[v], _ = m._texture.baseTexture, y = PT[_.alphaMode ? 1 : 0][m.blendMode];
      a[v] = null, i < v && g.blend !== y && (g.size = p - g.start, i = v, g = l[++c], g.texArray = e, g.start = p), this.packInterleavedGeometry(m, o, u, d, p), d += m.vertexData.length / 2 * h, p += m.indices.length, g.blend = y;
    }
    i < n && (g.size = p - g.start, ++c), this._dcIndex = c, this._aIndex = d, this._iIndex = p;
  }, t.prototype.bindAndClearTexArray = function(e) {
    for (var i = this.renderer.texture, n = 0; n < e.count; n++)
      i.bind(e.elements[n], e.ids[n]), e.elements[n] = null;
    e.count = 0;
  }, t.prototype.updateGeometry = function() {
    var e = this, i = e._packedGeometries, n = e._attributeBuffer, s = e._indexBuffer;
    gt.CAN_UPLOAD_SAME_BUFFER ? (i[this._flushId]._buffer.update(n.rawBinaryData), i[this._flushId]._indexBuffer.update(s), this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++, i[this._flushId] = new this.geometryClass()), i[this._flushId]._buffer.update(n.rawBinaryData), i[this._flushId]._indexBuffer.update(s), this.renderer.geometry.bind(i[this._flushId]), this.renderer.geometry.updateBuffers(), this._flushId++);
  }, t.prototype.drawBatches = function() {
    for (var e = this._dcIndex, i = this.renderer, n = i.gl, s = i.state, a = t._drawCallPool, o = null, u = 0; u < e; u++) {
      var h = a[u], l = h.texArray, c = h.type, d = h.size, p = h.start, g = h.blend;
      o !== l && (o = l, this.bindAndClearTexArray(l)), this.state.blendMode = g, s.set(this.state), n.drawElements(c, d, n.UNSIGNED_SHORT, p * 2);
    }
  }, t.prototype.flush = function() {
    this._vertexCount !== 0 && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount), this._indexBuffer = this.getIndexBuffer(this._indexCount), this._aIndex = 0, this._iIndex = 0, this._dcIndex = 0, this.buildTexturesAndDrawCalls(), this.updateGeometry(), this.drawBatches(), this._bufferSize = 0, this._vertexCount = 0, this._indexCount = 0);
  }, t.prototype.start = function() {
    this.renderer.state.set(this.state), this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES), this.renderer.shader.bind(this._shader), gt.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId]);
  }, t.prototype.stop = function() {
    this.flush();
  }, t.prototype.destroy = function() {
    for (var e = 0; e < this._packedGeometryPoolSize; e++)
      this._packedGeometries[e] && this._packedGeometries[e].destroy();
    this.renderer.off("prerender", this.onPrerender, this), this._aBuffers = null, this._iBuffers = null, this._packedGeometries = null, this._attributeBuffer = null, this._indexBuffer = null, this._shader && (this._shader.destroy(), this._shader = null), r.prototype.destroy.call(this);
  }, t.prototype.getAttributeBuffer = function(e) {
    var i = ov(Math.ceil(e / 8)), n = mx(i), s = i * 8;
    this._aBuffers.length <= n && (this._iBuffers.length = n + 1);
    var a = this._aBuffers[s];
    return a || (this._aBuffers[s] = a = new m_(s * this.vertexSize * 4)), a;
  }, t.prototype.getIndexBuffer = function(e) {
    var i = ov(Math.ceil(e / 12)), n = mx(i), s = i * 12;
    this._iBuffers.length <= n && (this._iBuffers.length = n + 1);
    var a = this._iBuffers[n];
    return a || (this._iBuffers[n] = a = new Uint16Array(s)), a;
  }, t.prototype.packInterleavedGeometry = function(e, i, n, s, a) {
    for (var o = i.uint32View, u = i.float32View, h = s / this.vertexSize, l = e.uvs, c = e.indices, d = e.vertexData, p = e._texture.baseTexture._batchLocation, g = Math.min(e.worldAlpha, 1), v = g < 1 && e._texture.baseTexture.alphaMode ? Ib(e._tintRGB, g) : e._tintRGB + (g * 255 << 24), m = 0; m < d.length; m += 2)
      u[s++] = d[m], u[s++] = d[m + 1], u[s++] = l[m], u[s++] = l[m + 1], o[s++] = v, u[s++] = p;
    for (var m = 0; m < c.length; m++)
      n[a++] = h + c[m];
  }, t._drawCallPool = [], t._textureArrayPool = [], t;
}(Og), FF = function() {
  function r(t, e) {
    if (this.vertexSrc = t, this.fragTemplate = e, this.programCache = {}, this.defaultGroupCache = {}, e.indexOf("%count%") < 0)
      throw new Error('Fragment template must contain "%count%".');
    if (e.indexOf("%forloop%") < 0)
      throw new Error('Fragment template must contain "%forloop%".');
  }
  return r.prototype.generateShader = function(t) {
    if (!this.programCache[t]) {
      for (var e = new Int32Array(t), i = 0; i < t; i++)
        e[i] = i;
      this.defaultGroupCache[t] = Ko.from({ uSamplers: e }, !0);
      var n = this.fragTemplate;
      n = n.replace(/%count%/gi, "" + t), n = n.replace(/%forloop%/gi, this.generateSampleSrc(t)), this.programCache[t] = new gd(this.vertexSrc, n);
    }
    var s = {
      tint: new Float32Array([1, 1, 1, 1]),
      translationMatrix: new lr(),
      default: this.defaultGroupCache[t]
    };
    return new Ra(this.programCache[t], s);
  }, r.prototype.generateSampleSrc = function(t) {
    var e = "";
    e += `
`, e += `
`;
    for (var i = 0; i < t; i++)
      i > 0 && (e += `
else `), i < t - 1 && (e += "if(vTextureId < " + i + ".5)"), e += `
{`, e += `
	color = texture2D(uSamplers[` + i + "], vTextureCoord);", e += `
}`;
    return e += `
`, e += `
`, e;
  }, r;
}(), JT = function(r) {
  Se(t, r);
  function t(e) {
    e === void 0 && (e = !1);
    var i = r.call(this) || this;
    return i._buffer = new or(null, e, !1), i._indexBuffer = new or(null, e, !0), i.addAttribute("aVertexPosition", i._buffer, 2, !1, Tt.FLOAT).addAttribute("aTextureCoord", i._buffer, 2, !1, Tt.FLOAT).addAttribute("aColor", i._buffer, 4, !0, Tt.UNSIGNED_BYTE).addAttribute("aTextureId", i._buffer, 1, !0, Tt.FLOAT).addIndex(i._indexBuffer), i;
  }
  return t;
}(vd), Kx = `precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`, Qx = `varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`, MF = function() {
  function r() {
  }
  return r.create = function(t) {
    var e = Object.assign({
      vertex: Kx,
      fragment: Qx,
      geometryClass: JT,
      vertexSize: 6
    }, t), i = e.vertex, n = e.fragment, s = e.vertexSize, a = e.geometryClass;
    return function(o) {
      Se(u, o);
      function u(h) {
        var l = o.call(this, h) || this;
        return l.shaderGenerator = new FF(i, n), l.geometryClass = a, l.vertexSize = s, l;
      }
      return u;
    }(AF);
  }, Object.defineProperty(r, "defaultVertexSrc", {
    get: function() {
      return Kx;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "defaultFragmentTemplate", {
    get: function() {
      return Qx;
    },
    enumerable: !1,
    configurable: !0
  }), r;
}(), KT = MF.create();
Object.assign(KT, {
  extension: {
    name: "batch",
    type: me.RendererPlugin
  }
});
/*!
 * @pixi/accessibility - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var kF = {
  accessible: !1,
  accessibleTitle: null,
  accessibleHint: null,
  tabIndex: 0,
  _accessibleActive: !1,
  _accessibleDiv: null,
  accessibleType: "button",
  accessiblePointerEvents: "auto",
  accessibleChildren: !0,
  renderId: -1
};
Ze.mixin(kF);
var BF = 9, jd = 100, LF = 0, DF = 0, tE = 2, eE = 1, UF = -1e3, GF = -1e3, HF = 2, zF = function() {
  function r(t) {
    this.debug = !1, this._isActive = !1, this._isMobileAccessibility = !1, this.pool = [], this.renderId = 0, this.children = [], this.androidUpdateCount = 0, this.androidUpdateFrequency = 500, this._hookDiv = null, (wn.tablet || wn.phone) && this.createTouchHook();
    var e = document.createElement("div");
    e.style.width = jd + "px", e.style.height = jd + "px", e.style.position = "absolute", e.style.top = LF + "px", e.style.left = DF + "px", e.style.zIndex = tE.toString(), this.div = e, this.renderer = t, this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), globalThis.addEventListener("keydown", this._onKeyDown, !1);
  }
  return Object.defineProperty(r.prototype, "isActive", {
    get: function() {
      return this._isActive;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "isMobileAccessibility", {
    get: function() {
      return this._isMobileAccessibility;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.createTouchHook = function() {
    var t = this, e = document.createElement("button");
    e.style.width = eE + "px", e.style.height = eE + "px", e.style.position = "absolute", e.style.top = UF + "px", e.style.left = GF + "px", e.style.zIndex = HF.toString(), e.style.backgroundColor = "#FF0000", e.title = "select to enable accessibility for this content", e.addEventListener("focus", function() {
      t._isMobileAccessibility = !0, t.activate(), t.destroyTouchHook();
    }), document.body.appendChild(e), this._hookDiv = e;
  }, r.prototype.destroyTouchHook = function() {
    !this._hookDiv || (document.body.removeChild(this._hookDiv), this._hookDiv = null);
  }, r.prototype.activate = function() {
    var t;
    this._isActive || (this._isActive = !0, globalThis.document.addEventListener("mousemove", this._onMouseMove, !0), globalThis.removeEventListener("keydown", this._onKeyDown, !1), this.renderer.on("postrender", this.update, this), (t = this.renderer.view.parentNode) === null || t === void 0 || t.appendChild(this.div));
  }, r.prototype.deactivate = function() {
    var t;
    !this._isActive || this._isMobileAccessibility || (this._isActive = !1, globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0), globalThis.addEventListener("keydown", this._onKeyDown, !1), this.renderer.off("postrender", this.update), (t = this.div.parentNode) === null || t === void 0 || t.removeChild(this.div));
  }, r.prototype.updateAccessibleObjects = function(t) {
    if (!(!t.visible || !t.accessibleChildren)) {
      t.accessible && t.interactive && (t._accessibleActive || this.addChild(t), t.renderId = this.renderId);
      var e = t.children;
      if (e)
        for (var i = 0; i < e.length; i++)
          this.updateAccessibleObjects(e[i]);
    }
  }, r.prototype.update = function() {
    var t = performance.now();
    if (!(wn.android.device && t < this.androidUpdateCount) && (this.androidUpdateCount = t + this.androidUpdateFrequency, !!this.renderer.renderingToScreen)) {
      this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered);
      var e = this.renderer.view.getBoundingClientRect(), i = e.left, n = e.top, s = e.width, a = e.height, o = this.renderer, u = o.width, h = o.height, l = o.resolution, c = s / u * l, d = a / h * l, p = this.div;
      p.style.left = i + "px", p.style.top = n + "px", p.style.width = u + "px", p.style.height = h + "px";
      for (var g = 0; g < this.children.length; g++) {
        var v = this.children[g];
        if (v.renderId !== this.renderId)
          v._accessibleActive = !1, Yu(this.children, g, 1), this.div.removeChild(v._accessibleDiv), this.pool.push(v._accessibleDiv), v._accessibleDiv = null, g--;
        else {
          p = v._accessibleDiv;
          var m = v.hitArea, _ = v.worldTransform;
          v.hitArea ? (p.style.left = (_.tx + m.x * _.a) * c + "px", p.style.top = (_.ty + m.y * _.d) * d + "px", p.style.width = m.width * _.a * c + "px", p.style.height = m.height * _.d * d + "px") : (m = v.getBounds(), this.capHitArea(m), p.style.left = m.x * c + "px", p.style.top = m.y * d + "px", p.style.width = m.width * c + "px", p.style.height = m.height * d + "px", p.title !== v.accessibleTitle && v.accessibleTitle !== null && (p.title = v.accessibleTitle), p.getAttribute("aria-label") !== v.accessibleHint && v.accessibleHint !== null && p.setAttribute("aria-label", v.accessibleHint)), (v.accessibleTitle !== p.title || v.tabIndex !== p.tabIndex) && (p.title = v.accessibleTitle, p.tabIndex = v.tabIndex, this.debug && this.updateDebugHTML(p));
        }
      }
      this.renderId++;
    }
  }, r.prototype.updateDebugHTML = function(t) {
    t.innerHTML = "type: " + t.type + "</br> title : " + t.title + "</br> tabIndex: " + t.tabIndex;
  }, r.prototype.capHitArea = function(t) {
    t.x < 0 && (t.width += t.x, t.x = 0), t.y < 0 && (t.height += t.y, t.y = 0);
    var e = this.renderer, i = e.width, n = e.height;
    t.x + t.width > i && (t.width = i - t.x), t.y + t.height > n && (t.height = n - t.y);
  }, r.prototype.addChild = function(t) {
    var e = this.pool.pop();
    e || (e = document.createElement("button"), e.style.width = jd + "px", e.style.height = jd + "px", e.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent", e.style.position = "absolute", e.style.zIndex = tE.toString(), e.style.borderStyle = "none", navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? e.setAttribute("aria-live", "off") : e.setAttribute("aria-live", "polite"), navigator.userAgent.match(/rv:.*Gecko\//) ? e.setAttribute("aria-relevant", "additions") : e.setAttribute("aria-relevant", "text"), e.addEventListener("click", this._onClick.bind(this)), e.addEventListener("focus", this._onFocus.bind(this)), e.addEventListener("focusout", this._onFocusOut.bind(this))), e.style.pointerEvents = t.accessiblePointerEvents, e.type = t.accessibleType, t.accessibleTitle && t.accessibleTitle !== null ? e.title = t.accessibleTitle : (!t.accessibleHint || t.accessibleHint === null) && (e.title = "displayObject " + t.tabIndex), t.accessibleHint && t.accessibleHint !== null && e.setAttribute("aria-label", t.accessibleHint), this.debug && this.updateDebugHTML(e), t._accessibleActive = !0, t._accessibleDiv = e, e.displayObject = t, this.children.push(t), this.div.appendChild(t._accessibleDiv), t._accessibleDiv.tabIndex = t.tabIndex;
  }, r.prototype._onClick = function(t) {
    var e = this.renderer.plugins.interaction, i = t.target.displayObject, n = e.eventData;
    e.dispatchEvent(i, "click", n), e.dispatchEvent(i, "pointertap", n), e.dispatchEvent(i, "tap", n);
  }, r.prototype._onFocus = function(t) {
    t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "assertive");
    var e = this.renderer.plugins.interaction, i = t.target.displayObject, n = e.eventData;
    e.dispatchEvent(i, "mouseover", n);
  }, r.prototype._onFocusOut = function(t) {
    t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "polite");
    var e = this.renderer.plugins.interaction, i = t.target.displayObject, n = e.eventData;
    e.dispatchEvent(i, "mouseout", n);
  }, r.prototype._onKeyDown = function(t) {
    t.keyCode === BF && this.activate();
  }, r.prototype._onMouseMove = function(t) {
    t.movementX === 0 && t.movementY === 0 || this.deactivate();
  }, r.prototype.destroy = function() {
    this.destroyTouchHook(), this.div = null, globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0), globalThis.removeEventListener("keydown", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null;
  }, r.extension = {
    name: "accessibility",
    type: [
      me.RendererPlugin,
      me.CanvasRendererPlugin
    ]
  }, r;
}();
/*!
 * @pixi/interaction - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var rE = function() {
  function r() {
    this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0, this.global = new Ee(), this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = !1, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0;
  }
  return Object.defineProperty(r.prototype, "pointerId", {
    get: function() {
      return this.identifier;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.getLocalPosition = function(t, e, i) {
    return t.worldTransform.applyInverse(i || this.global, e);
  }, r.prototype.copyEvent = function(t) {
    "isPrimary" in t && t.isPrimary && (this.isPrimary = !0), this.button = "button" in t && t.button;
    var e = "buttons" in t && t.buttons;
    this.buttons = Number.isInteger(e) ? e : "which" in t && t.which, this.width = "width" in t && t.width, this.height = "height" in t && t.height, this.tiltX = "tiltX" in t && t.tiltX, this.tiltY = "tiltY" in t && t.tiltY, this.pointerType = "pointerType" in t && t.pointerType, this.pressure = "pressure" in t && t.pressure, this.rotationAngle = "rotationAngle" in t && t.rotationAngle, this.twist = "twist" in t && t.twist || 0, this.tangentialPressure = "tangentialPressure" in t && t.tangentialPressure || 0;
  }, r.prototype.reset = function() {
    this.isPrimary = !1;
  }, r;
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var __ = function(r, t) {
  return __ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, __(r, t);
};
function jF(r, t) {
  __(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var $F = function() {
  function r() {
    this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.target = null, this.currentTarget = null, this.type = null, this.data = null;
  }
  return r.prototype.stopPropagation = function() {
    this.stopped = !0, this.stopPropagationHint = !0, this.stopsPropagatingAt = this.currentTarget;
  }, r.prototype.reset = function() {
    this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.currentTarget = null, this.target = null;
  }, r;
}(), mm = function() {
  function r(t) {
    this._pointerId = t, this._flags = r.FLAGS.NONE;
  }
  return r.prototype._doSet = function(t, e) {
    e ? this._flags = this._flags | t : this._flags = this._flags & ~t;
  }, Object.defineProperty(r.prototype, "pointerId", {
    get: function() {
      return this._pointerId;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "flags", {
    get: function() {
      return this._flags;
    },
    set: function(t) {
      this._flags = t;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "none", {
    get: function() {
      return this._flags === r.FLAGS.NONE;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "over", {
    get: function() {
      return (this._flags & r.FLAGS.OVER) !== 0;
    },
    set: function(t) {
      this._doSet(r.FLAGS.OVER, t);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "rightDown", {
    get: function() {
      return (this._flags & r.FLAGS.RIGHT_DOWN) !== 0;
    },
    set: function(t) {
      this._doSet(r.FLAGS.RIGHT_DOWN, t);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "leftDown", {
    get: function() {
      return (this._flags & r.FLAGS.LEFT_DOWN) !== 0;
    },
    set: function(t) {
      this._doSet(r.FLAGS.LEFT_DOWN, t);
    },
    enumerable: !1,
    configurable: !0
  }), r.FLAGS = Object.freeze({
    NONE: 0,
    OVER: 1 << 0,
    LEFT_DOWN: 1 << 1,
    RIGHT_DOWN: 1 << 2
  }), r;
}(), VF = function() {
  function r() {
    this._tempPoint = new Ee();
  }
  return r.prototype.recursiveFindHit = function(t, e, i, n, s) {
    var a;
    if (!e || !e.visible)
      return !1;
    var o = t.data.global;
    s = e.interactive || s;
    var u = !1, h = s, l = !0;
    if (e.hitArea)
      n && (e.worldTransform.applyInverse(o, this._tempPoint), e.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? u = !0 : (n = !1, l = !1)), h = !1;
    else if (e._mask && n) {
      var c = e._mask.isMaskData ? e._mask.maskObject : e._mask;
      c && !(!((a = c.containsPoint) === null || a === void 0) && a.call(c, o)) && (n = !1);
    }
    if (l && e.interactiveChildren && e.children)
      for (var d = e.children, p = d.length - 1; p >= 0; p--) {
        var g = d[p], v = this.recursiveFindHit(t, g, i, n, h);
        if (v) {
          if (!g.parent)
            continue;
          h = !1, v && (t.target && (n = !1), u = !0);
        }
      }
    return s && (n && !t.target && !e.hitArea && e.containsPoint && e.containsPoint(o) && (u = !0), e.interactive && (u && !t.target && (t.target = e), i && i(t, e, !!u))), u;
  }, r.prototype.findHit = function(t, e, i, n) {
    this.recursiveFindHit(t, e, i, n, !1);
  }, r;
}(), XF = {
  interactive: !1,
  interactiveChildren: !0,
  hitArea: null,
  get buttonMode() {
    return this.cursor === "pointer";
  },
  set buttonMode(r) {
    r ? this.cursor = "pointer" : this.cursor === "pointer" && (this.cursor = null);
  },
  cursor: null,
  get trackedPointers() {
    return this._trackedPointers === void 0 && (this._trackedPointers = {}), this._trackedPointers;
  },
  _trackedPointers: void 0
};
Ze.mixin(XF);
var $d = 1, Vd = {
  target: null,
  data: {
    global: null
  }
}, WF = function(r) {
  jF(t, r);
  function t(e, i) {
    var n = r.call(this) || this;
    return i = i || {}, n.renderer = e, n.autoPreventDefault = i.autoPreventDefault !== void 0 ? i.autoPreventDefault : !0, n.interactionFrequency = i.interactionFrequency || 10, n.mouse = new rE(), n.mouse.identifier = $d, n.mouse.global.set(-999999), n.activeInteractionData = {}, n.activeInteractionData[$d] = n.mouse, n.interactionDataPool = [], n.eventData = new $F(), n.interactionDOMElement = null, n.moveWhenInside = !1, n.eventsAdded = !1, n.tickerAdded = !1, n.mouseOverRenderer = !("PointerEvent" in globalThis), n.supportsTouchEvents = "ontouchstart" in globalThis, n.supportsPointerEvents = !!globalThis.PointerEvent, n.onPointerUp = n.onPointerUp.bind(n), n.processPointerUp = n.processPointerUp.bind(n), n.onPointerCancel = n.onPointerCancel.bind(n), n.processPointerCancel = n.processPointerCancel.bind(n), n.onPointerDown = n.onPointerDown.bind(n), n.processPointerDown = n.processPointerDown.bind(n), n.onPointerMove = n.onPointerMove.bind(n), n.processPointerMove = n.processPointerMove.bind(n), n.onPointerOut = n.onPointerOut.bind(n), n.processPointerOverOut = n.processPointerOverOut.bind(n), n.onPointerOver = n.onPointerOver.bind(n), n.cursorStyles = {
      default: "inherit",
      pointer: "pointer"
    }, n.currentCursorMode = null, n.cursor = null, n.resolution = 1, n.delayedEvents = [], n.search = new VF(), n._tempDisplayObject = new kT(), n._eventListenerOptions = { capture: !0, passive: !1 }, n._useSystemTicker = i.useSystemTicker !== void 0 ? i.useSystemTicker : !0, n.setTargetElement(n.renderer.view, n.renderer.resolution), n;
  }
  return Object.defineProperty(t.prototype, "useSystemTicker", {
    get: function() {
      return this._useSystemTicker;
    },
    set: function(e) {
      this._useSystemTicker = e, e ? this.addTickerListener() : this.removeTickerListener();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "lastObjectRendered", {
    get: function() {
      return this.renderer._lastObjectRendered || this._tempDisplayObject;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.hitTest = function(e, i) {
    return Vd.target = null, Vd.data.global = e, i || (i = this.lastObjectRendered), this.processInteractive(Vd, i, null, !0), Vd.target;
  }, t.prototype.setTargetElement = function(e, i) {
    i === void 0 && (i = 1), this.removeTickerListener(), this.removeEvents(), this.interactionDOMElement = e, this.resolution = i, this.addEvents(), this.addTickerListener();
  }, t.prototype.addTickerListener = function() {
    this.tickerAdded || !this.interactionDOMElement || !this._useSystemTicker || (He.system.add(this.tickerUpdate, this, Ss.INTERACTION), this.tickerAdded = !0);
  }, t.prototype.removeTickerListener = function() {
    !this.tickerAdded || (He.system.remove(this.tickerUpdate, this), this.tickerAdded = !1);
  }, t.prototype.addEvents = function() {
    if (!(this.eventsAdded || !this.interactionDOMElement)) {
      var e = this.interactionDOMElement.style;
      globalThis.navigator.msPointerEnabled ? (e.msContentZooming = "none", e.msTouchAction = "none") : this.supportsPointerEvents && (e.touchAction = "none"), this.supportsPointerEvents ? (globalThis.document.addEventListener("pointermove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions), globalThis.addEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.addEventListener("mousemove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)), this.eventsAdded = !0;
    }
  }, t.prototype.removeEvents = function() {
    if (!(!this.eventsAdded || !this.interactionDOMElement)) {
      var e = this.interactionDOMElement.style;
      globalThis.navigator.msPointerEnabled ? (e.msContentZooming = "", e.msTouchAction = "") : this.supportsPointerEvents && (e.touchAction = ""), this.supportsPointerEvents ? (globalThis.document.removeEventListener("pointermove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions), globalThis.removeEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.removeEventListener("mousemove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)), this.interactionDOMElement = null, this.eventsAdded = !1;
    }
  }, t.prototype.tickerUpdate = function(e) {
    this._deltaTime += e, !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0, this.update());
  }, t.prototype.update = function() {
    if (!!this.interactionDOMElement) {
      if (this._didMove) {
        this._didMove = !1;
        return;
      }
      this.cursor = null;
      for (var e in this.activeInteractionData)
        if (this.activeInteractionData.hasOwnProperty(e)) {
          var i = this.activeInteractionData[e];
          if (i.originalEvent && i.pointerType !== "touch") {
            var n = this.configureInteractionEventForDOMEvent(this.eventData, i.originalEvent, i);
            this.processInteractive(n, this.lastObjectRendered, this.processPointerOverOut, !0);
          }
        }
      this.setCursorMode(this.cursor);
    }
  }, t.prototype.setCursorMode = function(e) {
    e = e || "default";
    var i = !0;
    if (globalThis.OffscreenCanvas && this.interactionDOMElement instanceof OffscreenCanvas && (i = !1), this.currentCursorMode !== e) {
      this.currentCursorMode = e;
      var n = this.cursorStyles[e];
      if (n)
        switch (typeof n) {
          case "string":
            i && (this.interactionDOMElement.style.cursor = n);
            break;
          case "function":
            n(e);
            break;
          case "object":
            i && Object.assign(this.interactionDOMElement.style, n);
            break;
        }
      else
        i && typeof e == "string" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, e) && (this.interactionDOMElement.style.cursor = e);
    }
  }, t.prototype.dispatchEvent = function(e, i, n) {
    (!n.stopPropagationHint || e === n.stopsPropagatingAt) && (n.currentTarget = e, n.type = i, e.emit(i, n), e[i] && e[i](n));
  }, t.prototype.delayDispatchEvent = function(e, i, n) {
    this.delayedEvents.push({ displayObject: e, eventString: i, eventData: n });
  }, t.prototype.mapPositionToPoint = function(e, i, n) {
    var s;
    this.interactionDOMElement.parentElement ? s = this.interactionDOMElement.getBoundingClientRect() : s = {
      x: 0,
      y: 0,
      width: this.interactionDOMElement.width,
      height: this.interactionDOMElement.height,
      left: 0,
      top: 0
    };
    var a = 1 / this.resolution;
    e.x = (i - s.left) * (this.interactionDOMElement.width / s.width) * a, e.y = (n - s.top) * (this.interactionDOMElement.height / s.height) * a;
  }, t.prototype.processInteractive = function(e, i, n, s) {
    var a = this.search.findHit(e, i, n, s), o = this.delayedEvents;
    if (!o.length)
      return a;
    e.stopPropagationHint = !1;
    var u = o.length;
    this.delayedEvents = [];
    for (var h = 0; h < u; h++) {
      var l = o[h], c = l.displayObject, d = l.eventString, p = l.eventData;
      p.stopsPropagatingAt === c && (p.stopPropagationHint = !0), this.dispatchEvent(c, d, p);
    }
    return a;
  }, t.prototype.onPointerDown = function(e) {
    if (!(this.supportsTouchEvents && e.pointerType === "touch")) {
      var i = this.normalizeToPointerData(e);
      if (this.autoPreventDefault && i[0].isNormalized) {
        var n = e.cancelable || !("cancelable" in e);
        n && e.preventDefault();
      }
      for (var s = i.length, a = 0; a < s; a++) {
        var o = i[a], u = this.getInteractionDataForPointerId(o), h = this.configureInteractionEventForDOMEvent(this.eventData, o, u);
        if (h.data.originalEvent = e, this.processInteractive(h, this.lastObjectRendered, this.processPointerDown, !0), this.emit("pointerdown", h), o.pointerType === "touch")
          this.emit("touchstart", h);
        else if (o.pointerType === "mouse" || o.pointerType === "pen") {
          var l = o.button === 2;
          this.emit(l ? "rightdown" : "mousedown", this.eventData);
        }
      }
    }
  }, t.prototype.processPointerDown = function(e, i, n) {
    var s = e.data, a = e.data.identifier;
    if (n) {
      if (i.trackedPointers[a] || (i.trackedPointers[a] = new mm(a)), this.dispatchEvent(i, "pointerdown", e), s.pointerType === "touch")
        this.dispatchEvent(i, "touchstart", e);
      else if (s.pointerType === "mouse" || s.pointerType === "pen") {
        var o = s.button === 2;
        o ? i.trackedPointers[a].rightDown = !0 : i.trackedPointers[a].leftDown = !0, this.dispatchEvent(i, o ? "rightdown" : "mousedown", e);
      }
    }
  }, t.prototype.onPointerComplete = function(e, i, n) {
    var s = this.normalizeToPointerData(e), a = s.length, o = e.target;
    e.composedPath && e.composedPath().length > 0 && (o = e.composedPath()[0]);
    for (var u = o !== this.interactionDOMElement ? "outside" : "", h = 0; h < a; h++) {
      var l = s[h], c = this.getInteractionDataForPointerId(l), d = this.configureInteractionEventForDOMEvent(this.eventData, l, c);
      if (d.data.originalEvent = e, this.processInteractive(d, this.lastObjectRendered, n, i || !u), this.emit(i ? "pointercancel" : "pointerup" + u, d), l.pointerType === "mouse" || l.pointerType === "pen") {
        var p = l.button === 2;
        this.emit(p ? "rightup" + u : "mouseup" + u, d);
      } else
        l.pointerType === "touch" && (this.emit(i ? "touchcancel" : "touchend" + u, d), this.releaseInteractionDataForPointerId(l.pointerId));
    }
  }, t.prototype.onPointerCancel = function(e) {
    this.supportsTouchEvents && e.pointerType === "touch" || this.onPointerComplete(e, !0, this.processPointerCancel);
  }, t.prototype.processPointerCancel = function(e, i) {
    var n = e.data, s = e.data.identifier;
    i.trackedPointers[s] !== void 0 && (delete i.trackedPointers[s], this.dispatchEvent(i, "pointercancel", e), n.pointerType === "touch" && this.dispatchEvent(i, "touchcancel", e));
  }, t.prototype.onPointerUp = function(e) {
    this.supportsTouchEvents && e.pointerType === "touch" || this.onPointerComplete(e, !1, this.processPointerUp);
  }, t.prototype.processPointerUp = function(e, i, n) {
    var s = e.data, a = e.data.identifier, o = i.trackedPointers[a], u = s.pointerType === "touch", h = s.pointerType === "mouse" || s.pointerType === "pen", l = !1;
    if (h) {
      var c = s.button === 2, d = mm.FLAGS, p = c ? d.RIGHT_DOWN : d.LEFT_DOWN, g = o !== void 0 && o.flags & p;
      n ? (this.dispatchEvent(i, c ? "rightup" : "mouseup", e), g && (this.dispatchEvent(i, c ? "rightclick" : "click", e), l = !0)) : g && this.dispatchEvent(i, c ? "rightupoutside" : "mouseupoutside", e), o && (c ? o.rightDown = !1 : o.leftDown = !1);
    }
    n ? (this.dispatchEvent(i, "pointerup", e), u && this.dispatchEvent(i, "touchend", e), o && ((!h || l) && this.dispatchEvent(i, "pointertap", e), u && (this.dispatchEvent(i, "tap", e), o.over = !1))) : o && (this.dispatchEvent(i, "pointerupoutside", e), u && this.dispatchEvent(i, "touchendoutside", e)), o && o.none && delete i.trackedPointers[a];
  }, t.prototype.onPointerMove = function(e) {
    if (!(this.supportsTouchEvents && e.pointerType === "touch")) {
      var i = this.normalizeToPointerData(e);
      (i[0].pointerType === "mouse" || i[0].pointerType === "pen") && (this._didMove = !0, this.cursor = null);
      for (var n = i.length, s = 0; s < n; s++) {
        var a = i[s], o = this.getInteractionDataForPointerId(a), u = this.configureInteractionEventForDOMEvent(this.eventData, a, o);
        u.data.originalEvent = e, this.processInteractive(u, this.lastObjectRendered, this.processPointerMove, !0), this.emit("pointermove", u), a.pointerType === "touch" && this.emit("touchmove", u), (a.pointerType === "mouse" || a.pointerType === "pen") && this.emit("mousemove", u);
      }
      i[0].pointerType === "mouse" && this.setCursorMode(this.cursor);
    }
  }, t.prototype.processPointerMove = function(e, i, n) {
    var s = e.data, a = s.pointerType === "touch", o = s.pointerType === "mouse" || s.pointerType === "pen";
    o && this.processPointerOverOut(e, i, n), (!this.moveWhenInside || n) && (this.dispatchEvent(i, "pointermove", e), a && this.dispatchEvent(i, "touchmove", e), o && this.dispatchEvent(i, "mousemove", e));
  }, t.prototype.onPointerOut = function(e) {
    if (!(this.supportsTouchEvents && e.pointerType === "touch")) {
      var i = this.normalizeToPointerData(e), n = i[0];
      n.pointerType === "mouse" && (this.mouseOverRenderer = !1, this.setCursorMode(null));
      var s = this.getInteractionDataForPointerId(n), a = this.configureInteractionEventForDOMEvent(this.eventData, n, s);
      a.data.originalEvent = n, this.processInteractive(a, this.lastObjectRendered, this.processPointerOverOut, !1), this.emit("pointerout", a), n.pointerType === "mouse" || n.pointerType === "pen" ? this.emit("mouseout", a) : this.releaseInteractionDataForPointerId(s.identifier);
    }
  }, t.prototype.processPointerOverOut = function(e, i, n) {
    var s = e.data, a = e.data.identifier, o = s.pointerType === "mouse" || s.pointerType === "pen", u = i.trackedPointers[a];
    n && !u && (u = i.trackedPointers[a] = new mm(a)), u !== void 0 && (n && this.mouseOverRenderer ? (u.over || (u.over = !0, this.delayDispatchEvent(i, "pointerover", e), o && this.delayDispatchEvent(i, "mouseover", e)), o && this.cursor === null && (this.cursor = i.cursor)) : u.over && (u.over = !1, this.dispatchEvent(i, "pointerout", this.eventData), o && this.dispatchEvent(i, "mouseout", e), u.none && delete i.trackedPointers[a]));
  }, t.prototype.onPointerOver = function(e) {
    var i = this.normalizeToPointerData(e), n = i[0], s = this.getInteractionDataForPointerId(n), a = this.configureInteractionEventForDOMEvent(this.eventData, n, s);
    a.data.originalEvent = n, n.pointerType === "mouse" && (this.mouseOverRenderer = !0), this.emit("pointerover", a), (n.pointerType === "mouse" || n.pointerType === "pen") && this.emit("mouseover", a);
  }, t.prototype.getInteractionDataForPointerId = function(e) {
    var i = e.pointerId, n;
    return i === $d || e.pointerType === "mouse" ? n = this.mouse : this.activeInteractionData[i] ? n = this.activeInteractionData[i] : (n = this.interactionDataPool.pop() || new rE(), n.identifier = i, this.activeInteractionData[i] = n), n.copyEvent(e), n;
  }, t.prototype.releaseInteractionDataForPointerId = function(e) {
    var i = this.activeInteractionData[e];
    i && (delete this.activeInteractionData[e], i.reset(), this.interactionDataPool.push(i));
  }, t.prototype.configureInteractionEventForDOMEvent = function(e, i, n) {
    return e.data = n, this.mapPositionToPoint(n.global, i.clientX, i.clientY), i.pointerType === "touch" && (i.globalX = n.global.x, i.globalY = n.global.y), n.originalEvent = i, e.reset(), e;
  }, t.prototype.normalizeToPointerData = function(e) {
    var i = [];
    if (this.supportsTouchEvents && e instanceof TouchEvent)
      for (var n = 0, s = e.changedTouches.length; n < s; n++) {
        var a = e.changedTouches[n];
        typeof a.button > "u" && (a.button = e.touches.length ? 1 : 0), typeof a.buttons > "u" && (a.buttons = e.touches.length ? 1 : 0), typeof a.isPrimary > "u" && (a.isPrimary = e.touches.length === 1 && e.type === "touchstart"), typeof a.width > "u" && (a.width = a.radiusX || 1), typeof a.height > "u" && (a.height = a.radiusY || 1), typeof a.tiltX > "u" && (a.tiltX = 0), typeof a.tiltY > "u" && (a.tiltY = 0), typeof a.pointerType > "u" && (a.pointerType = "touch"), typeof a.pointerId > "u" && (a.pointerId = a.identifier || 0), typeof a.pressure > "u" && (a.pressure = a.force || 0.5), typeof a.twist > "u" && (a.twist = 0), typeof a.tangentialPressure > "u" && (a.tangentialPressure = 0), typeof a.layerX > "u" && (a.layerX = a.offsetX = a.clientX), typeof a.layerY > "u" && (a.layerY = a.offsetY = a.clientY), a.isNormalized = !0, i.push(a);
      }
    else if (!globalThis.MouseEvent || e instanceof MouseEvent && (!this.supportsPointerEvents || !(e instanceof globalThis.PointerEvent))) {
      var o = e;
      typeof o.isPrimary > "u" && (o.isPrimary = !0), typeof o.width > "u" && (o.width = 1), typeof o.height > "u" && (o.height = 1), typeof o.tiltX > "u" && (o.tiltX = 0), typeof o.tiltY > "u" && (o.tiltY = 0), typeof o.pointerType > "u" && (o.pointerType = "mouse"), typeof o.pointerId > "u" && (o.pointerId = $d), typeof o.pressure > "u" && (o.pressure = 0.5), typeof o.twist > "u" && (o.twist = 0), typeof o.tangentialPressure > "u" && (o.tangentialPressure = 0), o.isNormalized = !0, i.push(o);
    } else
      i.push(e);
    return i;
  }, t.prototype.destroy = function() {
    this.removeEvents(), this.removeTickerListener(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this.search = null;
  }, t.extension = {
    name: "interaction",
    type: [
      me.RendererPlugin,
      me.CanvasRendererPlugin
    ]
  }, t;
}(Fi);
/*!
 * @pixi/extract - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var iE = new Pt(), nE = 4, YF = function() {
  function r(t) {
    this.renderer = t;
  }
  return r.prototype.image = function(t, e, i) {
    var n = new Image();
    return n.src = this.base64(t, e, i), n;
  }, r.prototype.base64 = function(t, e, i) {
    return this.canvas(t).toDataURL(e, i);
  }, r.prototype.canvas = function(t, e) {
    var i = this.renderer, n, s = !1, a, o = !1;
    t && (t instanceof Ji ? a = t : (a = this.renderer.generateTexture(t), o = !0)), a ? (n = a.baseTexture.resolution, e = e != null ? e : a.frame, s = !1, i.renderTexture.bind(a)) : (n = i.resolution, e || (e = iE, e.width = i.width, e.height = i.height), s = !0, i.renderTexture.bind(null));
    var u = Math.round(e.width * n), h = Math.round(e.height * n), l = new bx(u, h, 1), c = new Uint8Array(nE * u * h), d = i.gl;
    d.readPixels(Math.round(e.x * n), Math.round(e.y * n), u, h, d.RGBA, d.UNSIGNED_BYTE, c);
    var p = l.context.getImageData(0, 0, u, h);
    if (r.arrayPostDivide(c, p.data), l.context.putImageData(p, 0, 0), s) {
      var g = new bx(l.width, l.height, 1);
      g.context.scale(1, -1), g.context.drawImage(l.canvas, 0, -h), l.destroy(), l = g;
    }
    return o && a.destroy(!0), l.canvas;
  }, r.prototype.pixels = function(t, e) {
    var i = this.renderer, n, s, a = !1;
    t && (t instanceof Ji ? s = t : (s = this.renderer.generateTexture(t), a = !0)), s ? (n = s.baseTexture.resolution, e = e != null ? e : s.frame, i.renderTexture.bind(s)) : (n = i.resolution, e || (e = iE, e.width = i.width, e.height = i.height), i.renderTexture.bind(null));
    var o = Math.round(e.width * n), u = Math.round(e.height * n), h = new Uint8Array(nE * o * u), l = i.gl;
    return l.readPixels(Math.round(e.x * n), Math.round(e.y * n), o, u, l.RGBA, l.UNSIGNED_BYTE, h), a && s.destroy(!0), r.arrayPostDivide(h, h), h;
  }, r.prototype.destroy = function() {
    this.renderer = null;
  }, r.arrayPostDivide = function(t, e) {
    for (var i = 0; i < t.length; i += 4) {
      var n = e[i + 3] = t[i + 3];
      n !== 0 ? (e[i] = Math.round(Math.min(t[i] * 255 / n, 255)), e[i + 1] = Math.round(Math.min(t[i + 1] * 255 / n, 255)), e[i + 2] = Math.round(Math.min(t[i + 2] * 255 / n, 255))) : (e[i] = t[i], e[i + 1] = t[i + 1], e[i + 2] = t[i + 2]);
    }
  }, r.extension = {
    name: "extract",
    type: me.RendererPlugin
  }, r;
}();
/*!
 * @pixi/loaders - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Xd = function() {
  function r(t, e, i) {
    e === void 0 && (e = !1), this._fn = t, this._once = e, this._thisArg = i, this._next = this._prev = this._owner = null;
  }
  return r.prototype.detach = function() {
    return this._owner === null ? !1 : (this._owner.detach(this), !0);
  }, r;
}();
function sE(r, t) {
  return r._head ? (r._tail._next = t, t._prev = r._tail, r._tail = t) : (r._head = t, r._tail = t), t._owner = r, t;
}
var ys = function() {
  function r() {
    this._head = this._tail = void 0;
  }
  return r.prototype.handlers = function(t) {
    t === void 0 && (t = !1);
    var e = this._head;
    if (t)
      return !!e;
    for (var i = []; e; )
      i.push(e), e = e._next;
    return i;
  }, r.prototype.has = function(t) {
    if (!(t instanceof Xd))
      throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");
    return t._owner === this;
  }, r.prototype.dispatch = function() {
    for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
      e[i] = t[i];
    var n = this._head;
    if (!n)
      return !1;
    for (; n; )
      n._once && this.detach(n), n._fn.apply(n._thisArg, e), n = n._next;
    return !0;
  }, r.prototype.add = function(t, e) {
    if (e === void 0 && (e = null), typeof t != "function")
      throw new Error("MiniSignal#add(): First arg must be a Function.");
    return sE(this, new Xd(t, !1, e));
  }, r.prototype.once = function(t, e) {
    if (e === void 0 && (e = null), typeof t != "function")
      throw new Error("MiniSignal#once(): First arg must be a Function.");
    return sE(this, new Xd(t, !0, e));
  }, r.prototype.detach = function(t) {
    if (!(t instanceof Xd))
      throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");
    return t._owner !== this ? this : (t._prev && (t._prev._next = t._next), t._next && (t._next._prev = t._prev), t === this._head ? (this._head = t._next, t._next === null && (this._tail = null)) : t === this._tail && (this._tail = t._prev, this._tail._next = null), t._owner = null, this);
  }, r.prototype.detachAll = function() {
    var t = this._head;
    if (!t)
      return this;
    for (this._head = this._tail = null; t; )
      t._owner = null, t = t._next;
    return this;
  }, r;
}();
function QT(r, t) {
  t = t || {};
  for (var e = {
    key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
    q: {
      name: "queryKey",
      parser: /(?:^|&)([^&=]*)=?([^&]*)/g
    },
    parser: {
      strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
      loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
    }
  }, i = e.parser[t.strictMode ? "strict" : "loose"].exec(r), n = {}, s = 14; s--; )
    n[e.key[s]] = i[s] || "";
  return n[e.q.name] = {}, n[e.key[12]].replace(e.q.parser, function(a, o, u) {
    o && (n[e.q.name][o] = u);
  }), n;
}
var _m, Wd = null, qF = 0, aE = 200, ZF = 204, JF = 1223, KF = 2;
function oE() {
}
function uE(r, t, e) {
  t && t.indexOf(".") === 0 && (t = t.substring(1)), t && (r[t] = e);
}
function ym(r) {
  return r.toString().replace("object ", "");
}
var Lt = function() {
  function r(t, e, i) {
    if (this._dequeue = oE, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = null, this._boundOnError = null, this._boundOnProgress = null, this._boundOnTimeout = null, this._boundXhrOnError = null, this._boundXhrOnTimeout = null, this._boundXhrOnAbort = null, this._boundXhrOnLoad = null, typeof t != "string" || typeof e != "string")
      throw new Error("Both name and url are required for constructing a resource.");
    i = i || {}, this._flags = 0, this._setFlag(r.STATUS_FLAGS.DATA_URL, e.indexOf("data:") === 0), this.name = t, this.url = e, this.extension = this._getExtension(), this.data = null, this.crossOrigin = i.crossOrigin === !0 ? "anonymous" : i.crossOrigin, this.timeout = i.timeout || 0, this.loadType = i.loadType || this._determineLoadType(), this.xhrType = i.xhrType, this.metadata = i.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = r.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = oE, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundOnTimeout = this._onTimeout.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this.onStart = new ys(), this.onProgress = new ys(), this.onComplete = new ys(), this.onAfterMiddleware = new ys();
  }
  return r.setExtensionLoadType = function(t, e) {
    uE(r._loadTypeMap, t, e);
  }, r.setExtensionXhrType = function(t, e) {
    uE(r._xhrTypeMap, t, e);
  }, Object.defineProperty(r.prototype, "isDataUrl", {
    get: function() {
      return this._hasFlag(r.STATUS_FLAGS.DATA_URL);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "isComplete", {
    get: function() {
      return this._hasFlag(r.STATUS_FLAGS.COMPLETE);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "isLoading", {
    get: function() {
      return this._hasFlag(r.STATUS_FLAGS.LOADING);
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.complete = function() {
    this._clearEvents(), this._finish();
  }, r.prototype.abort = function(t) {
    if (!this.error) {
      if (this.error = new Error(t), this._clearEvents(), this.xhr)
        this.xhr.abort();
      else if (this.xdr)
        this.xdr.abort();
      else if (this.data)
        if (this.data.src)
          this.data.src = r.EMPTY_GIF;
        else
          for (; this.data.firstChild; )
            this.data.removeChild(this.data.firstChild);
      this._finish();
    }
  }, r.prototype.load = function(t) {
    var e = this;
    if (!this.isLoading) {
      if (this.isComplete) {
        t && setTimeout(function() {
          return t(e);
        }, 1);
        return;
      } else
        t && this.onComplete.once(t);
      switch (this._setFlag(r.STATUS_FLAGS.LOADING, !0), this.onStart.dispatch(this), (this.crossOrigin === !1 || typeof this.crossOrigin != "string") && (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) {
        case r.LOAD_TYPE.IMAGE:
          this.type = r.TYPE.IMAGE, this._loadElement("image");
          break;
        case r.LOAD_TYPE.AUDIO:
          this.type = r.TYPE.AUDIO, this._loadSourceElement("audio");
          break;
        case r.LOAD_TYPE.VIDEO:
          this.type = r.TYPE.VIDEO, this._loadSourceElement("video");
          break;
        case r.LOAD_TYPE.XHR:
        default:
          typeof _m > "u" && (_m = !!(globalThis.XDomainRequest && !("withCredentials" in new XMLHttpRequest()))), _m && this.crossOrigin ? this._loadXdr() : this._loadXhr();
          break;
      }
    }
  }, r.prototype._hasFlag = function(t) {
    return (this._flags & t) !== 0;
  }, r.prototype._setFlag = function(t, e) {
    this._flags = e ? this._flags | t : this._flags & ~t;
  }, r.prototype._clearEvents = function() {
    clearTimeout(this._elementTimer), this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1), this.data.removeEventListener("load", this._boundComplete, !1), this.data.removeEventListener("progress", this._boundOnProgress, !1), this.data.removeEventListener("canplaythrough", this._boundComplete, !1)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1), this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, !1), this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1), this.xhr.removeEventListener("progress", this._boundOnProgress, !1), this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null));
  }, r.prototype._finish = function() {
    if (this.isComplete)
      throw new Error("Complete called again for an already completed resource.");
    this._setFlag(r.STATUS_FLAGS.COMPLETE, !0), this._setFlag(r.STATUS_FLAGS.LOADING, !1), this.onComplete.dispatch(this);
  }, r.prototype._loadElement = function(t) {
    this.metadata.loadElement ? this.data = this.metadata.loadElement : t === "image" && typeof globalThis.Image < "u" ? this.data = new Image() : this.data = document.createElement(t), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
  }, r.prototype._loadSourceElement = function(t) {
    if (this.metadata.loadElement ? this.data = this.metadata.loadElement : t === "audio" && typeof globalThis.Audio < "u" ? this.data = new Audio() : this.data = document.createElement(t), this.data === null) {
      this.abort("Unsupported element: " + t);
      return;
    }
    if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), !this.metadata.skipSource)
      if (navigator.isCocoonJS)
        this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
      else if (Array.isArray(this.url))
        for (var e = this.metadata.mimeType, i = 0; i < this.url.length; ++i)
          this.data.appendChild(this._createSource(t, this.url[i], Array.isArray(e) ? e[i] : e));
      else {
        var e = this.metadata.mimeType;
        this.data.appendChild(this._createSource(t, this.url, Array.isArray(e) ? e[0] : e));
      }
    this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.data.addEventListener("canplaythrough", this._boundComplete, !1), this.data.load(), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
  }, r.prototype._loadXhr = function() {
    typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
    var t = this.xhr = new XMLHttpRequest();
    this.crossOrigin === "use-credentials" && (t.withCredentials = !0), t.open("GET", this.url, !0), t.timeout = this.timeout, this.xhrType === r.XHR_RESPONSE_TYPE.JSON || this.xhrType === r.XHR_RESPONSE_TYPE.DOCUMENT ? t.responseType = r.XHR_RESPONSE_TYPE.TEXT : t.responseType = this.xhrType, t.addEventListener("error", this._boundXhrOnError, !1), t.addEventListener("timeout", this._boundXhrOnTimeout, !1), t.addEventListener("abort", this._boundXhrOnAbort, !1), t.addEventListener("progress", this._boundOnProgress, !1), t.addEventListener("load", this._boundXhrOnLoad, !1), t.send();
  }, r.prototype._loadXdr = function() {
    typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
    var t = this.xhr = new globalThis.XDomainRequest();
    t.timeout = this.timeout || 5e3, t.onerror = this._boundXhrOnError, t.ontimeout = this._boundXhrOnTimeout, t.onprogress = this._boundOnProgress, t.onload = this._boundXhrOnLoad, t.open("GET", this.url, !0), setTimeout(function() {
      return t.send();
    }, 1);
  }, r.prototype._createSource = function(t, e, i) {
    i || (i = t + "/" + this._getExtension(e));
    var n = document.createElement("source");
    return n.src = e, n.type = i, n;
  }, r.prototype._onError = function(t) {
    this.abort("Failed to load element using: " + t.target.nodeName);
  }, r.prototype._onProgress = function(t) {
    t && t.lengthComputable && this.onProgress.dispatch(this, t.loaded / t.total);
  }, r.prototype._onTimeout = function() {
    this.abort("Load timed out.");
  }, r.prototype._xhrOnError = function() {
    var t = this.xhr;
    this.abort(ym(t) + " Request failed. Status: " + t.status + ', text: "' + t.statusText + '"');
  }, r.prototype._xhrOnTimeout = function() {
    var t = this.xhr;
    this.abort(ym(t) + " Request timed out.");
  }, r.prototype._xhrOnAbort = function() {
    var t = this.xhr;
    this.abort(ym(t) + " Request was aborted by the user.");
  }, r.prototype._xhrOnLoad = function() {
    var t = this.xhr, e = "", i = typeof t.status > "u" ? aE : t.status;
    (t.responseType === "" || t.responseType === "text" || typeof t.responseType > "u") && (e = t.responseText), i === qF && (e.length > 0 || t.responseType === r.XHR_RESPONSE_TYPE.BUFFER) ? i = aE : i === JF && (i = ZF);
    var n = i / 100 | 0;
    if (n === KF)
      if (this.xhrType === r.XHR_RESPONSE_TYPE.TEXT)
        this.data = e, this.type = r.TYPE.TEXT;
      else if (this.xhrType === r.XHR_RESPONSE_TYPE.JSON)
        try {
          this.data = JSON.parse(e), this.type = r.TYPE.JSON;
        } catch (o) {
          this.abort("Error trying to parse loaded json: " + o);
          return;
        }
      else if (this.xhrType === r.XHR_RESPONSE_TYPE.DOCUMENT)
        try {
          if (globalThis.DOMParser) {
            var s = new DOMParser();
            this.data = s.parseFromString(e, "text/xml");
          } else {
            var a = document.createElement("div");
            a.innerHTML = e, this.data = a;
          }
          this.type = r.TYPE.XML;
        } catch (o) {
          this.abort("Error trying to parse loaded xml: " + o);
          return;
        }
      else
        this.data = t.response || e;
    else {
      this.abort("[" + t.status + "] " + t.statusText + ": " + t.responseURL);
      return;
    }
    this.complete();
  }, r.prototype._determineCrossOrigin = function(t, e) {
    if (t.indexOf("data:") === 0)
      return "";
    if (globalThis.origin !== globalThis.location.origin)
      return "anonymous";
    e = e || globalThis.location, Wd || (Wd = document.createElement("a")), Wd.href = t;
    var i = QT(Wd.href, { strictMode: !0 }), n = !i.port && e.port === "" || i.port === e.port, s = i.protocol ? i.protocol + ":" : "";
    return i.host !== e.hostname || !n || s !== e.protocol ? "anonymous" : "";
  }, r.prototype._determineXhrType = function() {
    return r._xhrTypeMap[this.extension] || r.XHR_RESPONSE_TYPE.TEXT;
  }, r.prototype._determineLoadType = function() {
    return r._loadTypeMap[this.extension] || r.LOAD_TYPE.XHR;
  }, r.prototype._getExtension = function(t) {
    t === void 0 && (t = this.url);
    var e = "";
    if (this.isDataUrl) {
      var i = t.indexOf("/");
      e = t.substring(i + 1, t.indexOf(";", i));
    } else {
      var n = t.indexOf("?"), s = t.indexOf("#"), a = Math.min(n > -1 ? n : t.length, s > -1 ? s : t.length);
      t = t.substring(0, a), e = t.substring(t.lastIndexOf(".") + 1);
    }
    return e.toLowerCase();
  }, r.prototype._getMimeFromXhrType = function(t) {
    switch (t) {
      case r.XHR_RESPONSE_TYPE.BUFFER:
        return "application/octet-binary";
      case r.XHR_RESPONSE_TYPE.BLOB:
        return "application/blob";
      case r.XHR_RESPONSE_TYPE.DOCUMENT:
        return "application/xml";
      case r.XHR_RESPONSE_TYPE.JSON:
        return "application/json";
      case r.XHR_RESPONSE_TYPE.DEFAULT:
      case r.XHR_RESPONSE_TYPE.TEXT:
      default:
        return "text/plain";
    }
  }, r;
}();
(function(r) {
  (function(t) {
    t[t.NONE = 0] = "NONE", t[t.DATA_URL = 1] = "DATA_URL", t[t.COMPLETE = 2] = "COMPLETE", t[t.LOADING = 4] = "LOADING";
  })(r.STATUS_FLAGS || (r.STATUS_FLAGS = {})), function(t) {
    t[t.UNKNOWN = 0] = "UNKNOWN", t[t.JSON = 1] = "JSON", t[t.XML = 2] = "XML", t[t.IMAGE = 3] = "IMAGE", t[t.AUDIO = 4] = "AUDIO", t[t.VIDEO = 5] = "VIDEO", t[t.TEXT = 6] = "TEXT";
  }(r.TYPE || (r.TYPE = {})), function(t) {
    t[t.XHR = 1] = "XHR", t[t.IMAGE = 2] = "IMAGE", t[t.AUDIO = 3] = "AUDIO", t[t.VIDEO = 4] = "VIDEO";
  }(r.LOAD_TYPE || (r.LOAD_TYPE = {})), function(t) {
    t.DEFAULT = "text", t.BUFFER = "arraybuffer", t.BLOB = "blob", t.DOCUMENT = "document", t.JSON = "json", t.TEXT = "text";
  }(r.XHR_RESPONSE_TYPE || (r.XHR_RESPONSE_TYPE = {})), r._loadTypeMap = {
    gif: r.LOAD_TYPE.IMAGE,
    png: r.LOAD_TYPE.IMAGE,
    bmp: r.LOAD_TYPE.IMAGE,
    jpg: r.LOAD_TYPE.IMAGE,
    jpeg: r.LOAD_TYPE.IMAGE,
    tif: r.LOAD_TYPE.IMAGE,
    tiff: r.LOAD_TYPE.IMAGE,
    webp: r.LOAD_TYPE.IMAGE,
    tga: r.LOAD_TYPE.IMAGE,
    svg: r.LOAD_TYPE.IMAGE,
    "svg+xml": r.LOAD_TYPE.IMAGE,
    mp3: r.LOAD_TYPE.AUDIO,
    ogg: r.LOAD_TYPE.AUDIO,
    wav: r.LOAD_TYPE.AUDIO,
    mp4: r.LOAD_TYPE.VIDEO,
    webm: r.LOAD_TYPE.VIDEO
  }, r._xhrTypeMap = {
    xhtml: r.XHR_RESPONSE_TYPE.DOCUMENT,
    html: r.XHR_RESPONSE_TYPE.DOCUMENT,
    htm: r.XHR_RESPONSE_TYPE.DOCUMENT,
    xml: r.XHR_RESPONSE_TYPE.DOCUMENT,
    tmx: r.XHR_RESPONSE_TYPE.DOCUMENT,
    svg: r.XHR_RESPONSE_TYPE.DOCUMENT,
    tsx: r.XHR_RESPONSE_TYPE.DOCUMENT,
    gif: r.XHR_RESPONSE_TYPE.BLOB,
    png: r.XHR_RESPONSE_TYPE.BLOB,
    bmp: r.XHR_RESPONSE_TYPE.BLOB,
    jpg: r.XHR_RESPONSE_TYPE.BLOB,
    jpeg: r.XHR_RESPONSE_TYPE.BLOB,
    tif: r.XHR_RESPONSE_TYPE.BLOB,
    tiff: r.XHR_RESPONSE_TYPE.BLOB,
    webp: r.XHR_RESPONSE_TYPE.BLOB,
    tga: r.XHR_RESPONSE_TYPE.BLOB,
    json: r.XHR_RESPONSE_TYPE.JSON,
    text: r.XHR_RESPONSE_TYPE.TEXT,
    txt: r.XHR_RESPONSE_TYPE.TEXT,
    ttf: r.XHR_RESPONSE_TYPE.BUFFER,
    otf: r.XHR_RESPONSE_TYPE.BUFFER
  }, r.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
})(Lt || (Lt = {}));
function La() {
}
function QF(r) {
  return function() {
    for (var e = arguments, i = [], n = 0; n < arguments.length; n++)
      i[n] = e[n];
    if (r === null)
      throw new Error("Callback was already called.");
    var s = r;
    r = null, s.apply(this, i);
  };
}
var tM = function() {
  function r(t, e) {
    this.data = t, this.callback = e;
  }
  return r;
}(), bm = function() {
  function r(t, e) {
    var i = this;
    if (e === void 0 && (e = 1), this.workers = 0, this.saturated = La, this.unsaturated = La, this.empty = La, this.drain = La, this.error = La, this.started = !1, this.paused = !1, this._tasks = [], this._insert = function(n, s, a) {
      if (a && typeof a != "function")
        throw new Error("task callback must be a function");
      if (i.started = !0, n == null && i.idle()) {
        setTimeout(function() {
          return i.drain();
        }, 1);
        return;
      }
      var o = new tM(n, typeof a == "function" ? a : La);
      s ? i._tasks.unshift(o) : i._tasks.push(o), setTimeout(i.process, 1);
    }, this.process = function() {
      for (; !i.paused && i.workers < i.concurrency && i._tasks.length; ) {
        var n = i._tasks.shift();
        i._tasks.length === 0 && i.empty(), i.workers += 1, i.workers === i.concurrency && i.saturated(), i._worker(n.data, QF(i._next(n)));
      }
    }, this._worker = t, e === 0)
      throw new Error("Concurrency must not be zero");
    this.concurrency = e, this.buffer = e / 4;
  }
  return r.prototype._next = function(t) {
    var e = this;
    return function() {
      for (var i = arguments, n = [], s = 0; s < arguments.length; s++)
        n[s] = i[s];
      e.workers -= 1, t.callback.apply(t, n), n[0] != null && e.error(n[0], t.data), e.workers <= e.concurrency - e.buffer && e.unsaturated(), e.idle() && e.drain(), e.process();
    };
  }, r.prototype.push = function(t, e) {
    this._insert(t, !1, e);
  }, r.prototype.kill = function() {
    this.workers = 0, this.drain = La, this.started = !1, this._tasks = [];
  }, r.prototype.unshift = function(t, e) {
    this._insert(t, !0, e);
  }, r.prototype.length = function() {
    return this._tasks.length;
  }, r.prototype.running = function() {
    return this.workers;
  }, r.prototype.idle = function() {
    return this._tasks.length + this.workers === 0;
  }, r.prototype.pause = function() {
    this.paused !== !0 && (this.paused = !0);
  }, r.prototype.resume = function() {
    if (this.paused !== !1) {
      this.paused = !1;
      for (var t = 1; t <= this.concurrency; t++)
        this.process();
    }
  }, r.eachSeries = function(t, e, i, n) {
    var s = 0, a = t.length;
    function o(u) {
      if (u || s === a) {
        i && i(u);
        return;
      }
      n ? setTimeout(function() {
        e(t[s++], o);
      }, 1) : e(t[s++], o);
    }
    o();
  }, r.queue = function(t, e) {
    return new r(t, e);
  }, r;
}(), xm = 100, eM = /(#[\w-]+)?$/, fi = function() {
  function r(t, e) {
    var i = this;
    t === void 0 && (t = ""), e === void 0 && (e = 10), this.progress = 0, this.loading = !1, this.defaultQueryString = "", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(u, h) {
      return i._loadResource(u, h);
    }, this.resources = {}, this.baseUrl = t, this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(u, h) {
      return i._loadResource(u, h);
    }, this._queue = bm.queue(this._boundLoadResource, e), this._queue.pause(), this.resources = {}, this.onProgress = new ys(), this.onError = new ys(), this.onLoad = new ys(), this.onStart = new ys(), this.onComplete = new ys();
    for (var n = 0; n < r._plugins.length; ++n) {
      var s = r._plugins[n], a = s.pre, o = s.use;
      a && this.pre(a), o && this.use(o);
    }
    this._protected = !1;
  }
  return r.prototype._add = function(t, e, i, n) {
    if (this.loading && (!i || !i.parentResource))
      throw new Error("Cannot add resources while the loader is running.");
    if (this.resources[t])
      throw new Error('Resource named "' + t + '" already exists.');
    if (e = this._prepareUrl(e), this.resources[t] = new Lt(t, e, i), typeof n == "function" && this.resources[t].onAfterMiddleware.once(n), this.loading) {
      for (var s = i.parentResource, a = [], o = 0; o < s.children.length; ++o)
        s.children[o].isComplete || a.push(s.children[o]);
      var u = s.progressChunk * (a.length + 1), h = u / (a.length + 2);
      s.children.push(this.resources[t]), s.progressChunk = h;
      for (var o = 0; o < a.length; ++o)
        a[o].progressChunk = h;
      this.resources[t].progressChunk = h;
    }
    return this._queue.push(this.resources[t]), this;
  }, r.prototype.pre = function(t) {
    return this._beforeMiddleware.push(t), this;
  }, r.prototype.use = function(t) {
    return this._afterMiddleware.push(t), this;
  }, r.prototype.reset = function() {
    this.progress = 0, this.loading = !1, this._queue.kill(), this._queue.pause();
    for (var t in this.resources) {
      var e = this.resources[t];
      e._onLoadBinding && e._onLoadBinding.detach(), e.isLoading && e.abort("loader reset");
    }
    return this.resources = {}, this;
  }, r.prototype.load = function(t) {
    if (Rn("6.5.0", "@pixi/loaders is being replaced with @pixi/assets in the next major release."), typeof t == "function" && this.onComplete.once(t), this.loading)
      return this;
    if (this._queue.idle())
      this._onStart(), this._onComplete();
    else {
      for (var e = this._queue._tasks.length, i = xm / e, n = 0; n < this._queue._tasks.length; ++n)
        this._queue._tasks[n].data.progressChunk = i;
      this._onStart(), this._queue.resume();
    }
    return this;
  }, Object.defineProperty(r.prototype, "concurrency", {
    get: function() {
      return this._queue.concurrency;
    },
    set: function(t) {
      this._queue.concurrency = t;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype._prepareUrl = function(t) {
    var e = QT(t, { strictMode: !0 }), i;
    if (e.protocol || !e.path || t.indexOf("//") === 0 ? i = t : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && t.charAt(0) !== "/" ? i = this.baseUrl + "/" + t : i = this.baseUrl + t, this.defaultQueryString) {
      var n = eM.exec(i)[0];
      i = i.slice(0, i.length - n.length), i.indexOf("?") !== -1 ? i += "&" + this.defaultQueryString : i += "?" + this.defaultQueryString, i += n;
    }
    return i;
  }, r.prototype._loadResource = function(t, e) {
    var i = this;
    t._dequeue = e, bm.eachSeries(this._beforeMiddleware, function(n, s) {
      n.call(i, t, function() {
        s(t.isComplete ? {} : null);
      });
    }, function() {
      t.isComplete ? i._onLoad(t) : (t._onLoadBinding = t.onComplete.once(i._onLoad, i), t.load());
    }, !0);
  }, r.prototype._onStart = function() {
    this.progress = 0, this.loading = !0, this.onStart.dispatch(this);
  }, r.prototype._onComplete = function() {
    this.progress = xm, this.loading = !1, this.onComplete.dispatch(this, this.resources);
  }, r.prototype._onLoad = function(t) {
    var e = this;
    t._onLoadBinding = null, this._resourcesParsing.push(t), t._dequeue(), bm.eachSeries(this._afterMiddleware, function(i, n) {
      i.call(e, t, n);
    }, function() {
      t.onAfterMiddleware.dispatch(t), e.progress = Math.min(xm, e.progress + t.progressChunk), e.onProgress.dispatch(e, t), t.error ? e.onError.dispatch(t.error, e, t) : e.onLoad.dispatch(e, t), e._resourcesParsing.splice(e._resourcesParsing.indexOf(t), 1), e._queue.idle() && e._resourcesParsing.length === 0 && e._onComplete();
    }, !0);
  }, r.prototype.destroy = function() {
    this._protected || this.reset();
  }, Object.defineProperty(r, "shared", {
    get: function() {
      var t = r._shared;
      return t || (t = new r(), t._protected = !0, r._shared = t), t;
    },
    enumerable: !1,
    configurable: !0
  }), r.registerPlugin = function(t) {
    return Rn("6.5.0", "Loader.registerPlugin() is deprecated, use extensions.add() instead."), Ns.add({
      type: me.Loader,
      ref: t
    }), r;
  }, r._plugins = [], r;
}();
Ns.handleByList(me.Loader, fi._plugins);
fi.prototype.add = function(t, e, i, n) {
  if (Array.isArray(t)) {
    for (var s = 0; s < t.length; ++s)
      this.add(t[s]);
    return this;
  }
  if (typeof t == "object" && (i = t, n = e || i.callback || i.onComplete, e = i.url, t = i.name || i.key || i.url), typeof e != "string" && (n = i, i = e, e = t), typeof e != "string")
    throw new Error("No url passed to add resource to loader.");
  return typeof i == "function" && (n = i, i = null), this._add(t, e, i, n);
};
var rM = function() {
  function r() {
  }
  return r.init = function(t) {
    t = Object.assign({
      sharedLoader: !1
    }, t), this.loader = t.sharedLoader ? fi.shared : new fi();
  }, r.destroy = function() {
    this.loader && (this.loader.destroy(), this.loader = null);
  }, r.extension = me.Application, r;
}(), iM = function() {
  function r() {
  }
  return r.add = function() {
    Lt.setExtensionLoadType("svg", Lt.LOAD_TYPE.XHR), Lt.setExtensionXhrType("svg", Lt.XHR_RESPONSE_TYPE.TEXT);
  }, r.use = function(t, e) {
    if (t.data && (t.type === Lt.TYPE.IMAGE || t.extension === "svg")) {
      var i = t.data, n = t.url, s = t.name, a = t.metadata;
      It.fromLoader(i, n, s, a).then(function(o) {
        t.texture = o, e();
      }).catch(e);
    } else
      e();
  }, r.extension = me.Loader, r;
}(), nM = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function sM(r) {
  for (var t = "", e = 0; e < r.length; ) {
    for (var i = [0, 0, 0], n = [0, 0, 0, 0], s = 0; s < i.length; ++s)
      e < r.length ? i[s] = r.charCodeAt(e++) & 255 : i[s] = 0;
    n[0] = i[0] >> 2, n[1] = (i[0] & 3) << 4 | i[1] >> 4, n[2] = (i[1] & 15) << 2 | i[2] >> 6, n[3] = i[2] & 63;
    var a = e - (r.length - 1);
    switch (a) {
      case 2:
        n[3] = 64, n[2] = 64;
        break;
      case 1:
        n[3] = 64;
        break;
    }
    for (var s = 0; s < n.length; ++s)
      t += nM.charAt(n[s]);
  }
  return t;
}
function aM(r, t) {
  if (!r.data) {
    t();
    return;
  }
  if (r.xhr && r.xhrType === Lt.XHR_RESPONSE_TYPE.BLOB) {
    if (!self.Blob || typeof r.data == "string") {
      var e = r.xhr.getResponseHeader("content-type");
      if (e && e.indexOf("image") === 0) {
        r.data = new Image(), r.data.src = "data:" + e + ";base64," + sM(r.xhr.responseText), r.type = Lt.TYPE.IMAGE, r.data.onload = function() {
          r.data.onload = null, t();
        };
        return;
      }
    } else if (r.data.type.indexOf("image") === 0) {
      var i = globalThis.URL || globalThis.webkitURL, n = i.createObjectURL(r.data);
      r.blob = r.data, r.data = new Image(), r.data.src = n, r.type = Lt.TYPE.IMAGE, r.data.onload = function() {
        i.revokeObjectURL(n), r.data.onload = null, t();
      };
      return;
    }
  }
  t();
}
var oM = function() {
  function r() {
  }
  return r.extension = me.Loader, r.use = aM, r;
}();
Ns.add(iM, oM);
/*!
 * @pixi/compressed-textures - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var de, zt;
(function(r) {
  r[r.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776] = "COMPRESSED_RGB_S3TC_DXT1_EXT", r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777] = "COMPRESSED_RGBA_S3TC_DXT1_EXT", r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778] = "COMPRESSED_RGBA_S3TC_DXT3_EXT", r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779] = "COMPRESSED_RGBA_S3TC_DXT5_EXT", r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT", r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT", r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT", r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916] = "COMPRESSED_SRGB_S3TC_DXT1_EXT", r[r.COMPRESSED_R11_EAC = 37488] = "COMPRESSED_R11_EAC", r[r.COMPRESSED_SIGNED_R11_EAC = 37489] = "COMPRESSED_SIGNED_R11_EAC", r[r.COMPRESSED_RG11_EAC = 37490] = "COMPRESSED_RG11_EAC", r[r.COMPRESSED_SIGNED_RG11_EAC = 37491] = "COMPRESSED_SIGNED_RG11_EAC", r[r.COMPRESSED_RGB8_ETC2 = 37492] = "COMPRESSED_RGB8_ETC2", r[r.COMPRESSED_RGBA8_ETC2_EAC = 37496] = "COMPRESSED_RGBA8_ETC2_EAC", r[r.COMPRESSED_SRGB8_ETC2 = 37493] = "COMPRESSED_SRGB8_ETC2", r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497] = "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC", r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494] = "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2", r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495] = "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2", r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840] = "COMPRESSED_RGB_PVRTC_4BPPV1_IMG", r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842] = "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG", r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841] = "COMPRESSED_RGB_PVRTC_2BPPV1_IMG", r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843] = "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG", r[r.COMPRESSED_RGB_ETC1_WEBGL = 36196] = "COMPRESSED_RGB_ETC1_WEBGL", r[r.COMPRESSED_RGB_ATC_WEBGL = 35986] = "COMPRESSED_RGB_ATC_WEBGL", r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986] = "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL", r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798] = "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL";
})(zt || (zt = {}));
var cv = (de = {}, de[zt.COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5, de[zt.COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5, de[zt.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1, de[zt.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1, de[zt.COMPRESSED_SRGB_S3TC_DXT1_EXT] = 0.5, de[zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = 0.5, de[zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1, de[zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1, de[zt.COMPRESSED_R11_EAC] = 0.5, de[zt.COMPRESSED_SIGNED_R11_EAC] = 0.5, de[zt.COMPRESSED_RG11_EAC] = 1, de[zt.COMPRESSED_SIGNED_RG11_EAC] = 1, de[zt.COMPRESSED_RGB8_ETC2] = 0.5, de[zt.COMPRESSED_RGBA8_ETC2_EAC] = 1, de[zt.COMPRESSED_SRGB8_ETC2] = 0.5, de[zt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1, de[zt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, de[zt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, de[zt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5, de[zt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5, de[zt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25, de[zt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25, de[zt.COMPRESSED_RGB_ETC1_WEBGL] = 0.5, de[zt.COMPRESSED_RGB_ATC_WEBGL] = 0.5, de[zt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1, de[zt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1, de);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var y_ = function(r, t) {
  return y_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, y_(r, t);
};
function tC(r, t) {
  y_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
function uM(r, t, e, i) {
  function n(s) {
    return s instanceof e ? s : new e(function(a) {
      a(s);
    });
  }
  return new (e || (e = Promise))(function(s, a) {
    function o(l) {
      try {
        h(i.next(l));
      } catch (c) {
        a(c);
      }
    }
    function u(l) {
      try {
        h(i.throw(l));
      } catch (c) {
        a(c);
      }
    }
    function h(l) {
      l.done ? s(l.value) : n(l.value).then(o, u);
    }
    h((i = i.apply(r, t || [])).next());
  });
}
function hM(r, t) {
  var e = { label: 0, sent: function() {
    if (s[0] & 1)
      throw s[1];
    return s[1];
  }, trys: [], ops: [] }, i, n, s, a;
  return a = { next: o(0), throw: o(1), return: o(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function o(h) {
    return function(l) {
      return u([h, l]);
    };
  }
  function u(h) {
    if (i)
      throw new TypeError("Generator is already executing.");
    for (; e; )
      try {
        if (i = 1, n && (s = h[0] & 2 ? n.return : h[0] ? n.throw || ((s = n.return) && s.call(n), 0) : n.next) && !(s = s.call(n, h[1])).done)
          return s;
        switch (n = 0, s && (h = [h[0] & 2, s.value]), h[0]) {
          case 0:
          case 1:
            s = h;
            break;
          case 4:
            return e.label++, { value: h[1], done: !1 };
          case 5:
            e.label++, n = h[1], h = [0];
            continue;
          case 7:
            h = e.ops.pop(), e.trys.pop();
            continue;
          default:
            if (s = e.trys, !(s = s.length > 0 && s[s.length - 1]) && (h[0] === 6 || h[0] === 2)) {
              e = 0;
              continue;
            }
            if (h[0] === 3 && (!s || h[1] > s[0] && h[1] < s[3])) {
              e.label = h[1];
              break;
            }
            if (h[0] === 6 && e.label < s[1]) {
              e.label = s[1], s = h;
              break;
            }
            if (s && e.label < s[2]) {
              e.label = s[2], e.ops.push(h);
              break;
            }
            s[2] && e.ops.pop(), e.trys.pop();
            continue;
        }
        h = t.call(r, e);
      } catch (l) {
        h = [6, l], n = 0;
      } finally {
        i = s = 0;
      }
    if (h[0] & 5)
      throw h[1];
    return { value: h[0] ? h[1] : void 0, done: !0 };
  }
}
var lM = function(r) {
  tC(t, r);
  function t(e, i) {
    i === void 0 && (i = { width: 1, height: 1, autoLoad: !0 });
    var n = this, s, a;
    return typeof e == "string" ? (s = e, a = new Uint8Array()) : (s = null, a = e), n = r.call(this, a, i) || this, n.origin = s, n.buffer = a ? new m_(a) : null, n.origin && i.autoLoad !== !1 && n.load(), a && a.length && (n.loaded = !0, n.onBlobLoaded(n.buffer.rawBinaryData)), n;
  }
  return t.prototype.onBlobLoaded = function(e) {
  }, t.prototype.load = function() {
    return uM(this, void 0, Promise, function() {
      var e, i, n;
      return hM(this, function(s) {
        switch (s.label) {
          case 0:
            return [4, fetch(this.origin)];
          case 1:
            return e = s.sent(), [4, e.blob()];
          case 2:
            return i = s.sent(), [4, i.arrayBuffer()];
          case 3:
            return n = s.sent(), this.data = new Uint32Array(n), this.buffer = new m_(n), this.loaded = !0, this.onBlobLoaded(n), this.update(), [2, this];
        }
      });
    });
  }, t;
}(pd), b_ = function(r) {
  tC(t, r);
  function t(e, i) {
    var n = r.call(this, e, i) || this;
    return n.format = i.format, n.levels = i.levels || 1, n._width = i.width, n._height = i.height, n._extension = t._formatToExtension(n.format), (i.levelBuffers || n.buffer) && (n._levelBuffers = i.levelBuffers || t._createLevelBuffers(
      e instanceof Uint8Array ? e : n.buffer.uint8View,
      n.format,
      n.levels,
      4,
      4,
      n.width,
      n.height
    )), n;
  }
  return t.prototype.upload = function(e, i, n) {
    var s = e.gl, a = e.context.extensions[this._extension];
    if (!a)
      throw new Error(this._extension + " textures are not supported on the current machine");
    if (!this._levelBuffers)
      return !1;
    for (var o = 0, u = this.levels; o < u; o++) {
      var h = this._levelBuffers[o], l = h.levelID, c = h.levelWidth, d = h.levelHeight, p = h.levelBuffer;
      s.compressedTexImage2D(s.TEXTURE_2D, l, this.format, c, d, 0, p);
    }
    return !0;
  }, t.prototype.onBlobLoaded = function() {
    this._levelBuffers = t._createLevelBuffers(
      this.buffer.uint8View,
      this.format,
      this.levels,
      4,
      4,
      this.width,
      this.height
    );
  }, t._formatToExtension = function(e) {
    if (e >= 33776 && e <= 33779)
      return "s3tc";
    if (e >= 37488 && e <= 37497)
      return "etc";
    if (e >= 35840 && e <= 35843)
      return "pvrtc";
    if (e >= 36196)
      return "etc1";
    if (e >= 35986 && e <= 34798)
      return "atc";
    throw new Error("Invalid (compressed) texture format given!");
  }, t._createLevelBuffers = function(e, i, n, s, a, o, u) {
    for (var h = new Array(n), l = e.byteOffset, c = o, d = u, p = c + s - 1 & ~(s - 1), g = d + a - 1 & ~(a - 1), v = p * g * cv[i], m = 0; m < n; m++)
      h[m] = {
        levelID: m,
        levelWidth: n > 1 ? c : p,
        levelHeight: n > 1 ? d : g,
        levelBuffer: new Uint8Array(e.buffer, l, v)
      }, l += v, c = c >> 1 || 1, d = d >> 1 || 1, p = c + s - 1 & ~(s - 1), g = d + a - 1 & ~(a - 1), v = p * g * cv[i];
    return h;
  }, t;
}(lM), cM = function() {
  function r() {
  }
  return r.use = function(t, e) {
    var i = t.data, n = this;
    if (t.type === Lt.TYPE.JSON && i && i.cacheID && i.textures) {
      for (var s = i.textures, a = void 0, o = void 0, u = 0, h = s.length; u < h; u++) {
        var l = s[u], c = l.src, d = l.format;
        if (d || (o = c), r.textureFormats[d]) {
          a = c;
          break;
        }
      }
      if (a = a || o, !a) {
        e(new Error("Cannot load compressed-textures in " + t.url + ", make sure you provide a fallback"));
        return;
      }
      if (a === t.url) {
        e(new Error("URL of compressed texture cannot be the same as the manifest's URL"));
        return;
      }
      var p = {
        crossOrigin: t.crossOrigin,
        metadata: t.metadata.imageMetadata,
        parentResource: t
      }, g = ku.resolve(t.url.replace(n.baseUrl, ""), a), v = i.cacheID;
      n.add(v, g, p, function(m) {
        if (m.error) {
          e(m.error);
          return;
        }
        var _ = m.texture, y = _ === void 0 ? null : _, b = m.textures, x = b === void 0 ? {} : b;
        Object.assign(t, { texture: y, textures: x }), e();
      });
    } else
      e();
  }, Object.defineProperty(r, "textureExtensions", {
    get: function() {
      if (!r._textureExtensions) {
        var t = gt.ADAPTER.createCanvas(), e = t.getContext("webgl");
        if (!e)
          return console.warn("WebGL not available for compressed textures. Silently failing."), {};
        var i = {
          s3tc: e.getExtension("WEBGL_compressed_texture_s3tc"),
          s3tc_sRGB: e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
          etc: e.getExtension("WEBGL_compressed_texture_etc"),
          etc1: e.getExtension("WEBGL_compressed_texture_etc1"),
          pvrtc: e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
          atc: e.getExtension("WEBGL_compressed_texture_atc"),
          astc: e.getExtension("WEBGL_compressed_texture_astc")
        };
        r._textureExtensions = i;
      }
      return r._textureExtensions;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "textureFormats", {
    get: function() {
      if (!r._textureFormats) {
        var t = r.textureExtensions;
        r._textureFormats = {};
        for (var e in t) {
          var i = t[e];
          !i || Object.assign(r._textureFormats, Object.getPrototypeOf(i));
        }
      }
      return r._textureFormats;
    },
    enumerable: !1,
    configurable: !0
  }), r.extension = me.Loader, r;
}();
function eC(r, t, e) {
  var i = {
    textures: {},
    texture: null
  };
  if (!t)
    return i;
  var n = t.map(function(s) {
    return new It(new Zt(s, Object.assign({
      mipmap: Rs.OFF,
      alphaMode: tn.NO_PREMULTIPLIED_ALPHA
    }, e)));
  });
  return n.forEach(function(s, a) {
    var o = s.baseTexture, u = r + "-" + (a + 1);
    Zt.addToCache(o, u), It.addToCache(s, u), a === 0 && (Zt.addToCache(o, r), It.addToCache(s, r), i.texture = s), i.textures[u] = s;
  }), i;
}
var Dl, ki, Em = 4, Yd = 124, fM = 32, hE = 20, dM = 542327876, qd = {
  SIZE: 1,
  FLAGS: 2,
  HEIGHT: 3,
  WIDTH: 4,
  MIPMAP_COUNT: 7,
  PIXEL_FORMAT: 19
}, pM = {
  SIZE: 0,
  FLAGS: 1,
  FOURCC: 2,
  RGB_BITCOUNT: 3,
  R_BIT_MASK: 4,
  G_BIT_MASK: 5,
  B_BIT_MASK: 6,
  A_BIT_MASK: 7
}, Zd = {
  DXGI_FORMAT: 0,
  RESOURCE_DIMENSION: 1,
  MISC_FLAG: 2,
  ARRAY_SIZE: 3,
  MISC_FLAGS2: 4
}, Li;
(function(r) {
  r[r.DXGI_FORMAT_UNKNOWN = 0] = "DXGI_FORMAT_UNKNOWN", r[r.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1] = "DXGI_FORMAT_R32G32B32A32_TYPELESS", r[r.DXGI_FORMAT_R32G32B32A32_FLOAT = 2] = "DXGI_FORMAT_R32G32B32A32_FLOAT", r[r.DXGI_FORMAT_R32G32B32A32_UINT = 3] = "DXGI_FORMAT_R32G32B32A32_UINT", r[r.DXGI_FORMAT_R32G32B32A32_SINT = 4] = "DXGI_FORMAT_R32G32B32A32_SINT", r[r.DXGI_FORMAT_R32G32B32_TYPELESS = 5] = "DXGI_FORMAT_R32G32B32_TYPELESS", r[r.DXGI_FORMAT_R32G32B32_FLOAT = 6] = "DXGI_FORMAT_R32G32B32_FLOAT", r[r.DXGI_FORMAT_R32G32B32_UINT = 7] = "DXGI_FORMAT_R32G32B32_UINT", r[r.DXGI_FORMAT_R32G32B32_SINT = 8] = "DXGI_FORMAT_R32G32B32_SINT", r[r.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9] = "DXGI_FORMAT_R16G16B16A16_TYPELESS", r[r.DXGI_FORMAT_R16G16B16A16_FLOAT = 10] = "DXGI_FORMAT_R16G16B16A16_FLOAT", r[r.DXGI_FORMAT_R16G16B16A16_UNORM = 11] = "DXGI_FORMAT_R16G16B16A16_UNORM", r[r.DXGI_FORMAT_R16G16B16A16_UINT = 12] = "DXGI_FORMAT_R16G16B16A16_UINT", r[r.DXGI_FORMAT_R16G16B16A16_SNORM = 13] = "DXGI_FORMAT_R16G16B16A16_SNORM", r[r.DXGI_FORMAT_R16G16B16A16_SINT = 14] = "DXGI_FORMAT_R16G16B16A16_SINT", r[r.DXGI_FORMAT_R32G32_TYPELESS = 15] = "DXGI_FORMAT_R32G32_TYPELESS", r[r.DXGI_FORMAT_R32G32_FLOAT = 16] = "DXGI_FORMAT_R32G32_FLOAT", r[r.DXGI_FORMAT_R32G32_UINT = 17] = "DXGI_FORMAT_R32G32_UINT", r[r.DXGI_FORMAT_R32G32_SINT = 18] = "DXGI_FORMAT_R32G32_SINT", r[r.DXGI_FORMAT_R32G8X24_TYPELESS = 19] = "DXGI_FORMAT_R32G8X24_TYPELESS", r[r.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20] = "DXGI_FORMAT_D32_FLOAT_S8X24_UINT", r[r.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21] = "DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS", r[r.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22] = "DXGI_FORMAT_X32_TYPELESS_G8X24_UINT", r[r.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23] = "DXGI_FORMAT_R10G10B10A2_TYPELESS", r[r.DXGI_FORMAT_R10G10B10A2_UNORM = 24] = "DXGI_FORMAT_R10G10B10A2_UNORM", r[r.DXGI_FORMAT_R10G10B10A2_UINT = 25] = "DXGI_FORMAT_R10G10B10A2_UINT", r[r.DXGI_FORMAT_R11G11B10_FLOAT = 26] = "DXGI_FORMAT_R11G11B10_FLOAT", r[r.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27] = "DXGI_FORMAT_R8G8B8A8_TYPELESS", r[r.DXGI_FORMAT_R8G8B8A8_UNORM = 28] = "DXGI_FORMAT_R8G8B8A8_UNORM", r[r.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29] = "DXGI_FORMAT_R8G8B8A8_UNORM_SRGB", r[r.DXGI_FORMAT_R8G8B8A8_UINT = 30] = "DXGI_FORMAT_R8G8B8A8_UINT", r[r.DXGI_FORMAT_R8G8B8A8_SNORM = 31] = "DXGI_FORMAT_R8G8B8A8_SNORM", r[r.DXGI_FORMAT_R8G8B8A8_SINT = 32] = "DXGI_FORMAT_R8G8B8A8_SINT", r[r.DXGI_FORMAT_R16G16_TYPELESS = 33] = "DXGI_FORMAT_R16G16_TYPELESS", r[r.DXGI_FORMAT_R16G16_FLOAT = 34] = "DXGI_FORMAT_R16G16_FLOAT", r[r.DXGI_FORMAT_R16G16_UNORM = 35] = "DXGI_FORMAT_R16G16_UNORM", r[r.DXGI_FORMAT_R16G16_UINT = 36] = "DXGI_FORMAT_R16G16_UINT", r[r.DXGI_FORMAT_R16G16_SNORM = 37] = "DXGI_FORMAT_R16G16_SNORM", r[r.DXGI_FORMAT_R16G16_SINT = 38] = "DXGI_FORMAT_R16G16_SINT", r[r.DXGI_FORMAT_R32_TYPELESS = 39] = "DXGI_FORMAT_R32_TYPELESS", r[r.DXGI_FORMAT_D32_FLOAT = 40] = "DXGI_FORMAT_D32_FLOAT", r[r.DXGI_FORMAT_R32_FLOAT = 41] = "DXGI_FORMAT_R32_FLOAT", r[r.DXGI_FORMAT_R32_UINT = 42] = "DXGI_FORMAT_R32_UINT", r[r.DXGI_FORMAT_R32_SINT = 43] = "DXGI_FORMAT_R32_SINT", r[r.DXGI_FORMAT_R24G8_TYPELESS = 44] = "DXGI_FORMAT_R24G8_TYPELESS", r[r.DXGI_FORMAT_D24_UNORM_S8_UINT = 45] = "DXGI_FORMAT_D24_UNORM_S8_UINT", r[r.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46] = "DXGI_FORMAT_R24_UNORM_X8_TYPELESS", r[r.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47] = "DXGI_FORMAT_X24_TYPELESS_G8_UINT", r[r.DXGI_FORMAT_R8G8_TYPELESS = 48] = "DXGI_FORMAT_R8G8_TYPELESS", r[r.DXGI_FORMAT_R8G8_UNORM = 49] = "DXGI_FORMAT_R8G8_UNORM", r[r.DXGI_FORMAT_R8G8_UINT = 50] = "DXGI_FORMAT_R8G8_UINT", r[r.DXGI_FORMAT_R8G8_SNORM = 51] = "DXGI_FORMAT_R8G8_SNORM", r[r.DXGI_FORMAT_R8G8_SINT = 52] = "DXGI_FORMAT_R8G8_SINT", r[r.DXGI_FORMAT_R16_TYPELESS = 53] = "DXGI_FORMAT_R16_TYPELESS", r[r.DXGI_FORMAT_R16_FLOAT = 54] = "DXGI_FORMAT_R16_FLOAT", r[r.DXGI_FORMAT_D16_UNORM = 55] = "DXGI_FORMAT_D16_UNORM", r[r.DXGI_FORMAT_R16_UNORM = 56] = "DXGI_FORMAT_R16_UNORM", r[r.DXGI_FORMAT_R16_UINT = 57] = "DXGI_FORMAT_R16_UINT", r[r.DXGI_FORMAT_R16_SNORM = 58] = "DXGI_FORMAT_R16_SNORM", r[r.DXGI_FORMAT_R16_SINT = 59] = "DXGI_FORMAT_R16_SINT", r[r.DXGI_FORMAT_R8_TYPELESS = 60] = "DXGI_FORMAT_R8_TYPELESS", r[r.DXGI_FORMAT_R8_UNORM = 61] = "DXGI_FORMAT_R8_UNORM", r[r.DXGI_FORMAT_R8_UINT = 62] = "DXGI_FORMAT_R8_UINT", r[r.DXGI_FORMAT_R8_SNORM = 63] = "DXGI_FORMAT_R8_SNORM", r[r.DXGI_FORMAT_R8_SINT = 64] = "DXGI_FORMAT_R8_SINT", r[r.DXGI_FORMAT_A8_UNORM = 65] = "DXGI_FORMAT_A8_UNORM", r[r.DXGI_FORMAT_R1_UNORM = 66] = "DXGI_FORMAT_R1_UNORM", r[r.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67] = "DXGI_FORMAT_R9G9B9E5_SHAREDEXP", r[r.DXGI_FORMAT_R8G8_B8G8_UNORM = 68] = "DXGI_FORMAT_R8G8_B8G8_UNORM", r[r.DXGI_FORMAT_G8R8_G8B8_UNORM = 69] = "DXGI_FORMAT_G8R8_G8B8_UNORM", r[r.DXGI_FORMAT_BC1_TYPELESS = 70] = "DXGI_FORMAT_BC1_TYPELESS", r[r.DXGI_FORMAT_BC1_UNORM = 71] = "DXGI_FORMAT_BC1_UNORM", r[r.DXGI_FORMAT_BC1_UNORM_SRGB = 72] = "DXGI_FORMAT_BC1_UNORM_SRGB", r[r.DXGI_FORMAT_BC2_TYPELESS = 73] = "DXGI_FORMAT_BC2_TYPELESS", r[r.DXGI_FORMAT_BC2_UNORM = 74] = "DXGI_FORMAT_BC2_UNORM", r[r.DXGI_FORMAT_BC2_UNORM_SRGB = 75] = "DXGI_FORMAT_BC2_UNORM_SRGB", r[r.DXGI_FORMAT_BC3_TYPELESS = 76] = "DXGI_FORMAT_BC3_TYPELESS", r[r.DXGI_FORMAT_BC3_UNORM = 77] = "DXGI_FORMAT_BC3_UNORM", r[r.DXGI_FORMAT_BC3_UNORM_SRGB = 78] = "DXGI_FORMAT_BC3_UNORM_SRGB", r[r.DXGI_FORMAT_BC4_TYPELESS = 79] = "DXGI_FORMAT_BC4_TYPELESS", r[r.DXGI_FORMAT_BC4_UNORM = 80] = "DXGI_FORMAT_BC4_UNORM", r[r.DXGI_FORMAT_BC4_SNORM = 81] = "DXGI_FORMAT_BC4_SNORM", r[r.DXGI_FORMAT_BC5_TYPELESS = 82] = "DXGI_FORMAT_BC5_TYPELESS", r[r.DXGI_FORMAT_BC5_UNORM = 83] = "DXGI_FORMAT_BC5_UNORM", r[r.DXGI_FORMAT_BC5_SNORM = 84] = "DXGI_FORMAT_BC5_SNORM", r[r.DXGI_FORMAT_B5G6R5_UNORM = 85] = "DXGI_FORMAT_B5G6R5_UNORM", r[r.DXGI_FORMAT_B5G5R5A1_UNORM = 86] = "DXGI_FORMAT_B5G5R5A1_UNORM", r[r.DXGI_FORMAT_B8G8R8A8_UNORM = 87] = "DXGI_FORMAT_B8G8R8A8_UNORM", r[r.DXGI_FORMAT_B8G8R8X8_UNORM = 88] = "DXGI_FORMAT_B8G8R8X8_UNORM", r[r.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89] = "DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM", r[r.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90] = "DXGI_FORMAT_B8G8R8A8_TYPELESS", r[r.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91] = "DXGI_FORMAT_B8G8R8A8_UNORM_SRGB", r[r.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92] = "DXGI_FORMAT_B8G8R8X8_TYPELESS", r[r.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93] = "DXGI_FORMAT_B8G8R8X8_UNORM_SRGB", r[r.DXGI_FORMAT_BC6H_TYPELESS = 94] = "DXGI_FORMAT_BC6H_TYPELESS", r[r.DXGI_FORMAT_BC6H_UF16 = 95] = "DXGI_FORMAT_BC6H_UF16", r[r.DXGI_FORMAT_BC6H_SF16 = 96] = "DXGI_FORMAT_BC6H_SF16", r[r.DXGI_FORMAT_BC7_TYPELESS = 97] = "DXGI_FORMAT_BC7_TYPELESS", r[r.DXGI_FORMAT_BC7_UNORM = 98] = "DXGI_FORMAT_BC7_UNORM", r[r.DXGI_FORMAT_BC7_UNORM_SRGB = 99] = "DXGI_FORMAT_BC7_UNORM_SRGB", r[r.DXGI_FORMAT_AYUV = 100] = "DXGI_FORMAT_AYUV", r[r.DXGI_FORMAT_Y410 = 101] = "DXGI_FORMAT_Y410", r[r.DXGI_FORMAT_Y416 = 102] = "DXGI_FORMAT_Y416", r[r.DXGI_FORMAT_NV12 = 103] = "DXGI_FORMAT_NV12", r[r.DXGI_FORMAT_P010 = 104] = "DXGI_FORMAT_P010", r[r.DXGI_FORMAT_P016 = 105] = "DXGI_FORMAT_P016", r[r.DXGI_FORMAT_420_OPAQUE = 106] = "DXGI_FORMAT_420_OPAQUE", r[r.DXGI_FORMAT_YUY2 = 107] = "DXGI_FORMAT_YUY2", r[r.DXGI_FORMAT_Y210 = 108] = "DXGI_FORMAT_Y210", r[r.DXGI_FORMAT_Y216 = 109] = "DXGI_FORMAT_Y216", r[r.DXGI_FORMAT_NV11 = 110] = "DXGI_FORMAT_NV11", r[r.DXGI_FORMAT_AI44 = 111] = "DXGI_FORMAT_AI44", r[r.DXGI_FORMAT_IA44 = 112] = "DXGI_FORMAT_IA44", r[r.DXGI_FORMAT_P8 = 113] = "DXGI_FORMAT_P8", r[r.DXGI_FORMAT_A8P8 = 114] = "DXGI_FORMAT_A8P8", r[r.DXGI_FORMAT_B4G4R4A4_UNORM = 115] = "DXGI_FORMAT_B4G4R4A4_UNORM", r[r.DXGI_FORMAT_P208 = 116] = "DXGI_FORMAT_P208", r[r.DXGI_FORMAT_V208 = 117] = "DXGI_FORMAT_V208", r[r.DXGI_FORMAT_V408 = 118] = "DXGI_FORMAT_V408", r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE", r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE", r[r.DXGI_FORMAT_FORCE_UINT = 121] = "DXGI_FORMAT_FORCE_UINT";
})(Li || (Li = {}));
var x_;
(function(r) {
  r[r.DDS_DIMENSION_TEXTURE1D = 2] = "DDS_DIMENSION_TEXTURE1D", r[r.DDS_DIMENSION_TEXTURE2D = 3] = "DDS_DIMENSION_TEXTURE2D", r[r.DDS_DIMENSION_TEXTURE3D = 6] = "DDS_DIMENSION_TEXTURE3D";
})(x_ || (x_ = {}));
var vM = 1, gM = 2, mM = 4, _M = 64, yM = 512, bM = 131072, xM = 827611204, EM = 861165636, wM = 894720068, TM = 808540228, CM = 4, IM = (Dl = {}, Dl[xM] = zt.COMPRESSED_RGBA_S3TC_DXT1_EXT, Dl[EM] = zt.COMPRESSED_RGBA_S3TC_DXT3_EXT, Dl[wM] = zt.COMPRESSED_RGBA_S3TC_DXT5_EXT, Dl), RM = (ki = {}, ki[Li.DXGI_FORMAT_BC1_TYPELESS] = zt.COMPRESSED_RGBA_S3TC_DXT1_EXT, ki[Li.DXGI_FORMAT_BC1_UNORM] = zt.COMPRESSED_RGBA_S3TC_DXT1_EXT, ki[Li.DXGI_FORMAT_BC2_TYPELESS] = zt.COMPRESSED_RGBA_S3TC_DXT3_EXT, ki[Li.DXGI_FORMAT_BC2_UNORM] = zt.COMPRESSED_RGBA_S3TC_DXT3_EXT, ki[Li.DXGI_FORMAT_BC3_TYPELESS] = zt.COMPRESSED_RGBA_S3TC_DXT5_EXT, ki[Li.DXGI_FORMAT_BC3_UNORM] = zt.COMPRESSED_RGBA_S3TC_DXT5_EXT, ki[Li.DXGI_FORMAT_BC1_UNORM_SRGB] = zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT, ki[Li.DXGI_FORMAT_BC2_UNORM_SRGB] = zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT, ki[Li.DXGI_FORMAT_BC3_UNORM_SRGB] = zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT, ki);
function SM(r) {
  var t = new Uint32Array(r), e = t[0];
  if (e !== dM)
    throw new Error("Invalid DDS file magic word");
  var i = new Uint32Array(r, 0, Yd / Uint32Array.BYTES_PER_ELEMENT), n = i[qd.HEIGHT], s = i[qd.WIDTH], a = i[qd.MIPMAP_COUNT], o = new Uint32Array(r, qd.PIXEL_FORMAT * Uint32Array.BYTES_PER_ELEMENT, fM / Uint32Array.BYTES_PER_ELEMENT), u = o[vM];
  if (u & mM) {
    var h = o[pM.FOURCC];
    if (h !== TM) {
      var l = IM[h], c = Em + Yd, d = new Uint8Array(r, c), p = new b_(d, {
        format: l,
        width: s,
        height: n,
        levels: a
      });
      return [p];
    }
    var g = Em + Yd, v = new Uint32Array(t.buffer, g, hE / Uint32Array.BYTES_PER_ELEMENT), m = v[Zd.DXGI_FORMAT], _ = v[Zd.RESOURCE_DIMENSION], y = v[Zd.MISC_FLAG], b = v[Zd.ARRAY_SIZE], x = RM[m];
    if (x === void 0)
      throw new Error("DDSParser cannot parse texture data with DXGI format " + m);
    if (y === CM)
      throw new Error("DDSParser does not support cubemap textures");
    if (_ === x_.DDS_DIMENSION_TEXTURE3D)
      throw new Error("DDSParser does not supported 3D texture data");
    var w = new Array(), E = Em + Yd + hE;
    if (b === 1)
      w.push(new Uint8Array(r, E));
    else {
      for (var R = cv[x], C = 0, P = s, N = n, M = 0; M < a; M++) {
        var A = Math.max(1, P + 3 & -4), k = Math.max(1, N + 3 & -4), H = A * k * R;
        C += H, P = P >>> 1, N = N >>> 1;
      }
      for (var L = E, M = 0; M < b; M++)
        w.push(new Uint8Array(r, L, C)), L += C;
    }
    return w.map(function(U) {
      return new b_(U, {
        format: x,
        width: s,
        height: n,
        levels: a
      });
    });
  }
  throw u & _M ? new Error("DDSParser does not support uncompressed texture data.") : u & yM ? new Error("DDSParser does not supported YUV uncompressed texture data.") : u & bM ? new Error("DDSParser does not support single-channel (lumninance) texture data!") : u & gM ? new Error("DDSParser does not support single-channel (alpha) texture data!") : new Error("DDSParser failed to load a texture file due to an unknown reason!");
}
var As, Hn, Ul, lE = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10], PM = 67305985, Bi = {
  FILE_IDENTIFIER: 0,
  ENDIANNESS: 12,
  GL_TYPE: 16,
  GL_TYPE_SIZE: 20,
  GL_FORMAT: 24,
  GL_INTERNAL_FORMAT: 28,
  GL_BASE_INTERNAL_FORMAT: 32,
  PIXEL_WIDTH: 36,
  PIXEL_HEIGHT: 40,
  PIXEL_DEPTH: 44,
  NUMBER_OF_ARRAY_ELEMENTS: 48,
  NUMBER_OF_FACES: 52,
  NUMBER_OF_MIPMAP_LEVELS: 56,
  BYTES_OF_KEY_VALUE_DATA: 60
}, E_ = 64, cE = (As = {}, As[Tt.UNSIGNED_BYTE] = 1, As[Tt.UNSIGNED_SHORT] = 2, As[Tt.INT] = 4, As[Tt.UNSIGNED_INT] = 4, As[Tt.FLOAT] = 4, As[Tt.HALF_FLOAT] = 8, As), NM = (Hn = {}, Hn[lt.RGBA] = 4, Hn[lt.RGB] = 3, Hn[lt.RG] = 2, Hn[lt.RED] = 1, Hn[lt.LUMINANCE] = 1, Hn[lt.LUMINANCE_ALPHA] = 2, Hn[lt.ALPHA] = 1, Hn), OM = (Ul = {}, Ul[Tt.UNSIGNED_SHORT_4_4_4_4] = 2, Ul[Tt.UNSIGNED_SHORT_5_5_5_1] = 2, Ul[Tt.UNSIGNED_SHORT_5_6_5] = 2, Ul);
function AM(r, t, e) {
  e === void 0 && (e = !1);
  var i = new DataView(t);
  if (!FM(r, i))
    return null;
  var n = i.getUint32(Bi.ENDIANNESS, !0) === PM, s = i.getUint32(Bi.GL_TYPE, n), a = i.getUint32(Bi.GL_FORMAT, n), o = i.getUint32(Bi.GL_INTERNAL_FORMAT, n), u = i.getUint32(Bi.PIXEL_WIDTH, n), h = i.getUint32(Bi.PIXEL_HEIGHT, n) || 1, l = i.getUint32(Bi.PIXEL_DEPTH, n) || 1, c = i.getUint32(Bi.NUMBER_OF_ARRAY_ELEMENTS, n) || 1, d = i.getUint32(Bi.NUMBER_OF_FACES, n), p = i.getUint32(Bi.NUMBER_OF_MIPMAP_LEVELS, n), g = i.getUint32(Bi.BYTES_OF_KEY_VALUE_DATA, n);
  if (h === 0 || l !== 1)
    throw new Error("Only 2D textures are supported");
  if (d !== 1)
    throw new Error("CubeTextures are not supported by KTXLoader yet!");
  if (c !== 1)
    throw new Error("WebGL does not support array textures");
  var v = 4, m = 4, _ = u + 3 & -4, y = h + 3 & -4, b = new Array(c), x = u * h;
  s === 0 && (x = _ * y);
  var w;
  if (s !== 0 ? cE[s] ? w = cE[s] * NM[a] : w = OM[s] : w = cv[o], w === void 0)
    throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");
  for (var E = e ? kM(i, g, n) : null, R = x * w, C = R, P = u, N = h, M = _, A = y, k = E_ + g, H = 0; H < p; H++) {
    for (var L = i.getUint32(k, n), U = k + 4, V = 0; V < c; V++) {
      var K = b[V];
      K || (K = b[V] = new Array(p)), K[H] = {
        levelID: H,
        levelWidth: p > 1 || s !== 0 ? P : M,
        levelHeight: p > 1 || s !== 0 ? N : A,
        levelBuffer: new Uint8Array(t, U, C)
      }, U += C;
    }
    k += L + 4, k = k % 4 !== 0 ? k + 4 - k % 4 : k, P = P >> 1 || 1, N = N >> 1 || 1, M = P + v - 1 & ~(v - 1), A = N + m - 1 & ~(m - 1), C = M * A * w;
  }
  return s !== 0 ? {
    uncompressed: b.map(function(G) {
      var B = G[0].levelBuffer, W = !1;
      return s === Tt.FLOAT ? B = new Float32Array(G[0].levelBuffer.buffer, G[0].levelBuffer.byteOffset, G[0].levelBuffer.byteLength / 4) : s === Tt.UNSIGNED_INT ? (W = !0, B = new Uint32Array(G[0].levelBuffer.buffer, G[0].levelBuffer.byteOffset, G[0].levelBuffer.byteLength / 4)) : s === Tt.INT && (W = !0, B = new Int32Array(G[0].levelBuffer.buffer, G[0].levelBuffer.byteOffset, G[0].levelBuffer.byteLength / 4)), {
        resource: new pd(B, {
          width: G[0].levelWidth,
          height: G[0].levelHeight
        }),
        type: s,
        format: W ? MM(a) : a
      };
    }),
    kvData: E
  } : {
    compressed: b.map(function(G) {
      return new b_(null, {
        format: o,
        width: u,
        height: h,
        levels: p,
        levelBuffers: G
      });
    }),
    kvData: E
  };
}
function FM(r, t) {
  for (var e = 0; e < lE.length; e++)
    if (t.getUint8(e) !== lE[e])
      return console.error(r + " is not a valid *.ktx file!"), !1;
  return !0;
}
function MM(r) {
  switch (r) {
    case lt.RGBA:
      return lt.RGBA_INTEGER;
    case lt.RGB:
      return lt.RGB_INTEGER;
    case lt.RG:
      return lt.RG_INTEGER;
    case lt.RED:
      return lt.RED_INTEGER;
    default:
      return r;
  }
}
function kM(r, t, e) {
  for (var i = /* @__PURE__ */ new Map(), n = 0; n < t; ) {
    var s = r.getUint32(E_ + n, e), a = E_ + n + 4, o = 3 - (s + 3) % 4;
    if (s === 0 || s > t - n) {
      console.error("KTXLoader: keyAndValueByteSize out of bounds");
      break;
    }
    for (var u = 0; u < s && r.getUint8(a + u) !== 0; u++)
      ;
    if (u === -1) {
      console.error("KTXLoader: Failed to find null byte terminating kvData key");
      break;
    }
    var h = new TextDecoder().decode(new Uint8Array(r.buffer, a, u)), l = new DataView(r.buffer, a + u + 1, s - u - 1);
    i.set(h, l), n += 4 + s + o;
  }
  return i;
}
Lt.setExtensionXhrType("dds", Lt.XHR_RESPONSE_TYPE.BUFFER);
var BM = function() {
  function r() {
  }
  return r.use = function(t, e) {
    if (t.extension === "dds" && t.data)
      try {
        Object.assign(t, eC(t.name || t.url, SM(t.data), t.metadata));
      } catch (i) {
        e(i);
        return;
      }
    e();
  }, r.extension = me.Loader, r;
}();
Lt.setExtensionXhrType("ktx", Lt.XHR_RESPONSE_TYPE.BUFFER);
var LM = function() {
  function r() {
  }
  return r.use = function(t, e) {
    if (t.extension === "ktx" && t.data)
      try {
        var i = t.name || t.url, n = AM(i, t.data, this.loadKeyValueData), s = n.compressed, a = n.uncompressed, o = n.kvData;
        if (s) {
          var u = eC(i, s, t.metadata);
          if (o && u.textures)
            for (var h in u.textures)
              u.textures[h].baseTexture.ktxKeyValueData = o;
          Object.assign(t, u);
        } else if (a) {
          var l = {};
          a.forEach(function(c, d) {
            var p = new It(new Zt(c.resource, {
              mipmap: Rs.OFF,
              alphaMode: tn.NO_PREMULTIPLIED_ALPHA,
              type: c.type,
              format: c.format
            })), g = i + "-" + (d + 1);
            o && (p.baseTexture.ktxKeyValueData = o), Zt.addToCache(p.baseTexture, g), It.addToCache(p, g), d === 0 && (l[i] = p, Zt.addToCache(p.baseTexture, i), It.addToCache(p, i)), l[g] = p;
          }), Object.assign(t, { textures: l });
        }
      } catch (c) {
        e(c);
        return;
      }
    e();
  }, r.extension = me.Loader, r.loadKeyValueData = !1, r;
}();
/*!
 * @pixi/particle-container - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var w_ = function(r, t) {
  return w_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, w_(r, t);
};
function rC(r, t) {
  w_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
(function(r) {
  rC(t, r);
  function t(e, i, n, s) {
    e === void 0 && (e = 1500), n === void 0 && (n = 16384), s === void 0 && (s = !1);
    var a = r.call(this) || this, o = 16384;
    return n > o && (n = o), a._properties = [!1, !0, !1, !1, !1], a._maxSize = e, a._batchSize = n, a._buffers = null, a._bufferUpdateIDs = [], a._updateID = 0, a.interactiveChildren = !1, a.blendMode = bt.NORMAL, a.autoResize = s, a.roundPixels = !0, a.baseTexture = null, a.setProperties(i), a._tint = 0, a.tintRgb = new Float32Array(4), a.tint = 16777215, a;
  }
  return t.prototype.setProperties = function(e) {
    e && (this._properties[0] = "vertices" in e || "scale" in e ? !!e.vertices || !!e.scale : this._properties[0], this._properties[1] = "position" in e ? !!e.position : this._properties[1], this._properties[2] = "rotation" in e ? !!e.rotation : this._properties[2], this._properties[3] = "uvs" in e ? !!e.uvs : this._properties[3], this._properties[4] = "tint" in e || "alpha" in e ? !!e.tint || !!e.alpha : this._properties[4]);
  }, t.prototype.updateTransform = function() {
    this.displayObjectUpdateTransform();
  }, Object.defineProperty(t.prototype, "tint", {
    get: function() {
      return this._tint;
    },
    set: function(e) {
      this._tint = e, vl(e, this.tintRgb);
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.render = function(e) {
    var i = this;
    !this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable || (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.valid || this.baseTexture.once("update", function() {
      return i.onChildrenChange(0);
    })), e.batch.setObjectRenderer(e.plugins.particle), e.plugins.particle.render(this));
  }, t.prototype.onChildrenChange = function(e) {
    for (var i = Math.floor(e / this._batchSize); this._bufferUpdateIDs.length < i; )
      this._bufferUpdateIDs.push(0);
    this._bufferUpdateIDs[i] = ++this._updateID;
  }, t.prototype.dispose = function() {
    if (this._buffers) {
      for (var e = 0; e < this._buffers.length; ++e)
        this._buffers[e].destroy();
      this._buffers = null;
    }
  }, t.prototype.destroy = function(e) {
    r.prototype.destroy.call(this, e), this.dispose(), this._properties = null, this._buffers = null, this._bufferUpdateIDs = null;
  }, t;
})(ge);
var fE = function() {
  function r(t, e, i) {
    this.geometry = new vd(), this.indexBuffer = null, this.size = i, this.dynamicProperties = [], this.staticProperties = [];
    for (var n = 0; n < t.length; ++n) {
      var s = t[n];
      s = {
        attributeName: s.attributeName,
        size: s.size,
        uploadFunction: s.uploadFunction,
        type: s.type || Tt.FLOAT,
        offset: s.offset
      }, e[n] ? this.dynamicProperties.push(s) : this.staticProperties.push(s);
    }
    this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers();
  }
  return r.prototype.initBuffers = function() {
    var t = this.geometry, e = 0;
    this.indexBuffer = new or(qO(this.size), !0, !0), t.addIndex(this.indexBuffer), this.dynamicStride = 0;
    for (var i = 0; i < this.dynamicProperties.length; ++i) {
      var n = this.dynamicProperties[i];
      n.offset = e, e += n.size, this.dynamicStride += n.size;
    }
    var s = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
    this.dynamicData = new Float32Array(s), this.dynamicDataUint32 = new Uint32Array(s), this.dynamicBuffer = new or(this.dynamicData, !1, !1);
    var a = 0;
    this.staticStride = 0;
    for (var i = 0; i < this.staticProperties.length; ++i) {
      var n = this.staticProperties[i];
      n.offset = a, a += n.size, this.staticStride += n.size;
    }
    var o = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
    this.staticData = new Float32Array(o), this.staticDataUint32 = new Uint32Array(o), this.staticBuffer = new or(this.staticData, !0, !1);
    for (var i = 0; i < this.dynamicProperties.length; ++i) {
      var n = this.dynamicProperties[i];
      t.addAttribute(n.attributeName, this.dynamicBuffer, 0, n.type === Tt.UNSIGNED_BYTE, n.type, this.dynamicStride * 4, n.offset * 4);
    }
    for (var i = 0; i < this.staticProperties.length; ++i) {
      var n = this.staticProperties[i];
      t.addAttribute(n.attributeName, this.staticBuffer, 0, n.type === Tt.UNSIGNED_BYTE, n.type, this.staticStride * 4, n.offset * 4);
    }
  }, r.prototype.uploadDynamic = function(t, e, i) {
    for (var n = 0; n < this.dynamicProperties.length; n++) {
      var s = this.dynamicProperties[n];
      s.uploadFunction(t, e, i, s.type === Tt.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, s.offset);
    }
    this.dynamicBuffer._updateID++;
  }, r.prototype.uploadStatic = function(t, e, i) {
    for (var n = 0; n < this.staticProperties.length; n++) {
      var s = this.staticProperties[n];
      s.uploadFunction(t, e, i, s.type === Tt.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, s.offset);
    }
    this.staticBuffer._updateID++;
  }, r.prototype.destroy = function() {
    this.indexBuffer = null, this.dynamicProperties = null, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.geometry.destroy();
  }, r;
}(), DM = `varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`, UM = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`, GM = function(r) {
  rC(t, r);
  function t(e) {
    var i = r.call(this, e) || this;
    return i.shader = null, i.properties = null, i.tempMatrix = new lr(), i.properties = [
      {
        attributeName: "aVertexPosition",
        size: 2,
        uploadFunction: i.uploadVertices,
        offset: 0
      },
      {
        attributeName: "aPositionCoord",
        size: 2,
        uploadFunction: i.uploadPosition,
        offset: 0
      },
      {
        attributeName: "aRotation",
        size: 1,
        uploadFunction: i.uploadRotation,
        offset: 0
      },
      {
        attributeName: "aTextureCoord",
        size: 2,
        uploadFunction: i.uploadUvs,
        offset: 0
      },
      {
        attributeName: "aColor",
        size: 1,
        type: Tt.UNSIGNED_BYTE,
        uploadFunction: i.uploadTint,
        offset: 0
      }
    ], i.shader = Ra.from(UM, DM, {}), i.state = uu.for2d(), i;
  }
  return t.prototype.render = function(e) {
    var i = e.children, n = e._maxSize, s = e._batchSize, a = this.renderer, o = i.length;
    if (o !== 0) {
      o > n && !e.autoResize && (o = n);
      var u = e._buffers;
      u || (u = e._buffers = this.generateBuffers(e));
      var h = i[0]._texture.baseTexture, l = h.alphaMode > 0;
      this.state.blendMode = NT(e.blendMode, l), a.state.set(this.state);
      var c = a.gl, d = e.worldTransform.copyTo(this.tempMatrix);
      d.prepend(a.globalUniforms.uniforms.projectionMatrix), this.shader.uniforms.translationMatrix = d.toArray(!0), this.shader.uniforms.uColor = YO(e.tintRgb, e.worldAlpha, this.shader.uniforms.uColor, l), this.shader.uniforms.uSampler = h, this.renderer.shader.bind(this.shader);
      for (var p = !1, g = 0, v = 0; g < o; g += s, v += 1) {
        var m = o - g;
        m > s && (m = s), v >= u.length && u.push(this._generateOneMoreBuffer(e));
        var _ = u[v];
        _.uploadDynamic(i, g, m);
        var y = e._bufferUpdateIDs[v] || 0;
        p = p || _._updateID < y, p && (_._updateID = e._updateID, _.uploadStatic(i, g, m)), a.geometry.bind(_.geometry), c.drawElements(c.TRIANGLES, m * 6, c.UNSIGNED_SHORT, 0);
      }
    }
  }, t.prototype.generateBuffers = function(e) {
    for (var i = [], n = e._maxSize, s = e._batchSize, a = e._properties, o = 0; o < n; o += s)
      i.push(new fE(this.properties, a, s));
    return i;
  }, t.prototype._generateOneMoreBuffer = function(e) {
    var i = e._batchSize, n = e._properties;
    return new fE(this.properties, n, i);
  }, t.prototype.uploadVertices = function(e, i, n, s, a, o) {
    for (var u = 0, h = 0, l = 0, c = 0, d = 0; d < n; ++d) {
      var p = e[i + d], g = p._texture, v = p.scale.x, m = p.scale.y, _ = g.trim, y = g.orig;
      _ ? (h = _.x - p.anchor.x * y.width, u = h + _.width, c = _.y - p.anchor.y * y.height, l = c + _.height) : (u = y.width * (1 - p.anchor.x), h = y.width * -p.anchor.x, l = y.height * (1 - p.anchor.y), c = y.height * -p.anchor.y), s[o] = h * v, s[o + 1] = c * m, s[o + a] = u * v, s[o + a + 1] = c * m, s[o + a * 2] = u * v, s[o + a * 2 + 1] = l * m, s[o + a * 3] = h * v, s[o + a * 3 + 1] = l * m, o += a * 4;
    }
  }, t.prototype.uploadPosition = function(e, i, n, s, a, o) {
    for (var u = 0; u < n; u++) {
      var h = e[i + u].position;
      s[o] = h.x, s[o + 1] = h.y, s[o + a] = h.x, s[o + a + 1] = h.y, s[o + a * 2] = h.x, s[o + a * 2 + 1] = h.y, s[o + a * 3] = h.x, s[o + a * 3 + 1] = h.y, o += a * 4;
    }
  }, t.prototype.uploadRotation = function(e, i, n, s, a, o) {
    for (var u = 0; u < n; u++) {
      var h = e[i + u].rotation;
      s[o] = h, s[o + a] = h, s[o + a * 2] = h, s[o + a * 3] = h, o += a * 4;
    }
  }, t.prototype.uploadUvs = function(e, i, n, s, a, o) {
    for (var u = 0; u < n; ++u) {
      var h = e[i + u]._texture._uvs;
      h ? (s[o] = h.x0, s[o + 1] = h.y0, s[o + a] = h.x1, s[o + a + 1] = h.y1, s[o + a * 2] = h.x2, s[o + a * 2 + 1] = h.y2, s[o + a * 3] = h.x3, s[o + a * 3 + 1] = h.y3, o += a * 4) : (s[o] = 0, s[o + 1] = 0, s[o + a] = 0, s[o + a + 1] = 0, s[o + a * 2] = 0, s[o + a * 2 + 1] = 0, s[o + a * 3] = 0, s[o + a * 3 + 1] = 0, o += a * 4);
    }
  }, t.prototype.uploadTint = function(e, i, n, s, a, o) {
    for (var u = 0; u < n; ++u) {
      var h = e[i + u], l = h._texture.baseTexture.alphaMode > 0, c = h.alpha, d = c < 1 && l ? Ib(h._tintRGB, c) : h._tintRGB + (c * 255 << 24);
      s[o] = d, s[o + a] = d, s[o + a * 2] = d, s[o + a * 3] = d, o += a * 4;
    }
  }, t.prototype.destroy = function() {
    r.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.tempMatrix = null;
  }, t.extension = {
    name: "particle",
    type: me.RendererPlugin
  }, t;
}(Og);
/*!
 * @pixi/graphics - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ba;
(function(r) {
  r.MITER = "miter", r.BEVEL = "bevel", r.ROUND = "round";
})(ba || (ba = {}));
var xa;
(function(r) {
  r.BUTT = "butt", r.ROUND = "round", r.SQUARE = "square";
})(xa || (xa = {}));
var Hc = {
  adaptive: !0,
  maxLength: 10,
  minSegments: 8,
  maxSegments: 2048,
  epsilon: 1e-4,
  _segmentsCount: function(r, t) {
    if (t === void 0 && (t = 20), !this.adaptive || !r || isNaN(r))
      return t;
    var e = Math.ceil(r / this.maxLength);
    return e < this.minSegments ? e = this.minSegments : e > this.maxSegments && (e = this.maxSegments), e;
  }
}, iC = function() {
  function r() {
    this.color = 16777215, this.alpha = 1, this.texture = It.WHITE, this.matrix = null, this.visible = !1, this.reset();
  }
  return r.prototype.clone = function() {
    var t = new r();
    return t.color = this.color, t.alpha = this.alpha, t.texture = this.texture, t.matrix = this.matrix, t.visible = this.visible, t;
  }, r.prototype.reset = function() {
    this.color = 16777215, this.alpha = 1, this.texture = It.WHITE, this.matrix = null, this.visible = !1;
  }, r.prototype.destroy = function() {
    this.texture = null, this.matrix = null;
  }, r;
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var T_ = function(r, t) {
  return T_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, T_(r, t);
};
function Pb(r, t) {
  T_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
function dE(r, t) {
  var e, i;
  t === void 0 && (t = !1);
  var n = r.length;
  if (!(n < 6)) {
    for (var s = 0, a = 0, o = r[n - 2], u = r[n - 1]; a < n; a += 2) {
      var h = r[a], l = r[a + 1];
      s += (h - o) * (l + u), o = h, u = l;
    }
    if (!t && s > 0 || t && s <= 0)
      for (var c = n / 2, a = c + c % 2; a < n; a += 2) {
        var d = n - a - 2, p = n - a - 1, g = a, v = a + 1;
        e = [r[g], r[d]], r[d] = e[0], r[g] = e[1], i = [r[v], r[p]], r[p] = i[0], r[v] = i[1];
      }
  }
}
var nC = {
  build: function(r) {
    r.points = r.shape.points.slice();
  },
  triangulate: function(r, t) {
    var e = r.points, i = r.holes, n = t.points, s = t.indices;
    if (e.length >= 6) {
      dE(e, !1);
      for (var a = [], o = 0; o < i.length; o++) {
        var u = i[o];
        dE(u.points, !0), a.push(e.length / 2), e = e.concat(u.points);
      }
      var h = Sg.exports(e, a, 2);
      if (!h)
        return;
      for (var l = n.length / 2, o = 0; o < h.length; o += 3)
        s.push(h[o] + l), s.push(h[o + 1] + l), s.push(h[o + 2] + l);
      for (var o = 0; o < e.length; o++)
        n.push(e[o]);
    }
  }
}, fv = {
  build: function(r) {
    var t = r.points, e, i, n, s, a, o;
    if (r.type === gr.CIRC) {
      var u = r.shape;
      e = u.x, i = u.y, a = o = u.radius, n = s = 0;
    } else if (r.type === gr.ELIP) {
      var h = r.shape;
      e = h.x, i = h.y, a = h.width, o = h.height, n = s = 0;
    } else {
      var l = r.shape, c = l.width / 2, d = l.height / 2;
      e = l.x + c, i = l.y + d, a = o = Math.max(0, Math.min(l.radius, Math.min(c, d))), n = c - a, s = d - o;
    }
    if (!(a >= 0 && o >= 0 && n >= 0 && s >= 0)) {
      t.length = 0;
      return;
    }
    var p = Math.ceil(2.3 * Math.sqrt(a + o)), g = p * 8 + (n ? 4 : 0) + (s ? 4 : 0);
    if (t.length = g, g !== 0) {
      if (p === 0) {
        t.length = 8, t[0] = t[6] = e + n, t[1] = t[3] = i + s, t[2] = t[4] = e - n, t[5] = t[7] = i - s;
        return;
      }
      var v = 0, m = p * 4 + (n ? 2 : 0) + 2, _ = m, y = g;
      {
        var b = n + a, x = s, w = e + b, E = e - b, R = i + x;
        if (t[v++] = w, t[v++] = R, t[--m] = R, t[--m] = E, s) {
          var C = i - x;
          t[_++] = E, t[_++] = C, t[--y] = C, t[--y] = w;
        }
      }
      for (var P = 1; P < p; P++) {
        var N = Math.PI / 2 * (P / p), b = n + Math.cos(N) * a, x = s + Math.sin(N) * o, w = e + b, E = e - b, R = i + x, C = i - x;
        t[v++] = w, t[v++] = R, t[--m] = R, t[--m] = E, t[_++] = E, t[_++] = C, t[--y] = C, t[--y] = w;
      }
      {
        var b = n, x = s + o, w = e + b, E = e - b, R = i + x, C = i - x;
        t[v++] = w, t[v++] = R, t[--y] = C, t[--y] = w, n && (t[v++] = E, t[v++] = R, t[--y] = C, t[--y] = E);
      }
    }
  },
  triangulate: function(r, t) {
    var e = r.points, i = t.points, n = t.indices;
    if (e.length !== 0) {
      var s = i.length / 2, a = s, o, u;
      if (r.type !== gr.RREC) {
        var h = r.shape;
        o = h.x, u = h.y;
      } else {
        var l = r.shape;
        o = l.x + l.width / 2, u = l.y + l.height / 2;
      }
      var c = r.matrix;
      i.push(r.matrix ? c.a * o + c.c * u + c.tx : o, r.matrix ? c.b * o + c.d * u + c.ty : u), s++, i.push(e[0], e[1]);
      for (var d = 2; d < e.length; d += 2)
        i.push(e[d], e[d + 1]), n.push(s++, a, s);
      n.push(a + 1, a, s);
    }
  }
}, HM = {
  build: function(r) {
    var t = r.shape, e = t.x, i = t.y, n = t.width, s = t.height, a = r.points;
    a.length = 0, a.push(e, i, e + n, i, e + n, i + s, e, i + s);
  },
  triangulate: function(r, t) {
    var e = r.points, i = t.points, n = i.length / 2;
    i.push(e[0], e[1], e[2], e[3], e[6], e[7], e[4], e[5]), t.indices.push(n, n + 1, n + 2, n + 1, n + 2, n + 3);
  }
};
function _u(r, t, e) {
  var i = t - r;
  return r + i * e;
}
function Jd(r, t, e, i, n, s, a) {
  a === void 0 && (a = []);
  for (var o = 20, u = a, h = 0, l = 0, c = 0, d = 0, p = 0, g = 0, v = 0, m = 0; v <= o; ++v)
    m = v / o, h = _u(r, e, m), l = _u(t, i, m), c = _u(e, n, m), d = _u(i, s, m), p = _u(h, c, m), g = _u(l, d, m), !(v === 0 && u[u.length - 2] === p && u[u.length - 1] === g) && u.push(p, g);
  return u;
}
var zM = {
  build: function(r) {
    if (di.nextRoundedRectBehavior) {
      fv.build(r);
      return;
    }
    var t = r.shape, e = r.points, i = t.x, n = t.y, s = t.width, a = t.height, o = Math.max(0, Math.min(t.radius, Math.min(s, a) / 2));
    e.length = 0, o ? (Jd(i, n + o, i, n, i + o, n, e), Jd(i + s - o, n, i + s, n, i + s, n + o, e), Jd(i + s, n + a - o, i + s, n + a, i + s - o, n + a, e), Jd(i + o, n + a, i, n + a, i, n + a - o, e)) : e.push(i, n, i + s, n, i + s, n + a, i, n + a);
  },
  triangulate: function(r, t) {
    if (di.nextRoundedRectBehavior) {
      fv.triangulate(r, t);
      return;
    }
    for (var e = r.points, i = t.points, n = t.indices, s = i.length / 2, a = Sg.exports(e, null, 2), o = 0, u = a.length; o < u; o += 3)
      n.push(a[o] + s), n.push(a[o + 1] + s), n.push(a[o + 2] + s);
    for (var o = 0, u = e.length; o < u; o++)
      i.push(e[o], e[++o]);
  }
};
function pE(r, t, e, i, n, s, a, o) {
  var u = r - e * n, h = t - i * n, l = r + e * s, c = t + i * s, d, p;
  a ? (d = i, p = -e) : (d = -i, p = e);
  var g = u + d, v = h + p, m = l + d, _ = c + p;
  return o.push(g, v), o.push(m, _), 2;
}
function yu(r, t, e, i, n, s, a, o) {
  var u = e - r, h = i - t, l = Math.atan2(u, h), c = Math.atan2(n - r, s - t);
  o && l < c ? l += Math.PI * 2 : !o && l > c && (c += Math.PI * 2);
  var d = l, p = c - l, g = Math.abs(p), v = Math.sqrt(u * u + h * h), m = (15 * g * Math.sqrt(v) / Math.PI >> 0) + 1, _ = p / m;
  if (d += _, o) {
    a.push(r, t), a.push(e, i);
    for (var y = 1, b = d; y < m; y++, b += _)
      a.push(r, t), a.push(r + Math.sin(b) * v, t + Math.cos(b) * v);
    a.push(r, t), a.push(n, s);
  } else {
    a.push(e, i), a.push(r, t);
    for (var y = 1, b = d; y < m; y++, b += _)
      a.push(r + Math.sin(b) * v, t + Math.cos(b) * v), a.push(r, t);
    a.push(n, s), a.push(r, t);
  }
  return m * 2;
}
function jM(r, t) {
  var e = r.shape, i = r.points || e.points.slice(), n = t.closePointEps;
  if (i.length !== 0) {
    var s = r.lineStyle, a = new Ee(i[0], i[1]), o = new Ee(i[i.length - 2], i[i.length - 1]), u = e.type !== gr.POLY || e.closeStroke, h = Math.abs(a.x - o.x) < n && Math.abs(a.y - o.y) < n;
    if (u) {
      i = i.slice(), h && (i.pop(), i.pop(), o.set(i[i.length - 2], i[i.length - 1]));
      var l = (a.x + o.x) * 0.5, c = (o.y + a.y) * 0.5;
      i.unshift(l, c), i.push(l, c);
    }
    var d = t.points, p = i.length / 2, g = i.length, v = d.length / 2, m = s.width / 2, _ = m * m, y = s.miterLimit * s.miterLimit, b = i[0], x = i[1], w = i[2], E = i[3], R = 0, C = 0, P = -(x - E), N = b - w, M = 0, A = 0, k = Math.sqrt(P * P + N * N);
    P /= k, N /= k, P *= m, N *= m;
    var H = s.alignment, L = (1 - H) * 2, U = H * 2;
    u || (s.cap === xa.ROUND ? g += yu(b - P * (L - U) * 0.5, x - N * (L - U) * 0.5, b - P * L, x - N * L, b + P * U, x + N * U, d, !0) + 2 : s.cap === xa.SQUARE && (g += pE(b, x, P, N, L, U, !0, d))), d.push(b - P * L, x - N * L), d.push(b + P * U, x + N * U);
    for (var V = 1; V < p - 1; ++V) {
      b = i[(V - 1) * 2], x = i[(V - 1) * 2 + 1], w = i[V * 2], E = i[V * 2 + 1], R = i[(V + 1) * 2], C = i[(V + 1) * 2 + 1], P = -(x - E), N = b - w, k = Math.sqrt(P * P + N * N), P /= k, N /= k, P *= m, N *= m, M = -(E - C), A = w - R, k = Math.sqrt(M * M + A * A), M /= k, A /= k, M *= m, A *= m;
      var K = w - b, G = x - E, B = w - R, W = C - E, Q = G * B - W * K, ut = Q < 0;
      if (Math.abs(Q) < 0.1) {
        d.push(w - P * L, E - N * L), d.push(w + P * U, E + N * U);
        continue;
      }
      var it = (-P + b) * (-N + E) - (-P + w) * (-N + x), ht = (-M + R) * (-A + E) - (-M + w) * (-A + C), F = (K * ht - B * it) / Q, vt = (W * it - G * ht) / Q, nt = (F - w) * (F - w) + (vt - E) * (vt - E), ft = w + (F - w) * L, rt = E + (vt - E) * L, j = w - (F - w) * U, xt = E - (vt - E) * U, Z = Math.min(K * K + G * G, B * B + W * W), X = ut ? L : U, et = Z + X * X * _, ot = nt <= et;
      ot ? s.join === ba.BEVEL || nt / _ > y ? (ut ? (d.push(ft, rt), d.push(w + P * U, E + N * U), d.push(ft, rt), d.push(w + M * U, E + A * U)) : (d.push(w - P * L, E - N * L), d.push(j, xt), d.push(w - M * L, E - A * L), d.push(j, xt)), g += 2) : s.join === ba.ROUND ? ut ? (d.push(ft, rt), d.push(w + P * U, E + N * U), g += yu(w, E, w + P * U, E + N * U, w + M * U, E + A * U, d, !0) + 4, d.push(ft, rt), d.push(w + M * U, E + A * U)) : (d.push(w - P * L, E - N * L), d.push(j, xt), g += yu(w, E, w - P * L, E - N * L, w - M * L, E - A * L, d, !1) + 4, d.push(w - M * L, E - A * L), d.push(j, xt)) : (d.push(ft, rt), d.push(j, xt)) : (d.push(w - P * L, E - N * L), d.push(w + P * U, E + N * U), s.join === ba.ROUND ? ut ? g += yu(w, E, w + P * U, E + N * U, w + M * U, E + A * U, d, !0) + 2 : g += yu(w, E, w - P * L, E - N * L, w - M * L, E - A * L, d, !1) + 2 : s.join === ba.MITER && nt / _ <= y && (ut ? (d.push(j, xt), d.push(j, xt)) : (d.push(ft, rt), d.push(ft, rt)), g += 2), d.push(w - M * L, E - A * L), d.push(w + M * U, E + A * U), g += 2);
    }
    b = i[(p - 2) * 2], x = i[(p - 2) * 2 + 1], w = i[(p - 1) * 2], E = i[(p - 1) * 2 + 1], P = -(x - E), N = b - w, k = Math.sqrt(P * P + N * N), P /= k, N /= k, P *= m, N *= m, d.push(w - P * L, E - N * L), d.push(w + P * U, E + N * U), u || (s.cap === xa.ROUND ? g += yu(w - P * (L - U) * 0.5, E - N * (L - U) * 0.5, w - P * L, E - N * L, w + P * U, E + N * U, d, !1) + 2 : s.cap === xa.SQUARE && (g += pE(w, E, P, N, L, U, !1, d)));
    for (var q = t.indices, Gt = Hc.epsilon * Hc.epsilon, V = v; V < g + v - 2; ++V)
      b = d[V * 2], x = d[V * 2 + 1], w = d[(V + 1) * 2], E = d[(V + 1) * 2 + 1], R = d[(V + 2) * 2], C = d[(V + 2) * 2 + 1], !(Math.abs(b * (E - C) + w * (C - x) + R * (x - E)) < Gt) && q.push(V, V + 1, V + 2);
  }
}
function $M(r, t) {
  var e = 0, i = r.shape, n = r.points || i.points, s = i.type !== gr.POLY || i.closeStroke;
  if (n.length !== 0) {
    var a = t.points, o = t.indices, u = n.length / 2, h = a.length / 2, l = h;
    for (a.push(n[0], n[1]), e = 1; e < u; e++)
      a.push(n[e * 2], n[e * 2 + 1]), o.push(l, l + 1), l++;
    s && o.push(l, h);
  }
}
function vE(r, t) {
  r.lineStyle.native ? $M(r, t) : jM(r, t);
}
var gE = function() {
  function r() {
  }
  return r.curveTo = function(t, e, i, n, s, a) {
    var o = a[a.length - 2], u = a[a.length - 1], h = u - e, l = o - t, c = n - e, d = i - t, p = Math.abs(h * d - l * c);
    if (p < 1e-8 || s === 0)
      return (a[a.length - 2] !== t || a[a.length - 1] !== e) && a.push(t, e), null;
    var g = h * h + l * l, v = c * c + d * d, m = h * c + l * d, _ = s * Math.sqrt(g) / p, y = s * Math.sqrt(v) / p, b = _ * m / g, x = y * m / v, w = _ * d + y * l, E = _ * c + y * h, R = l * (y + b), C = h * (y + b), P = d * (_ + x), N = c * (_ + x), M = Math.atan2(C - E, R - w), A = Math.atan2(N - E, P - w);
    return {
      cx: w + t,
      cy: E + e,
      radius: s,
      startAngle: M,
      endAngle: A,
      anticlockwise: l * c > d * h
    };
  }, r.arc = function(t, e, i, n, s, a, o, u, h) {
    for (var l = o - a, c = Hc._segmentsCount(Math.abs(l) * s, Math.ceil(Math.abs(l) / hv) * 40), d = l / (c * 2), p = d * 2, g = Math.cos(d), v = Math.sin(d), m = c - 1, _ = m % 1 / m, y = 0; y <= m; ++y) {
      var b = y + _ * y, x = d + a + p * b, w = Math.cos(x), E = -Math.sin(x);
      h.push((g * w + v * E) * s + i, (g * -E + v * w) * s + n);
    }
  }, r;
}(), VM = function() {
  function r() {
  }
  return r.curveLength = function(t, e, i, n, s, a, o, u) {
    for (var h = 10, l = 0, c = 0, d = 0, p = 0, g = 0, v = 0, m = 0, _ = 0, y = 0, b = 0, x = 0, w = t, E = e, R = 1; R <= h; ++R)
      c = R / h, d = c * c, p = d * c, g = 1 - c, v = g * g, m = v * g, _ = m * t + 3 * v * c * i + 3 * g * d * s + p * o, y = m * e + 3 * v * c * n + 3 * g * d * a + p * u, b = w - _, x = E - y, w = _, E = y, l += Math.sqrt(b * b + x * x);
    return l;
  }, r.curveTo = function(t, e, i, n, s, a, o) {
    var u = o[o.length - 2], h = o[o.length - 1];
    o.length -= 2;
    var l = Hc._segmentsCount(r.curveLength(u, h, t, e, i, n, s, a)), c = 0, d = 0, p = 0, g = 0, v = 0;
    o.push(u, h);
    for (var m = 1, _ = 0; m <= l; ++m)
      _ = m / l, c = 1 - _, d = c * c, p = d * c, g = _ * _, v = g * _, o.push(p * u + 3 * d * _ * t + 3 * c * g * i + v * s, p * h + 3 * d * _ * e + 3 * c * g * n + v * a);
  }, r;
}(), XM = function() {
  function r() {
  }
  return r.curveLength = function(t, e, i, n, s, a) {
    var o = t - 2 * i + s, u = e - 2 * n + a, h = 2 * i - 2 * t, l = 2 * n - 2 * e, c = 4 * (o * o + u * u), d = 4 * (o * h + u * l), p = h * h + l * l, g = 2 * Math.sqrt(c + d + p), v = Math.sqrt(c), m = 2 * c * v, _ = 2 * Math.sqrt(p), y = d / v;
    return (m * g + v * d * (g - _) + (4 * p * c - d * d) * Math.log((2 * v + y + g) / (y + _))) / (4 * m);
  }, r.curveTo = function(t, e, i, n, s) {
    for (var a = s[s.length - 2], o = s[s.length - 1], u = Hc._segmentsCount(r.curveLength(a, o, t, e, i, n)), h = 0, l = 0, c = 1; c <= u; ++c) {
      var d = c / u;
      h = a + (t - a) * d, l = o + (e - o) * d, s.push(h + (t + (i - t) * d - h) * d, l + (e + (n - e) * d - l) * d);
    }
  }, r;
}(), WM = function() {
  function r() {
    this.reset();
  }
  return r.prototype.begin = function(t, e, i) {
    this.reset(), this.style = t, this.start = e, this.attribStart = i;
  }, r.prototype.end = function(t, e) {
    this.attribSize = e - this.attribStart, this.size = t - this.start;
  }, r.prototype.reset = function() {
    this.style = null, this.size = 0, this.start = 0, this.attribStart = 0, this.attribSize = 0;
  }, r;
}(), Da, wm = (Da = {}, Da[gr.POLY] = nC, Da[gr.CIRC] = fv, Da[gr.ELIP] = fv, Da[gr.RECT] = HM, Da[gr.RREC] = zM, Da), mE = [], Kd = [], _E = function() {
  function r(t, e, i, n) {
    e === void 0 && (e = null), i === void 0 && (i = null), n === void 0 && (n = null), this.points = [], this.holes = [], this.shape = t, this.lineStyle = i, this.fillStyle = e, this.matrix = n, this.type = t.type;
  }
  return r.prototype.clone = function() {
    return new r(this.shape, this.fillStyle, this.lineStyle, this.matrix);
  }, r.prototype.destroy = function() {
    this.shape = null, this.holes.length = 0, this.holes = null, this.points.length = 0, this.points = null, this.lineStyle = null, this.fillStyle = null;
  }, r;
}(), bu = new Ee(), YM = function(r) {
  Pb(t, r);
  function t() {
    var e = r.call(this) || this;
    return e.closePointEps = 1e-4, e.boundsPadding = 0, e.uvsFloat32 = null, e.indicesUint16 = null, e.batchable = !1, e.points = [], e.colors = [], e.uvs = [], e.indices = [], e.textureIds = [], e.graphicsData = [], e.drawCalls = [], e.batchDirty = -1, e.batches = [], e.dirty = 0, e.cacheDirty = -1, e.clearDirty = 0, e.shapeIndex = 0, e._bounds = new lv(), e.boundsDirty = -1, e;
  }
  return Object.defineProperty(t.prototype, "bounds", {
    get: function() {
      return this.updateBatches(), this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.calculateBounds()), this._bounds;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.invalidate = function() {
    this.boundsDirty = -1, this.dirty++, this.batchDirty++, this.shapeIndex = 0, this.points.length = 0, this.colors.length = 0, this.uvs.length = 0, this.indices.length = 0, this.textureIds.length = 0;
    for (var e = 0; e < this.drawCalls.length; e++)
      this.drawCalls[e].texArray.clear(), Kd.push(this.drawCalls[e]);
    this.drawCalls.length = 0;
    for (var e = 0; e < this.batches.length; e++) {
      var i = this.batches[e];
      i.reset(), mE.push(i);
    }
    this.batches.length = 0;
  }, t.prototype.clear = function() {
    return this.graphicsData.length > 0 && (this.invalidate(), this.clearDirty++, this.graphicsData.length = 0), this;
  }, t.prototype.drawShape = function(e, i, n, s) {
    i === void 0 && (i = null), n === void 0 && (n = null), s === void 0 && (s = null);
    var a = new _E(e, i, n, s);
    return this.graphicsData.push(a), this.dirty++, this;
  }, t.prototype.drawHole = function(e, i) {
    if (i === void 0 && (i = null), !this.graphicsData.length)
      return null;
    var n = new _E(e, null, null, i), s = this.graphicsData[this.graphicsData.length - 1];
    return n.lineStyle = s.lineStyle, s.holes.push(n), this.dirty++, this;
  }, t.prototype.destroy = function() {
    r.prototype.destroy.call(this);
    for (var e = 0; e < this.graphicsData.length; ++e)
      this.graphicsData[e].destroy();
    this.points.length = 0, this.points = null, this.colors.length = 0, this.colors = null, this.uvs.length = 0, this.uvs = null, this.indices.length = 0, this.indices = null, this.indexBuffer.destroy(), this.indexBuffer = null, this.graphicsData.length = 0, this.graphicsData = null, this.drawCalls.length = 0, this.drawCalls = null, this.batches.length = 0, this.batches = null, this._bounds = null;
  }, t.prototype.containsPoint = function(e) {
    for (var i = this.graphicsData, n = 0; n < i.length; ++n) {
      var s = i[n];
      if (!!s.fillStyle.visible && s.shape && (s.matrix ? s.matrix.applyInverse(e, bu) : bu.copyFrom(e), s.shape.contains(bu.x, bu.y))) {
        var a = !1;
        if (s.holes)
          for (var o = 0; o < s.holes.length; o++) {
            var u = s.holes[o];
            if (u.shape.contains(bu.x, bu.y)) {
              a = !0;
              break;
            }
          }
        if (!a)
          return !0;
      }
    }
    return !1;
  }, t.prototype.updateBatches = function() {
    if (!this.graphicsData.length) {
      this.batchable = !0;
      return;
    }
    if (!!this.validateBatching()) {
      this.cacheDirty = this.dirty;
      var e = this.uvs, i = this.graphicsData, n = null, s = null;
      this.batches.length > 0 && (n = this.batches[this.batches.length - 1], s = n.style);
      for (var a = this.shapeIndex; a < i.length; a++) {
        this.shapeIndex++;
        var o = i[a], u = o.fillStyle, h = o.lineStyle, l = wm[o.type];
        l.build(o), o.matrix && this.transformPoints(o.points, o.matrix), (u.visible || h.visible) && this.processHoles(o.holes);
        for (var c = 0; c < 2; c++) {
          var d = c === 0 ? u : h;
          if (!!d.visible) {
            var p = d.texture.baseTexture, g = this.indices.length, v = this.points.length / 2;
            p.wrapMode = xs.REPEAT, c === 0 ? this.processFill(o) : this.processLine(o);
            var m = this.points.length / 2 - v;
            m !== 0 && (n && !this._compareStyles(s, d) && (n.end(g, v), n = null), n || (n = mE.pop() || new WM(), n.begin(d, g, v), this.batches.push(n), s = d), this.addUvs(this.points, e, d.texture, v, m, d.matrix));
          }
        }
      }
      var _ = this.indices.length, y = this.points.length / 2;
      if (n && n.end(_, y), this.batches.length === 0) {
        this.batchable = !0;
        return;
      }
      var b = y > 65535;
      this.indicesUint16 && this.indices.length === this.indicesUint16.length && b === this.indicesUint16.BYTES_PER_ELEMENT > 2 ? this.indicesUint16.set(this.indices) : this.indicesUint16 = b ? new Uint32Array(this.indices) : new Uint16Array(this.indices), this.batchable = this.isBatchable(), this.batchable ? this.packBatches() : this.buildDrawCalls();
    }
  }, t.prototype._compareStyles = function(e, i) {
    return !(!e || !i || e.texture.baseTexture !== i.texture.baseTexture || e.color + e.alpha !== i.color + i.alpha || !!e.native != !!i.native);
  }, t.prototype.validateBatching = function() {
    if (this.dirty === this.cacheDirty || !this.graphicsData.length)
      return !1;
    for (var e = 0, i = this.graphicsData.length; e < i; e++) {
      var n = this.graphicsData[e], s = n.fillStyle, a = n.lineStyle;
      if (s && !s.texture.baseTexture.valid || a && !a.texture.baseTexture.valid)
        return !1;
    }
    return !0;
  }, t.prototype.packBatches = function() {
    this.batchDirty++, this.uvsFloat32 = new Float32Array(this.uvs);
    for (var e = this.batches, i = 0, n = e.length; i < n; i++)
      for (var s = e[i], a = 0; a < s.size; a++) {
        var o = s.start + a;
        this.indicesUint16[o] = this.indicesUint16[o] - s.attribStart;
      }
  }, t.prototype.isBatchable = function() {
    if (this.points.length > 65535 * 2)
      return !1;
    for (var e = this.batches, i = 0; i < e.length; i++)
      if (e[i].style.native)
        return !1;
    return this.points.length < t.BATCHABLE_SIZE * 2;
  }, t.prototype.buildDrawCalls = function() {
    for (var e = ++Zt._globalBatch, i = 0; i < this.drawCalls.length; i++)
      this.drawCalls[i].texArray.clear(), Kd.push(this.drawCalls[i]);
    this.drawCalls.length = 0;
    var n = this.colors, s = this.textureIds, a = Kd.pop();
    a || (a = new v_(), a.texArray = new g_()), a.texArray.count = 0, a.start = 0, a.size = 0, a.type = qi.TRIANGLES;
    var o = 0, u = null, h = 0, l = !1, c = qi.TRIANGLES, d = 0;
    this.drawCalls.push(a);
    for (var i = 0; i < this.batches.length; i++) {
      var p = this.batches[i], g = 8, v = p.style, m = v.texture.baseTexture;
      l !== !!v.native && (l = !!v.native, c = l ? qi.LINES : qi.TRIANGLES, u = null, o = g, e++), u !== m && (u = m, m._batchEnabled !== e && (o === g && (e++, o = 0, a.size > 0 && (a = Kd.pop(), a || (a = new v_(), a.texArray = new g_()), this.drawCalls.push(a)), a.start = d, a.size = 0, a.texArray.count = 0, a.type = c), m.touched = 1, m._batchEnabled = e, m._batchLocation = o, m.wrapMode = xs.REPEAT, a.texArray.elements[a.texArray.count++] = m, o++)), a.size += p.size, d += p.size, h = m._batchLocation, this.addColors(n, v.color, v.alpha, p.attribSize, p.attribStart), this.addTextureIds(s, h, p.attribSize, p.attribStart);
    }
    Zt._globalBatch = e, this.packAttributes();
  }, t.prototype.packAttributes = function() {
    for (var e = this.points, i = this.uvs, n = this.colors, s = this.textureIds, a = new ArrayBuffer(e.length * 3 * 4), o = new Float32Array(a), u = new Uint32Array(a), h = 0, l = 0; l < e.length / 2; l++)
      o[h++] = e[l * 2], o[h++] = e[l * 2 + 1], o[h++] = i[l * 2], o[h++] = i[l * 2 + 1], u[h++] = n[l], o[h++] = s[l];
    this._buffer.update(a), this._indexBuffer.update(this.indicesUint16);
  }, t.prototype.processFill = function(e) {
    if (e.holes.length)
      nC.triangulate(e, this);
    else {
      var i = wm[e.type];
      i.triangulate(e, this);
    }
  }, t.prototype.processLine = function(e) {
    vE(e, this);
    for (var i = 0; i < e.holes.length; i++)
      vE(e.holes[i], this);
  }, t.prototype.processHoles = function(e) {
    for (var i = 0; i < e.length; i++) {
      var n = e[i], s = wm[n.type];
      s.build(n), n.matrix && this.transformPoints(n.points, n.matrix);
    }
  }, t.prototype.calculateBounds = function() {
    var e = this._bounds;
    e.clear(), e.addVertexData(this.points, 0, this.points.length), e.pad(this.boundsPadding, this.boundsPadding);
  }, t.prototype.transformPoints = function(e, i) {
    for (var n = 0; n < e.length / 2; n++) {
      var s = e[n * 2], a = e[n * 2 + 1];
      e[n * 2] = i.a * s + i.c * a + i.tx, e[n * 2 + 1] = i.b * s + i.d * a + i.ty;
    }
  }, t.prototype.addColors = function(e, i, n, s, a) {
    a === void 0 && (a = 0);
    var o = (i >> 16) + (i & 65280) + ((i & 255) << 16), u = Ib(o, n);
    e.length = Math.max(e.length, a + s);
    for (var h = 0; h < s; h++)
      e[a + h] = u;
  }, t.prototype.addTextureIds = function(e, i, n, s) {
    s === void 0 && (s = 0), e.length = Math.max(e.length, s + n);
    for (var a = 0; a < n; a++)
      e[s + a] = i;
  }, t.prototype.addUvs = function(e, i, n, s, a, o) {
    o === void 0 && (o = null);
    for (var u = 0, h = i.length, l = n.frame; u < a; ) {
      var c = e[(s + u) * 2], d = e[(s + u) * 2 + 1];
      if (o) {
        var p = o.a * c + o.c * d + o.tx;
        d = o.b * c + o.d * d + o.ty, c = p;
      }
      u++, i.push(c / l.width, d / l.height);
    }
    var g = n.baseTexture;
    (l.width < g.width || l.height < g.height) && this.adjustUvs(i, n, h, a);
  }, t.prototype.adjustUvs = function(e, i, n, s) {
    for (var a = i.baseTexture, o = 1e-6, u = n + s * 2, h = i.frame, l = h.width / a.width, c = h.height / a.height, d = h.x / h.width, p = h.y / h.height, g = Math.floor(e[n] + o), v = Math.floor(e[n + 1] + o), m = n + 2; m < u; m += 2)
      g = Math.min(g, Math.floor(e[m] + o)), v = Math.min(v, Math.floor(e[m + 1] + o));
    d -= g, p -= v;
    for (var m = n; m < u; m += 2)
      e[m] = (e[m] + d) * l, e[m + 1] = (e[m + 1] + p) * c;
  }, t.BATCHABLE_SIZE = 100, t;
}(JT), qM = function(r) {
  Pb(t, r);
  function t() {
    var e = r !== null && r.apply(this, arguments) || this;
    return e.width = 0, e.alignment = 0.5, e.native = !1, e.cap = xa.BUTT, e.join = ba.MITER, e.miterLimit = 10, e;
  }
  return t.prototype.clone = function() {
    var e = new t();
    return e.color = this.color, e.alpha = this.alpha, e.texture = this.texture, e.matrix = this.matrix, e.visible = this.visible, e.width = this.width, e.alignment = this.alignment, e.native = this.native, e.cap = this.cap, e.join = this.join, e.miterLimit = this.miterLimit, e;
  }, t.prototype.reset = function() {
    r.prototype.reset.call(this), this.color = 0, this.alignment = 0.5, this.width = 0, this.native = !1;
  }, t;
}(iC), ZM = new Float32Array(3), Tm = {}, di = function(r) {
  Pb(t, r);
  function t(e) {
    e === void 0 && (e = null);
    var i = r.call(this) || this;
    return i.shader = null, i.pluginName = "batch", i.currentPath = null, i.batches = [], i.batchTint = -1, i.batchDirty = -1, i.vertexData = null, i._fillStyle = new iC(), i._lineStyle = new qM(), i._matrix = null, i._holeMode = !1, i.state = uu.for2d(), i._geometry = e || new YM(), i._geometry.refCount++, i._transformID = -1, i.tint = 16777215, i.blendMode = bt.NORMAL, i;
  }
  return Object.defineProperty(t.prototype, "geometry", {
    get: function() {
      return this._geometry;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.clone = function() {
    return this.finishPoly(), new t(this._geometry);
  }, Object.defineProperty(t.prototype, "blendMode", {
    get: function() {
      return this.state.blendMode;
    },
    set: function(e) {
      this.state.blendMode = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "tint", {
    get: function() {
      return this._tint;
    },
    set: function(e) {
      this._tint = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "fill", {
    get: function() {
      return this._fillStyle;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "line", {
    get: function() {
      return this._lineStyle;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.lineStyle = function(e, i, n, s, a) {
    return e === void 0 && (e = null), i === void 0 && (i = 0), n === void 0 && (n = 1), s === void 0 && (s = 0.5), a === void 0 && (a = !1), typeof e == "number" && (e = { width: e, color: i, alpha: n, alignment: s, native: a }), this.lineTextureStyle(e);
  }, t.prototype.lineTextureStyle = function(e) {
    e = Object.assign({
      width: 0,
      texture: It.WHITE,
      color: e && e.texture ? 16777215 : 0,
      alpha: 1,
      matrix: null,
      alignment: 0.5,
      native: !1,
      cap: xa.BUTT,
      join: ba.MITER,
      miterLimit: 10
    }, e), this.currentPath && this.startPoly();
    var i = e.width > 0 && e.alpha > 0;
    return i ? (e.matrix && (e.matrix = e.matrix.clone(), e.matrix.invert()), Object.assign(this._lineStyle, { visible: i }, e)) : this._lineStyle.reset(), this;
  }, t.prototype.startPoly = function() {
    if (this.currentPath) {
      var e = this.currentPath.points, i = this.currentPath.points.length;
      i > 2 && (this.drawShape(this.currentPath), this.currentPath = new yp(), this.currentPath.closeStroke = !1, this.currentPath.points.push(e[i - 2], e[i - 1]));
    } else
      this.currentPath = new yp(), this.currentPath.closeStroke = !1;
  }, t.prototype.finishPoly = function() {
    this.currentPath && (this.currentPath.points.length > 2 ? (this.drawShape(this.currentPath), this.currentPath = null) : this.currentPath.points.length = 0);
  }, t.prototype.moveTo = function(e, i) {
    return this.startPoly(), this.currentPath.points[0] = e, this.currentPath.points[1] = i, this;
  }, t.prototype.lineTo = function(e, i) {
    this.currentPath || this.moveTo(0, 0);
    var n = this.currentPath.points, s = n[n.length - 2], a = n[n.length - 1];
    return (s !== e || a !== i) && n.push(e, i), this;
  }, t.prototype._initCurve = function(e, i) {
    e === void 0 && (e = 0), i === void 0 && (i = 0), this.currentPath ? this.currentPath.points.length === 0 && (this.currentPath.points = [e, i]) : this.moveTo(e, i);
  }, t.prototype.quadraticCurveTo = function(e, i, n, s) {
    this._initCurve();
    var a = this.currentPath.points;
    return a.length === 0 && this.moveTo(0, 0), XM.curveTo(e, i, n, s, a), this;
  }, t.prototype.bezierCurveTo = function(e, i, n, s, a, o) {
    return this._initCurve(), VM.curveTo(e, i, n, s, a, o, this.currentPath.points), this;
  }, t.prototype.arcTo = function(e, i, n, s, a) {
    this._initCurve(e, i);
    var o = this.currentPath.points, u = gE.curveTo(e, i, n, s, a, o);
    if (u) {
      var h = u.cx, l = u.cy, c = u.radius, d = u.startAngle, p = u.endAngle, g = u.anticlockwise;
      this.arc(h, l, c, d, p, g);
    }
    return this;
  }, t.prototype.arc = function(e, i, n, s, a, o) {
    if (o === void 0 && (o = !1), s === a)
      return this;
    !o && a <= s ? a += hv : o && s <= a && (s += hv);
    var u = a - s;
    if (u === 0)
      return this;
    var h = e + Math.cos(s) * n, l = i + Math.sin(s) * n, c = this._geometry.closePointEps, d = this.currentPath ? this.currentPath.points : null;
    if (d) {
      var p = Math.abs(d[d.length - 2] - h), g = Math.abs(d[d.length - 1] - l);
      p < c && g < c || d.push(h, l);
    } else
      this.moveTo(h, l), d = this.currentPath.points;
    return gE.arc(h, l, e, i, n, s, a, o, d), this;
  }, t.prototype.beginFill = function(e, i) {
    return e === void 0 && (e = 0), i === void 0 && (i = 1), this.beginTextureFill({ texture: It.WHITE, color: e, alpha: i });
  }, t.prototype.beginTextureFill = function(e) {
    e = Object.assign({
      texture: It.WHITE,
      color: 16777215,
      alpha: 1,
      matrix: null
    }, e), this.currentPath && this.startPoly();
    var i = e.alpha > 0;
    return i ? (e.matrix && (e.matrix = e.matrix.clone(), e.matrix.invert()), Object.assign(this._fillStyle, { visible: i }, e)) : this._fillStyle.reset(), this;
  }, t.prototype.endFill = function() {
    return this.finishPoly(), this._fillStyle.reset(), this;
  }, t.prototype.drawRect = function(e, i, n, s) {
    return this.drawShape(new Pt(e, i, n, s));
  }, t.prototype.drawRoundedRect = function(e, i, n, s, a) {
    return this.drawShape(new nA(e, i, n, s, a));
  }, t.prototype.drawCircle = function(e, i, n) {
    return this.drawShape(new rA(e, i, n));
  }, t.prototype.drawEllipse = function(e, i, n, s) {
    return this.drawShape(new iA(e, i, n, s));
  }, t.prototype.drawPolygon = function() {
    for (var e = arguments, i = [], n = 0; n < arguments.length; n++)
      i[n] = e[n];
    var s, a = !0, o = i[0];
    o.points ? (a = o.closeStroke, s = o.points) : Array.isArray(i[0]) ? s = i[0] : s = i;
    var u = new yp(s);
    return u.closeStroke = a, this.drawShape(u), this;
  }, t.prototype.drawShape = function(e) {
    return this._holeMode ? this._geometry.drawHole(e, this._matrix) : this._geometry.drawShape(e, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix), this;
  }, t.prototype.clear = function() {
    return this._geometry.clear(), this._lineStyle.reset(), this._fillStyle.reset(), this._boundsID++, this._matrix = null, this._holeMode = !1, this.currentPath = null, this;
  }, t.prototype.isFastRect = function() {
    var e = this._geometry.graphicsData;
    return e.length === 1 && e[0].shape.type === gr.RECT && !e[0].matrix && !e[0].holes.length && !(e[0].lineStyle.visible && e[0].lineStyle.width);
  }, t.prototype._render = function(e) {
    this.finishPoly();
    var i = this._geometry;
    i.updateBatches(), i.batchable ? (this.batchDirty !== i.batchDirty && this._populateBatches(), this._renderBatched(e)) : (e.batch.flush(), this._renderDirect(e));
  }, t.prototype._populateBatches = function() {
    var e = this._geometry, i = this.blendMode, n = e.batches.length;
    this.batchTint = -1, this._transformID = -1, this.batchDirty = e.batchDirty, this.batches.length = n, this.vertexData = new Float32Array(e.points);
    for (var s = 0; s < n; s++) {
      var a = e.batches[s], o = a.style.color, u = new Float32Array(this.vertexData.buffer, a.attribStart * 4 * 2, a.attribSize * 2), h = new Float32Array(e.uvsFloat32.buffer, a.attribStart * 4 * 2, a.attribSize * 2), l = new Uint16Array(e.indicesUint16.buffer, a.start * 2, a.size), c = {
        vertexData: u,
        blendMode: i,
        indices: l,
        uvs: h,
        _batchRGB: vl(o),
        _tintRGB: o,
        _texture: a.style.texture,
        alpha: a.style.alpha,
        worldAlpha: 1
      };
      this.batches[s] = c;
    }
  }, t.prototype._renderBatched = function(e) {
    if (!!this.batches.length) {
      e.batch.setObjectRenderer(e.plugins[this.pluginName]), this.calculateVertices(), this.calculateTints();
      for (var i = 0, n = this.batches.length; i < n; i++) {
        var s = this.batches[i];
        s.worldAlpha = this.worldAlpha * s.alpha, e.plugins[this.pluginName].render(s);
      }
    }
  }, t.prototype._renderDirect = function(e) {
    var i = this._resolveDirectShader(e), n = this._geometry, s = this.tint, a = this.worldAlpha, o = i.uniforms, u = n.drawCalls;
    o.translationMatrix = this.transform.worldTransform, o.tint[0] = (s >> 16 & 255) / 255 * a, o.tint[1] = (s >> 8 & 255) / 255 * a, o.tint[2] = (s & 255) / 255 * a, o.tint[3] = a, e.shader.bind(i), e.geometry.bind(n, i), e.state.set(this.state);
    for (var h = 0, l = u.length; h < l; h++)
      this._renderDrawCallDirect(e, n.drawCalls[h]);
  }, t.prototype._renderDrawCallDirect = function(e, i) {
    for (var n = i.texArray, s = i.type, a = i.size, o = i.start, u = n.count, h = 0; h < u; h++)
      e.texture.bind(n.elements[h], h);
    e.geometry.draw(s, a, o);
  }, t.prototype._resolveDirectShader = function(e) {
    var i = this.shader, n = this.pluginName;
    if (!i) {
      if (!Tm[n]) {
        for (var s = e.plugins[n].MAX_TEXTURES, a = new Int32Array(s), o = 0; o < s; o++)
          a[o] = o;
        var u = {
          tint: new Float32Array([1, 1, 1, 1]),
          translationMatrix: new lr(),
          default: Ko.from({ uSamplers: a }, !0)
        }, h = e.plugins[n]._shader.program;
        Tm[n] = new Ra(h, u);
      }
      i = Tm[n];
    }
    return i;
  }, t.prototype._calculateBounds = function() {
    this.finishPoly();
    var e = this._geometry;
    if (!!e.graphicsData.length) {
      var i = e.bounds, n = i.minX, s = i.minY, a = i.maxX, o = i.maxY;
      this._bounds.addFrame(this.transform, n, s, a, o);
    }
  }, t.prototype.containsPoint = function(e) {
    return this.worldTransform.applyInverse(e, t._TEMP_POINT), this._geometry.containsPoint(t._TEMP_POINT);
  }, t.prototype.calculateTints = function() {
    if (this.batchTint !== this.tint) {
      this.batchTint = this.tint;
      for (var e = vl(this.tint, ZM), i = 0; i < this.batches.length; i++) {
        var n = this.batches[i], s = n._batchRGB, a = e[0] * s[0] * 255, o = e[1] * s[1] * 255, u = e[2] * s[2] * 255, h = (a << 16) + (o << 8) + (u | 0);
        n._tintRGB = (h >> 16) + (h & 65280) + ((h & 255) << 16);
      }
    }
  }, t.prototype.calculateVertices = function() {
    var e = this.transform._worldID;
    if (this._transformID !== e) {
      this._transformID = e;
      for (var i = this.transform.worldTransform, n = i.a, s = i.b, a = i.c, o = i.d, u = i.tx, h = i.ty, l = this._geometry.points, c = this.vertexData, d = 0, p = 0; p < l.length; p += 2) {
        var g = l[p], v = l[p + 1];
        c[d++] = n * g + a * v + u, c[d++] = o * v + s * g + h;
      }
    }
  }, t.prototype.closePath = function() {
    var e = this.currentPath;
    return e && (e.closeStroke = !0, this.finishPoly()), this;
  }, t.prototype.setMatrix = function(e) {
    return this._matrix = e, this;
  }, t.prototype.beginHole = function() {
    return this.finishPoly(), this._holeMode = !0, this;
  }, t.prototype.endHole = function() {
    return this.finishPoly(), this._holeMode = !1, this;
  }, t.prototype.destroy = function(e) {
    this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose(), this._matrix = null, this.currentPath = null, this._lineStyle.destroy(), this._lineStyle = null, this._fillStyle.destroy(), this._fillStyle = null, this._geometry = null, this.shader = null, this.vertexData = null, this.batches.length = 0, this.batches = null, r.prototype.destroy.call(this, e);
  }, t.nextRoundedRectBehavior = !1, t._TEMP_POINT = new Ee(), t;
}(ge);
/*!
 * @pixi/sprite - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var C_ = function(r, t) {
  return C_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, C_(r, t);
};
function JM(r, t) {
  C_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Gl = new Ee(), KM = new Uint16Array([0, 1, 2, 0, 2, 3]), qe = function(r) {
  JM(t, r);
  function t(e) {
    var i = r.call(this) || this;
    return i._anchor = new Lu(i._onAnchorUpdate, i, e ? e.defaultAnchor.x : 0, e ? e.defaultAnchor.y : 0), i._texture = null, i._width = 0, i._height = 0, i._tint = null, i._tintRGB = null, i.tint = 16777215, i.blendMode = bt.NORMAL, i._cachedTint = 16777215, i.uvs = null, i.texture = e || It.EMPTY, i.vertexData = new Float32Array(8), i.vertexTrimmedData = null, i._transformID = -1, i._textureID = -1, i._transformTrimmedID = -1, i._textureTrimmedID = -1, i.indices = KM, i.pluginName = "batch", i.isSprite = !0, i._roundPixels = gt.ROUND_PIXELS, i;
  }
  return t.prototype._onTextureUpdate = function() {
    this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this._width && (this.scale.x = Bu(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = Bu(this.scale.y) * this._height / this._texture.orig.height);
  }, t.prototype._onAnchorUpdate = function() {
    this._transformID = -1, this._transformTrimmedID = -1;
  }, t.prototype.calculateVertices = function() {
    var e = this._texture;
    if (!(this._transformID === this.transform._worldID && this._textureID === e._updateID)) {
      this._textureID !== e._updateID && (this.uvs = this._texture._uvs.uvsFloat32), this._transformID = this.transform._worldID, this._textureID = e._updateID;
      var i = this.transform.worldTransform, n = i.a, s = i.b, a = i.c, o = i.d, u = i.tx, h = i.ty, l = this.vertexData, c = e.trim, d = e.orig, p = this._anchor, g = 0, v = 0, m = 0, _ = 0;
      if (c ? (v = c.x - p._x * d.width, g = v + c.width, _ = c.y - p._y * d.height, m = _ + c.height) : (v = -p._x * d.width, g = v + d.width, _ = -p._y * d.height, m = _ + d.height), l[0] = n * v + a * _ + u, l[1] = o * _ + s * v + h, l[2] = n * g + a * _ + u, l[3] = o * _ + s * g + h, l[4] = n * g + a * m + u, l[5] = o * m + s * g + h, l[6] = n * v + a * m + u, l[7] = o * m + s * v + h, this._roundPixels)
        for (var y = gt.RESOLUTION, b = 0; b < l.length; ++b)
          l[b] = Math.round((l[b] * y | 0) / y);
    }
  }, t.prototype.calculateTrimmedVertices = function() {
    if (!this.vertexTrimmedData)
      this.vertexTrimmedData = new Float32Array(8);
    else if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID)
      return;
    this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID;
    var e = this._texture, i = this.vertexTrimmedData, n = e.orig, s = this._anchor, a = this.transform.worldTransform, o = a.a, u = a.b, h = a.c, l = a.d, c = a.tx, d = a.ty, p = -s._x * n.width, g = p + n.width, v = -s._y * n.height, m = v + n.height;
    i[0] = o * p + h * v + c, i[1] = l * v + u * p + d, i[2] = o * g + h * v + c, i[3] = l * v + u * g + d, i[4] = o * g + h * m + c, i[5] = l * m + u * g + d, i[6] = o * p + h * m + c, i[7] = l * m + u * p + d;
  }, t.prototype._render = function(e) {
    this.calculateVertices(), e.batch.setObjectRenderer(e.plugins[this.pluginName]), e.plugins[this.pluginName].render(this);
  }, t.prototype._calculateBounds = function() {
    var e = this._texture.trim, i = this._texture.orig;
    !e || e.width === i.width && e.height === i.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData));
  }, t.prototype.getLocalBounds = function(e) {
    return this.children.length === 0 ? (this._localBounds || (this._localBounds = new lv()), this._localBounds.minX = this._texture.orig.width * -this._anchor._x, this._localBounds.minY = this._texture.orig.height * -this._anchor._y, this._localBounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._localBounds.maxY = this._texture.orig.height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new Pt()), e = this._localBoundsRect), this._localBounds.getRectangle(e)) : r.prototype.getLocalBounds.call(this, e);
  }, t.prototype.containsPoint = function(e) {
    this.worldTransform.applyInverse(e, Gl);
    var i = this._texture.orig.width, n = this._texture.orig.height, s = -i * this.anchor.x, a = 0;
    return Gl.x >= s && Gl.x < s + i && (a = -n * this.anchor.y, Gl.y >= a && Gl.y < a + n);
  }, t.prototype.destroy = function(e) {
    r.prototype.destroy.call(this, e), this._texture.off("update", this._onTextureUpdate, this), this._anchor = null;
    var i = typeof e == "boolean" ? e : e && e.texture;
    if (i) {
      var n = typeof e == "boolean" ? e : e && e.baseTexture;
      this._texture.destroy(!!n);
    }
    this._texture = null;
  }, t.from = function(e, i) {
    var n = e instanceof It ? e : It.from(e, i);
    return new t(n);
  }, Object.defineProperty(t.prototype, "roundPixels", {
    get: function() {
      return this._roundPixels;
    },
    set: function(e) {
      this._roundPixels !== e && (this._transformID = -1), this._roundPixels = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "width", {
    get: function() {
      return Math.abs(this.scale.x) * this._texture.orig.width;
    },
    set: function(e) {
      var i = Bu(this.scale.x) || 1;
      this.scale.x = i * e / this._texture.orig.width, this._width = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    get: function() {
      return Math.abs(this.scale.y) * this._texture.orig.height;
    },
    set: function(e) {
      var i = Bu(this.scale.y) || 1;
      this.scale.y = i * e / this._texture.orig.height, this._height = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "anchor", {
    get: function() {
      return this._anchor;
    },
    set: function(e) {
      this._anchor.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "tint", {
    get: function() {
      return this._tint;
    },
    set: function(e) {
      this._tint = e, this._tintRGB = (e >> 16) + (e & 65280) + ((e & 255) << 16);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "texture", {
    get: function() {
      return this._texture;
    },
    set: function(e) {
      this._texture !== e && (this._texture && this._texture.off("update", this._onTextureUpdate, this), this._texture = e || It.EMPTY, this._cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, e && (e.baseTexture.valid ? this._onTextureUpdate() : e.once("update", this._onTextureUpdate, this)));
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(ge);
/*!
 * @pixi/text - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var I_ = function(r, t) {
  return I_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, I_(r, t);
};
function QM(r, t) {
  I_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var zc;
(function(r) {
  r[r.LINEAR_VERTICAL = 0] = "LINEAR_VERTICAL", r[r.LINEAR_HORIZONTAL = 1] = "LINEAR_HORIZONTAL";
})(zc || (zc = {}));
var Cm = {
  align: "left",
  breakWords: !1,
  dropShadow: !1,
  dropShadowAlpha: 1,
  dropShadowAngle: Math.PI / 6,
  dropShadowBlur: 0,
  dropShadowColor: "black",
  dropShadowDistance: 5,
  fill: "black",
  fillGradientType: zc.LINEAR_VERTICAL,
  fillGradientStops: [],
  fontFamily: "Arial",
  fontSize: 26,
  fontStyle: "normal",
  fontVariant: "normal",
  fontWeight: "normal",
  letterSpacing: 0,
  lineHeight: 0,
  lineJoin: "miter",
  miterLimit: 10,
  padding: 0,
  stroke: "black",
  strokeThickness: 0,
  textBaseline: "alphabetic",
  trim: !1,
  whiteSpace: "pre",
  wordWrap: !1,
  wordWrapWidth: 100,
  leading: 0
}, tk = [
  "serif",
  "sans-serif",
  "monospace",
  "cursive",
  "fantasy",
  "system-ui"
], iu = function() {
  function r(t) {
    this.styleID = 0, this.reset(), Rm(this, t, t);
  }
  return r.prototype.clone = function() {
    var t = {};
    return Rm(t, this, Cm), new r(t);
  }, r.prototype.reset = function() {
    Rm(this, Cm, Cm);
  }, Object.defineProperty(r.prototype, "align", {
    get: function() {
      return this._align;
    },
    set: function(t) {
      this._align !== t && (this._align = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "breakWords", {
    get: function() {
      return this._breakWords;
    },
    set: function(t) {
      this._breakWords !== t && (this._breakWords = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "dropShadow", {
    get: function() {
      return this._dropShadow;
    },
    set: function(t) {
      this._dropShadow !== t && (this._dropShadow = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "dropShadowAlpha", {
    get: function() {
      return this._dropShadowAlpha;
    },
    set: function(t) {
      this._dropShadowAlpha !== t && (this._dropShadowAlpha = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "dropShadowAngle", {
    get: function() {
      return this._dropShadowAngle;
    },
    set: function(t) {
      this._dropShadowAngle !== t && (this._dropShadowAngle = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "dropShadowBlur", {
    get: function() {
      return this._dropShadowBlur;
    },
    set: function(t) {
      this._dropShadowBlur !== t && (this._dropShadowBlur = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "dropShadowColor", {
    get: function() {
      return this._dropShadowColor;
    },
    set: function(t) {
      var e = Im(t);
      this._dropShadowColor !== e && (this._dropShadowColor = e, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "dropShadowDistance", {
    get: function() {
      return this._dropShadowDistance;
    },
    set: function(t) {
      this._dropShadowDistance !== t && (this._dropShadowDistance = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fill", {
    get: function() {
      return this._fill;
    },
    set: function(t) {
      var e = Im(t);
      this._fill !== e && (this._fill = e, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fillGradientType", {
    get: function() {
      return this._fillGradientType;
    },
    set: function(t) {
      this._fillGradientType !== t && (this._fillGradientType = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fillGradientStops", {
    get: function() {
      return this._fillGradientStops;
    },
    set: function(t) {
      ek(this._fillGradientStops, t) || (this._fillGradientStops = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fontFamily", {
    get: function() {
      return this._fontFamily;
    },
    set: function(t) {
      this.fontFamily !== t && (this._fontFamily = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fontSize", {
    get: function() {
      return this._fontSize;
    },
    set: function(t) {
      this._fontSize !== t && (this._fontSize = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fontStyle", {
    get: function() {
      return this._fontStyle;
    },
    set: function(t) {
      this._fontStyle !== t && (this._fontStyle = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fontVariant", {
    get: function() {
      return this._fontVariant;
    },
    set: function(t) {
      this._fontVariant !== t && (this._fontVariant = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "fontWeight", {
    get: function() {
      return this._fontWeight;
    },
    set: function(t) {
      this._fontWeight !== t && (this._fontWeight = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "letterSpacing", {
    get: function() {
      return this._letterSpacing;
    },
    set: function(t) {
      this._letterSpacing !== t && (this._letterSpacing = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "lineHeight", {
    get: function() {
      return this._lineHeight;
    },
    set: function(t) {
      this._lineHeight !== t && (this._lineHeight = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "leading", {
    get: function() {
      return this._leading;
    },
    set: function(t) {
      this._leading !== t && (this._leading = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "lineJoin", {
    get: function() {
      return this._lineJoin;
    },
    set: function(t) {
      this._lineJoin !== t && (this._lineJoin = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "miterLimit", {
    get: function() {
      return this._miterLimit;
    },
    set: function(t) {
      this._miterLimit !== t && (this._miterLimit = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "padding", {
    get: function() {
      return this._padding;
    },
    set: function(t) {
      this._padding !== t && (this._padding = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "stroke", {
    get: function() {
      return this._stroke;
    },
    set: function(t) {
      var e = Im(t);
      this._stroke !== e && (this._stroke = e, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "strokeThickness", {
    get: function() {
      return this._strokeThickness;
    },
    set: function(t) {
      this._strokeThickness !== t && (this._strokeThickness = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "textBaseline", {
    get: function() {
      return this._textBaseline;
    },
    set: function(t) {
      this._textBaseline !== t && (this._textBaseline = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "trim", {
    get: function() {
      return this._trim;
    },
    set: function(t) {
      this._trim !== t && (this._trim = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "whiteSpace", {
    get: function() {
      return this._whiteSpace;
    },
    set: function(t) {
      this._whiteSpace !== t && (this._whiteSpace = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "wordWrap", {
    get: function() {
      return this._wordWrap;
    },
    set: function(t) {
      this._wordWrap !== t && (this._wordWrap = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "wordWrapWidth", {
    get: function() {
      return this._wordWrapWidth;
    },
    set: function(t) {
      this._wordWrapWidth !== t && (this._wordWrapWidth = t, this.styleID++);
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.toFontString = function() {
    var t = typeof this.fontSize == "number" ? this.fontSize + "px" : this.fontSize, e = this.fontFamily;
    Array.isArray(this.fontFamily) || (e = this.fontFamily.split(","));
    for (var i = e.length - 1; i >= 0; i--) {
      var n = e[i].trim();
      !/([\"\'])[^\'\"]+\1/.test(n) && tk.indexOf(n) < 0 && (n = '"' + n + '"'), e[i] = n;
    }
    return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + t + " " + e.join(",");
  }, r;
}();
function yE(r) {
  return typeof r == "number" ? RT(r) : (typeof r == "string" && r.indexOf("0x") === 0 && (r = r.replace("0x", "#")), r);
}
function Im(r) {
  if (Array.isArray(r)) {
    for (var t = 0; t < r.length; ++t)
      r[t] = yE(r[t]);
    return r;
  } else
    return yE(r);
}
function ek(r, t) {
  if (!Array.isArray(r) || !Array.isArray(t) || r.length !== t.length)
    return !1;
  for (var e = 0; e < r.length; ++e)
    if (r[e] !== t[e])
      return !1;
  return !0;
}
function Rm(r, t, e) {
  for (var i in e)
    Array.isArray(t[i]) ? r[i] = t[i].slice() : r[i] = t[i];
}
var Bn = function() {
  function r(t, e, i, n, s, a, o, u, h) {
    this.text = t, this.style = e, this.width = i, this.height = n, this.lines = s, this.lineWidths = a, this.lineHeight = o, this.maxLineWidth = u, this.fontProperties = h;
  }
  return r.measureText = function(t, e, i, n) {
    n === void 0 && (n = r._canvas), i = i == null ? e.wordWrap : i;
    var s = e.toFontString(), a = r.measureFont(s);
    a.fontSize === 0 && (a.fontSize = e.fontSize, a.ascent = e.fontSize);
    var o = n.getContext("2d");
    o.font = s;
    for (var u = i ? r.wordWrap(t, e, n) : t, h = u.split(/(?:\r\n|\r|\n)/), l = new Array(h.length), c = 0, d = 0; d < h.length; d++) {
      var p = o.measureText(h[d]).width + (h[d].length - 1) * e.letterSpacing;
      l[d] = p, c = Math.max(c, p);
    }
    var g = c + e.strokeThickness;
    e.dropShadow && (g += e.dropShadowDistance);
    var v = e.lineHeight || a.fontSize + e.strokeThickness, m = Math.max(v, a.fontSize + e.strokeThickness) + (h.length - 1) * (v + e.leading);
    return e.dropShadow && (m += e.dropShadowDistance), new r(t, e, g, m, h, l, v + e.leading, c, a);
  }, r.wordWrap = function(t, e, i) {
    i === void 0 && (i = r._canvas);
    for (var n = i.getContext("2d"), s = 0, a = "", o = "", u = /* @__PURE__ */ Object.create(null), h = e.letterSpacing, l = e.whiteSpace, c = r.collapseSpaces(l), d = r.collapseNewlines(l), p = !c, g = e.wordWrapWidth + h, v = r.tokenize(t), m = 0; m < v.length; m++) {
      var _ = v[m];
      if (r.isNewline(_)) {
        if (!d) {
          o += r.addLine(a), p = !c, a = "", s = 0;
          continue;
        }
        _ = " ";
      }
      if (c) {
        var y = r.isBreakingSpace(_), b = r.isBreakingSpace(a[a.length - 1]);
        if (y && b)
          continue;
      }
      var x = r.getFromCache(_, h, u, n);
      if (x > g)
        if (a !== "" && (o += r.addLine(a), a = "", s = 0), r.canBreakWords(_, e.breakWords))
          for (var w = r.wordWrapSplit(_), E = 0; E < w.length; E++) {
            for (var R = w[E], C = 1; w[E + C]; ) {
              var P = w[E + C], N = R[R.length - 1];
              if (!r.canBreakChars(N, P, _, E, e.breakWords))
                R += P;
              else
                break;
              C++;
            }
            E += R.length - 1;
            var M = r.getFromCache(R, h, u, n);
            M + s > g && (o += r.addLine(a), p = !1, a = "", s = 0), a += R, s += M;
          }
        else {
          a.length > 0 && (o += r.addLine(a), a = "", s = 0);
          var A = m === v.length - 1;
          o += r.addLine(_, !A), p = !1, a = "", s = 0;
        }
      else
        x + s > g && (p = !1, o += r.addLine(a), a = "", s = 0), (a.length > 0 || !r.isBreakingSpace(_) || p) && (a += _, s += x);
    }
    return o += r.addLine(a, !1), o;
  }, r.addLine = function(t, e) {
    return e === void 0 && (e = !0), t = r.trimRight(t), t = e ? t + `
` : t, t;
  }, r.getFromCache = function(t, e, i, n) {
    var s = i[t];
    if (typeof s != "number") {
      var a = t.length * e;
      s = n.measureText(t).width + a, i[t] = s;
    }
    return s;
  }, r.collapseSpaces = function(t) {
    return t === "normal" || t === "pre-line";
  }, r.collapseNewlines = function(t) {
    return t === "normal";
  }, r.trimRight = function(t) {
    if (typeof t != "string")
      return "";
    for (var e = t.length - 1; e >= 0; e--) {
      var i = t[e];
      if (!r.isBreakingSpace(i))
        break;
      t = t.slice(0, -1);
    }
    return t;
  }, r.isNewline = function(t) {
    return typeof t != "string" ? !1 : r._newlines.indexOf(t.charCodeAt(0)) >= 0;
  }, r.isBreakingSpace = function(t, e) {
    return typeof t != "string" ? !1 : r._breakingSpaces.indexOf(t.charCodeAt(0)) >= 0;
  }, r.tokenize = function(t) {
    var e = [], i = "";
    if (typeof t != "string")
      return e;
    for (var n = 0; n < t.length; n++) {
      var s = t[n], a = t[n + 1];
      if (r.isBreakingSpace(s, a) || r.isNewline(s)) {
        i !== "" && (e.push(i), i = ""), e.push(s);
        continue;
      }
      i += s;
    }
    return i !== "" && e.push(i), e;
  }, r.canBreakWords = function(t, e) {
    return e;
  }, r.canBreakChars = function(t, e, i, n, s) {
    return !0;
  }, r.wordWrapSplit = function(t) {
    return t.split("");
  }, r.measureFont = function(t) {
    if (r._fonts[t])
      return r._fonts[t];
    var e = {
      ascent: 0,
      descent: 0,
      fontSize: 0
    }, i = r._canvas, n = r._context;
    n.font = t;
    var s = r.METRICS_STRING + r.BASELINE_SYMBOL, a = Math.ceil(n.measureText(s).width), o = Math.ceil(n.measureText(r.BASELINE_SYMBOL).width), u = Math.ceil(r.HEIGHT_MULTIPLIER * o);
    o = o * r.BASELINE_MULTIPLIER | 0, i.width = a, i.height = u, n.fillStyle = "#f00", n.fillRect(0, 0, a, u), n.font = t, n.textBaseline = "alphabetic", n.fillStyle = "#000", n.fillText(s, 0, o);
    var h = n.getImageData(0, 0, a, u).data, l = h.length, c = a * 4, d = 0, p = 0, g = !1;
    for (d = 0; d < o; ++d) {
      for (var v = 0; v < c; v += 4)
        if (h[p + v] !== 255) {
          g = !0;
          break;
        }
      if (!g)
        p += c;
      else
        break;
    }
    for (e.ascent = o - d, p = l - c, g = !1, d = u; d > o; --d) {
      for (var v = 0; v < c; v += 4)
        if (h[p + v] !== 255) {
          g = !0;
          break;
        }
      if (!g)
        p -= c;
      else
        break;
    }
    return e.descent = d - o, e.fontSize = e.ascent + e.descent, r._fonts[t] = e, e;
  }, r.clearMetrics = function(t) {
    t === void 0 && (t = ""), t ? delete r._fonts[t] : r._fonts = {};
  }, Object.defineProperty(r, "_canvas", {
    get: function() {
      if (!r.__canvas) {
        var t = void 0;
        try {
          var e = new OffscreenCanvas(0, 0), i = e.getContext("2d");
          if (i && i.measureText)
            return r.__canvas = e, e;
          t = gt.ADAPTER.createCanvas();
        } catch {
          t = gt.ADAPTER.createCanvas();
        }
        t.width = t.height = 10, r.__canvas = t;
      }
      return r.__canvas;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r, "_context", {
    get: function() {
      return r.__context || (r.__context = r._canvas.getContext("2d")), r.__context;
    },
    enumerable: !1,
    configurable: !0
  }), r;
}();
Bn._fonts = {};
Bn.METRICS_STRING = "|\xC9q\xC5";
Bn.BASELINE_SYMBOL = "M";
Bn.BASELINE_MULTIPLIER = 1.4;
Bn.HEIGHT_MULTIPLIER = 2;
Bn._newlines = [
  10,
  13
];
Bn._breakingSpaces = [
  9,
  32,
  8192,
  8193,
  8194,
  8195,
  8196,
  8197,
  8198,
  8200,
  8201,
  8202,
  8287,
  12288
];
var rk = {
  texture: !0,
  children: !1,
  baseTexture: !0
}, Nb = function(r) {
  QM(t, r);
  function t(e, i, n) {
    var s = this, a = !1;
    n || (n = gt.ADAPTER.createCanvas(), a = !0), n.width = 3, n.height = 3;
    var o = It.from(n);
    return o.orig = new Pt(), o.trim = new Pt(), s = r.call(this, o) || this, s._ownCanvas = a, s.canvas = n, s.context = n.getContext("2d"), s._resolution = gt.RESOLUTION, s._autoResolution = !0, s._text = null, s._style = null, s._styleListener = null, s._font = "", s.text = e, s.style = i, s.localStyleID = -1, s;
  }
  return t.prototype.updateText = function(e) {
    var i = this._style;
    if (this.localStyleID !== i.styleID && (this.dirty = !0, this.localStyleID = i.styleID), !(!this.dirty && e)) {
      this._font = this._style.toFontString();
      var n = this.context, s = Bn.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas), a = s.width, o = s.height, u = s.lines, h = s.lineHeight, l = s.lineWidths, c = s.maxLineWidth, d = s.fontProperties;
      this.canvas.width = Math.ceil(Math.ceil(Math.max(1, a) + i.padding * 2) * this._resolution), this.canvas.height = Math.ceil(Math.ceil(Math.max(1, o) + i.padding * 2) * this._resolution), n.scale(this._resolution, this._resolution), n.clearRect(0, 0, this.canvas.width, this.canvas.height), n.font = this._font, n.lineWidth = i.strokeThickness, n.textBaseline = i.textBaseline, n.lineJoin = i.lineJoin, n.miterLimit = i.miterLimit;
      for (var p, g, v = i.dropShadow ? 2 : 1, m = 0; m < v; ++m) {
        var _ = i.dropShadow && m === 0, y = _ ? Math.ceil(Math.max(1, o) + i.padding * 2) : 0, b = y * this._resolution;
        if (_) {
          n.fillStyle = "black", n.strokeStyle = "black";
          var x = i.dropShadowColor, w = vl(typeof x == "number" ? x : ST(x)), E = i.dropShadowBlur * this._resolution, R = i.dropShadowDistance * this._resolution;
          n.shadowColor = "rgba(" + w[0] * 255 + "," + w[1] * 255 + "," + w[2] * 255 + "," + i.dropShadowAlpha + ")", n.shadowBlur = E, n.shadowOffsetX = Math.cos(i.dropShadowAngle) * R, n.shadowOffsetY = Math.sin(i.dropShadowAngle) * R + b;
        } else
          n.fillStyle = this._generateFillStyle(i, u, s), n.strokeStyle = i.stroke, n.shadowColor = "black", n.shadowBlur = 0, n.shadowOffsetX = 0, n.shadowOffsetY = 0;
        var C = (h - d.fontSize) / 2;
        (!t.nextLineHeightBehavior || h - d.fontSize < 0) && (C = 0);
        for (var P = 0; P < u.length; P++)
          p = i.strokeThickness / 2, g = i.strokeThickness / 2 + P * h + d.ascent + C, i.align === "right" ? p += c - l[P] : i.align === "center" && (p += (c - l[P]) / 2), i.stroke && i.strokeThickness && this.drawLetterSpacing(u[P], p + i.padding, g + i.padding - y, !0), i.fill && this.drawLetterSpacing(u[P], p + i.padding, g + i.padding - y);
      }
      this.updateTexture();
    }
  }, t.prototype.drawLetterSpacing = function(e, i, n, s) {
    s === void 0 && (s = !1);
    var a = this._style, o = a.letterSpacing, u = t.experimentalLetterSpacing && ("letterSpacing" in CanvasRenderingContext2D.prototype || "textLetterSpacing" in CanvasRenderingContext2D.prototype);
    if (o === 0 || u) {
      u && (this.context.letterSpacing = o, this.context.textLetterSpacing = o), s ? this.context.strokeText(e, i, n) : this.context.fillText(e, i, n);
      return;
    }
    for (var h = i, l = Array.from ? Array.from(e) : e.split(""), c = this.context.measureText(e).width, d = 0, p = 0; p < l.length; ++p) {
      var g = l[p];
      s ? this.context.strokeText(g, h, n) : this.context.fillText(g, h, n);
      for (var v = "", m = p + 1; m < l.length; ++m)
        v += l[m];
      d = this.context.measureText(v).width, h += c - d + o, c = d;
    }
  }, t.prototype.updateTexture = function() {
    var e = this.canvas;
    if (this._style.trim) {
      var i = KO(e);
      i.data && (e.width = i.width, e.height = i.height, this.context.putImageData(i.data, 0, 0));
    }
    var n = this._texture, s = this._style, a = s.trim ? 0 : s.padding, o = n.baseTexture;
    n.trim.width = n._frame.width = e.width / this._resolution, n.trim.height = n._frame.height = e.height / this._resolution, n.trim.x = -a, n.trim.y = -a, n.orig.width = n._frame.width - a * 2, n.orig.height = n._frame.height - a * 2, this._onTextureUpdate(), o.setRealSize(e.width, e.height, this._resolution), n.updateUvs(), this.dirty = !1;
  }, t.prototype._render = function(e) {
    this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution, this.dirty = !0), this.updateText(!0), r.prototype._render.call(this, e);
  }, t.prototype.updateTransform = function() {
    this.updateText(!0), r.prototype.updateTransform.call(this);
  }, t.prototype.getBounds = function(e, i) {
    return this.updateText(!0), this._textureID === -1 && (e = !1), r.prototype.getBounds.call(this, e, i);
  }, t.prototype.getLocalBounds = function(e) {
    return this.updateText(!0), r.prototype.getLocalBounds.call(this, e);
  }, t.prototype._calculateBounds = function() {
    this.calculateVertices(), this._bounds.addQuad(this.vertexData);
  }, t.prototype._generateFillStyle = function(e, i, n) {
    var s = e.fill;
    if (Array.isArray(s)) {
      if (s.length === 1)
        return s[0];
    } else
      return s;
    var a, o = e.dropShadow ? e.dropShadowDistance : 0, u = e.padding || 0, h = this.canvas.width / this._resolution - o - u * 2, l = this.canvas.height / this._resolution - o - u * 2, c = s.slice(), d = e.fillGradientStops.slice();
    if (!d.length)
      for (var p = c.length + 1, g = 1; g < p; ++g)
        d.push(g / p);
    if (c.unshift(s[0]), d.unshift(0), c.push(s[s.length - 1]), d.push(1), e.fillGradientType === zc.LINEAR_VERTICAL) {
      a = this.context.createLinearGradient(h / 2, u, h / 2, l + u);
      for (var v = n.fontProperties.fontSize + e.strokeThickness, g = 0; g < i.length; g++) {
        var m = n.lineHeight * (g - 1) + v, _ = n.lineHeight * g, y = _;
        g > 0 && m > _ && (y = (_ + m) / 2);
        var b = _ + v, x = n.lineHeight * (g + 1), w = b;
        g + 1 < i.length && x < b && (w = (b + x) / 2);
        for (var E = (w - y) / l, R = 0; R < c.length; R++) {
          var C = 0;
          typeof d[R] == "number" ? C = d[R] : C = R / c.length;
          var P = Math.min(1, Math.max(0, y / l + C * E));
          P = Number(P.toFixed(5)), a.addColorStop(P, c[R]);
        }
      }
    } else {
      a = this.context.createLinearGradient(u, l / 2, h + u, l / 2);
      for (var N = c.length + 1, M = 1, g = 0; g < c.length; g++) {
        var A = void 0;
        typeof d[g] == "number" ? A = d[g] : A = M / N, a.addColorStop(A, c[g]), M++;
      }
    }
    return a;
  }, t.prototype.destroy = function(e) {
    typeof e == "boolean" && (e = { children: e }), e = Object.assign({}, rk, e), r.prototype.destroy.call(this, e), this._ownCanvas && (this.canvas.height = this.canvas.width = 0), this.context = null, this.canvas = null, this._style = null;
  }, Object.defineProperty(t.prototype, "width", {
    get: function() {
      return this.updateText(!0), Math.abs(this.scale.x) * this._texture.orig.width;
    },
    set: function(e) {
      this.updateText(!0);
      var i = Bu(this.scale.x) || 1;
      this.scale.x = i * e / this._texture.orig.width, this._width = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    get: function() {
      return this.updateText(!0), Math.abs(this.scale.y) * this._texture.orig.height;
    },
    set: function(e) {
      this.updateText(!0);
      var i = Bu(this.scale.y) || 1;
      this.scale.y = i * e / this._texture.orig.height, this._height = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "style", {
    get: function() {
      return this._style;
    },
    set: function(e) {
      e = e || {}, e instanceof iu ? this._style = e : this._style = new iu(e), this.localStyleID = -1, this.dirty = !0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "text", {
    get: function() {
      return this._text;
    },
    set: function(e) {
      e = String(e == null ? "" : e), this._text !== e && (this._text = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "resolution", {
    get: function() {
      return this._resolution;
    },
    set: function(e) {
      this._autoResolution = !1, this._resolution !== e && (this._resolution = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), t.nextLineHeightBehavior = !1, t.experimentalLetterSpacing = !1, t;
}(qe);
/*!
 * @pixi/prepare - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
gt.UPLOADS_PER_FRAME = 4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var R_ = function(r, t) {
  return R_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, R_(r, t);
};
function ik(r, t) {
  R_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var nk = function() {
  function r(t) {
    this.maxItemsPerFrame = t, this.itemsLeft = 0;
  }
  return r.prototype.beginFrame = function() {
    this.itemsLeft = this.maxItemsPerFrame;
  }, r.prototype.allowedToUpload = function() {
    return this.itemsLeft-- > 0;
  }, r;
}();
function sk(r, t) {
  var e = !1;
  if (r && r._textures && r._textures.length) {
    for (var i = 0; i < r._textures.length; i++)
      if (r._textures[i] instanceof It) {
        var n = r._textures[i].baseTexture;
        t.indexOf(n) === -1 && (t.push(n), e = !0);
      }
  }
  return e;
}
function ak(r, t) {
  if (r.baseTexture instanceof Zt) {
    var e = r.baseTexture;
    return t.indexOf(e) === -1 && t.push(e), !0;
  }
  return !1;
}
function ok(r, t) {
  if (r._texture && r._texture instanceof It) {
    var e = r._texture.baseTexture;
    return t.indexOf(e) === -1 && t.push(e), !0;
  }
  return !1;
}
function uk(r, t) {
  return t instanceof Nb ? (t.updateText(!0), !0) : !1;
}
function hk(r, t) {
  if (t instanceof iu) {
    var e = t.toFontString();
    return Bn.measureFont(e), !0;
  }
  return !1;
}
function lk(r, t) {
  if (r instanceof Nb) {
    t.indexOf(r.style) === -1 && t.push(r.style), t.indexOf(r) === -1 && t.push(r);
    var e = r._texture.baseTexture;
    return t.indexOf(e) === -1 && t.push(e), !0;
  }
  return !1;
}
function ck(r, t) {
  return r instanceof iu ? (t.indexOf(r) === -1 && t.push(r), !0) : !1;
}
var fk = function() {
  function r(t) {
    var e = this;
    this.limiter = new nk(gt.UPLOADS_PER_FRAME), this.renderer = t, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = !1, this.delayedTick = function() {
      !e.queue || e.prepareItems();
    }, this.registerFindHook(lk), this.registerFindHook(ck), this.registerFindHook(sk), this.registerFindHook(ak), this.registerFindHook(ok), this.registerUploadHook(uk), this.registerUploadHook(hk);
  }
  return r.prototype.upload = function(t, e) {
    var i = this;
    return typeof t == "function" && (e = t, t = null), e && Rn("6.5.0", "BasePrepare.upload callback is deprecated, use the return Promise instead."), new Promise(function(n) {
      t && i.add(t);
      var s = function() {
        e == null || e(), n();
      };
      i.queue.length ? (i.completes.push(s), i.ticking || (i.ticking = !0, He.system.addOnce(i.tick, i, Ss.UTILITY))) : s();
    });
  }, r.prototype.tick = function() {
    setTimeout(this.delayedTick, 0);
  }, r.prototype.prepareItems = function() {
    for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload(); ) {
      var t = this.queue[0], e = !1;
      if (t && !t._destroyed) {
        for (var i = 0, n = this.uploadHooks.length; i < n; i++)
          if (this.uploadHooks[i](this.uploadHookHelper, t)) {
            this.queue.shift(), e = !0;
            break;
          }
      }
      e || this.queue.shift();
    }
    if (this.queue.length)
      He.system.addOnce(this.tick, this, Ss.UTILITY);
    else {
      this.ticking = !1;
      var s = this.completes.slice(0);
      this.completes.length = 0;
      for (var i = 0, n = s.length; i < n; i++)
        s[i]();
    }
  }, r.prototype.registerFindHook = function(t) {
    return t && this.addHooks.push(t), this;
  }, r.prototype.registerUploadHook = function(t) {
    return t && this.uploadHooks.push(t), this;
  }, r.prototype.add = function(t) {
    for (var e = 0, i = this.addHooks.length; e < i && !this.addHooks[e](t, this.queue); e++)
      ;
    if (t instanceof ge)
      for (var e = t.children.length - 1; e >= 0; e--)
        this.add(t.children[e]);
    return this;
  }, r.prototype.destroy = function() {
    this.ticking && He.system.remove(this.tick, this), this.ticking = !1, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null;
  }, r;
}();
function sC(r, t) {
  return t instanceof Zt ? (t._glTextures[r.CONTEXT_UID] || r.texture.bind(t), !0) : !1;
}
function dk(r, t) {
  if (!(t instanceof di))
    return !1;
  var e = t.geometry;
  t.finishPoly(), e.updateBatches();
  for (var i = e.batches, n = 0; n < i.length; n++) {
    var s = i[n].style.texture;
    s && sC(r, s.baseTexture);
  }
  return e.batchable || r.geometry.bind(e, t._resolveDirectShader(r)), !0;
}
function pk(r, t) {
  return r instanceof di ? (t.push(r), !0) : !1;
}
var vk = function(r) {
  ik(t, r);
  function t(e) {
    var i = r.call(this, e) || this;
    return i.uploadHookHelper = i.renderer, i.registerFindHook(pk), i.registerUploadHook(sC), i.registerUploadHook(dk), i;
  }
  return t.extension = {
    name: "prepare",
    type: me.RendererPlugin
  }, t;
}(fk);
/*!
 * @pixi/spritesheet - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var gk = function() {
  function r(t, e, i) {
    i === void 0 && (i = null), this.linkedSheets = [], this._texture = t instanceof It ? t : null, this.baseTexture = t instanceof Zt ? t : this._texture.baseTexture, this.textures = {}, this.animations = {}, this.data = e;
    var n = this.baseTexture.resource;
    this.resolution = this._updateResolution(i || (n ? n.url : null)), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null;
  }
  return r.prototype._updateResolution = function(t) {
    t === void 0 && (t = null);
    var e = this.data.meta.scale, i = uv(t, null);
    return i === null && (i = e !== void 0 ? parseFloat(e) : 1), i !== 1 && this.baseTexture.setResolution(i), i;
  }, r.prototype.parse = function(t) {
    var e = this;
    return t && Rn("6.5.0", "Spritesheet.parse callback is deprecated, use the return Promise instead."), new Promise(function(i) {
      e._callback = function(n) {
        t == null || t(n), i(n);
      }, e._batchIndex = 0, e._frameKeys.length <= r.BATCH_SIZE ? (e._processFrames(0), e._processAnimations(), e._parseComplete()) : e._nextBatch();
    });
  }, r.prototype._processFrames = function(t) {
    for (var e = t, i = r.BATCH_SIZE; e - t < i && e < this._frameKeys.length; ) {
      var n = this._frameKeys[e], s = this._frames[n], a = s.frame;
      if (a) {
        var o = null, u = null, h = s.trimmed !== !1 && s.sourceSize ? s.sourceSize : s.frame, l = new Pt(0, 0, Math.floor(h.w) / this.resolution, Math.floor(h.h) / this.resolution);
        s.rotated ? o = new Pt(Math.floor(a.x) / this.resolution, Math.floor(a.y) / this.resolution, Math.floor(a.h) / this.resolution, Math.floor(a.w) / this.resolution) : o = new Pt(Math.floor(a.x) / this.resolution, Math.floor(a.y) / this.resolution, Math.floor(a.w) / this.resolution, Math.floor(a.h) / this.resolution), s.trimmed !== !1 && s.spriteSourceSize && (u = new Pt(Math.floor(s.spriteSourceSize.x) / this.resolution, Math.floor(s.spriteSourceSize.y) / this.resolution, Math.floor(a.w) / this.resolution, Math.floor(a.h) / this.resolution)), this.textures[n] = new It(this.baseTexture, o, l, u, s.rotated ? 2 : 0, s.anchor), It.addToCache(this.textures[n], n);
      }
      e++;
    }
  }, r.prototype._processAnimations = function() {
    var t = this.data.animations || {};
    for (var e in t) {
      this.animations[e] = [];
      for (var i = 0; i < t[e].length; i++) {
        var n = t[e][i];
        this.animations[e].push(this.textures[n]);
      }
    }
  }, r.prototype._parseComplete = function() {
    var t = this._callback;
    this._callback = null, this._batchIndex = 0, t.call(this, this.textures);
  }, r.prototype._nextBatch = function() {
    var t = this;
    this._processFrames(this._batchIndex * r.BATCH_SIZE), this._batchIndex++, setTimeout(function() {
      t._batchIndex * r.BATCH_SIZE < t._frameKeys.length ? t._nextBatch() : (t._processAnimations(), t._parseComplete());
    }, 0);
  }, r.prototype.destroy = function(t) {
    var e;
    t === void 0 && (t = !1);
    for (var i in this.textures)
      this.textures[i].destroy();
    this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, t && ((e = this._texture) === null || e === void 0 || e.destroy(), this.baseTexture.destroy()), this._texture = null, this.baseTexture = null, this.linkedSheets = [];
  }, r.BATCH_SIZE = 1e3, r;
}(), mk = function() {
  function r() {
  }
  return r.use = function(t, e) {
    var i, n, s = this, a = t.name + "_image";
    if (!t.data || t.type !== Lt.TYPE.JSON || !t.data.frames || s.resources[a]) {
      e();
      return;
    }
    var o = (n = (i = t.data) === null || i === void 0 ? void 0 : i.meta) === null || n === void 0 ? void 0 : n.related_multi_packs;
    if (Array.isArray(o))
      for (var u = function(g) {
        if (typeof g != "string")
          return "continue";
        var v = g.replace(".json", ""), m = ku.resolve(t.url.replace(s.baseUrl, ""), g);
        if (s.resources[v] || Object.values(s.resources).some(function(y) {
          return ku.format(ku.parse(y.url)) === m;
        }))
          return "continue";
        var _ = {
          crossOrigin: t.crossOrigin,
          loadType: Lt.LOAD_TYPE.XHR,
          xhrType: Lt.XHR_RESPONSE_TYPE.JSON,
          parentResource: t,
          metadata: t.metadata
        };
        s.add(v, m, _);
      }, h = 0, l = o; h < l.length; h++) {
        var c = l[h];
        u(c);
      }
    var d = {
      crossOrigin: t.crossOrigin,
      metadata: t.metadata.imageMetadata,
      parentResource: t
    }, p = r.getResourcePath(t, s.baseUrl);
    s.add(a, p, d, function(v) {
      if (v.error) {
        e(v.error);
        return;
      }
      var m = new gk(v.texture, t.data, t.url);
      m.parse().then(function() {
        t.spritesheet = m, t.textures = m.textures, e();
      });
    });
  }, r.getResourcePath = function(t, e) {
    return t.isDataUrl ? t.data.meta.image : ku.resolve(t.url.replace(e, ""), t.data.meta.image);
  }, r.extension = me.Loader, r;
}();
/*!
 * @pixi/sprite-tiling - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var S_ = function(r, t) {
  return S_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, S_(r, t);
};
function aC(r, t) {
  S_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Hl = new Ee();
(function(r) {
  aC(t, r);
  function t(e, i, n) {
    i === void 0 && (i = 100), n === void 0 && (n = 100);
    var s = r.call(this, e) || this;
    return s.tileTransform = new MT(), s._width = i, s._height = n, s.uvMatrix = s.texture.uvMatrix || new Sb(e), s.pluginName = "tilingSprite", s.uvRespectAnchor = !1, s;
  }
  return Object.defineProperty(t.prototype, "clampMargin", {
    get: function() {
      return this.uvMatrix.clampMargin;
    },
    set: function(e) {
      this.uvMatrix.clampMargin = e, this.uvMatrix.update(!0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "tileScale", {
    get: function() {
      return this.tileTransform.scale;
    },
    set: function(e) {
      this.tileTransform.scale.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "tilePosition", {
    get: function() {
      return this.tileTransform.position;
    },
    set: function(e) {
      this.tileTransform.position.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype._onTextureUpdate = function() {
    this.uvMatrix && (this.uvMatrix.texture = this._texture), this._cachedTint = 16777215;
  }, t.prototype._render = function(e) {
    var i = this._texture;
    !i || !i.valid || (this.tileTransform.updateLocalTransform(), this.uvMatrix.update(), e.batch.setObjectRenderer(e.plugins[this.pluginName]), e.plugins[this.pluginName].render(this));
  }, t.prototype._calculateBounds = function() {
    var e = this._width * -this._anchor._x, i = this._height * -this._anchor._y, n = this._width * (1 - this._anchor._x), s = this._height * (1 - this._anchor._y);
    this._bounds.addFrame(this.transform, e, i, n, s);
  }, t.prototype.getLocalBounds = function(e) {
    return this.children.length === 0 ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new Pt()), e = this._localBoundsRect), this._bounds.getRectangle(e)) : r.prototype.getLocalBounds.call(this, e);
  }, t.prototype.containsPoint = function(e) {
    this.worldTransform.applyInverse(e, Hl);
    var i = this._width, n = this._height, s = -i * this.anchor._x;
    if (Hl.x >= s && Hl.x < s + i) {
      var a = -n * this.anchor._y;
      if (Hl.y >= a && Hl.y < a + n)
        return !0;
    }
    return !1;
  }, t.prototype.destroy = function(e) {
    r.prototype.destroy.call(this, e), this.tileTransform = null, this.uvMatrix = null;
  }, t.from = function(e, i) {
    var n = e instanceof It ? e : It.from(e, i);
    return new t(n, i.width, i.height);
  }, Object.defineProperty(t.prototype, "width", {
    get: function() {
      return this._width;
    },
    set: function(e) {
      this._width = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    get: function() {
      return this._height;
    },
    set: function(e) {
      this._height = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
})(qe);
var _k = `#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`, bE = `#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`, yk = `#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`, bk = `#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`, xk = `#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`, Qd = new lr(), Ek = function(r) {
  aC(t, r);
  function t(e) {
    var i = r.call(this, e) || this;
    return e.runners.contextChange.add(i), i.quad = new HT(), i.state = uu.for2d(), i;
  }
  return t.prototype.contextChange = function() {
    var e = this.renderer, i = { globals: e.globalUniforms };
    this.simpleShader = Ra.from(bE, _k, i), this.shader = e.context.webGLVersion > 1 ? Ra.from(bk, xk, i) : Ra.from(bE, yk, i);
  }, t.prototype.render = function(e) {
    var i = this.renderer, n = this.quad, s = n.vertices;
    s[0] = s[6] = e._width * -e.anchor.x, s[1] = s[3] = e._height * -e.anchor.y, s[2] = s[4] = e._width * (1 - e.anchor.x), s[5] = s[7] = e._height * (1 - e.anchor.y);
    var a = e.uvRespectAnchor ? e.anchor.x : 0, o = e.uvRespectAnchor ? e.anchor.y : 0;
    s = n.uvs, s[0] = s[6] = -a, s[1] = s[3] = -o, s[2] = s[4] = 1 - a, s[5] = s[7] = 1 - o, n.invalidate();
    var u = e._texture, h = u.baseTexture, l = h.alphaMode > 0, c = e.tileTransform.localTransform, d = e.uvMatrix, p = h.isPowerOfTwo && u.frame.width === h.width && u.frame.height === h.height;
    p && (h._glTextures[i.CONTEXT_UID] ? p = h.wrapMode !== xs.CLAMP : h.wrapMode === xs.CLAMP && (h.wrapMode = xs.REPEAT));
    var g = p ? this.simpleShader : this.shader, v = u.width, m = u.height, _ = e._width, y = e._height;
    Qd.set(c.a * v / _, c.b * v / y, c.c * m / _, c.d * m / y, c.tx / _, c.ty / y), Qd.invert(), p ? Qd.prepend(d.mapCoord) : (g.uniforms.uMapCoord = d.mapCoord.toArray(!0), g.uniforms.uClampFrame = d.uClampFrame, g.uniforms.uClampOffset = d.uClampOffset), g.uniforms.uTransform = Qd.toArray(!0), g.uniforms.uColor = OT(e.tint, e.worldAlpha, g.uniforms.uColor, l), g.uniforms.translationMatrix = e.transform.worldTransform.toArray(!0), g.uniforms.uSampler = u, i.shader.bind(g), i.geometry.bind(n), this.state.blendMode = NT(e.blendMode, l), i.state.set(this.state), i.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);
  }, t.extension = {
    name: "tilingSprite",
    type: me.RendererPlugin
  }, t;
}(Og);
/*!
 * @pixi/mesh - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var P_ = function(r, t) {
  return P_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, P_(r, t);
};
function Ob(r, t) {
  P_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var wk = function() {
  function r(t, e) {
    this.uvBuffer = t, this.uvMatrix = e, this.data = null, this._bufferUpdateId = -1, this._textureUpdateId = -1, this._updateID = 0;
  }
  return r.prototype.update = function(t) {
    if (!(!t && this._bufferUpdateId === this.uvBuffer._updateID && this._textureUpdateId === this.uvMatrix._updateID)) {
      this._bufferUpdateId = this.uvBuffer._updateID, this._textureUpdateId = this.uvMatrix._updateID;
      var e = this.uvBuffer.data;
      (!this.data || this.data.length !== e.length) && (this.data = new Float32Array(e.length)), this.uvMatrix.multiplyUvs(e, this.data), this._updateID++;
    }
  }, r;
}(), Sm = new Ee(), xE = new yp(), jc = function(r) {
  Ob(t, r);
  function t(e, i, n, s) {
    s === void 0 && (s = qi.TRIANGLES);
    var a = r.call(this) || this;
    return a.geometry = e, a.shader = i, a.state = n || uu.for2d(), a.drawMode = s, a.start = 0, a.size = 0, a.uvs = null, a.indices = null, a.vertexData = new Float32Array(1), a.vertexDirty = -1, a._transformID = -1, a._roundPixels = gt.ROUND_PIXELS, a.batchUvs = null, a;
  }
  return Object.defineProperty(t.prototype, "geometry", {
    get: function() {
      return this._geometry;
    },
    set: function(e) {
      this._geometry !== e && (this._geometry && (this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose()), this._geometry = e, this._geometry && this._geometry.refCount++, this.vertexDirty = -1);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "uvBuffer", {
    get: function() {
      return this.geometry.buffers[1];
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "verticesBuffer", {
    get: function() {
      return this.geometry.buffers[0];
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "material", {
    get: function() {
      return this.shader;
    },
    set: function(e) {
      this.shader = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "blendMode", {
    get: function() {
      return this.state.blendMode;
    },
    set: function(e) {
      this.state.blendMode = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "roundPixels", {
    get: function() {
      return this._roundPixels;
    },
    set: function(e) {
      this._roundPixels !== e && (this._transformID = -1), this._roundPixels = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "tint", {
    get: function() {
      return "tint" in this.shader ? this.shader.tint : null;
    },
    set: function(e) {
      this.shader.tint = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "texture", {
    get: function() {
      return "texture" in this.shader ? this.shader.texture : null;
    },
    set: function(e) {
      this.shader.texture = e;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype._render = function(e) {
    var i = this.geometry.buffers[0].data, n = this.shader;
    n.batchable && this.drawMode === qi.TRIANGLES && i.length < t.BATCHABLE_SIZE * 2 ? this._renderToBatch(e) : this._renderDefault(e);
  }, t.prototype._renderDefault = function(e) {
    var i = this.shader;
    i.alpha = this.worldAlpha, i.update && i.update(), e.batch.flush(), i.uniforms.translationMatrix = this.transform.worldTransform.toArray(!0), e.shader.bind(i), e.state.set(this.state), e.geometry.bind(this.geometry, i), e.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount);
  }, t.prototype._renderToBatch = function(e) {
    var i = this.geometry, n = this.shader;
    n.uvMatrix && (n.uvMatrix.update(), this.calculateUvs()), this.calculateVertices(), this.indices = i.indexBuffer.data, this._tintRGB = n._tintRGB, this._texture = n.texture;
    var s = this.material.pluginName;
    e.batch.setObjectRenderer(e.plugins[s]), e.plugins[s].render(this);
  }, t.prototype.calculateVertices = function() {
    var e = this.geometry, i = e.buffers[0], n = i.data, s = i._updateID;
    if (!(s === this.vertexDirty && this._transformID === this.transform._worldID)) {
      this._transformID = this.transform._worldID, this.vertexData.length !== n.length && (this.vertexData = new Float32Array(n.length));
      for (var a = this.transform.worldTransform, o = a.a, u = a.b, h = a.c, l = a.d, c = a.tx, d = a.ty, p = this.vertexData, g = 0; g < p.length / 2; g++) {
        var v = n[g * 2], m = n[g * 2 + 1];
        p[g * 2] = o * v + h * m + c, p[g * 2 + 1] = u * v + l * m + d;
      }
      if (this._roundPixels)
        for (var _ = gt.RESOLUTION, g = 0; g < p.length; ++g)
          p[g] = Math.round((p[g] * _ | 0) / _);
      this.vertexDirty = s;
    }
  }, t.prototype.calculateUvs = function() {
    var e = this.geometry.buffers[1], i = this.shader;
    i.uvMatrix.isSimple ? this.uvs = e.data : (this.batchUvs || (this.batchUvs = new wk(e, i.uvMatrix)), this.batchUvs.update(), this.uvs = this.batchUvs.data);
  }, t.prototype._calculateBounds = function() {
    this.calculateVertices(), this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length);
  }, t.prototype.containsPoint = function(e) {
    if (!this.getBounds().contains(e.x, e.y))
      return !1;
    this.worldTransform.applyInverse(e, Sm);
    for (var i = this.geometry.getBuffer("aVertexPosition").data, n = xE.points, s = this.geometry.getIndex().data, a = s.length, o = this.drawMode === 4 ? 3 : 1, u = 0; u + 2 < a; u += o) {
      var h = s[u] * 2, l = s[u + 1] * 2, c = s[u + 2] * 2;
      if (n[0] = i[h], n[1] = i[h + 1], n[2] = i[l], n[3] = i[l + 1], n[4] = i[c], n[5] = i[c + 1], xE.contains(Sm.x, Sm.y))
        return !0;
    }
    return !1;
  }, t.prototype.destroy = function(e) {
    r.prototype.destroy.call(this, e), this._cachedTexture && (this._cachedTexture.destroy(), this._cachedTexture = null), this.geometry = null, this.shader = null, this.state = null, this.uvs = null, this.indices = null, this.vertexData = null;
  }, t.BATCHABLE_SIZE = 100, t;
}(ge), Tk = `varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`, Ck = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`, $c = function(r) {
  Ob(t, r);
  function t(e, i) {
    var n = this, s = {
      uSampler: e,
      alpha: 1,
      uTextureMatrix: lr.IDENTITY,
      uColor: new Float32Array([1, 1, 1, 1])
    };
    return i = Object.assign({
      tint: 16777215,
      alpha: 1,
      pluginName: "batch"
    }, i), i.uniforms && Object.assign(s, i.uniforms), n = r.call(this, i.program || gd.from(Ck, Tk), s) || this, n._colorDirty = !1, n.uvMatrix = new Sb(e), n.batchable = i.program === void 0, n.pluginName = i.pluginName, n.tint = i.tint, n.alpha = i.alpha, n;
  }
  return Object.defineProperty(t.prototype, "texture", {
    get: function() {
      return this.uniforms.uSampler;
    },
    set: function(e) {
      this.uniforms.uSampler !== e && (!this.uniforms.uSampler.baseTexture.alphaMode != !e.baseTexture.alphaMode && (this._colorDirty = !0), this.uniforms.uSampler = e, this.uvMatrix.texture = e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "alpha", {
    get: function() {
      return this._alpha;
    },
    set: function(e) {
      e !== this._alpha && (this._alpha = e, this._colorDirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "tint", {
    get: function() {
      return this._tint;
    },
    set: function(e) {
      e !== this._tint && (this._tint = e, this._tintRGB = (e >> 16) + (e & 65280) + ((e & 255) << 16), this._colorDirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.update = function() {
    if (this._colorDirty) {
      this._colorDirty = !1;
      var e = this.texture.baseTexture;
      OT(this._tint, this._alpha, this.uniforms.uColor, e.alphaMode);
    }
    this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord);
  }, t;
}(Ra), Ag = function(r) {
  Ob(t, r);
  function t(e, i, n) {
    var s = r.call(this) || this, a = new or(e), o = new or(i, !0), u = new or(n, !0, !0);
    return s.addAttribute("aVertexPosition", a, 2, !1, Tt.FLOAT).addAttribute("aTextureCoord", o, 2, !1, Tt.FLOAT).addIndex(u), s._updateId = -1, s;
  }
  return Object.defineProperty(t.prototype, "vertexDirtyId", {
    get: function() {
      return this.buffers[0]._updateID;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(vd);
/*!
 * @pixi/text-bitmap - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var N_ = function(r, t) {
  return N_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, N_(r, t);
};
function Ik(r, t) {
  N_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var dv = function() {
  function r() {
    this.info = [], this.common = [], this.page = [], this.char = [], this.kerning = [], this.distanceField = [];
  }
  return r;
}(), Rk = function() {
  function r() {
  }
  return r.test = function(t) {
    return typeof t == "string" && t.indexOf("info face=") === 0;
  }, r.parse = function(t) {
    var e = t.match(/^[a-z]+\s+.+$/gm), i = {
      info: [],
      common: [],
      page: [],
      char: [],
      chars: [],
      kerning: [],
      kernings: [],
      distanceField: []
    };
    for (var n in e) {
      var s = e[n].match(/^[a-z]+/gm)[0], a = e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm), o = {};
      for (var u in a) {
        var h = a[u].split("="), l = h[0], c = h[1].replace(/"/gm, ""), d = parseFloat(c), p = isNaN(d) ? c : d;
        o[l] = p;
      }
      i[s].push(o);
    }
    var g = new dv();
    return i.info.forEach(function(v) {
      return g.info.push({
        face: v.face,
        size: parseInt(v.size, 10)
      });
    }), i.common.forEach(function(v) {
      return g.common.push({
        lineHeight: parseInt(v.lineHeight, 10)
      });
    }), i.page.forEach(function(v) {
      return g.page.push({
        id: parseInt(v.id, 10),
        file: v.file
      });
    }), i.char.forEach(function(v) {
      return g.char.push({
        id: parseInt(v.id, 10),
        page: parseInt(v.page, 10),
        x: parseInt(v.x, 10),
        y: parseInt(v.y, 10),
        width: parseInt(v.width, 10),
        height: parseInt(v.height, 10),
        xoffset: parseInt(v.xoffset, 10),
        yoffset: parseInt(v.yoffset, 10),
        xadvance: parseInt(v.xadvance, 10)
      });
    }), i.kerning.forEach(function(v) {
      return g.kerning.push({
        first: parseInt(v.first, 10),
        second: parseInt(v.second, 10),
        amount: parseInt(v.amount, 10)
      });
    }), i.distanceField.forEach(function(v) {
      return g.distanceField.push({
        distanceRange: parseInt(v.distanceRange, 10),
        fieldType: v.fieldType
      });
    }), g;
  }, r;
}(), O_ = function() {
  function r() {
  }
  return r.test = function(t) {
    return t instanceof XMLDocument && t.getElementsByTagName("page").length && t.getElementsByTagName("info")[0].getAttribute("face") !== null;
  }, r.parse = function(t) {
    for (var e = new dv(), i = t.getElementsByTagName("info"), n = t.getElementsByTagName("common"), s = t.getElementsByTagName("page"), a = t.getElementsByTagName("char"), o = t.getElementsByTagName("kerning"), u = t.getElementsByTagName("distanceField"), h = 0; h < i.length; h++)
      e.info.push({
        face: i[h].getAttribute("face"),
        size: parseInt(i[h].getAttribute("size"), 10)
      });
    for (var h = 0; h < n.length; h++)
      e.common.push({
        lineHeight: parseInt(n[h].getAttribute("lineHeight"), 10)
      });
    for (var h = 0; h < s.length; h++)
      e.page.push({
        id: parseInt(s[h].getAttribute("id"), 10) || 0,
        file: s[h].getAttribute("file")
      });
    for (var h = 0; h < a.length; h++) {
      var l = a[h];
      e.char.push({
        id: parseInt(l.getAttribute("id"), 10),
        page: parseInt(l.getAttribute("page"), 10) || 0,
        x: parseInt(l.getAttribute("x"), 10),
        y: parseInt(l.getAttribute("y"), 10),
        width: parseInt(l.getAttribute("width"), 10),
        height: parseInt(l.getAttribute("height"), 10),
        xoffset: parseInt(l.getAttribute("xoffset"), 10),
        yoffset: parseInt(l.getAttribute("yoffset"), 10),
        xadvance: parseInt(l.getAttribute("xadvance"), 10)
      });
    }
    for (var h = 0; h < o.length; h++)
      e.kerning.push({
        first: parseInt(o[h].getAttribute("first"), 10),
        second: parseInt(o[h].getAttribute("second"), 10),
        amount: parseInt(o[h].getAttribute("amount"), 10)
      });
    for (var h = 0; h < u.length; h++)
      e.distanceField.push({
        fieldType: u[h].getAttribute("fieldType"),
        distanceRange: parseInt(u[h].getAttribute("distanceRange"), 10)
      });
    return e;
  }, r;
}(), Sk = function() {
  function r() {
  }
  return r.test = function(t) {
    if (typeof t == "string" && t.indexOf("<font>") > -1) {
      var e = new globalThis.DOMParser().parseFromString(t, "text/xml");
      return O_.test(e);
    }
    return !1;
  }, r.parse = function(t) {
    var e = new globalThis.DOMParser().parseFromString(t, "text/xml");
    return O_.parse(e);
  }, r;
}(), Pm = [
  Rk,
  O_,
  Sk
];
function oC(r) {
  for (var t = 0; t < Pm.length; t++)
    if (Pm[t].test(r))
      return Pm[t];
  return null;
}
function Pk(r, t, e, i, n, s) {
  var a = e.fill;
  if (Array.isArray(a)) {
    if (a.length === 1)
      return a[0];
  } else
    return a;
  var o, u = e.dropShadow ? e.dropShadowDistance : 0, h = e.padding || 0, l = r.width / i - u - h * 2, c = r.height / i - u - h * 2, d = a.slice(), p = e.fillGradientStops.slice();
  if (!p.length)
    for (var g = d.length + 1, v = 1; v < g; ++v)
      p.push(v / g);
  if (d.unshift(a[0]), p.unshift(0), d.push(a[a.length - 1]), p.push(1), e.fillGradientType === zc.LINEAR_VERTICAL) {
    o = t.createLinearGradient(l / 2, h, l / 2, c + h);
    for (var m = 0, _ = s.fontProperties.fontSize + e.strokeThickness, y = _ / c, v = 0; v < n.length; v++)
      for (var b = s.lineHeight * v, x = 0; x < d.length; x++) {
        var w = 0;
        typeof p[x] == "number" ? w = p[x] : w = x / d.length;
        var E = b / c + w * y, R = Math.max(m, E);
        R = Math.min(R, 1), o.addColorStop(R, d[x]), m = R;
      }
  } else {
    o = t.createLinearGradient(h, c / 2, l + h, c / 2);
    for (var C = d.length + 1, P = 1, v = 0; v < d.length; v++) {
      var N = void 0;
      typeof p[v] == "number" ? N = p[v] : N = P / C, o.addColorStop(N, d[v]), P++;
    }
  }
  return o;
}
function Nk(r, t, e, i, n, s, a) {
  var o = e.text, u = e.fontProperties;
  t.translate(i, n), t.scale(s, s);
  var h = a.strokeThickness / 2, l = -(a.strokeThickness / 2);
  if (t.font = a.toFontString(), t.lineWidth = a.strokeThickness, t.textBaseline = a.textBaseline, t.lineJoin = a.lineJoin, t.miterLimit = a.miterLimit, t.fillStyle = Pk(r, t, a, s, [o], e), t.strokeStyle = a.stroke, a.dropShadow) {
    var c = a.dropShadowColor, d = vl(typeof c == "number" ? c : ST(c)), p = a.dropShadowBlur * s, g = a.dropShadowDistance * s;
    t.shadowColor = "rgba(" + d[0] * 255 + "," + d[1] * 255 + "," + d[2] * 255 + "," + a.dropShadowAlpha + ")", t.shadowBlur = p, t.shadowOffsetX = Math.cos(a.dropShadowAngle) * g, t.shadowOffsetY = Math.sin(a.dropShadowAngle) * g;
  } else
    t.shadowColor = "black", t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0;
  a.stroke && a.strokeThickness && t.strokeText(o, h, l + e.lineHeight - u.descent), a.fill && t.fillText(o, h, l + e.lineHeight - u.descent), t.setTransform(1, 0, 0, 1, 0, 0), t.fillStyle = "rgba(0, 0, 0, 0)";
}
function uC(r) {
  return Array.from ? Array.from(r) : r.split("");
}
function Ok(r) {
  typeof r == "string" && (r = [r]);
  for (var t = [], e = 0, i = r.length; e < i; e++) {
    var n = r[e];
    if (Array.isArray(n)) {
      if (n.length !== 2)
        throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + n.length + ".");
      var s = n[0].charCodeAt(0), a = n[1].charCodeAt(0);
      if (a < s)
        throw new Error("[BitmapFont]: Invalid character range.");
      for (var o = s, u = a; o <= u; o++)
        t.push(String.fromCharCode(o));
    } else
      t.push.apply(t, uC(n));
  }
  if (t.length === 0)
    throw new Error("[BitmapFont]: Empty set when resolving characters.");
  return t;
}
function bp(r) {
  return r.codePointAt ? r.codePointAt(0) : r.charCodeAt(0);
}
var wu = function() {
  function r(t, e, i) {
    var n, s, a = t.info[0], o = t.common[0], u = t.page[0], h = t.distanceField[0], l = uv(u.file), c = {};
    this._ownsTextures = i, this.font = a.face, this.size = a.size, this.lineHeight = o.lineHeight / l, this.chars = {}, this.pageTextures = c;
    for (var d = 0; d < t.page.length; d++) {
      var p = t.page[d], g = p.id, v = p.file;
      c[g] = e instanceof Array ? e[d] : e[v], (h == null ? void 0 : h.fieldType) && h.fieldType !== "none" && (c[g].baseTexture.alphaMode = tn.NO_PREMULTIPLIED_ALPHA);
    }
    for (var d = 0; d < t.char.length; d++) {
      var m = t.char[d], g = m.id, _ = m.page, y = t.char[d], b = y.x, x = y.y, w = y.width, E = y.height, R = y.xoffset, C = y.yoffset, P = y.xadvance;
      b /= l, x /= l, w /= l, E /= l, R /= l, C /= l, P /= l;
      var N = new Pt(b + c[_].frame.x / l, x + c[_].frame.y / l, w, E);
      this.chars[g] = {
        xOffset: R,
        yOffset: C,
        xAdvance: P,
        kerning: {},
        texture: new It(c[_].baseTexture, N),
        page: _
      };
    }
    for (var d = 0; d < t.kerning.length; d++) {
      var M = t.kerning[d], A = M.first, k = M.second, H = M.amount;
      A /= l, k /= l, H /= l, this.chars[k] && (this.chars[k].kerning[A] = H);
    }
    this.distanceFieldRange = h == null ? void 0 : h.distanceRange, this.distanceFieldType = (s = (n = h == null ? void 0 : h.fieldType) === null || n === void 0 ? void 0 : n.toLowerCase()) !== null && s !== void 0 ? s : "none";
  }
  return r.prototype.destroy = function() {
    for (var t in this.chars)
      this.chars[t].texture.destroy(), this.chars[t].texture = null;
    for (var t in this.pageTextures)
      this._ownsTextures && this.pageTextures[t].destroy(!0), this.pageTextures[t] = null;
    this.chars = null, this.pageTextures = null;
  }, r.install = function(t, e, i) {
    var n;
    if (t instanceof dv)
      n = t;
    else {
      var s = oC(t);
      if (!s)
        throw new Error("Unrecognized data format for font.");
      n = s.parse(t);
    }
    e instanceof It && (e = [e]);
    var a = new r(n, e, i);
    return r.available[a.font] = a, a;
  }, r.uninstall = function(t) {
    var e = r.available[t];
    if (!e)
      throw new Error("No font found named '" + t + "'");
    e.destroy(), delete r.available[t];
  }, r.from = function(t, e, i) {
    if (!t)
      throw new Error("[BitmapFont] Property `name` is required.");
    var n = Object.assign({}, r.defaultOptions, i), s = n.chars, a = n.padding, o = n.resolution, u = n.textureWidth, h = n.textureHeight, l = Ok(s), c = e instanceof iu ? e : new iu(e), d = u, p = new dv();
    p.info[0] = {
      face: c.fontFamily,
      size: c.fontSize
    }, p.common[0] = {
      lineHeight: c.fontSize
    };
    for (var g = 0, v = 0, m, _, y, b = 0, x = [], w = 0; w < l.length; w++) {
      m || (m = gt.ADAPTER.createCanvas(), m.width = u, m.height = h, _ = m.getContext("2d"), y = new Zt(m, { resolution: o }), x.push(new It(y)), p.page.push({
        id: x.length - 1,
        file: ""
      }));
      var E = Bn.measureText(l[w], c, !1, m), R = E.width, C = Math.ceil(E.height), P = Math.ceil((c.fontStyle === "italic" ? 2 : 1) * R);
      if (v >= h - C * o) {
        if (v === 0)
          throw new Error("[BitmapFont] textureHeight " + h + "px is " + ("too small for " + c.fontSize + "px fonts"));
        --w, m = null, _ = null, y = null, v = 0, g = 0, b = 0;
        continue;
      }
      if (b = Math.max(C + E.fontProperties.descent, b), P * o + g >= d) {
        --w, v += b * o, v = Math.ceil(v), g = 0, b = 0;
        continue;
      }
      Nk(m, _, E, g, v, o, c);
      var N = bp(E.text);
      p.char.push({
        id: N,
        page: x.length - 1,
        x: g / o,
        y: v / o,
        width: P,
        height: C,
        xoffset: 0,
        yoffset: 0,
        xadvance: Math.ceil(R - (c.dropShadow ? c.dropShadowDistance : 0) - (c.stroke ? c.strokeThickness : 0))
      }), g += (P + 2 * a) * o, g = Math.ceil(g);
    }
    for (var w = 0, M = l.length; w < M; w++)
      for (var A = l[w], k = 0; k < M; k++) {
        var H = l[k], L = _.measureText(A).width, U = _.measureText(H).width, V = _.measureText(A + H).width, K = V - (L + U);
        K && p.kerning.push({
          first: bp(A),
          second: bp(H),
          amount: K
        });
      }
    var G = new r(p, x, !0);
    return r.available[t] !== void 0 && r.uninstall(t), r.available[t] = G, G;
  }, r.ALPHA = [["a", "z"], ["A", "Z"], " "], r.NUMERIC = [["0", "9"]], r.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "], r.ASCII = [[" ", "~"]], r.defaultOptions = {
    resolution: 1,
    textureWidth: 512,
    textureHeight: 512,
    padding: 4,
    chars: r.ALPHANUMERIC
  }, r.available = {}, r;
}(), Ak = `// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`, Fk = `// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`, Mk = [], kk = [], EE = [];
(function(r) {
  Ik(t, r);
  function t(e, i) {
    i === void 0 && (i = {});
    var n = r.call(this) || this;
    n._tint = 16777215;
    var s = Object.assign({}, t.styleDefaults, i), a = s.align, o = s.tint, u = s.maxWidth, h = s.letterSpacing, l = s.fontName, c = s.fontSize;
    if (!wu.available[l])
      throw new Error('Missing BitmapFont "' + l + '"');
    return n._activePagesMeshData = [], n._textWidth = 0, n._textHeight = 0, n._align = a, n._tint = o, n._fontName = l, n._fontSize = c || wu.available[l].size, n.text = e, n._maxWidth = u, n._maxLineHeight = 0, n._letterSpacing = h, n._anchor = new Lu(function() {
      n.dirty = !0;
    }, n, 0, 0), n._roundPixels = gt.ROUND_PIXELS, n.dirty = !0, n._resolution = gt.RESOLUTION, n._autoResolution = !0, n._textureCache = {}, n;
  }
  return t.prototype.updateText = function() {
    for (var e, i = wu.available[this._fontName], n = this._fontSize / i.size, s = new Ee(), a = [], o = [], u = [], h = this._text.replace(/(?:\r\n|\r)/g, `
`) || " ", l = uC(h), c = this._maxWidth * i.size / this._fontSize, d = i.distanceFieldType === "none" ? Mk : kk, p = null, g = 0, v = 0, m = 0, _ = -1, y = 0, b = 0, x = 0, w = 0, E = 0; E < l.length; E++) {
      var R = l[E], C = bp(R);
      if (/(?:\s)/.test(R) && (_ = E, y = g, w++), R === "\r" || R === `
`) {
        o.push(g), u.push(-1), v = Math.max(v, g), ++m, ++b, s.x = 0, s.y += i.lineHeight, p = null, w = 0;
        continue;
      }
      var P = i.chars[C];
      if (!!P) {
        p && P.kerning[p] && (s.x += P.kerning[p]);
        var N = EE.pop() || {
          texture: It.EMPTY,
          line: 0,
          charCode: 0,
          prevSpaces: 0,
          position: new Ee()
        };
        N.texture = P.texture, N.line = m, N.charCode = C, N.position.x = s.x + P.xOffset + this._letterSpacing / 2, N.position.y = s.y + P.yOffset, N.prevSpaces = w, a.push(N), g = N.position.x + Math.max(P.xAdvance - P.xOffset, P.texture.orig.width), s.x += P.xAdvance + this._letterSpacing, x = Math.max(x, P.yOffset + P.texture.height), p = C, _ !== -1 && c > 0 && s.x > c && (++b, Yu(a, 1 + _ - b, 1 + E - _), E = _, _ = -1, o.push(y), u.push(a.length > 0 ? a[a.length - 1].prevSpaces : 0), v = Math.max(v, y), m++, s.x = 0, s.y += i.lineHeight, p = null, w = 0);
      }
    }
    var M = l[l.length - 1];
    M !== "\r" && M !== `
` && (/(?:\s)/.test(M) && (g = y), o.push(g), v = Math.max(v, g), u.push(-1));
    for (var A = [], E = 0; E <= m; E++) {
      var k = 0;
      this._align === "right" ? k = v - o[E] : this._align === "center" ? k = (v - o[E]) / 2 : this._align === "justify" && (k = u[E] < 0 ? 0 : (v - o[E]) / u[E]), A.push(k);
    }
    for (var H = a.length, L = {}, U = [], V = this._activePagesMeshData, E = 0; E < V.length; E++)
      d.push(V[E]);
    for (var E = 0; E < H; E++) {
      var K = a[E].texture, G = K.baseTexture.uid;
      if (!L[G]) {
        var B = d.pop();
        if (!B) {
          var W = new Ag(), Q = void 0, ut = void 0;
          i.distanceFieldType === "none" ? (Q = new $c(It.EMPTY), ut = bt.NORMAL) : (Q = new $c(It.EMPTY, { program: gd.from(Fk, Ak), uniforms: { uFWidth: 0 } }), ut = bt.NORMAL_NPM);
          var it = new jc(W, Q);
          it.blendMode = ut, B = {
            index: 0,
            indexCount: 0,
            vertexCount: 0,
            uvsCount: 0,
            total: 0,
            mesh: it,
            vertices: null,
            uvs: null,
            indices: null
          };
        }
        B.index = 0, B.indexCount = 0, B.vertexCount = 0, B.uvsCount = 0, B.total = 0;
        var ht = this._textureCache;
        ht[G] = ht[G] || new It(K.baseTexture), B.mesh.texture = ht[G], B.mesh.tint = this._tint, U.push(B), L[G] = B;
      }
      L[G].total++;
    }
    for (var E = 0; E < V.length; E++)
      U.indexOf(V[E]) === -1 && this.removeChild(V[E].mesh);
    for (var E = 0; E < U.length; E++)
      U[E].mesh.parent !== this && this.addChild(U[E].mesh);
    this._activePagesMeshData = U;
    for (var E in L) {
      var B = L[E], F = B.total;
      if (!(((e = B.indices) === null || e === void 0 ? void 0 : e.length) > 6 * F) || B.vertices.length < jc.BATCHABLE_SIZE * 2)
        B.vertices = new Float32Array(4 * 2 * F), B.uvs = new Float32Array(4 * 2 * F), B.indices = new Uint16Array(6 * F);
      else
        for (var vt = B.total, nt = B.vertices, ft = vt * 4 * 2; ft < nt.length; ft++)
          nt[ft] = 0;
      B.mesh.size = 6 * F;
    }
    for (var E = 0; E < H; E++) {
      var R = a[E], rt = R.position.x + A[R.line] * (this._align === "justify" ? R.prevSpaces : 1);
      this._roundPixels && (rt = Math.round(rt));
      var j = rt * n, xt = R.position.y * n, K = R.texture, Z = L[K.baseTexture.uid], X = K.frame, et = K._uvs, ot = Z.index++;
      Z.indices[ot * 6 + 0] = 0 + ot * 4, Z.indices[ot * 6 + 1] = 1 + ot * 4, Z.indices[ot * 6 + 2] = 2 + ot * 4, Z.indices[ot * 6 + 3] = 0 + ot * 4, Z.indices[ot * 6 + 4] = 2 + ot * 4, Z.indices[ot * 6 + 5] = 3 + ot * 4, Z.vertices[ot * 8 + 0] = j, Z.vertices[ot * 8 + 1] = xt, Z.vertices[ot * 8 + 2] = j + X.width * n, Z.vertices[ot * 8 + 3] = xt, Z.vertices[ot * 8 + 4] = j + X.width * n, Z.vertices[ot * 8 + 5] = xt + X.height * n, Z.vertices[ot * 8 + 6] = j, Z.vertices[ot * 8 + 7] = xt + X.height * n, Z.uvs[ot * 8 + 0] = et.x0, Z.uvs[ot * 8 + 1] = et.y0, Z.uvs[ot * 8 + 2] = et.x1, Z.uvs[ot * 8 + 3] = et.y1, Z.uvs[ot * 8 + 4] = et.x2, Z.uvs[ot * 8 + 5] = et.y2, Z.uvs[ot * 8 + 6] = et.x3, Z.uvs[ot * 8 + 7] = et.y3;
    }
    this._textWidth = v * n, this._textHeight = (s.y + i.lineHeight) * n;
    for (var E in L) {
      var B = L[E];
      if (this.anchor.x !== 0 || this.anchor.y !== 0)
        for (var q = 0, Gt = this._textWidth * this.anchor.x, Bt = this._textHeight * this.anchor.y, ie = 0; ie < B.total; ie++)
          B.vertices[q++] -= Gt, B.vertices[q++] -= Bt, B.vertices[q++] -= Gt, B.vertices[q++] -= Bt, B.vertices[q++] -= Gt, B.vertices[q++] -= Bt, B.vertices[q++] -= Gt, B.vertices[q++] -= Bt;
      this._maxLineHeight = x * n;
      var Ve = B.mesh.geometry.getBuffer("aVertexPosition"), _r = B.mesh.geometry.getBuffer("aTextureCoord"), Xt = B.mesh.geometry.getIndex();
      Ve.data = B.vertices, _r.data = B.uvs, Xt.data = B.indices, Ve.update(), _r.update(), Xt.update();
    }
    for (var E = 0; E < a.length; E++)
      EE.push(a[E]);
  }, t.prototype.updateTransform = function() {
    this.validate(), this.containerUpdateTransform();
  }, t.prototype._render = function(e) {
    this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution, this.dirty = !0);
    var i = wu.available[this._fontName], n = i.distanceFieldRange, s = i.distanceFieldType, a = i.size;
    if (s !== "none")
      for (var o = this.worldTransform, u = o.a, h = o.b, l = o.c, c = o.d, d = Math.sqrt(u * u + h * h), p = Math.sqrt(l * l + c * c), g = (Math.abs(d) + Math.abs(p)) / 2, v = this._fontSize / a, m = 0, _ = this._activePagesMeshData; m < _.length; m++) {
        var y = _[m];
        y.mesh.shader.uniforms.uFWidth = g * n * v * this._resolution;
      }
    r.prototype._render.call(this, e);
  }, t.prototype.getLocalBounds = function() {
    return this.validate(), r.prototype.getLocalBounds.call(this);
  }, t.prototype.validate = function() {
    this.dirty && (this.updateText(), this.dirty = !1);
  }, Object.defineProperty(t.prototype, "tint", {
    get: function() {
      return this._tint;
    },
    set: function(e) {
      if (this._tint !== e) {
        this._tint = e;
        for (var i = 0; i < this._activePagesMeshData.length; i++)
          this._activePagesMeshData[i].mesh.tint = e;
      }
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "align", {
    get: function() {
      return this._align;
    },
    set: function(e) {
      this._align !== e && (this._align = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "fontName", {
    get: function() {
      return this._fontName;
    },
    set: function(e) {
      if (!wu.available[e])
        throw new Error('Missing BitmapFont "' + e + '"');
      this._fontName !== e && (this._fontName = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "fontSize", {
    get: function() {
      return this._fontSize;
    },
    set: function(e) {
      this._fontSize !== e && (this._fontSize = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "anchor", {
    get: function() {
      return this._anchor;
    },
    set: function(e) {
      typeof e == "number" ? this._anchor.set(e) : this._anchor.copyFrom(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "text", {
    get: function() {
      return this._text;
    },
    set: function(e) {
      e = String(e == null ? "" : e), this._text !== e && (this._text = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "maxWidth", {
    get: function() {
      return this._maxWidth;
    },
    set: function(e) {
      this._maxWidth !== e && (this._maxWidth = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "maxLineHeight", {
    get: function() {
      return this.validate(), this._maxLineHeight;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "textWidth", {
    get: function() {
      return this.validate(), this._textWidth;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "letterSpacing", {
    get: function() {
      return this._letterSpacing;
    },
    set: function(e) {
      this._letterSpacing !== e && (this._letterSpacing = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "roundPixels", {
    get: function() {
      return this._roundPixels;
    },
    set: function(e) {
      e !== this._roundPixels && (this._roundPixels = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "textHeight", {
    get: function() {
      return this.validate(), this._textHeight;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "resolution", {
    get: function() {
      return this._resolution;
    },
    set: function(e) {
      this._autoResolution = !1, this._resolution !== e && (this._resolution = e, this.dirty = !0);
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.destroy = function(e) {
    var i = this._textureCache;
    for (var n in i) {
      var s = i[n];
      s.destroy(), delete i[n];
    }
    this._textureCache = null, r.prototype.destroy.call(this, e);
  }, t.styleDefaults = {
    align: "left",
    tint: 16777215,
    maxWidth: 0,
    letterSpacing: 0
  }, t;
})(ge);
var Bk = function() {
  function r() {
  }
  return r.add = function() {
    Lt.setExtensionXhrType("fnt", Lt.XHR_RESPONSE_TYPE.TEXT);
  }, r.use = function(t, e) {
    var i = oC(t.data);
    if (!i) {
      e();
      return;
    }
    for (var n = r.getBaseUrl(this, t), s = i.parse(t.data), a = {}, o = function(v) {
      a[v.metadata.pageFile] = v.texture, Object.keys(a).length === s.page.length && (t.bitmapFont = wu.install(s, a, !0), e());
    }, u = 0; u < s.page.length; ++u) {
      var h = s.page[u].file, l = n + h, c = !1;
      for (var d in this.resources) {
        var p = this.resources[d];
        if (p.url === l) {
          p.metadata.pageFile = h, p.texture ? o(p) : p.onAfterMiddleware.add(o), c = !0;
          break;
        }
      }
      if (!c) {
        var g = {
          crossOrigin: t.crossOrigin,
          loadType: Lt.LOAD_TYPE.IMAGE,
          metadata: Object.assign({ pageFile: h }, t.metadata.imageMetadata),
          parentResource: t
        };
        this.add(l, g, o);
      }
    }
  }, r.getBaseUrl = function(t, e) {
    var i = e.isDataUrl ? "" : r.dirname(e.url);
    return e.isDataUrl && (i === "." && (i = ""), t.baseUrl && i && t.baseUrl.charAt(t.baseUrl.length - 1) === "/" && (i += "/")), i = i.replace(t.baseUrl, ""), i && i.charAt(i.length - 1) !== "/" && (i += "/"), i;
  }, r.dirname = function(t) {
    var e = t.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, "");
    return e === t ? "." : e === "" ? "/" : e;
  }, r.extension = me.Loader, r;
}();
/*!
 * @pixi/filter-alpha - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var A_ = function(r, t) {
  return A_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, A_(r, t);
};
function Lk(r, t) {
  A_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Dk = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;
(function(r) {
  Lk(t, r);
  function t(e) {
    e === void 0 && (e = 1);
    var i = r.call(this, OF, Dk, { uAlpha: 1 }) || this;
    return i.alpha = e, i;
  }
  return Object.defineProperty(t.prototype, "alpha", {
    get: function() {
      return this.uniforms.uAlpha;
    },
    set: function(e) {
      this.uniforms.uAlpha = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
})(Nn);
/*!
 * @pixi/filter-blur - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var F_ = function(r, t) {
  return F_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, F_(r, t);
};
function hC(r, t) {
  F_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Uk = `
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;
function Gk(r, t) {
  var e = Math.ceil(r / 2), i = Uk, n = "", s;
  t ? s = "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);" : s = "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
  for (var a = 0; a < r; a++) {
    var o = s.replace("%index%", a.toString());
    o = o.replace("%sampleIndex%", a - (e - 1) + ".0"), n += o, n += `
`;
  }
  return i = i.replace("%blur%", n), i = i.replace("%size%", r.toString()), i;
}
var Hk = {
  5: [0.153388, 0.221461, 0.250301],
  7: [0.071303, 0.131514, 0.189879, 0.214607],
  9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
  11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
  13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],
  15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]
}, zk = [
  "varying vec2 vBlurTexCoords[%size%];",
  "uniform sampler2D uSampler;",
  "void main(void)",
  "{",
  "    gl_FragColor = vec4(0.0);",
  "    %blur%",
  "}"
].join(`
`);
function jk(r) {
  for (var t = Hk[r], e = t.length, i = zk, n = "", s = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;", a, o = 0; o < r; o++) {
    var u = s.replace("%index%", o.toString());
    a = o, o >= e && (a = r - o - 1), u = u.replace("%value%", t[a].toString()), n += u, n += `
`;
  }
  return i = i.replace("%blur%", n), i = i.replace("%size%", r.toString()), i;
}
/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var wE;
(function(r) {
  r[r.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", r[r.WEBGL = 1] = "WEBGL", r[r.WEBGL2 = 2] = "WEBGL2";
})(wE || (wE = {}));
var TE;
(function(r) {
  r[r.UNKNOWN = 0] = "UNKNOWN", r[r.WEBGL = 1] = "WEBGL", r[r.CANVAS = 2] = "CANVAS";
})(TE || (TE = {}));
var CE;
(function(r) {
  r[r.COLOR = 16384] = "COLOR", r[r.DEPTH = 256] = "DEPTH", r[r.STENCIL = 1024] = "STENCIL";
})(CE || (CE = {}));
var IE;
(function(r) {
  r[r.NORMAL = 0] = "NORMAL", r[r.ADD = 1] = "ADD", r[r.MULTIPLY = 2] = "MULTIPLY", r[r.SCREEN = 3] = "SCREEN", r[r.OVERLAY = 4] = "OVERLAY", r[r.DARKEN = 5] = "DARKEN", r[r.LIGHTEN = 6] = "LIGHTEN", r[r.COLOR_DODGE = 7] = "COLOR_DODGE", r[r.COLOR_BURN = 8] = "COLOR_BURN", r[r.HARD_LIGHT = 9] = "HARD_LIGHT", r[r.SOFT_LIGHT = 10] = "SOFT_LIGHT", r[r.DIFFERENCE = 11] = "DIFFERENCE", r[r.EXCLUSION = 12] = "EXCLUSION", r[r.HUE = 13] = "HUE", r[r.SATURATION = 14] = "SATURATION", r[r.COLOR = 15] = "COLOR", r[r.LUMINOSITY = 16] = "LUMINOSITY", r[r.NORMAL_NPM = 17] = "NORMAL_NPM", r[r.ADD_NPM = 18] = "ADD_NPM", r[r.SCREEN_NPM = 19] = "SCREEN_NPM", r[r.NONE = 20] = "NONE", r[r.SRC_OVER = 0] = "SRC_OVER", r[r.SRC_IN = 21] = "SRC_IN", r[r.SRC_OUT = 22] = "SRC_OUT", r[r.SRC_ATOP = 23] = "SRC_ATOP", r[r.DST_OVER = 24] = "DST_OVER", r[r.DST_IN = 25] = "DST_IN", r[r.DST_OUT = 26] = "DST_OUT", r[r.DST_ATOP = 27] = "DST_ATOP", r[r.ERASE = 26] = "ERASE", r[r.SUBTRACT = 28] = "SUBTRACT", r[r.XOR = 29] = "XOR";
})(IE || (IE = {}));
var RE;
(function(r) {
  r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(RE || (RE = {}));
var SE;
(function(r) {
  r[r.RGBA = 6408] = "RGBA", r[r.RGB = 6407] = "RGB", r[r.RG = 33319] = "RG", r[r.RED = 6403] = "RED", r[r.RGBA_INTEGER = 36249] = "RGBA_INTEGER", r[r.RGB_INTEGER = 36248] = "RGB_INTEGER", r[r.RG_INTEGER = 33320] = "RG_INTEGER", r[r.RED_INTEGER = 36244] = "RED_INTEGER", r[r.ALPHA = 6406] = "ALPHA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(SE || (SE = {}));
var PE;
(function(r) {
  r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(PE || (PE = {}));
var NE;
(function(r) {
  r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", r[r.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", r[r.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", r[r.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", r[r.BYTE = 5120] = "BYTE", r[r.SHORT = 5122] = "SHORT", r[r.INT = 5124] = "INT", r[r.FLOAT = 5126] = "FLOAT", r[r.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", r[r.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(NE || (NE = {}));
var OE;
(function(r) {
  r[r.FLOAT = 0] = "FLOAT", r[r.INT = 1] = "INT", r[r.UINT = 2] = "UINT";
})(OE || (OE = {}));
var AE;
(function(r) {
  r[r.NEAREST = 0] = "NEAREST", r[r.LINEAR = 1] = "LINEAR";
})(AE || (AE = {}));
var FE;
(function(r) {
  r[r.CLAMP = 33071] = "CLAMP", r[r.REPEAT = 10497] = "REPEAT", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(FE || (FE = {}));
var ME;
(function(r) {
  r[r.OFF = 0] = "OFF", r[r.POW2 = 1] = "POW2", r[r.ON = 2] = "ON", r[r.ON_MANUAL = 3] = "ON_MANUAL";
})(ME || (ME = {}));
var kE;
(function(r) {
  r[r.NPM = 0] = "NPM", r[r.UNPACK = 1] = "UNPACK", r[r.PMA = 2] = "PMA", r[r.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", r[r.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", r[r.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", r[r.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(kE || (kE = {}));
var Vc;
(function(r) {
  r[r.NO = 0] = "NO", r[r.YES = 1] = "YES", r[r.AUTO = 2] = "AUTO", r[r.BLEND = 0] = "BLEND", r[r.CLEAR = 1] = "CLEAR", r[r.BLIT = 2] = "BLIT";
})(Vc || (Vc = {}));
var BE;
(function(r) {
  r[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL";
})(BE || (BE = {}));
var LE;
(function(r) {
  r.LOW = "lowp", r.MEDIUM = "mediump", r.HIGH = "highp";
})(LE || (LE = {}));
var DE;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.SCISSOR = 1] = "SCISSOR", r[r.STENCIL = 2] = "STENCIL", r[r.SPRITE = 3] = "SPRITE", r[r.COLOR = 4] = "COLOR";
})(DE || (DE = {}));
var UE;
(function(r) {
  r[r.RED = 1] = "RED", r[r.GREEN = 2] = "GREEN", r[r.BLUE = 4] = "BLUE", r[r.ALPHA = 8] = "ALPHA";
})(UE || (UE = {}));
var GE;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.LOW = 2] = "LOW", r[r.MEDIUM = 4] = "MEDIUM", r[r.HIGH = 8] = "HIGH";
})(GE || (GE = {}));
var HE;
(function(r) {
  r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(HE || (HE = {}));
var zE = function(r) {
  hC(t, r);
  function t(e, i, n, s, a) {
    i === void 0 && (i = 8), n === void 0 && (n = 4), s === void 0 && (s = gt.FILTER_RESOLUTION), a === void 0 && (a = 5);
    var o = this, u = Gk(a, e), h = jk(a);
    return o = r.call(
      this,
      u,
      h
    ) || this, o.horizontal = e, o.resolution = s, o._quality = 0, o.quality = n, o.blur = i, o;
  }
  return t.prototype.apply = function(e, i, n, s) {
    if (n ? this.horizontal ? this.uniforms.strength = 1 / n.width * (n.width / i.width) : this.uniforms.strength = 1 / n.height * (n.height / i.height) : this.horizontal ? this.uniforms.strength = 1 / e.renderer.width * (e.renderer.width / i.width) : this.uniforms.strength = 1 / e.renderer.height * (e.renderer.height / i.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, this.passes === 1)
      e.applyFilter(this, i, n, s);
    else {
      var a = e.getFilterTexture(), o = e.renderer, u = i, h = a;
      this.state.blend = !1, e.applyFilter(this, u, h, Vc.CLEAR);
      for (var l = 1; l < this.passes - 1; l++) {
        e.bindAndClear(u, Vc.BLIT), this.uniforms.uSampler = h;
        var c = h;
        h = u, u = c, o.shader.bind(this), o.geometry.draw(5);
      }
      this.state.blend = !0, e.applyFilter(this, h, n, s), e.returnFilterTexture(a);
    }
  }, Object.defineProperty(t.prototype, "blur", {
    get: function() {
      return this.strength;
    },
    set: function(e) {
      this.padding = 1 + Math.abs(e) * 2, this.strength = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "quality", {
    get: function() {
      return this._quality;
    },
    set: function(e) {
      this._quality = e, this.passes = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(Nn);
(function(r) {
  hC(t, r);
  function t(e, i, n, s) {
    e === void 0 && (e = 8), i === void 0 && (i = 4), n === void 0 && (n = gt.FILTER_RESOLUTION), s === void 0 && (s = 5);
    var a = r.call(this) || this;
    return a.blurXFilter = new zE(!0, e, i, n, s), a.blurYFilter = new zE(!1, e, i, n, s), a.resolution = n, a.quality = i, a.blur = e, a.repeatEdgePixels = !1, a;
  }
  return t.prototype.apply = function(e, i, n, s) {
    var a = Math.abs(this.blurXFilter.strength), o = Math.abs(this.blurYFilter.strength);
    if (a && o) {
      var u = e.getFilterTexture();
      this.blurXFilter.apply(e, i, u, Vc.CLEAR), this.blurYFilter.apply(e, u, n, s), e.returnFilterTexture(u);
    } else
      o ? this.blurYFilter.apply(e, i, n, s) : this.blurXFilter.apply(e, i, n, s);
  }, t.prototype.updatePadding = function() {
    this._repeatEdgePixels ? this.padding = 0 : this.padding = Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) * 2;
  }, Object.defineProperty(t.prototype, "blur", {
    get: function() {
      return this.blurXFilter.blur;
    },
    set: function(e) {
      this.blurXFilter.blur = this.blurYFilter.blur = e, this.updatePadding();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "quality", {
    get: function() {
      return this.blurXFilter.quality;
    },
    set: function(e) {
      this.blurXFilter.quality = this.blurYFilter.quality = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "blurX", {
    get: function() {
      return this.blurXFilter.blur;
    },
    set: function(e) {
      this.blurXFilter.blur = e, this.updatePadding();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "blurY", {
    get: function() {
      return this.blurYFilter.blur;
    },
    set: function(e) {
      this.blurYFilter.blur = e, this.updatePadding();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "blendMode", {
    get: function() {
      return this.blurYFilter.blendMode;
    },
    set: function(e) {
      this.blurYFilter.blendMode = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "repeatEdgePixels", {
    get: function() {
      return this._repeatEdgePixels;
    },
    set: function(e) {
      this._repeatEdgePixels = e, this.updatePadding();
    },
    enumerable: !1,
    configurable: !0
  }), t;
})(Nn);
/*!
 * @pixi/filter-color-matrix - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var M_ = function(r, t) {
  return M_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, M_(r, t);
};
function $k(r, t) {
  M_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Vk = `varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`, jE = function(r) {
  $k(t, r);
  function t() {
    var e = this, i = {
      m: new Float32Array([
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ]),
      uAlpha: 1
    };
    return e = r.call(this, ZT, Vk, i) || this, e.alpha = 1, e;
  }
  return t.prototype._loadMatrix = function(e, i) {
    i === void 0 && (i = !1);
    var n = e;
    i && (this._multiply(n, this.uniforms.m, e), n = this._colorMatrix(n)), this.uniforms.m = n;
  }, t.prototype._multiply = function(e, i, n) {
    return e[0] = i[0] * n[0] + i[1] * n[5] + i[2] * n[10] + i[3] * n[15], e[1] = i[0] * n[1] + i[1] * n[6] + i[2] * n[11] + i[3] * n[16], e[2] = i[0] * n[2] + i[1] * n[7] + i[2] * n[12] + i[3] * n[17], e[3] = i[0] * n[3] + i[1] * n[8] + i[2] * n[13] + i[3] * n[18], e[4] = i[0] * n[4] + i[1] * n[9] + i[2] * n[14] + i[3] * n[19] + i[4], e[5] = i[5] * n[0] + i[6] * n[5] + i[7] * n[10] + i[8] * n[15], e[6] = i[5] * n[1] + i[6] * n[6] + i[7] * n[11] + i[8] * n[16], e[7] = i[5] * n[2] + i[6] * n[7] + i[7] * n[12] + i[8] * n[17], e[8] = i[5] * n[3] + i[6] * n[8] + i[7] * n[13] + i[8] * n[18], e[9] = i[5] * n[4] + i[6] * n[9] + i[7] * n[14] + i[8] * n[19] + i[9], e[10] = i[10] * n[0] + i[11] * n[5] + i[12] * n[10] + i[13] * n[15], e[11] = i[10] * n[1] + i[11] * n[6] + i[12] * n[11] + i[13] * n[16], e[12] = i[10] * n[2] + i[11] * n[7] + i[12] * n[12] + i[13] * n[17], e[13] = i[10] * n[3] + i[11] * n[8] + i[12] * n[13] + i[13] * n[18], e[14] = i[10] * n[4] + i[11] * n[9] + i[12] * n[14] + i[13] * n[19] + i[14], e[15] = i[15] * n[0] + i[16] * n[5] + i[17] * n[10] + i[18] * n[15], e[16] = i[15] * n[1] + i[16] * n[6] + i[17] * n[11] + i[18] * n[16], e[17] = i[15] * n[2] + i[16] * n[7] + i[17] * n[12] + i[18] * n[17], e[18] = i[15] * n[3] + i[16] * n[8] + i[17] * n[13] + i[18] * n[18], e[19] = i[15] * n[4] + i[16] * n[9] + i[17] * n[14] + i[18] * n[19] + i[19], e;
  }, t.prototype._colorMatrix = function(e) {
    var i = new Float32Array(e);
    return i[4] /= 255, i[9] /= 255, i[14] /= 255, i[19] /= 255, i;
  }, t.prototype.brightness = function(e, i) {
    var n = [
      e,
      0,
      0,
      0,
      0,
      0,
      e,
      0,
      0,
      0,
      0,
      0,
      e,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(n, i);
  }, t.prototype.tint = function(e, i) {
    var n = e >> 16 & 255, s = e >> 8 & 255, a = e & 255, o = [
      n / 255,
      0,
      0,
      0,
      0,
      0,
      s / 255,
      0,
      0,
      0,
      0,
      0,
      a / 255,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(o, i);
  }, t.prototype.greyscale = function(e, i) {
    var n = [
      e,
      e,
      e,
      0,
      0,
      e,
      e,
      e,
      0,
      0,
      e,
      e,
      e,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(n, i);
  }, t.prototype.blackAndWhite = function(e) {
    var i = [
      0.3,
      0.6,
      0.1,
      0,
      0,
      0.3,
      0.6,
      0.1,
      0,
      0,
      0.3,
      0.6,
      0.1,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.hue = function(e, i) {
    e = (e || 0) / 180 * Math.PI;
    var n = Math.cos(e), s = Math.sin(e), a = Math.sqrt, o = 1 / 3, u = a(o), h = n + (1 - n) * o, l = o * (1 - n) - u * s, c = o * (1 - n) + u * s, d = o * (1 - n) + u * s, p = n + o * (1 - n), g = o * (1 - n) - u * s, v = o * (1 - n) - u * s, m = o * (1 - n) + u * s, _ = n + o * (1 - n), y = [
      h,
      l,
      c,
      0,
      0,
      d,
      p,
      g,
      0,
      0,
      v,
      m,
      _,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(y, i);
  }, t.prototype.contrast = function(e, i) {
    var n = (e || 0) + 1, s = -0.5 * (n - 1), a = [
      n,
      0,
      0,
      0,
      s,
      0,
      n,
      0,
      0,
      s,
      0,
      0,
      n,
      0,
      s,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(a, i);
  }, t.prototype.saturate = function(e, i) {
    e === void 0 && (e = 0);
    var n = e * 2 / 3 + 1, s = (n - 1) * -0.5, a = [
      n,
      s,
      s,
      0,
      0,
      s,
      n,
      s,
      0,
      0,
      s,
      s,
      n,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(a, i);
  }, t.prototype.desaturate = function() {
    this.saturate(-1);
  }, t.prototype.negative = function(e) {
    var i = [
      -1,
      0,
      0,
      1,
      0,
      0,
      -1,
      0,
      1,
      0,
      0,
      0,
      -1,
      1,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.sepia = function(e) {
    var i = [
      0.393,
      0.7689999,
      0.18899999,
      0,
      0,
      0.349,
      0.6859999,
      0.16799999,
      0,
      0,
      0.272,
      0.5339999,
      0.13099999,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.technicolor = function(e) {
    var i = [
      1.9125277891456083,
      -0.8545344976951645,
      -0.09155508482755585,
      0,
      11.793603434377337,
      -0.3087833385928097,
      1.7658908555458428,
      -0.10601743074722245,
      0,
      -70.35205161461398,
      -0.231103377548616,
      -0.7501899197440212,
      1.847597816108189,
      0,
      30.950940869491138,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.polaroid = function(e) {
    var i = [
      1.438,
      -0.062,
      -0.062,
      0,
      0,
      -0.122,
      1.378,
      -0.122,
      0,
      0,
      -0.016,
      -0.016,
      1.483,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.toBGR = function(e) {
    var i = [
      0,
      0,
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.kodachrome = function(e) {
    var i = [
      1.1285582396593525,
      -0.3967382283601348,
      -0.03992559172921793,
      0,
      63.72958762196502,
      -0.16404339962244616,
      1.0835251566291304,
      -0.05498805115633132,
      0,
      24.732407896706203,
      -0.16786010706155763,
      -0.5603416277695248,
      1.6014850761964943,
      0,
      35.62982807460946,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.browni = function(e) {
    var i = [
      0.5997023498159715,
      0.34553243048391263,
      -0.2708298674538042,
      0,
      47.43192855600873,
      -0.037703249837783157,
      0.8609577587992641,
      0.15059552388459913,
      0,
      -36.96841498319127,
      0.24113635128153335,
      -0.07441037908422492,
      0.44972182064877153,
      0,
      -7.562075277591283,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.vintage = function(e) {
    var i = [
      0.6279345635605994,
      0.3202183420819367,
      -0.03965408211312453,
      0,
      9.651285835294123,
      0.02578397704808868,
      0.6441188644374771,
      0.03259127616149294,
      0,
      7.462829176470591,
      0.0466055556782719,
      -0.0851232987247891,
      0.5241648018700465,
      0,
      5.159190588235296,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.colorTone = function(e, i, n, s, a) {
    e = e || 0.2, i = i || 0.15, n = n || 16770432, s = s || 3375104;
    var o = (n >> 16 & 255) / 255, u = (n >> 8 & 255) / 255, h = (n & 255) / 255, l = (s >> 16 & 255) / 255, c = (s >> 8 & 255) / 255, d = (s & 255) / 255, p = [
      0.3,
      0.59,
      0.11,
      0,
      0,
      o,
      u,
      h,
      e,
      0,
      l,
      c,
      d,
      i,
      0,
      o - l,
      u - c,
      h - d,
      0,
      0
    ];
    this._loadMatrix(p, a);
  }, t.prototype.night = function(e, i) {
    e = e || 0.1;
    var n = [
      e * -2,
      -e,
      0,
      0,
      0,
      -e,
      0,
      e,
      0,
      0,
      0,
      e,
      e * 2,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(n, i);
  }, t.prototype.predator = function(e, i) {
    var n = [
      11.224130630493164 * e,
      -4.794486999511719 * e,
      -2.8746118545532227 * e,
      0 * e,
      0.40342438220977783 * e,
      -3.6330697536468506 * e,
      9.193157196044922 * e,
      -2.951810836791992 * e,
      0 * e,
      -1.316135048866272 * e,
      -3.2184197902679443 * e,
      -4.2375030517578125 * e,
      7.476448059082031 * e,
      0 * e,
      0.8044459223747253 * e,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(n, i);
  }, t.prototype.lsd = function(e) {
    var i = [
      2,
      -0.4,
      0.5,
      0,
      0,
      -0.5,
      2,
      -0.4,
      0,
      0,
      -0.4,
      -0.5,
      3,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(i, e);
  }, t.prototype.reset = function() {
    var e = [
      1,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      0,
      1,
      0
    ];
    this._loadMatrix(e, !1);
  }, Object.defineProperty(t.prototype, "matrix", {
    get: function() {
      return this.uniforms.m;
    },
    set: function(e) {
      this.uniforms.m = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "alpha", {
    get: function() {
      return this.uniforms.uAlpha;
    },
    set: function(e) {
      this.uniforms.uAlpha = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(Nn);
jE.prototype.grayscale = jE.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var k_ = function(r, t) {
  return k_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, k_(r, t);
};
function Xk(r, t) {
  k_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Wk = `varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`, Yk = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;
(function(r) {
  Xk(t, r);
  function t(e, i) {
    var n = this, s = new lr();
    return e.renderable = !1, n = r.call(this, Yk, Wk, {
      mapSampler: e._texture,
      filterMatrix: s,
      scale: { x: 1, y: 1 },
      rotation: new Float32Array([1, 0, 0, 1])
    }) || this, n.maskSprite = e, n.maskMatrix = s, i == null && (i = 20), n.scale = new Ee(i, i), n;
  }
  return t.prototype.apply = function(e, i, n, s) {
    this.uniforms.filterMatrix = e.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y;
    var a = this.maskSprite.worldTransform, o = Math.sqrt(a.a * a.a + a.b * a.b), u = Math.sqrt(a.c * a.c + a.d * a.d);
    o !== 0 && u !== 0 && (this.uniforms.rotation[0] = a.a / o, this.uniforms.rotation[1] = a.b / o, this.uniforms.rotation[2] = a.c / u, this.uniforms.rotation[3] = a.d / u), e.applyFilter(this, i, n, s);
  }, Object.defineProperty(t.prototype, "map", {
    get: function() {
      return this.uniforms.mapSampler;
    },
    set: function(e) {
      this.uniforms.mapSampler = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
})(Nn);
/*!
 * @pixi/filter-fxaa - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var B_ = function(r, t) {
  return B_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, B_(r, t);
};
function qk(r, t) {
  B_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Zk = `
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`, Jk = `varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;
(function(r) {
  qk(t, r);
  function t() {
    return r.call(this, Zk, Jk) || this;
  }
  return t;
})(Nn);
/*!
 * @pixi/filter-noise - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var L_ = function(r, t) {
  return L_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, L_(r, t);
};
function Kk(r, t) {
  L_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Qk = `precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;
(function(r) {
  Kk(t, r);
  function t(e, i) {
    e === void 0 && (e = 0.5), i === void 0 && (i = Math.random());
    var n = r.call(this, ZT, Qk, {
      uNoise: 0,
      uSeed: 0
    }) || this;
    return n.noise = e, n.seed = i, n;
  }
  return Object.defineProperty(t.prototype, "noise", {
    get: function() {
      return this.uniforms.uNoise;
    },
    set: function(e) {
      this.uniforms.uNoise = e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "seed", {
    get: function() {
      return this.uniforms.uSeed;
    },
    set: function(e) {
      this.uniforms.uSeed = e;
    },
    enumerable: !1,
    configurable: !0
  }), t;
})(Nn);
/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var $E;
(function(r) {
  r[r.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", r[r.WEBGL = 1] = "WEBGL", r[r.WEBGL2 = 2] = "WEBGL2";
})($E || ($E = {}));
var VE;
(function(r) {
  r[r.UNKNOWN = 0] = "UNKNOWN", r[r.WEBGL = 1] = "WEBGL", r[r.CANVAS = 2] = "CANVAS";
})(VE || (VE = {}));
var XE;
(function(r) {
  r[r.COLOR = 16384] = "COLOR", r[r.DEPTH = 256] = "DEPTH", r[r.STENCIL = 1024] = "STENCIL";
})(XE || (XE = {}));
var WE;
(function(r) {
  r[r.NORMAL = 0] = "NORMAL", r[r.ADD = 1] = "ADD", r[r.MULTIPLY = 2] = "MULTIPLY", r[r.SCREEN = 3] = "SCREEN", r[r.OVERLAY = 4] = "OVERLAY", r[r.DARKEN = 5] = "DARKEN", r[r.LIGHTEN = 6] = "LIGHTEN", r[r.COLOR_DODGE = 7] = "COLOR_DODGE", r[r.COLOR_BURN = 8] = "COLOR_BURN", r[r.HARD_LIGHT = 9] = "HARD_LIGHT", r[r.SOFT_LIGHT = 10] = "SOFT_LIGHT", r[r.DIFFERENCE = 11] = "DIFFERENCE", r[r.EXCLUSION = 12] = "EXCLUSION", r[r.HUE = 13] = "HUE", r[r.SATURATION = 14] = "SATURATION", r[r.COLOR = 15] = "COLOR", r[r.LUMINOSITY = 16] = "LUMINOSITY", r[r.NORMAL_NPM = 17] = "NORMAL_NPM", r[r.ADD_NPM = 18] = "ADD_NPM", r[r.SCREEN_NPM = 19] = "SCREEN_NPM", r[r.NONE = 20] = "NONE", r[r.SRC_OVER = 0] = "SRC_OVER", r[r.SRC_IN = 21] = "SRC_IN", r[r.SRC_OUT = 22] = "SRC_OUT", r[r.SRC_ATOP = 23] = "SRC_ATOP", r[r.DST_OVER = 24] = "DST_OVER", r[r.DST_IN = 25] = "DST_IN", r[r.DST_OUT = 26] = "DST_OUT", r[r.DST_ATOP = 27] = "DST_ATOP", r[r.ERASE = 26] = "ERASE", r[r.SUBTRACT = 28] = "SUBTRACT", r[r.XOR = 29] = "XOR";
})(WE || (WE = {}));
var YE;
(function(r) {
  r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(YE || (YE = {}));
var qE;
(function(r) {
  r[r.RGBA = 6408] = "RGBA", r[r.RGB = 6407] = "RGB", r[r.RG = 33319] = "RG", r[r.RED = 6403] = "RED", r[r.RGBA_INTEGER = 36249] = "RGBA_INTEGER", r[r.RGB_INTEGER = 36248] = "RGB_INTEGER", r[r.RG_INTEGER = 33320] = "RG_INTEGER", r[r.RED_INTEGER = 36244] = "RED_INTEGER", r[r.ALPHA = 6406] = "ALPHA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(qE || (qE = {}));
var ZE;
(function(r) {
  r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(ZE || (ZE = {}));
var JE;
(function(r) {
  r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", r[r.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", r[r.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", r[r.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", r[r.BYTE = 5120] = "BYTE", r[r.SHORT = 5122] = "SHORT", r[r.INT = 5124] = "INT", r[r.FLOAT = 5126] = "FLOAT", r[r.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", r[r.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(JE || (JE = {}));
var KE;
(function(r) {
  r[r.FLOAT = 0] = "FLOAT", r[r.INT = 1] = "INT", r[r.UINT = 2] = "UINT";
})(KE || (KE = {}));
var QE;
(function(r) {
  r[r.NEAREST = 0] = "NEAREST", r[r.LINEAR = 1] = "LINEAR";
})(QE || (QE = {}));
var t3;
(function(r) {
  r[r.CLAMP = 33071] = "CLAMP", r[r.REPEAT = 10497] = "REPEAT", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(t3 || (t3 = {}));
var e3;
(function(r) {
  r[r.OFF = 0] = "OFF", r[r.POW2 = 1] = "POW2", r[r.ON = 2] = "ON", r[r.ON_MANUAL = 3] = "ON_MANUAL";
})(e3 || (e3 = {}));
var r3;
(function(r) {
  r[r.NPM = 0] = "NPM", r[r.UNPACK = 1] = "UNPACK", r[r.PMA = 2] = "PMA", r[r.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", r[r.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", r[r.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", r[r.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(r3 || (r3 = {}));
var i3;
(function(r) {
  r[r.NO = 0] = "NO", r[r.YES = 1] = "YES", r[r.AUTO = 2] = "AUTO", r[r.BLEND = 0] = "BLEND", r[r.CLEAR = 1] = "CLEAR", r[r.BLIT = 2] = "BLIT";
})(i3 || (i3 = {}));
var n3;
(function(r) {
  r[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL";
})(n3 || (n3 = {}));
var s3;
(function(r) {
  r.LOW = "lowp", r.MEDIUM = "mediump", r.HIGH = "highp";
})(s3 || (s3 = {}));
var a3;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.SCISSOR = 1] = "SCISSOR", r[r.STENCIL = 2] = "STENCIL", r[r.SPRITE = 3] = "SPRITE", r[r.COLOR = 4] = "COLOR";
})(a3 || (a3 = {}));
var o3;
(function(r) {
  r[r.RED = 1] = "RED", r[r.GREEN = 2] = "GREEN", r[r.BLUE = 4] = "BLUE", r[r.ALPHA = 8] = "ALPHA";
})(o3 || (o3 = {}));
var D_;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.LOW = 2] = "LOW", r[r.MEDIUM = 4] = "MEDIUM", r[r.HIGH = 8] = "HIGH";
})(D_ || (D_ = {}));
var u3;
(function(r) {
  r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(u3 || (u3 = {}));
var lC = new lr();
Ze.prototype._cacheAsBitmap = !1;
Ze.prototype._cacheData = null;
Ze.prototype._cacheAsBitmapResolution = null;
Ze.prototype._cacheAsBitmapMultisample = D_.NONE;
var tB = function() {
  function r() {
    this.textureCacheId = null, this.originalRender = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.originalContainsPoint = null, this.sprite = null;
  }
  return r;
}();
Object.defineProperties(Ze.prototype, {
  cacheAsBitmapResolution: {
    get: function() {
      return this._cacheAsBitmapResolution;
    },
    set: function(r) {
      r !== this._cacheAsBitmapResolution && (this._cacheAsBitmapResolution = r, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));
    }
  },
  cacheAsBitmapMultisample: {
    get: function() {
      return this._cacheAsBitmapMultisample;
    },
    set: function(r) {
      r !== this._cacheAsBitmapMultisample && (this._cacheAsBitmapMultisample = r, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));
    }
  },
  cacheAsBitmap: {
    get: function() {
      return this._cacheAsBitmap;
    },
    set: function(r) {
      if (this._cacheAsBitmap !== r) {
        this._cacheAsBitmap = r;
        var t;
        r ? (this._cacheData || (this._cacheData = new tB()), t = this._cacheData, t.originalRender = this.render, t.originalRenderCanvas = this.renderCanvas, t.originalUpdateTransform = this.updateTransform, t.originalCalculateBounds = this.calculateBounds, t.originalGetLocalBounds = this.getLocalBounds, t.originalDestroy = this.destroy, t.originalContainsPoint = this.containsPoint, t.originalMask = this._mask, t.originalFilterArea = this.filterArea, this.render = this._renderCached, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : (t = this._cacheData, t.sprite && this._destroyCachedDisplayObject(), this.render = t.originalRender, this.renderCanvas = t.originalRenderCanvas, this.calculateBounds = t.originalCalculateBounds, this.getLocalBounds = t.originalGetLocalBounds, this.destroy = t.originalDestroy, this.updateTransform = t.originalUpdateTransform, this.containsPoint = t.originalContainsPoint, this._mask = t.originalMask, this.filterArea = t.originalFilterArea);
      }
    }
  }
});
Ze.prototype._renderCached = function(t) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(t), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._render(t));
};
Ze.prototype._initCachedDisplayObject = function(t) {
  var e;
  if (!(this._cacheData && this._cacheData.sprite)) {
    var i = this.alpha;
    this.alpha = 1, t.batch.flush();
    var n = this.getLocalBounds(null, !0).clone();
    if (this.filters && this.filters.length) {
      var s = this.filters[0].padding;
      n.pad(s);
    }
    n.ceil(gt.RESOLUTION);
    var a = t.renderTexture.current, o = t.renderTexture.sourceFrame.clone(), u = t.renderTexture.destinationFrame.clone(), h = t.projection.transform, l = Ji.create({
      width: n.width,
      height: n.height,
      resolution: this.cacheAsBitmapResolution || t.resolution,
      multisample: (e = this.cacheAsBitmapMultisample) !== null && e !== void 0 ? e : t.multisample
    }), c = "cacheAsBitmap_" + ru();
    this._cacheData.textureCacheId = c, Zt.addToCache(l.baseTexture, c), It.addToCache(l, c);
    var d = this.transform.localTransform.copyTo(lC).invert().translate(-n.x, -n.y);
    this.render = this._cacheData.originalRender, t.render(this, { renderTexture: l, clear: !0, transform: d, skipUpdateTransform: !1 }), t.framebuffer.blit(), t.projection.transform = h, t.renderTexture.bind(a, o, u), this.render = this._renderCached, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = i;
    var p = new qe(l);
    p.transform.worldTransform = this.transform.worldTransform, p.anchor.x = -(n.x / n.width), p.anchor.y = -(n.y / n.height), p.alpha = i, p._bounds = this._bounds, this._cacheData.sprite = p, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.enableTempParent(), this.updateTransform(), this.disableTempParent(null)), this.containsPoint = p.containsPoint.bind(p);
  }
};
Ze.prototype._renderCachedCanvas = function(t) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(t), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderCanvas(t));
};
Ze.prototype._initCachedDisplayObjectCanvas = function(t) {
  if (!(this._cacheData && this._cacheData.sprite)) {
    var e = this.getLocalBounds(null, !0), i = this.alpha;
    this.alpha = 1;
    var n = t.context, s = t._projTransform;
    e.ceil(gt.RESOLUTION);
    var a = Ji.create({ width: e.width, height: e.height }), o = "cacheAsBitmap_" + ru();
    this._cacheData.textureCacheId = o, Zt.addToCache(a.baseTexture, o), It.addToCache(a, o);
    var u = lC;
    this.transform.localTransform.copyTo(u), u.invert(), u.tx -= e.x, u.ty -= e.y, this.renderCanvas = this._cacheData.originalRenderCanvas, t.render(this, { renderTexture: a, clear: !0, transform: u, skipUpdateTransform: !1 }), t.context = n, t._projTransform = s, this.renderCanvas = this._renderCachedCanvas, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = i;
    var h = new qe(a);
    h.transform.worldTransform = this.transform.worldTransform, h.anchor.x = -(e.x / e.width), h.anchor.y = -(e.y / e.height), h.alpha = i, h._bounds = this._bounds, this._cacheData.sprite = h, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = t._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = h.containsPoint.bind(h);
  }
};
Ze.prototype._calculateCachedBounds = function() {
  this._bounds.clear(), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite._calculateBounds(), this._bounds.updateID = this._boundsID;
};
Ze.prototype._getCachedLocalBounds = function() {
  return this._cacheData.sprite.getLocalBounds(null);
};
Ze.prototype._destroyCachedDisplayObject = function() {
  this._cacheData.sprite._texture.destroy(!0), this._cacheData.sprite = null, Zt.removeFromCache(this._cacheData.textureCacheId), It.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null;
};
Ze.prototype._cacheAsBitmapDestroy = function(t) {
  this.cacheAsBitmap = !1, this.destroy(t);
};
/*!
 * @pixi/mixin-get-child-by-name - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ze.prototype.name = null;
ge.prototype.getChildByName = function(t, e) {
  for (var i = 0, n = this.children.length; i < n; i++)
    if (this.children[i].name === t)
      return this.children[i];
  if (e)
    for (var i = 0, n = this.children.length; i < n; i++) {
      var s = this.children[i];
      if (!!s.getChildByName) {
        var a = s.getChildByName(t, !0);
        if (a)
          return a;
      }
    }
  return null;
};
/*!
 * @pixi/mixin-get-global-position - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ze.prototype.getGlobalPosition = function(t, e) {
  return t === void 0 && (t = new Ee()), e === void 0 && (e = !1), this.parent ? this.parent.toGlobal(this.position, t, e) : (t.x = this.position.x, t.y = this.position.y), t;
};
/*!
 * @pixi/app - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var eB = function() {
  function r() {
  }
  return r.init = function(t) {
    var e = this;
    Object.defineProperty(
      this,
      "resizeTo",
      {
        set: function(i) {
          globalThis.removeEventListener("resize", this.queueResize), this._resizeTo = i, i && (globalThis.addEventListener("resize", this.queueResize), this.resize());
        },
        get: function() {
          return this._resizeTo;
        }
      }
    ), this.queueResize = function() {
      !e._resizeTo || (e.cancelResize(), e._resizeId = requestAnimationFrame(function() {
        return e.resize();
      }));
    }, this.cancelResize = function() {
      e._resizeId && (cancelAnimationFrame(e._resizeId), e._resizeId = null);
    }, this.resize = function() {
      if (!!e._resizeTo) {
        e.cancelResize();
        var i, n;
        if (e._resizeTo === globalThis.window)
          i = globalThis.innerWidth, n = globalThis.innerHeight;
        else {
          var s = e._resizeTo, a = s.clientWidth, o = s.clientHeight;
          i = a, n = o;
        }
        e.renderer.resize(i, n);
      }
    }, this._resizeId = null, this._resizeTo = null, this.resizeTo = t.resizeTo || null;
  }, r.destroy = function() {
    globalThis.removeEventListener("resize", this.queueResize), this.cancelResize(), this.cancelResize = null, this.queueResize = null, this.resizeTo = null, this.resize = null;
  }, r.extension = me.Application, r;
}();
/*!
 * @pixi/settings - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var h3;
(function(r) {
  r[r.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", r[r.WEBGL = 1] = "WEBGL", r[r.WEBGL2 = 2] = "WEBGL2";
})(h3 || (h3 = {}));
var l3;
(function(r) {
  r[r.UNKNOWN = 0] = "UNKNOWN", r[r.WEBGL = 1] = "WEBGL", r[r.CANVAS = 2] = "CANVAS";
})(l3 || (l3 = {}));
var c3;
(function(r) {
  r[r.COLOR = 16384] = "COLOR", r[r.DEPTH = 256] = "DEPTH", r[r.STENCIL = 1024] = "STENCIL";
})(c3 || (c3 = {}));
var f3;
(function(r) {
  r[r.NORMAL = 0] = "NORMAL", r[r.ADD = 1] = "ADD", r[r.MULTIPLY = 2] = "MULTIPLY", r[r.SCREEN = 3] = "SCREEN", r[r.OVERLAY = 4] = "OVERLAY", r[r.DARKEN = 5] = "DARKEN", r[r.LIGHTEN = 6] = "LIGHTEN", r[r.COLOR_DODGE = 7] = "COLOR_DODGE", r[r.COLOR_BURN = 8] = "COLOR_BURN", r[r.HARD_LIGHT = 9] = "HARD_LIGHT", r[r.SOFT_LIGHT = 10] = "SOFT_LIGHT", r[r.DIFFERENCE = 11] = "DIFFERENCE", r[r.EXCLUSION = 12] = "EXCLUSION", r[r.HUE = 13] = "HUE", r[r.SATURATION = 14] = "SATURATION", r[r.COLOR = 15] = "COLOR", r[r.LUMINOSITY = 16] = "LUMINOSITY", r[r.NORMAL_NPM = 17] = "NORMAL_NPM", r[r.ADD_NPM = 18] = "ADD_NPM", r[r.SCREEN_NPM = 19] = "SCREEN_NPM", r[r.NONE = 20] = "NONE", r[r.SRC_OVER = 0] = "SRC_OVER", r[r.SRC_IN = 21] = "SRC_IN", r[r.SRC_OUT = 22] = "SRC_OUT", r[r.SRC_ATOP = 23] = "SRC_ATOP", r[r.DST_OVER = 24] = "DST_OVER", r[r.DST_IN = 25] = "DST_IN", r[r.DST_OUT = 26] = "DST_OUT", r[r.DST_ATOP = 27] = "DST_ATOP", r[r.ERASE = 26] = "ERASE", r[r.SUBTRACT = 28] = "SUBTRACT", r[r.XOR = 29] = "XOR";
})(f3 || (f3 = {}));
var d3;
(function(r) {
  r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(d3 || (d3 = {}));
var p3;
(function(r) {
  r[r.RGBA = 6408] = "RGBA", r[r.RGB = 6407] = "RGB", r[r.RG = 33319] = "RG", r[r.RED = 6403] = "RED", r[r.RGBA_INTEGER = 36249] = "RGBA_INTEGER", r[r.RGB_INTEGER = 36248] = "RGB_INTEGER", r[r.RG_INTEGER = 33320] = "RG_INTEGER", r[r.RED_INTEGER = 36244] = "RED_INTEGER", r[r.ALPHA = 6406] = "ALPHA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(p3 || (p3 = {}));
var v3;
(function(r) {
  r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(v3 || (v3 = {}));
var g3;
(function(r) {
  r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", r[r.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", r[r.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", r[r.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", r[r.BYTE = 5120] = "BYTE", r[r.SHORT = 5122] = "SHORT", r[r.INT = 5124] = "INT", r[r.FLOAT = 5126] = "FLOAT", r[r.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", r[r.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(g3 || (g3 = {}));
var m3;
(function(r) {
  r[r.FLOAT = 0] = "FLOAT", r[r.INT = 1] = "INT", r[r.UINT = 2] = "UINT";
})(m3 || (m3 = {}));
var U_;
(function(r) {
  r[r.NEAREST = 0] = "NEAREST", r[r.LINEAR = 1] = "LINEAR";
})(U_ || (U_ = {}));
var G_;
(function(r) {
  r[r.CLAMP = 33071] = "CLAMP", r[r.REPEAT = 10497] = "REPEAT", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(G_ || (G_ = {}));
var H_;
(function(r) {
  r[r.OFF = 0] = "OFF", r[r.POW2 = 1] = "POW2", r[r.ON = 2] = "ON", r[r.ON_MANUAL = 3] = "ON_MANUAL";
})(H_ || (H_ = {}));
var _3;
(function(r) {
  r[r.NPM = 0] = "NPM", r[r.UNPACK = 1] = "UNPACK", r[r.PMA = 2] = "PMA", r[r.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", r[r.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", r[r.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", r[r.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(_3 || (_3 = {}));
var y3;
(function(r) {
  r[r.NO = 0] = "NO", r[r.YES = 1] = "YES", r[r.AUTO = 2] = "AUTO", r[r.BLEND = 0] = "BLEND", r[r.CLEAR = 1] = "CLEAR", r[r.BLIT = 2] = "BLIT";
})(y3 || (y3 = {}));
var z_;
(function(r) {
  r[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL";
})(z_ || (z_ = {}));
var _c;
(function(r) {
  r.LOW = "lowp", r.MEDIUM = "mediump", r.HIGH = "highp";
})(_c || (_c = {}));
var b3;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.SCISSOR = 1] = "SCISSOR", r[r.STENCIL = 2] = "STENCIL", r[r.SPRITE = 3] = "SPRITE", r[r.COLOR = 4] = "COLOR";
})(b3 || (b3 = {}));
var x3;
(function(r) {
  r[r.RED = 1] = "RED", r[r.GREEN = 2] = "GREEN", r[r.BLUE = 4] = "BLUE", r[r.ALPHA = 8] = "ALPHA";
})(x3 || (x3 = {}));
var j_;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.LOW = 2] = "LOW", r[r.MEDIUM = 4] = "MEDIUM", r[r.HIGH = 8] = "HIGH";
})(j_ || (j_ = {}));
var E3;
(function(r) {
  r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(E3 || (E3 = {}));
var rB = {
  createCanvas: function(r, t) {
    var e = document.createElement("canvas");
    return e.width = r, e.height = t, e;
  },
  getWebGLRenderingContext: function() {
    return WebGLRenderingContext;
  },
  getNavigator: function() {
    return navigator;
  },
  getBaseUrl: function() {
    var r;
    return (r = document.baseURI) !== null && r !== void 0 ? r : window.location.href;
  },
  fetch: function(r, t) {
    return fetch(r, t);
  }
}, Nm = /iPhone/i, w3 = /iPod/i, T3 = /iPad/i, C3 = /\biOS-universal(?:.+)Mac\b/i, Om = /\bAndroid(?:.+)Mobile\b/i, I3 = /Android/i, xu = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i, tp = /Silk/i, zn = /Windows Phone/i, R3 = /\bWindows(?:.+)ARM\b/i, S3 = /BlackBerry/i, P3 = /BB10/i, N3 = /Opera Mini/i, O3 = /\b(CriOS|Chrome)(?:.+)Mobile/i, A3 = /Mobile(?:.+)Firefox\b/i, F3 = function(r) {
  return typeof r < "u" && r.platform === "MacIntel" && typeof r.maxTouchPoints == "number" && r.maxTouchPoints > 1 && typeof MSStream > "u";
};
function iB(r) {
  return function(t) {
    return t.test(r);
  };
}
function nB(r) {
  var t = {
    userAgent: "",
    platform: "",
    maxTouchPoints: 0
  };
  !r && typeof navigator < "u" ? t = {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    maxTouchPoints: navigator.maxTouchPoints || 0
  } : typeof r == "string" ? t.userAgent = r : r && r.userAgent && (t = {
    userAgent: r.userAgent,
    platform: r.platform,
    maxTouchPoints: r.maxTouchPoints || 0
  });
  var e = t.userAgent, i = e.split("[FBAN");
  typeof i[1] < "u" && (e = i[0]), i = e.split("Twitter"), typeof i[1] < "u" && (e = i[0]);
  var n = iB(e), s = {
    apple: {
      phone: n(Nm) && !n(zn),
      ipod: n(w3),
      tablet: !n(Nm) && (n(T3) || F3(t)) && !n(zn),
      universal: n(C3),
      device: (n(Nm) || n(w3) || n(T3) || n(C3) || F3(t)) && !n(zn)
    },
    amazon: {
      phone: n(xu),
      tablet: !n(xu) && n(tp),
      device: n(xu) || n(tp)
    },
    android: {
      phone: !n(zn) && n(xu) || !n(zn) && n(Om),
      tablet: !n(zn) && !n(xu) && !n(Om) && (n(tp) || n(I3)),
      device: !n(zn) && (n(xu) || n(tp) || n(Om) || n(I3)) || n(/\bokhttp\b/i)
    },
    windows: {
      phone: n(zn),
      tablet: n(R3),
      device: n(zn) || n(R3)
    },
    other: {
      blackberry: n(S3),
      blackberry10: n(P3),
      opera: n(N3),
      firefox: n(A3),
      chrome: n(O3),
      device: n(S3) || n(P3) || n(N3) || n(A3) || n(O3)
    },
    any: !1,
    phone: !1,
    tablet: !1
  };
  return s.any = s.apple.device || s.android.device || s.windows.device || s.other.device, s.phone = s.apple.phone || s.android.phone || s.windows.phone, s.tablet = s.apple.tablet || s.android.tablet || s.windows.tablet, s;
}
var Du = nB(globalThis.navigator);
function sB() {
  return !Du.apple.device;
}
function aB(r) {
  var t = !0;
  if (Du.tablet || Du.phone) {
    if (Du.apple.device) {
      var e = navigator.userAgent.match(/OS (\d+)_(\d+)?/);
      if (e) {
        var i = parseInt(e[1], 10);
        i < 11 && (t = !1);
      }
    }
    if (Du.android.device) {
      var e = navigator.userAgent.match(/Android\s([0-9.]*)/);
      if (e) {
        var i = parseInt(e[1], 10);
        i < 7 && (t = !1);
      }
    }
  }
  return t ? r : 4;
}
var pv = {
  ADAPTER: rB,
  MIPMAP_TEXTURES: H_.POW2,
  ANISOTROPIC_LEVEL: 0,
  RESOLUTION: 1,
  FILTER_RESOLUTION: 1,
  FILTER_MULTISAMPLE: j_.NONE,
  SPRITE_MAX_TEXTURES: aB(32),
  SPRITE_BATCH_SIZE: 4096,
  RENDER_OPTIONS: {
    view: null,
    antialias: !1,
    autoDensity: !1,
    backgroundColor: 0,
    backgroundAlpha: 1,
    useContextAlpha: !0,
    clearBeforeRender: !0,
    preserveDrawingBuffer: !1,
    width: 800,
    height: 600,
    legacy: !1
  },
  GC_MODE: z_.AUTO,
  GC_MAX_IDLE: 60 * 60,
  GC_MAX_CHECK_COUNT: 60 * 10,
  WRAP_MODE: G_.CLAMP,
  SCALE_MODE: U_.LINEAR,
  PRECISION_VERTEX: _c.HIGH,
  PRECISION_FRAGMENT: Du.apple.device ? _c.HIGH : _c.MEDIUM,
  CAN_UPLOAD_SAME_BUFFER: sB(),
  CREATE_IMAGE_BITMAP: !1,
  ROUND_PIXELS: !1
}, Am = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Ab(r, t, e) {
  return e = {
    path: t,
    exports: {},
    require: function(i, n) {
      return oB(i, n == null ? e.path : n);
    }
  }, r(e, e.exports), e.exports;
}
function oB() {
  throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
}
Ab(function(r) {
  var t = Object.prototype.hasOwnProperty, e = "~";
  function i() {
  }
  Object.create && (i.prototype = /* @__PURE__ */ Object.create(null), new i().__proto__ || (e = !1));
  function n(u, h, l) {
    this.fn = u, this.context = h, this.once = l || !1;
  }
  function s(u, h, l, c, d) {
    if (typeof l != "function")
      throw new TypeError("The listener must be a function");
    var p = new n(l, c || u, d), g = e ? e + h : h;
    return u._events[g] ? u._events[g].fn ? u._events[g] = [u._events[g], p] : u._events[g].push(p) : (u._events[g] = p, u._eventsCount++), u;
  }
  function a(u, h) {
    --u._eventsCount === 0 ? u._events = new i() : delete u._events[h];
  }
  function o() {
    this._events = new i(), this._eventsCount = 0;
  }
  o.prototype.eventNames = function() {
    var h = [], l, c;
    if (this._eventsCount === 0)
      return h;
    for (c in l = this._events)
      t.call(l, c) && h.push(e ? c.slice(1) : c);
    return Object.getOwnPropertySymbols ? h.concat(Object.getOwnPropertySymbols(l)) : h;
  }, o.prototype.listeners = function(h) {
    var l = e ? e + h : h, c = this._events[l];
    if (!c)
      return [];
    if (c.fn)
      return [c.fn];
    for (var d = 0, p = c.length, g = new Array(p); d < p; d++)
      g[d] = c[d].fn;
    return g;
  }, o.prototype.listenerCount = function(h) {
    var l = e ? e + h : h, c = this._events[l];
    return c ? c.fn ? 1 : c.length : 0;
  }, o.prototype.emit = function(h, l, c, d, p, g) {
    var v = arguments, m = e ? e + h : h;
    if (!this._events[m])
      return !1;
    var _ = this._events[m], y = arguments.length, b, x;
    if (_.fn) {
      switch (_.once && this.removeListener(h, _.fn, void 0, !0), y) {
        case 1:
          return _.fn.call(_.context), !0;
        case 2:
          return _.fn.call(_.context, l), !0;
        case 3:
          return _.fn.call(_.context, l, c), !0;
        case 4:
          return _.fn.call(_.context, l, c, d), !0;
        case 5:
          return _.fn.call(_.context, l, c, d, p), !0;
        case 6:
          return _.fn.call(_.context, l, c, d, p, g), !0;
      }
      for (x = 1, b = new Array(y - 1); x < y; x++)
        b[x - 1] = v[x];
      _.fn.apply(_.context, b);
    } else {
      var w = _.length, E;
      for (x = 0; x < w; x++)
        switch (_[x].once && this.removeListener(h, _[x].fn, void 0, !0), y) {
          case 1:
            _[x].fn.call(_[x].context);
            break;
          case 2:
            _[x].fn.call(_[x].context, l);
            break;
          case 3:
            _[x].fn.call(_[x].context, l, c);
            break;
          case 4:
            _[x].fn.call(_[x].context, l, c, d);
            break;
          default:
            if (!b)
              for (E = 1, b = new Array(y - 1); E < y; E++)
                b[E - 1] = v[E];
            _[x].fn.apply(_[x].context, b);
        }
    }
    return !0;
  }, o.prototype.on = function(h, l, c) {
    return s(this, h, l, c, !1);
  }, o.prototype.once = function(h, l, c) {
    return s(this, h, l, c, !0);
  }, o.prototype.removeListener = function(h, l, c, d) {
    var p = e ? e + h : h;
    if (!this._events[p])
      return this;
    if (!l)
      return a(this, p), this;
    var g = this._events[p];
    if (g.fn)
      g.fn === l && (!d || g.once) && (!c || g.context === c) && a(this, p);
    else {
      for (var v = 0, m = [], _ = g.length; v < _; v++)
        (g[v].fn !== l || d && !g[v].once || c && g[v].context !== c) && m.push(g[v]);
      m.length ? this._events[p] = m.length === 1 ? m[0] : m : a(this, p);
    }
    return this;
  }, o.prototype.removeAllListeners = function(h) {
    var l;
    return h ? (l = e ? e + h : h, this._events[l] && a(this, l)) : (this._events = new i(), this._eventsCount = 0), this;
  }, o.prototype.off = o.prototype.removeListener, o.prototype.addListener = o.prototype.on, o.prefixed = e, o.EventEmitter = o, r.exports = o;
});
Ab(function(r, t) {
  (function(e) {
    var i = t && !t.nodeType && t, n = r && !r.nodeType && r, s = typeof Am == "object" && Am;
    (s.global === s || s.window === s || s.self === s) && (e = s);
    var a, o = 2147483647, u = 36, h = 1, l = 26, c = 38, d = 700, p = 72, g = 128, v = "-", m = /^xn--/, _ = /[^\x20-\x7E]/, y = /[\x2E\u3002\uFF0E\uFF61]/g, b = {
      overflow: "Overflow: input needs wider integers to process",
      "not-basic": "Illegal input >= 0x80 (not a basic code point)",
      "invalid-input": "Invalid input"
    }, x = u - h, w = Math.floor, E = String.fromCharCode, R;
    function C(B) {
      throw RangeError(b[B]);
    }
    function P(B, W) {
      for (var Q = B.length, ut = []; Q--; )
        ut[Q] = W(B[Q]);
      return ut;
    }
    function N(B, W) {
      var Q = B.split("@"), ut = "";
      Q.length > 1 && (ut = Q[0] + "@", B = Q[1]), B = B.replace(y, ".");
      var it = B.split("."), ht = P(it, W).join(".");
      return ut + ht;
    }
    function M(B) {
      for (var W = [], Q = 0, ut = B.length, it, ht; Q < ut; )
        it = B.charCodeAt(Q++), it >= 55296 && it <= 56319 && Q < ut ? (ht = B.charCodeAt(Q++), (ht & 64512) == 56320 ? W.push(((it & 1023) << 10) + (ht & 1023) + 65536) : (W.push(it), Q--)) : W.push(it);
      return W;
    }
    function A(B) {
      return P(B, function(W) {
        var Q = "";
        return W > 65535 && (W -= 65536, Q += E(W >>> 10 & 1023 | 55296), W = 56320 | W & 1023), Q += E(W), Q;
      }).join("");
    }
    function k(B) {
      return B - 48 < 10 ? B - 22 : B - 65 < 26 ? B - 65 : B - 97 < 26 ? B - 97 : u;
    }
    function H(B, W) {
      return B + 22 + 75 * (B < 26) - ((W != 0) << 5);
    }
    function L(B, W, Q) {
      var ut = 0;
      for (B = Q ? w(B / d) : B >> 1, B += w(B / W); B > x * l >> 1; ut += u)
        B = w(B / x);
      return w(ut + (x + 1) * B / (B + c));
    }
    function U(B) {
      var W = [], Q = B.length, ut, it = 0, ht = g, F = p, vt, nt, ft, rt, j, xt, Z, X, et;
      for (vt = B.lastIndexOf(v), vt < 0 && (vt = 0), nt = 0; nt < vt; ++nt)
        B.charCodeAt(nt) >= 128 && C("not-basic"), W.push(B.charCodeAt(nt));
      for (ft = vt > 0 ? vt + 1 : 0; ft < Q; ) {
        for (rt = it, j = 1, xt = u; ft >= Q && C("invalid-input"), Z = k(B.charCodeAt(ft++)), (Z >= u || Z > w((o - it) / j)) && C("overflow"), it += Z * j, X = xt <= F ? h : xt >= F + l ? l : xt - F, !(Z < X); xt += u)
          et = u - X, j > w(o / et) && C("overflow"), j *= et;
        ut = W.length + 1, F = L(it - rt, ut, rt == 0), w(it / ut) > o - ht && C("overflow"), ht += w(it / ut), it %= ut, W.splice(it++, 0, ht);
      }
      return A(W);
    }
    function V(B) {
      var W, Q, ut, it, ht, F, vt, nt, ft, rt, j, xt = [], Z, X, et, ot;
      for (B = M(B), Z = B.length, W = g, Q = 0, ht = p, F = 0; F < Z; ++F)
        j = B[F], j < 128 && xt.push(E(j));
      for (ut = it = xt.length, it && xt.push(v); ut < Z; ) {
        for (vt = o, F = 0; F < Z; ++F)
          j = B[F], j >= W && j < vt && (vt = j);
        for (X = ut + 1, vt - W > w((o - Q) / X) && C("overflow"), Q += (vt - W) * X, W = vt, F = 0; F < Z; ++F)
          if (j = B[F], j < W && ++Q > o && C("overflow"), j == W) {
            for (nt = Q, ft = u; rt = ft <= ht ? h : ft >= ht + l ? l : ft - ht, !(nt < rt); ft += u)
              ot = nt - rt, et = u - rt, xt.push(
                E(H(rt + ot % et, 0))
              ), nt = w(ot / et);
            xt.push(E(H(nt, 0))), ht = L(Q, X, ut == it), Q = 0, ++ut;
          }
        ++Q, ++W;
      }
      return xt.join("");
    }
    function K(B) {
      return N(B, function(W) {
        return m.test(W) ? U(W.slice(4).toLowerCase()) : W;
      });
    }
    function G(B) {
      return N(B, function(W) {
        return _.test(W) ? "xn--" + V(W) : W;
      });
    }
    if (a = {
      version: "1.3.2",
      ucs2: {
        decode: M,
        encode: A
      },
      decode: U,
      encode: V,
      toASCII: G,
      toUnicode: K
    }, i && n)
      if (r.exports == i)
        n.exports = a;
      else
        for (R in a)
          a.hasOwnProperty(R) && (i[R] = a[R]);
    else
      e.punycode = a;
  })(Am);
});
function uB(r, t) {
  return Object.prototype.hasOwnProperty.call(r, t);
}
var hB = function(r, t, e, i) {
  t = t || "&", e = e || "=";
  var n = {};
  if (typeof r != "string" || r.length === 0)
    return n;
  var s = /\+/g;
  r = r.split(t);
  var a = 1e3;
  i && typeof i.maxKeys == "number" && (a = i.maxKeys);
  var o = r.length;
  a > 0 && o > a && (o = a);
  for (var u = 0; u < o; ++u) {
    var h = r[u].replace(s, "%20"), l = h.indexOf(e), c, d, p, g;
    l >= 0 ? (c = h.substr(0, l), d = h.substr(l + 1)) : (c = h, d = ""), p = decodeURIComponent(c), g = decodeURIComponent(d), uB(n, p) ? Array.isArray(n[p]) ? n[p].push(g) : n[p] = [n[p], g] : n[p] = g;
  }
  return n;
}, zl = function(r) {
  switch (typeof r) {
    case "string":
      return r;
    case "boolean":
      return r ? "true" : "false";
    case "number":
      return isFinite(r) ? r : "";
    default:
      return "";
  }
}, lB = function(r, t, e, i) {
  return t = t || "&", e = e || "=", r === null && (r = void 0), typeof r == "object" ? Object.keys(r).map(function(n) {
    var s = encodeURIComponent(zl(n)) + e;
    return Array.isArray(r[n]) ? r[n].map(function(a) {
      return s + encodeURIComponent(zl(a));
    }).join(t) : s + encodeURIComponent(zl(r[n]));
  }).join(t) : i ? encodeURIComponent(zl(i)) + e + encodeURIComponent(zl(r)) : "";
};
Ab(function(r, t) {
  t.decode = t.parse = hB, t.encode = t.stringify = lB;
});
/*!
 * @pixi/constants - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var M3;
(function(r) {
  r[r.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", r[r.WEBGL = 1] = "WEBGL", r[r.WEBGL2 = 2] = "WEBGL2";
})(M3 || (M3 = {}));
var k3;
(function(r) {
  r[r.UNKNOWN = 0] = "UNKNOWN", r[r.WEBGL = 1] = "WEBGL", r[r.CANVAS = 2] = "CANVAS";
})(k3 || (k3 = {}));
var B3;
(function(r) {
  r[r.COLOR = 16384] = "COLOR", r[r.DEPTH = 256] = "DEPTH", r[r.STENCIL = 1024] = "STENCIL";
})(B3 || (B3 = {}));
var Ur;
(function(r) {
  r[r.NORMAL = 0] = "NORMAL", r[r.ADD = 1] = "ADD", r[r.MULTIPLY = 2] = "MULTIPLY", r[r.SCREEN = 3] = "SCREEN", r[r.OVERLAY = 4] = "OVERLAY", r[r.DARKEN = 5] = "DARKEN", r[r.LIGHTEN = 6] = "LIGHTEN", r[r.COLOR_DODGE = 7] = "COLOR_DODGE", r[r.COLOR_BURN = 8] = "COLOR_BURN", r[r.HARD_LIGHT = 9] = "HARD_LIGHT", r[r.SOFT_LIGHT = 10] = "SOFT_LIGHT", r[r.DIFFERENCE = 11] = "DIFFERENCE", r[r.EXCLUSION = 12] = "EXCLUSION", r[r.HUE = 13] = "HUE", r[r.SATURATION = 14] = "SATURATION", r[r.COLOR = 15] = "COLOR", r[r.LUMINOSITY = 16] = "LUMINOSITY", r[r.NORMAL_NPM = 17] = "NORMAL_NPM", r[r.ADD_NPM = 18] = "ADD_NPM", r[r.SCREEN_NPM = 19] = "SCREEN_NPM", r[r.NONE = 20] = "NONE", r[r.SRC_OVER = 0] = "SRC_OVER", r[r.SRC_IN = 21] = "SRC_IN", r[r.SRC_OUT = 22] = "SRC_OUT", r[r.SRC_ATOP = 23] = "SRC_ATOP", r[r.DST_OVER = 24] = "DST_OVER", r[r.DST_IN = 25] = "DST_IN", r[r.DST_OUT = 26] = "DST_OUT", r[r.DST_ATOP = 27] = "DST_ATOP", r[r.ERASE = 26] = "ERASE", r[r.SUBTRACT = 28] = "SUBTRACT", r[r.XOR = 29] = "XOR";
})(Ur || (Ur = {}));
var L3;
(function(r) {
  r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(L3 || (L3 = {}));
var D3;
(function(r) {
  r[r.RGBA = 6408] = "RGBA", r[r.RGB = 6407] = "RGB", r[r.RG = 33319] = "RG", r[r.RED = 6403] = "RED", r[r.RGBA_INTEGER = 36249] = "RGBA_INTEGER", r[r.RGB_INTEGER = 36248] = "RGB_INTEGER", r[r.RG_INTEGER = 33320] = "RG_INTEGER", r[r.RED_INTEGER = 36244] = "RED_INTEGER", r[r.ALPHA = 6406] = "ALPHA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(D3 || (D3 = {}));
var U3;
(function(r) {
  r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(U3 || (U3 = {}));
var G3;
(function(r) {
  r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", r[r.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", r[r.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", r[r.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", r[r.BYTE = 5120] = "BYTE", r[r.SHORT = 5122] = "SHORT", r[r.INT = 5124] = "INT", r[r.FLOAT = 5126] = "FLOAT", r[r.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", r[r.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(G3 || (G3 = {}));
var H3;
(function(r) {
  r[r.FLOAT = 0] = "FLOAT", r[r.INT = 1] = "INT", r[r.UINT = 2] = "UINT";
})(H3 || (H3 = {}));
var z3;
(function(r) {
  r[r.NEAREST = 0] = "NEAREST", r[r.LINEAR = 1] = "LINEAR";
})(z3 || (z3 = {}));
var j3;
(function(r) {
  r[r.CLAMP = 33071] = "CLAMP", r[r.REPEAT = 10497] = "REPEAT", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(j3 || (j3 = {}));
var $3;
(function(r) {
  r[r.OFF = 0] = "OFF", r[r.POW2 = 1] = "POW2", r[r.ON = 2] = "ON", r[r.ON_MANUAL = 3] = "ON_MANUAL";
})($3 || ($3 = {}));
var V3;
(function(r) {
  r[r.NPM = 0] = "NPM", r[r.UNPACK = 1] = "UNPACK", r[r.PMA = 2] = "PMA", r[r.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", r[r.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", r[r.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", r[r.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(V3 || (V3 = {}));
var X3;
(function(r) {
  r[r.NO = 0] = "NO", r[r.YES = 1] = "YES", r[r.AUTO = 2] = "AUTO", r[r.BLEND = 0] = "BLEND", r[r.CLEAR = 1] = "CLEAR", r[r.BLIT = 2] = "BLIT";
})(X3 || (X3 = {}));
var W3;
(function(r) {
  r[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL";
})(W3 || (W3 = {}));
var Y3;
(function(r) {
  r.LOW = "lowp", r.MEDIUM = "mediump", r.HIGH = "highp";
})(Y3 || (Y3 = {}));
var q3;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.SCISSOR = 1] = "SCISSOR", r[r.STENCIL = 2] = "STENCIL", r[r.SPRITE = 3] = "SPRITE", r[r.COLOR = 4] = "COLOR";
})(q3 || (q3 = {}));
var Z3;
(function(r) {
  r[r.RED = 1] = "RED", r[r.GREEN = 2] = "GREEN", r[r.BLUE = 4] = "BLUE", r[r.ALPHA = 8] = "ALPHA";
})(Z3 || (Z3 = {}));
var J3;
(function(r) {
  r[r.NONE = 0] = "NONE", r[r.LOW = 2] = "LOW", r[r.MEDIUM = 4] = "MEDIUM", r[r.HIGH = 8] = "HIGH";
})(J3 || (J3 = {}));
var K3;
(function(r) {
  r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(K3 || (K3 = {}));
/*!
 * @pixi/utils - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
pv.RETINA_PREFIX = /@([0-9\.]+)x/;
pv.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1;
function cB() {
  for (var r = [], t = [], e = 0; e < 32; e++)
    r[e] = e, t[e] = e;
  r[Ur.NORMAL_NPM] = Ur.NORMAL, r[Ur.ADD_NPM] = Ur.ADD, r[Ur.SCREEN_NPM] = Ur.SCREEN, t[Ur.NORMAL] = Ur.NORMAL_NPM, t[Ur.ADD] = Ur.ADD_NPM, t[Ur.SCREEN] = Ur.SCREEN_NPM;
  var i = [];
  return i.push(t), i.push(r), i;
}
cB();
var Q3 = {};
function fB(r, t, e) {
  if (e === void 0 && (e = 3), !Q3[t]) {
    var i = new Error().stack;
    typeof i > "u" ? console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + r) : (i = i.split(`
`).splice(e).join(`
`), console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", t + `
Deprecated since v` + r), console.warn(i), console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + r), console.warn(i))), Q3[t] = !0;
  }
}
(function() {
  function r(t, e, i) {
    this.canvas = pv.ADAPTER.createCanvas(), this.context = this.canvas.getContext("2d"), this.resolution = i || pv.RESOLUTION, this.resize(t, e);
  }
  return r.prototype.clear = function() {
    this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }, r.prototype.resize = function(t, e) {
    this.canvas.width = Math.round(t * this.resolution), this.canvas.height = Math.round(e * this.resolution);
  }, r.prototype.destroy = function() {
    this.context = null, this.canvas = null;
  }, Object.defineProperty(r.prototype, "width", {
    get: function() {
      return this.canvas.width;
    },
    set: function(t) {
      this.canvas.width = Math.round(t);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "height", {
    get: function() {
      return this.canvas.height;
    },
    set: function(t) {
      this.canvas.height = Math.round(t);
    },
    enumerable: !1,
    configurable: !0
  }), r;
})();
var cC = function() {
  function r(t) {
    var e = this;
    this.stage = new ge(), t = Object.assign({
      forceCanvas: !1
    }, t), this.renderer = qT(t), r._plugins.forEach(function(i) {
      i.init.call(e, t);
    });
  }
  return r.registerPlugin = function(t) {
    fB("6.5.0", "Application.registerPlugin() is deprecated, use extensions.add()"), Ns.add({
      type: me.Application,
      ref: t
    });
  }, r.prototype.render = function() {
    this.renderer.render(this.stage);
  }, Object.defineProperty(r.prototype, "view", {
    get: function() {
      return this.renderer.view;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(r.prototype, "screen", {
    get: function() {
      return this.renderer.screen;
    },
    enumerable: !1,
    configurable: !0
  }), r.prototype.destroy = function(t, e) {
    var i = this, n = r._plugins.slice(0);
    n.reverse(), n.forEach(function(s) {
      s.destroy.call(i);
    }), this.stage.destroy(e), this.stage = null, this.renderer.destroy(t), this.renderer = null;
  }, r._plugins = [], r;
}();
Ns.handleByList(me.Application, cC._plugins);
Ns.add(eB);
/*!
 * @pixi/mesh-extras - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var $_ = function(r, t) {
  return $_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, $_(r, t);
};
function Rl(r, t) {
  $_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var dB = function(r) {
  Rl(t, r);
  function t(e, i, n, s) {
    e === void 0 && (e = 100), i === void 0 && (i = 100), n === void 0 && (n = 10), s === void 0 && (s = 10);
    var a = r.call(this) || this;
    return a.segWidth = n, a.segHeight = s, a.width = e, a.height = i, a.build(), a;
  }
  return t.prototype.build = function() {
    for (var e = this.segWidth * this.segHeight, i = [], n = [], s = [], a = this.segWidth - 1, o = this.segHeight - 1, u = this.width / a, h = this.height / o, l = 0; l < e; l++) {
      var c = l % this.segWidth, d = l / this.segWidth | 0;
      i.push(c * u, d * h), n.push(c / a, d / o);
    }
    for (var p = a * o, l = 0; l < p; l++) {
      var g = l % a, v = l / a | 0, m = v * this.segWidth + g, _ = v * this.segWidth + g + 1, y = (v + 1) * this.segWidth + g, b = (v + 1) * this.segWidth + g + 1;
      s.push(m, _, y, _, b, y);
    }
    this.buffers[0].data = new Float32Array(i), this.buffers[1].data = new Float32Array(n), this.indexBuffer.data = new Uint16Array(s), this.buffers[0].update(), this.buffers[1].update(), this.indexBuffer.update();
  }, t;
}(Ag), pB = function(r) {
  Rl(t, r);
  function t(e, i, n) {
    e === void 0 && (e = 200), n === void 0 && (n = 0);
    var s = r.call(this, new Float32Array(i.length * 4), new Float32Array(i.length * 4), new Uint16Array((i.length - 1) * 6)) || this;
    return s.points = i, s._width = e, s.textureScale = n, s.build(), s;
  }
  return Object.defineProperty(t.prototype, "width", {
    get: function() {
      return this._width;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.build = function() {
    var e = this.points;
    if (!!e) {
      var i = this.getBuffer("aVertexPosition"), n = this.getBuffer("aTextureCoord"), s = this.getIndex();
      if (!(e.length < 1)) {
        i.data.length / 4 !== e.length && (i.data = new Float32Array(e.length * 4), n.data = new Float32Array(e.length * 4), s.data = new Uint16Array((e.length - 1) * 6));
        var a = n.data, o = s.data;
        a[0] = 0, a[1] = 0, a[2] = 0, a[3] = 1;
        for (var u = 0, h = e[0], l = this._width * this.textureScale, c = e.length, d = 0; d < c; d++) {
          var p = d * 4;
          if (this.textureScale > 0) {
            var g = h.x - e[d].x, v = h.y - e[d].y, m = Math.sqrt(g * g + v * v);
            h = e[d], u += m / l;
          } else
            u = d / (c - 1);
          a[p] = u, a[p + 1] = 0, a[p + 2] = u, a[p + 3] = 1;
        }
        for (var _ = 0, d = 0; d < c - 1; d++) {
          var p = d * 2;
          o[_++] = p, o[_++] = p + 1, o[_++] = p + 2, o[_++] = p + 2, o[_++] = p + 1, o[_++] = p + 3;
        }
        n.update(), s.update(), this.updateVertices();
      }
    }
  }, t.prototype.updateVertices = function() {
    var e = this.points;
    if (!(e.length < 1)) {
      for (var i = e[0], n, s = 0, a = 0, o = this.buffers[0].data, u = e.length, h = 0; h < u; h++) {
        var l = e[h], c = h * 4;
        h < e.length - 1 ? n = e[h + 1] : n = l, a = -(n.x - i.x), s = n.y - i.y;
        var d = Math.sqrt(s * s + a * a), p = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;
        s /= d, a /= d, s *= p, a *= p, o[c] = l.x + s, o[c + 1] = l.y + a, o[c + 2] = l.x - s, o[c + 3] = l.y - a, i = l;
      }
      this.buffers[0].update();
    }
  }, t.prototype.update = function() {
    this.textureScale > 0 ? this.build() : this.updateVertices();
  }, t;
}(Ag);
(function(r) {
  Rl(t, r);
  function t(e, i, n) {
    n === void 0 && (n = 0);
    var s = this, a = new pB(e.height, i, n), o = new $c(e);
    return n > 0 && (e.baseTexture.wrapMode = xs.REPEAT), s = r.call(this, a, o) || this, s.autoUpdate = !0, s;
  }
  return t.prototype._render = function(e) {
    var i = this.geometry;
    (this.autoUpdate || i._width !== this.shader.texture.height) && (i._width = this.shader.texture.height, i.update()), r.prototype._render.call(this, e);
  }, t;
})(jc);
var vB = function(r) {
  Rl(t, r);
  function t(e, i, n) {
    var s = this, a = new dB(e.width, e.height, i, n), o = new $c(It.WHITE);
    return s = r.call(this, a, o) || this, s.texture = e, s.autoResize = !0, s;
  }
  return t.prototype.textureUpdated = function() {
    this._textureID = this.shader.texture._updateID;
    var e = this.geometry, i = this.shader.texture, n = i.width, s = i.height;
    this.autoResize && (e.width !== n || e.height !== s) && (e.width = this.shader.texture.width, e.height = this.shader.texture.height, e.build());
  }, Object.defineProperty(t.prototype, "texture", {
    get: function() {
      return this.shader.texture;
    },
    set: function(e) {
      this.shader.texture !== e && (this.shader.texture = e, this._textureID = -1, e.baseTexture.valid ? this.textureUpdated() : e.once("update", this.textureUpdated, this));
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype._render = function(e) {
    this._textureID !== this.shader.texture._updateID && this.textureUpdated(), r.prototype._render.call(this, e);
  }, t.prototype.destroy = function(e) {
    this.shader.texture.off("update", this.textureUpdated, this), r.prototype.destroy.call(this, e);
  }, t;
}(jc);
(function(r) {
  Rl(t, r);
  function t(e, i, n, s, a) {
    e === void 0 && (e = It.EMPTY);
    var o = this, u = new Ag(i, n, s);
    u.getBuffer("aVertexPosition").static = !1;
    var h = new $c(e);
    return o = r.call(this, u, h, null, a) || this, o.autoUpdate = !0, o;
  }
  return Object.defineProperty(t.prototype, "vertices", {
    get: function() {
      return this.geometry.getBuffer("aVertexPosition").data;
    },
    set: function(e) {
      this.geometry.getBuffer("aVertexPosition").data = e;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype._render = function(e) {
    this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(), r.prototype._render.call(this, e);
  }, t;
})(jc);
var ep = 10;
(function(r) {
  Rl(t, r);
  function t(e, i, n, s, a) {
    i === void 0 && (i = ep), n === void 0 && (n = ep), s === void 0 && (s = ep), a === void 0 && (a = ep);
    var o = r.call(this, It.WHITE, 4, 4) || this;
    return o._origWidth = e.orig.width, o._origHeight = e.orig.height, o._width = o._origWidth, o._height = o._origHeight, o._leftWidth = i, o._rightWidth = s, o._topHeight = n, o._bottomHeight = a, o.texture = e, o;
  }
  return t.prototype.textureUpdated = function() {
    this._textureID = this.shader.texture._updateID, this._refresh();
  }, Object.defineProperty(t.prototype, "vertices", {
    get: function() {
      return this.geometry.getBuffer("aVertexPosition").data;
    },
    set: function(e) {
      this.geometry.getBuffer("aVertexPosition").data = e;
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.updateHorizontalVertices = function() {
    var e = this.vertices, i = this._getMinScale();
    e[9] = e[11] = e[13] = e[15] = this._topHeight * i, e[17] = e[19] = e[21] = e[23] = this._height - this._bottomHeight * i, e[25] = e[27] = e[29] = e[31] = this._height;
  }, t.prototype.updateVerticalVertices = function() {
    var e = this.vertices, i = this._getMinScale();
    e[2] = e[10] = e[18] = e[26] = this._leftWidth * i, e[4] = e[12] = e[20] = e[28] = this._width - this._rightWidth * i, e[6] = e[14] = e[22] = e[30] = this._width;
  }, t.prototype._getMinScale = function() {
    var e = this._leftWidth + this._rightWidth, i = this._width > e ? 1 : this._width / e, n = this._topHeight + this._bottomHeight, s = this._height > n ? 1 : this._height / n, a = Math.min(i, s);
    return a;
  }, Object.defineProperty(t.prototype, "width", {
    get: function() {
      return this._width;
    },
    set: function(e) {
      this._width = e, this._refresh();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    get: function() {
      return this._height;
    },
    set: function(e) {
      this._height = e, this._refresh();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "leftWidth", {
    get: function() {
      return this._leftWidth;
    },
    set: function(e) {
      this._leftWidth = e, this._refresh();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "rightWidth", {
    get: function() {
      return this._rightWidth;
    },
    set: function(e) {
      this._rightWidth = e, this._refresh();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "topHeight", {
    get: function() {
      return this._topHeight;
    },
    set: function(e) {
      this._topHeight = e, this._refresh();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "bottomHeight", {
    get: function() {
      return this._bottomHeight;
    },
    set: function(e) {
      this._bottomHeight = e, this._refresh();
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype._refresh = function() {
    var e = this.texture, i = this.geometry.buffers[1].data;
    this._origWidth = e.orig.width, this._origHeight = e.orig.height;
    var n = 1 / this._origWidth, s = 1 / this._origHeight;
    i[0] = i[8] = i[16] = i[24] = 0, i[1] = i[3] = i[5] = i[7] = 0, i[6] = i[14] = i[22] = i[30] = 1, i[25] = i[27] = i[29] = i[31] = 1, i[2] = i[10] = i[18] = i[26] = n * this._leftWidth, i[4] = i[12] = i[20] = i[28] = 1 - n * this._rightWidth, i[9] = i[11] = i[13] = i[15] = s * this._topHeight, i[17] = i[19] = i[21] = i[23] = 1 - s * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.geometry.buffers[0].update(), this.geometry.buffers[1].update();
  }, t;
})(vB);
/*!
 * @pixi/sprite-animated - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var V_ = function(r, t) {
  return V_ = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, V_(r, t);
};
function gB(r, t) {
  V_(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var fC = function(r) {
  gB(t, r);
  function t(e, i) {
    i === void 0 && (i = !0);
    var n = r.call(this, e[0] instanceof It ? e[0] : e[0].texture) || this;
    return n._textures = null, n._durations = null, n._autoUpdate = i, n._isConnectedToTicker = !1, n.animationSpeed = 1, n.loop = !0, n.updateAnchor = !1, n.onComplete = null, n.onFrameChange = null, n.onLoop = null, n._currentTime = 0, n._playing = !1, n._previousFrame = null, n.textures = e, n;
  }
  return t.prototype.stop = function() {
    !this._playing || (this._playing = !1, this._autoUpdate && this._isConnectedToTicker && (He.shared.remove(this.update, this), this._isConnectedToTicker = !1));
  }, t.prototype.play = function() {
    this._playing || (this._playing = !0, this._autoUpdate && !this._isConnectedToTicker && (He.shared.add(this.update, this, Ss.HIGH), this._isConnectedToTicker = !0));
  }, t.prototype.gotoAndStop = function(e) {
    this.stop();
    var i = this.currentFrame;
    this._currentTime = e, i !== this.currentFrame && this.updateTexture();
  }, t.prototype.gotoAndPlay = function(e) {
    var i = this.currentFrame;
    this._currentTime = e, i !== this.currentFrame && this.updateTexture(), this.play();
  }, t.prototype.update = function(e) {
    if (!!this._playing) {
      var i = this.animationSpeed * e, n = this.currentFrame;
      if (this._durations !== null) {
        var s = this._currentTime % 1 * this._durations[this.currentFrame];
        for (s += i / 60 * 1e3; s < 0; )
          this._currentTime--, s += this._durations[this.currentFrame];
        var a = Math.sign(this.animationSpeed * e);
        for (this._currentTime = Math.floor(this._currentTime); s >= this._durations[this.currentFrame]; )
          s -= this._durations[this.currentFrame] * a, this._currentTime += a;
        this._currentTime += s / this._durations[this.currentFrame];
      } else
        this._currentTime += i;
      this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : n !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < n ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > n && this.onLoop()), this.updateTexture());
    }
  }, t.prototype.updateTexture = function() {
    var e = this.currentFrame;
    this._previousFrame !== e && (this._previousFrame = e, this._texture = this._textures[e], this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this.uvs = this._texture._uvs.uvsFloat32, this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor), this.onFrameChange && this.onFrameChange(this.currentFrame));
  }, t.prototype.destroy = function(e) {
    this.stop(), r.prototype.destroy.call(this, e), this.onComplete = null, this.onFrameChange = null, this.onLoop = null;
  }, t.fromFrames = function(e) {
    for (var i = [], n = 0; n < e.length; ++n)
      i.push(It.from(e[n]));
    return new t(i);
  }, t.fromImages = function(e) {
    for (var i = [], n = 0; n < e.length; ++n)
      i.push(It.from(e[n]));
    return new t(i);
  }, Object.defineProperty(t.prototype, "totalFrames", {
    get: function() {
      return this._textures.length;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "textures", {
    get: function() {
      return this._textures;
    },
    set: function(e) {
      if (e[0] instanceof It)
        this._textures = e, this._durations = null;
      else {
        this._textures = [], this._durations = [];
        for (var i = 0; i < e.length; i++)
          this._textures.push(e[i].texture), this._durations.push(e[i].time);
      }
      this._previousFrame = null, this.gotoAndStop(0), this.updateTexture();
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "currentFrame", {
    get: function() {
      var e = Math.floor(this._currentTime) % this._textures.length;
      return e < 0 && (e += this._textures.length), e;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "playing", {
    get: function() {
      return this._playing;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "autoUpdate", {
    get: function() {
      return this._autoUpdate;
    },
    set: function(e) {
      e !== this._autoUpdate && (this._autoUpdate = e, !this._autoUpdate && this._isConnectedToTicker ? (He.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (He.shared.add(this.update, this), this._isConnectedToTicker = !0));
    },
    enumerable: !1,
    configurable: !0
  }), t;
}(qe);
/*!
 * pixi.js - v6.5.3
 * Compiled Fri, 09 Sep 2022 13:55:20 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ns.add(
  zF,
  YF,
  WF,
  GM,
  vk,
  KT,
  Ek,
  Bk,
  cM,
  BM,
  LM,
  mk,
  oA,
  rM
);
var Xs;
class gl {
  constructor() {
    I(this, Xs, []);
  }
  add(t, e, i, n = {}) {
    if (t instanceof Zt) {
      switch (e) {
        case "loaded":
        case "update":
        case "error":
        case "dispose":
          t.on(e, i, n), f(this, Xs).push(() => t.off(e, i, n));
          break;
      }
      return;
    }
    if (t instanceof Fi) {
      t.on(e, i, n), f(this, Xs).push(() => t.off(e, i, n));
      return;
    }
    t.addEventListener(e, i, n), f(this, Xs).push(() => {
      var s;
      return t.removeEventListener(e, i, { capture: (s = n.capture) != null ? s : !1 });
    });
  }
  clear() {
    f(this, Xs).forEach((t) => t()), T(this, Xs, []);
  }
}
Xs = new WeakMap();
const On = /* @__PURE__ */ Object.create(null);
On.open = "0";
On.close = "1";
On.ping = "2";
On.pong = "3";
On.message = "4";
On.upgrade = "5";
On.noop = "6";
const xp = /* @__PURE__ */ Object.create(null);
Object.keys(On).forEach((r) => {
  xp[On[r]] = r;
});
const mB = { type: "error", data: "parser error" }, _B = typeof Blob == "function" || typeof Blob < "u" && Object.prototype.toString.call(Blob) === "[object BlobConstructor]", yB = typeof ArrayBuffer == "function", bB = (r) => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(r) : r && r.buffer instanceof ArrayBuffer, dC = ({ type: r, data: t }, e, i) => _B && t instanceof Blob ? e ? i(t) : tw(t, i) : yB && (t instanceof ArrayBuffer || bB(t)) ? e ? i(t) : tw(new Blob([t]), i) : i(On[r] + (t || "")), tw = (r, t) => {
  const e = new FileReader();
  return e.onload = function() {
    const i = e.result.split(",")[1];
    t("b" + i);
  }, e.readAsDataURL(r);
}, ew = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", Xl = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (let r = 0; r < ew.length; r++)
  Xl[ew.charCodeAt(r)] = r;
const xB = (r) => {
  let t = r.length * 0.75, e = r.length, i, n = 0, s, a, o, u;
  r[r.length - 1] === "=" && (t--, r[r.length - 2] === "=" && t--);
  const h = new ArrayBuffer(t), l = new Uint8Array(h);
  for (i = 0; i < e; i += 4)
    s = Xl[r.charCodeAt(i)], a = Xl[r.charCodeAt(i + 1)], o = Xl[r.charCodeAt(i + 2)], u = Xl[r.charCodeAt(i + 3)], l[n++] = s << 2 | a >> 4, l[n++] = (a & 15) << 4 | o >> 2, l[n++] = (o & 3) << 6 | u & 63;
  return h;
}, EB = typeof ArrayBuffer == "function", pC = (r, t) => {
  if (typeof r != "string")
    return {
      type: "message",
      data: vC(r, t)
    };
  const e = r.charAt(0);
  return e === "b" ? {
    type: "message",
    data: wB(r.substring(1), t)
  } : xp[e] ? r.length > 1 ? {
    type: xp[e],
    data: r.substring(1)
  } : {
    type: xp[e]
  } : mB;
}, wB = (r, t) => {
  if (EB) {
    const e = xB(r);
    return vC(e, t);
  } else
    return { base64: !0, data: r };
}, vC = (r, t) => {
  switch (t) {
    case "blob":
      return r instanceof ArrayBuffer ? new Blob([r]) : r;
    case "arraybuffer":
    default:
      return r;
  }
}, gC = String.fromCharCode(30), TB = (r, t) => {
  const e = r.length, i = new Array(e);
  let n = 0;
  r.forEach((s, a) => {
    dC(s, !1, (o) => {
      i[a] = o, ++n === e && t(i.join(gC));
    });
  });
}, CB = (r, t) => {
  const e = r.split(gC), i = [];
  for (let n = 0; n < e.length; n++) {
    const s = pC(e[n], t);
    if (i.push(s), s.type === "error")
      break;
  }
  return i;
}, mC = 4;
function rr(r) {
  if (r)
    return IB(r);
}
function IB(r) {
  for (var t in rr.prototype)
    r[t] = rr.prototype[t];
  return r;
}
rr.prototype.on = rr.prototype.addEventListener = function(r, t) {
  return this._callbacks = this._callbacks || {}, (this._callbacks["$" + r] = this._callbacks["$" + r] || []).push(t), this;
};
rr.prototype.once = function(r, t) {
  function e() {
    this.off(r, e), t.apply(this, arguments);
  }
  return e.fn = t, this.on(r, e), this;
};
rr.prototype.off = rr.prototype.removeListener = rr.prototype.removeAllListeners = rr.prototype.removeEventListener = function(r, t) {
  if (this._callbacks = this._callbacks || {}, arguments.length == 0)
    return this._callbacks = {}, this;
  var e = this._callbacks["$" + r];
  if (!e)
    return this;
  if (arguments.length == 1)
    return delete this._callbacks["$" + r], this;
  for (var i, n = 0; n < e.length; n++)
    if (i = e[n], i === t || i.fn === t) {
      e.splice(n, 1);
      break;
    }
  return e.length === 0 && delete this._callbacks["$" + r], this;
};
rr.prototype.emit = function(r) {
  this._callbacks = this._callbacks || {};
  for (var t = new Array(arguments.length - 1), e = this._callbacks["$" + r], i = 1; i < arguments.length; i++)
    t[i - 1] = arguments[i];
  if (e) {
    e = e.slice(0);
    for (var i = 0, n = e.length; i < n; ++i)
      e[i].apply(this, t);
  }
  return this;
};
rr.prototype.emitReserved = rr.prototype.emit;
rr.prototype.listeners = function(r) {
  return this._callbacks = this._callbacks || {}, this._callbacks["$" + r] || [];
};
rr.prototype.hasListeners = function(r) {
  return !!this.listeners(r).length;
};
const Ea = (() => typeof self < "u" ? self : typeof window < "u" ? window : Function("return this")())();
function _C(r, ...t) {
  return t.reduce((e, i) => (r.hasOwnProperty(i) && (e[i] = r[i]), e), {});
}
const RB = setTimeout, SB = clearTimeout;
function Fg(r, t) {
  t.useNativeTimers ? (r.setTimeoutFn = RB.bind(Ea), r.clearTimeoutFn = SB.bind(Ea)) : (r.setTimeoutFn = setTimeout.bind(Ea), r.clearTimeoutFn = clearTimeout.bind(Ea));
}
const PB = 1.33;
function NB(r) {
  return typeof r == "string" ? OB(r) : Math.ceil((r.byteLength || r.size) * PB);
}
function OB(r) {
  let t = 0, e = 0;
  for (let i = 0, n = r.length; i < n; i++)
    t = r.charCodeAt(i), t < 128 ? e += 1 : t < 2048 ? e += 2 : t < 55296 || t >= 57344 ? e += 3 : (i++, e += 4);
  return e;
}
class AB extends Error {
  constructor(t, e, i) {
    super(t), this.description = e, this.context = i, this.type = "TransportError";
  }
}
class yC extends rr {
  constructor(t) {
    super(), this.writable = !1, Fg(this, t), this.opts = t, this.query = t.query, this.readyState = "", this.socket = t.socket;
  }
  onError(t, e, i) {
    return super.emitReserved("error", new AB(t, e, i)), this;
  }
  open() {
    return (this.readyState === "closed" || this.readyState === "") && (this.readyState = "opening", this.doOpen()), this;
  }
  close() {
    return (this.readyState === "opening" || this.readyState === "open") && (this.doClose(), this.onClose()), this;
  }
  send(t) {
    this.readyState === "open" && this.write(t);
  }
  onOpen() {
    this.readyState = "open", this.writable = !0, super.emitReserved("open");
  }
  onData(t) {
    const e = pC(t, this.socket.binaryType);
    this.onPacket(e);
  }
  onPacket(t) {
    super.emitReserved("packet", t);
  }
  onClose(t) {
    this.readyState = "closed", super.emitReserved("close", t);
  }
}
const bC = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""), X_ = 64, FB = {};
let rw = 0, rp = 0, iw;
function nw(r) {
  let t = "";
  do
    t = bC[r % X_] + t, r = Math.floor(r / X_);
  while (r > 0);
  return t;
}
function xC() {
  const r = nw(+new Date());
  return r !== iw ? (rw = 0, iw = r) : r + "." + nw(rw++);
}
for (; rp < X_; rp++)
  FB[bC[rp]] = rp;
function EC(r) {
  let t = "";
  for (let e in r)
    r.hasOwnProperty(e) && (t.length && (t += "&"), t += encodeURIComponent(e) + "=" + encodeURIComponent(r[e]));
  return t;
}
function MB(r) {
  let t = {}, e = r.split("&");
  for (let i = 0, n = e.length; i < n; i++) {
    let s = e[i].split("=");
    t[decodeURIComponent(s[0])] = decodeURIComponent(s[1]);
  }
  return t;
}
let wC = !1;
try {
  wC = typeof XMLHttpRequest < "u" && "withCredentials" in new XMLHttpRequest();
} catch {
}
const kB = wC;
function TC(r) {
  const t = r.xdomain;
  try {
    if (typeof XMLHttpRequest < "u" && (!t || kB))
      return new XMLHttpRequest();
  } catch {
  }
  if (!t)
    try {
      return new Ea[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
    } catch {
    }
}
function BB() {
}
const LB = function() {
  return new TC({
    xdomain: !1
  }).responseType != null;
}();
class DB extends yC {
  constructor(t) {
    if (super(t), this.polling = !1, typeof location < "u") {
      const i = location.protocol === "https:";
      let n = location.port;
      n || (n = i ? "443" : "80"), this.xd = typeof location < "u" && t.hostname !== location.hostname || n !== t.port, this.xs = t.secure !== i;
    }
    const e = t && t.forceBase64;
    this.supportsBinary = LB && !e;
  }
  get name() {
    return "polling";
  }
  doOpen() {
    this.poll();
  }
  pause(t) {
    this.readyState = "pausing";
    const e = () => {
      this.readyState = "paused", t();
    };
    if (this.polling || !this.writable) {
      let i = 0;
      this.polling && (i++, this.once("pollComplete", function() {
        --i || e();
      })), this.writable || (i++, this.once("drain", function() {
        --i || e();
      }));
    } else
      e();
  }
  poll() {
    this.polling = !0, this.doPoll(), this.emitReserved("poll");
  }
  onData(t) {
    const e = (i) => {
      if (this.readyState === "opening" && i.type === "open" && this.onOpen(), i.type === "close")
        return this.onClose({ description: "transport closed by the server" }), !1;
      this.onPacket(i);
    };
    CB(t, this.socket.binaryType).forEach(e), this.readyState !== "closed" && (this.polling = !1, this.emitReserved("pollComplete"), this.readyState === "open" && this.poll());
  }
  doClose() {
    const t = () => {
      this.write([{ type: "close" }]);
    };
    this.readyState === "open" ? t() : this.once("open", t);
  }
  write(t) {
    this.writable = !1, TB(t, (e) => {
      this.doWrite(e, () => {
        this.writable = !0, this.emitReserved("drain");
      });
    });
  }
  uri() {
    let t = this.query || {};
    const e = this.opts.secure ? "https" : "http";
    let i = "";
    this.opts.timestampRequests !== !1 && (t[this.opts.timestampParam] = xC()), !this.supportsBinary && !t.sid && (t.b64 = 1), this.opts.port && (e === "https" && Number(this.opts.port) !== 443 || e === "http" && Number(this.opts.port) !== 80) && (i = ":" + this.opts.port);
    const n = EC(t), s = this.opts.hostname.indexOf(":") !== -1;
    return e + "://" + (s ? "[" + this.opts.hostname + "]" : this.opts.hostname) + i + this.opts.path + (n.length ? "?" + n : "");
  }
  request(t = {}) {
    return Object.assign(t, { xd: this.xd, xs: this.xs }, this.opts), new Sn(this.uri(), t);
  }
  doWrite(t, e) {
    const i = this.request({
      method: "POST",
      data: t
    });
    i.on("success", e), i.on("error", (n, s) => {
      this.onError("xhr post error", n, s);
    });
  }
  doPoll() {
    const t = this.request();
    t.on("data", this.onData.bind(this)), t.on("error", (e, i) => {
      this.onError("xhr poll error", e, i);
    }), this.pollXhr = t;
  }
}
class Sn extends rr {
  constructor(t, e) {
    super(), Fg(this, e), this.opts = e, this.method = e.method || "GET", this.uri = t, this.async = e.async !== !1, this.data = e.data !== void 0 ? e.data : null, this.create();
  }
  create() {
    const t = _C(this.opts, "agent", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "autoUnref");
    t.xdomain = !!this.opts.xd, t.xscheme = !!this.opts.xs;
    const e = this.xhr = new TC(t);
    try {
      e.open(this.method, this.uri, this.async);
      try {
        if (this.opts.extraHeaders) {
          e.setDisableHeaderCheck && e.setDisableHeaderCheck(!0);
          for (let i in this.opts.extraHeaders)
            this.opts.extraHeaders.hasOwnProperty(i) && e.setRequestHeader(i, this.opts.extraHeaders[i]);
        }
      } catch {
      }
      if (this.method === "POST")
        try {
          e.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
        } catch {
        }
      try {
        e.setRequestHeader("Accept", "*/*");
      } catch {
      }
      "withCredentials" in e && (e.withCredentials = this.opts.withCredentials), this.opts.requestTimeout && (e.timeout = this.opts.requestTimeout), e.onreadystatechange = () => {
        e.readyState === 4 && (e.status === 200 || e.status === 1223 ? this.onLoad() : this.setTimeoutFn(() => {
          this.onError(typeof e.status == "number" ? e.status : 0);
        }, 0));
      }, e.send(this.data);
    } catch (i) {
      this.setTimeoutFn(() => {
        this.onError(i);
      }, 0);
      return;
    }
    typeof document < "u" && (this.index = Sn.requestsCount++, Sn.requests[this.index] = this);
  }
  onError(t) {
    this.emitReserved("error", t, this.xhr), this.cleanup(!0);
  }
  cleanup(t) {
    if (!(typeof this.xhr > "u" || this.xhr === null)) {
      if (this.xhr.onreadystatechange = BB, t)
        try {
          this.xhr.abort();
        } catch {
        }
      typeof document < "u" && delete Sn.requests[this.index], this.xhr = null;
    }
  }
  onLoad() {
    const t = this.xhr.responseText;
    t !== null && (this.emitReserved("data", t), this.emitReserved("success"), this.cleanup());
  }
  abort() {
    this.cleanup();
  }
}
Sn.requestsCount = 0;
Sn.requests = {};
if (typeof document < "u") {
  if (typeof attachEvent == "function")
    attachEvent("onunload", sw);
  else if (typeof addEventListener == "function") {
    const r = "onpagehide" in Ea ? "pagehide" : "unload";
    addEventListener(r, sw, !1);
  }
}
function sw() {
  for (let r in Sn.requests)
    Sn.requests.hasOwnProperty(r) && Sn.requests[r].abort();
}
const UB = (() => typeof Promise == "function" && typeof Promise.resolve == "function" ? (t) => Promise.resolve().then(t) : (t, e) => e(t, 0))(), ip = Ea.WebSocket || Ea.MozWebSocket, aw = !0, GB = "arraybuffer", ow = typeof navigator < "u" && typeof navigator.product == "string" && navigator.product.toLowerCase() === "reactnative";
class HB extends yC {
  constructor(t) {
    super(t), this.supportsBinary = !t.forceBase64;
  }
  get name() {
    return "websocket";
  }
  doOpen() {
    if (!this.check())
      return;
    const t = this.uri(), e = this.opts.protocols, i = ow ? {} : _C(this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity");
    this.opts.extraHeaders && (i.headers = this.opts.extraHeaders);
    try {
      this.ws = aw && !ow ? e ? new ip(t, e) : new ip(t) : new ip(t, e, i);
    } catch (n) {
      return this.emitReserved("error", n);
    }
    this.ws.binaryType = this.socket.binaryType || GB, this.addEventListeners();
  }
  addEventListeners() {
    this.ws.onopen = () => {
      this.opts.autoUnref && this.ws._socket.unref(), this.onOpen();
    }, this.ws.onclose = (t) => this.onClose({
      description: "websocket connection closed",
      context: t
    }), this.ws.onmessage = (t) => this.onData(t.data), this.ws.onerror = (t) => this.onError("websocket error", t);
  }
  write(t) {
    this.writable = !1;
    for (let e = 0; e < t.length; e++) {
      const i = t[e], n = e === t.length - 1;
      dC(i, this.supportsBinary, (s) => {
        const a = {};
        try {
          aw && this.ws.send(s);
        } catch {
        }
        n && UB(() => {
          this.writable = !0, this.emitReserved("drain");
        }, this.setTimeoutFn);
      });
    }
  }
  doClose() {
    typeof this.ws < "u" && (this.ws.close(), this.ws = null);
  }
  uri() {
    let t = this.query || {};
    const e = this.opts.secure ? "wss" : "ws";
    let i = "";
    this.opts.port && (e === "wss" && Number(this.opts.port) !== 443 || e === "ws" && Number(this.opts.port) !== 80) && (i = ":" + this.opts.port), this.opts.timestampRequests && (t[this.opts.timestampParam] = xC()), this.supportsBinary || (t.b64 = 1);
    const n = EC(t), s = this.opts.hostname.indexOf(":") !== -1;
    return e + "://" + (s ? "[" + this.opts.hostname + "]" : this.opts.hostname) + i + this.opts.path + (n.length ? "?" + n : "");
  }
  check() {
    return !!ip;
  }
}
const zB = {
  websocket: HB,
  polling: DB
}, jB = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, $B = [
  "source",
  "protocol",
  "authority",
  "userInfo",
  "user",
  "password",
  "host",
  "port",
  "relative",
  "path",
  "directory",
  "file",
  "query",
  "anchor"
];
function W_(r) {
  const t = r, e = r.indexOf("["), i = r.indexOf("]");
  e != -1 && i != -1 && (r = r.substring(0, e) + r.substring(e, i).replace(/:/g, ";") + r.substring(i, r.length));
  let n = jB.exec(r || ""), s = {}, a = 14;
  for (; a--; )
    s[$B[a]] = n[a] || "";
  return e != -1 && i != -1 && (s.source = t, s.host = s.host.substring(1, s.host.length - 1).replace(/;/g, ":"), s.authority = s.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), s.ipv6uri = !0), s.pathNames = VB(s, s.path), s.queryKey = XB(s, s.query), s;
}
function VB(r, t) {
  const e = /\/{2,9}/g, i = t.replace(e, "/").split("/");
  return (t.substr(0, 1) == "/" || t.length === 0) && i.splice(0, 1), t.substr(t.length - 1, 1) == "/" && i.splice(i.length - 1, 1), i;
}
function XB(r, t) {
  const e = {};
  return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function(i, n, s) {
    n && (e[n] = s);
  }), e;
}
class $s extends rr {
  constructor(t, e = {}) {
    super(), t && typeof t == "object" && (e = t, t = null), t ? (t = W_(t), e.hostname = t.host, e.secure = t.protocol === "https" || t.protocol === "wss", e.port = t.port, t.query && (e.query = t.query)) : e.host && (e.hostname = W_(e.host).host), Fg(this, e), this.secure = e.secure != null ? e.secure : typeof location < "u" && location.protocol === "https:", e.hostname && !e.port && (e.port = this.secure ? "443" : "80"), this.hostname = e.hostname || (typeof location < "u" ? location.hostname : "localhost"), this.port = e.port || (typeof location < "u" && location.port ? location.port : this.secure ? "443" : "80"), this.transports = e.transports || ["polling", "websocket"], this.readyState = "", this.writeBuffer = [], this.prevBufferLen = 0, this.opts = Object.assign({
      path: "/engine.io",
      agent: !1,
      withCredentials: !1,
      upgrade: !0,
      timestampParam: "t",
      rememberUpgrade: !1,
      rejectUnauthorized: !0,
      perMessageDeflate: {
        threshold: 1024
      },
      transportOptions: {},
      closeOnBeforeunload: !0
    }, e), this.opts.path = this.opts.path.replace(/\/$/, "") + "/", typeof this.opts.query == "string" && (this.opts.query = MB(this.opts.query)), this.id = null, this.upgrades = null, this.pingInterval = null, this.pingTimeout = null, this.pingTimeoutTimer = null, typeof addEventListener == "function" && (this.opts.closeOnBeforeunload && addEventListener("beforeunload", () => {
      this.transport && (this.transport.removeAllListeners(), this.transport.close());
    }, !1), this.hostname !== "localhost" && (this.offlineEventListener = () => {
      this.onClose("transport close", {
        description: "network connection lost"
      });
    }, addEventListener("offline", this.offlineEventListener, !1))), this.open();
  }
  createTransport(t) {
    const e = Object.assign({}, this.opts.query);
    e.EIO = mC, e.transport = t, this.id && (e.sid = this.id);
    const i = Object.assign({}, this.opts.transportOptions[t], this.opts, {
      query: e,
      socket: this,
      hostname: this.hostname,
      secure: this.secure,
      port: this.port
    });
    return new zB[t](i);
  }
  open() {
    let t;
    if (this.opts.rememberUpgrade && $s.priorWebsocketSuccess && this.transports.indexOf("websocket") !== -1)
      t = "websocket";
    else if (this.transports.length === 0) {
      this.setTimeoutFn(() => {
        this.emitReserved("error", "No transports available");
      }, 0);
      return;
    } else
      t = this.transports[0];
    this.readyState = "opening";
    try {
      t = this.createTransport(t);
    } catch {
      this.transports.shift(), this.open();
      return;
    }
    t.open(), this.setTransport(t);
  }
  setTransport(t) {
    this.transport && this.transport.removeAllListeners(), this.transport = t, t.on("drain", this.onDrain.bind(this)).on("packet", this.onPacket.bind(this)).on("error", this.onError.bind(this)).on("close", (e) => this.onClose("transport close", e));
  }
  probe(t) {
    let e = this.createTransport(t), i = !1;
    $s.priorWebsocketSuccess = !1;
    const n = () => {
      i || (e.send([{ type: "ping", data: "probe" }]), e.once("packet", (c) => {
        if (!i)
          if (c.type === "pong" && c.data === "probe") {
            if (this.upgrading = !0, this.emitReserved("upgrading", e), !e)
              return;
            $s.priorWebsocketSuccess = e.name === "websocket", this.transport.pause(() => {
              i || this.readyState !== "closed" && (l(), this.setTransport(e), e.send([{ type: "upgrade" }]), this.emitReserved("upgrade", e), e = null, this.upgrading = !1, this.flush());
            });
          } else {
            const d = new Error("probe error");
            d.transport = e.name, this.emitReserved("upgradeError", d);
          }
      }));
    };
    function s() {
      i || (i = !0, l(), e.close(), e = null);
    }
    const a = (c) => {
      const d = new Error("probe error: " + c);
      d.transport = e.name, s(), this.emitReserved("upgradeError", d);
    };
    function o() {
      a("transport closed");
    }
    function u() {
      a("socket closed");
    }
    function h(c) {
      e && c.name !== e.name && s();
    }
    const l = () => {
      e.removeListener("open", n), e.removeListener("error", a), e.removeListener("close", o), this.off("close", u), this.off("upgrading", h);
    };
    e.once("open", n), e.once("error", a), e.once("close", o), this.once("close", u), this.once("upgrading", h), e.open();
  }
  onOpen() {
    if (this.readyState = "open", $s.priorWebsocketSuccess = this.transport.name === "websocket", this.emitReserved("open"), this.flush(), this.readyState === "open" && this.opts.upgrade && this.transport.pause) {
      let t = 0;
      const e = this.upgrades.length;
      for (; t < e; t++)
        this.probe(this.upgrades[t]);
    }
  }
  onPacket(t) {
    if (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing")
      switch (this.emitReserved("packet", t), this.emitReserved("heartbeat"), t.type) {
        case "open":
          this.onHandshake(JSON.parse(t.data));
          break;
        case "ping":
          this.resetPingTimeout(), this.sendPacket("pong"), this.emitReserved("ping"), this.emitReserved("pong");
          break;
        case "error":
          const e = new Error("server error");
          e.code = t.data, this.onError(e);
          break;
        case "message":
          this.emitReserved("data", t.data), this.emitReserved("message", t.data);
          break;
      }
  }
  onHandshake(t) {
    this.emitReserved("handshake", t), this.id = t.sid, this.transport.query.sid = t.sid, this.upgrades = this.filterUpgrades(t.upgrades), this.pingInterval = t.pingInterval, this.pingTimeout = t.pingTimeout, this.maxPayload = t.maxPayload, this.onOpen(), this.readyState !== "closed" && this.resetPingTimeout();
  }
  resetPingTimeout() {
    this.clearTimeoutFn(this.pingTimeoutTimer), this.pingTimeoutTimer = this.setTimeoutFn(() => {
      this.onClose("ping timeout");
    }, this.pingInterval + this.pingTimeout), this.opts.autoUnref && this.pingTimeoutTimer.unref();
  }
  onDrain() {
    this.writeBuffer.splice(0, this.prevBufferLen), this.prevBufferLen = 0, this.writeBuffer.length === 0 ? this.emitReserved("drain") : this.flush();
  }
  flush() {
    if (this.readyState !== "closed" && this.transport.writable && !this.upgrading && this.writeBuffer.length) {
      const t = this.getWritablePackets();
      this.transport.send(t), this.prevBufferLen = t.length, this.emitReserved("flush");
    }
  }
  getWritablePackets() {
    if (!(this.maxPayload && this.transport.name === "polling" && this.writeBuffer.length > 1))
      return this.writeBuffer;
    let e = 1;
    for (let i = 0; i < this.writeBuffer.length; i++) {
      const n = this.writeBuffer[i].data;
      if (n && (e += NB(n)), i > 0 && e > this.maxPayload)
        return this.writeBuffer.slice(0, i);
      e += 2;
    }
    return this.writeBuffer;
  }
  write(t, e, i) {
    return this.sendPacket("message", t, e, i), this;
  }
  send(t, e, i) {
    return this.sendPacket("message", t, e, i), this;
  }
  sendPacket(t, e, i, n) {
    if (typeof e == "function" && (n = e, e = void 0), typeof i == "function" && (n = i, i = null), this.readyState === "closing" || this.readyState === "closed")
      return;
    i = i || {}, i.compress = i.compress !== !1;
    const s = {
      type: t,
      data: e,
      options: i
    };
    this.emitReserved("packetCreate", s), this.writeBuffer.push(s), n && this.once("flush", n), this.flush();
  }
  close() {
    const t = () => {
      this.onClose("forced close"), this.transport.close();
    }, e = () => {
      this.off("upgrade", e), this.off("upgradeError", e), t();
    }, i = () => {
      this.once("upgrade", e), this.once("upgradeError", e);
    };
    return (this.readyState === "opening" || this.readyState === "open") && (this.readyState = "closing", this.writeBuffer.length ? this.once("drain", () => {
      this.upgrading ? i() : t();
    }) : this.upgrading ? i() : t()), this;
  }
  onError(t) {
    $s.priorWebsocketSuccess = !1, this.emitReserved("error", t), this.onClose("transport error", t);
  }
  onClose(t, e) {
    (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing") && (this.clearTimeoutFn(this.pingTimeoutTimer), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), typeof removeEventListener == "function" && removeEventListener("offline", this.offlineEventListener, !1), this.readyState = "closed", this.id = null, this.emitReserved("close", t, e), this.writeBuffer = [], this.prevBufferLen = 0);
  }
  filterUpgrades(t) {
    const e = [];
    let i = 0;
    const n = t.length;
    for (; i < n; i++)
      ~this.transports.indexOf(t[i]) && e.push(t[i]);
    return e;
  }
}
$s.protocol = mC;
function WB(r, t = "", e) {
  let i = r;
  e = e || typeof location < "u" && location, r == null && (r = e.protocol + "//" + e.host), typeof r == "string" && (r.charAt(0) === "/" && (r.charAt(1) === "/" ? r = e.protocol + r : r = e.host + r), /^(https?|wss?):\/\//.test(r) || (typeof e < "u" ? r = e.protocol + "//" + r : r = "https://" + r), i = W_(r)), i.port || (/^(http|ws)$/.test(i.protocol) ? i.port = "80" : /^(http|ws)s$/.test(i.protocol) && (i.port = "443")), i.path = i.path || "/";
  const s = i.host.indexOf(":") !== -1 ? "[" + i.host + "]" : i.host;
  return i.id = i.protocol + "://" + s + ":" + i.port + t, i.href = i.protocol + "://" + s + (e && e.port === i.port ? "" : ":" + i.port), i;
}
const YB = typeof ArrayBuffer == "function", qB = (r) => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(r) : r.buffer instanceof ArrayBuffer, CC = Object.prototype.toString, ZB = typeof Blob == "function" || typeof Blob < "u" && CC.call(Blob) === "[object BlobConstructor]", JB = typeof File == "function" || typeof File < "u" && CC.call(File) === "[object FileConstructor]";
function Fb(r) {
  return YB && (r instanceof ArrayBuffer || qB(r)) || ZB && r instanceof Blob || JB && r instanceof File;
}
function Ep(r, t) {
  if (!r || typeof r != "object")
    return !1;
  if (Array.isArray(r)) {
    for (let e = 0, i = r.length; e < i; e++)
      if (Ep(r[e]))
        return !0;
    return !1;
  }
  if (Fb(r))
    return !0;
  if (r.toJSON && typeof r.toJSON == "function" && arguments.length === 1)
    return Ep(r.toJSON(), !0);
  for (const e in r)
    if (Object.prototype.hasOwnProperty.call(r, e) && Ep(r[e]))
      return !0;
  return !1;
}
function KB(r) {
  const t = [], e = r.data, i = r;
  return i.data = Y_(e, t), i.attachments = t.length, { packet: i, buffers: t };
}
function Y_(r, t) {
  if (!r)
    return r;
  if (Fb(r)) {
    const e = { _placeholder: !0, num: t.length };
    return t.push(r), e;
  } else if (Array.isArray(r)) {
    const e = new Array(r.length);
    for (let i = 0; i < r.length; i++)
      e[i] = Y_(r[i], t);
    return e;
  } else if (typeof r == "object" && !(r instanceof Date)) {
    const e = {};
    for (const i in r)
      Object.prototype.hasOwnProperty.call(r, i) && (e[i] = Y_(r[i], t));
    return e;
  }
  return r;
}
function QB(r, t) {
  return r.data = q_(r.data, t), r.attachments = void 0, r;
}
function q_(r, t) {
  if (!r)
    return r;
  if (r && r._placeholder === !0) {
    if (typeof r.num == "number" && r.num >= 0 && r.num < t.length)
      return t[r.num];
    throw new Error("illegal attachments");
  } else if (Array.isArray(r))
    for (let e = 0; e < r.length; e++)
      r[e] = q_(r[e], t);
  else if (typeof r == "object")
    for (const e in r)
      Object.prototype.hasOwnProperty.call(r, e) && (r[e] = q_(r[e], t));
  return r;
}
const tL = 5;
var ee;
(function(r) {
  r[r.CONNECT = 0] = "CONNECT", r[r.DISCONNECT = 1] = "DISCONNECT", r[r.EVENT = 2] = "EVENT", r[r.ACK = 3] = "ACK", r[r.CONNECT_ERROR = 4] = "CONNECT_ERROR", r[r.BINARY_EVENT = 5] = "BINARY_EVENT", r[r.BINARY_ACK = 6] = "BINARY_ACK";
})(ee || (ee = {}));
class eL {
  constructor(t) {
    this.replacer = t;
  }
  encode(t) {
    return (t.type === ee.EVENT || t.type === ee.ACK) && Ep(t) ? (t.type = t.type === ee.EVENT ? ee.BINARY_EVENT : ee.BINARY_ACK, this.encodeAsBinary(t)) : [this.encodeAsString(t)];
  }
  encodeAsString(t) {
    let e = "" + t.type;
    return (t.type === ee.BINARY_EVENT || t.type === ee.BINARY_ACK) && (e += t.attachments + "-"), t.nsp && t.nsp !== "/" && (e += t.nsp + ","), t.id != null && (e += t.id), t.data != null && (e += JSON.stringify(t.data, this.replacer)), e;
  }
  encodeAsBinary(t) {
    const e = KB(t), i = this.encodeAsString(e.packet), n = e.buffers;
    return n.unshift(i), n;
  }
}
class Mb extends rr {
  constructor(t) {
    super(), this.reviver = t;
  }
  add(t) {
    let e;
    if (typeof t == "string") {
      if (this.reconstructor)
        throw new Error("got plaintext data when reconstructing a packet");
      e = this.decodeString(t), e.type === ee.BINARY_EVENT || e.type === ee.BINARY_ACK ? (this.reconstructor = new rL(e), e.attachments === 0 && super.emitReserved("decoded", e)) : super.emitReserved("decoded", e);
    } else if (Fb(t) || t.base64)
      if (this.reconstructor)
        e = this.reconstructor.takeBinaryData(t), e && (this.reconstructor = null, super.emitReserved("decoded", e));
      else
        throw new Error("got binary data when not reconstructing a packet");
    else
      throw new Error("Unknown type: " + t);
  }
  decodeString(t) {
    let e = 0;
    const i = {
      type: Number(t.charAt(0))
    };
    if (ee[i.type] === void 0)
      throw new Error("unknown packet type " + i.type);
    if (i.type === ee.BINARY_EVENT || i.type === ee.BINARY_ACK) {
      const s = e + 1;
      for (; t.charAt(++e) !== "-" && e != t.length; )
        ;
      const a = t.substring(s, e);
      if (a != Number(a) || t.charAt(e) !== "-")
        throw new Error("Illegal attachments");
      i.attachments = Number(a);
    }
    if (t.charAt(e + 1) === "/") {
      const s = e + 1;
      for (; ++e && !(t.charAt(e) === "," || e === t.length); )
        ;
      i.nsp = t.substring(s, e);
    } else
      i.nsp = "/";
    const n = t.charAt(e + 1);
    if (n !== "" && Number(n) == n) {
      const s = e + 1;
      for (; ++e; ) {
        const a = t.charAt(e);
        if (a == null || Number(a) != a) {
          --e;
          break;
        }
        if (e === t.length)
          break;
      }
      i.id = Number(t.substring(s, e + 1));
    }
    if (t.charAt(++e)) {
      const s = this.tryParse(t.substr(e));
      if (Mb.isPayloadValid(i.type, s))
        i.data = s;
      else
        throw new Error("invalid payload");
    }
    return i;
  }
  tryParse(t) {
    try {
      return JSON.parse(t, this.reviver);
    } catch {
      return !1;
    }
  }
  static isPayloadValid(t, e) {
    switch (t) {
      case ee.CONNECT:
        return typeof e == "object";
      case ee.DISCONNECT:
        return e === void 0;
      case ee.CONNECT_ERROR:
        return typeof e == "string" || typeof e == "object";
      case ee.EVENT:
      case ee.BINARY_EVENT:
        return Array.isArray(e) && e.length > 0;
      case ee.ACK:
      case ee.BINARY_ACK:
        return Array.isArray(e);
    }
  }
  destroy() {
    this.reconstructor && this.reconstructor.finishedReconstruction();
  }
}
class rL {
  constructor(t) {
    this.packet = t, this.buffers = [], this.reconPack = t;
  }
  takeBinaryData(t) {
    if (this.buffers.push(t), this.buffers.length === this.reconPack.attachments) {
      const e = QB(this.reconPack, this.buffers);
      return this.finishedReconstruction(), e;
    }
    return null;
  }
  finishedReconstruction() {
    this.reconPack = null, this.buffers = [];
  }
}
const iL = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  protocol: tL,
  get PacketType() {
    return ee;
  },
  Encoder: eL,
  Decoder: Mb
}, Symbol.toStringTag, { value: "Module" }));
function Wi(r, t, e) {
  return r.on(t, e), function() {
    r.off(t, e);
  };
}
const nL = Object.freeze({
  connect: 1,
  connect_error: 1,
  disconnect: 1,
  disconnecting: 1,
  newListener: 1,
  removeListener: 1
});
class IC extends rr {
  constructor(t, e, i) {
    super(), this.connected = !1, this.receiveBuffer = [], this.sendBuffer = [], this.ids = 0, this.acks = {}, this.flags = {}, this.io = t, this.nsp = e, i && i.auth && (this.auth = i.auth), this.io._autoConnect && this.open();
  }
  get disconnected() {
    return !this.connected;
  }
  subEvents() {
    if (this.subs)
      return;
    const t = this.io;
    this.subs = [
      Wi(t, "open", this.onopen.bind(this)),
      Wi(t, "packet", this.onpacket.bind(this)),
      Wi(t, "error", this.onerror.bind(this)),
      Wi(t, "close", this.onclose.bind(this))
    ];
  }
  get active() {
    return !!this.subs;
  }
  connect() {
    return this.connected ? this : (this.subEvents(), this.io._reconnecting || this.io.open(), this.io._readyState === "open" && this.onopen(), this);
  }
  open() {
    return this.connect();
  }
  send(...t) {
    return t.unshift("message"), this.emit.apply(this, t), this;
  }
  emit(t, ...e) {
    if (nL.hasOwnProperty(t))
      throw new Error('"' + t.toString() + '" is a reserved event name');
    e.unshift(t);
    const i = {
      type: ee.EVENT,
      data: e
    };
    if (i.options = {}, i.options.compress = this.flags.compress !== !1, typeof e[e.length - 1] == "function") {
      const a = this.ids++, o = e.pop();
      this._registerAckCallback(a, o), i.id = a;
    }
    const n = this.io.engine && this.io.engine.transport && this.io.engine.transport.writable;
    return this.flags.volatile && (!n || !this.connected) || (this.connected ? (this.notifyOutgoingListeners(i), this.packet(i)) : this.sendBuffer.push(i)), this.flags = {}, this;
  }
  _registerAckCallback(t, e) {
    const i = this.flags.timeout;
    if (i === void 0) {
      this.acks[t] = e;
      return;
    }
    const n = this.io.setTimeoutFn(() => {
      delete this.acks[t];
      for (let s = 0; s < this.sendBuffer.length; s++)
        this.sendBuffer[s].id === t && this.sendBuffer.splice(s, 1);
      e.call(this, new Error("operation has timed out"));
    }, i);
    this.acks[t] = (...s) => {
      this.io.clearTimeoutFn(n), e.apply(this, [null, ...s]);
    };
  }
  packet(t) {
    t.nsp = this.nsp, this.io._packet(t);
  }
  onopen() {
    typeof this.auth == "function" ? this.auth((t) => {
      this.packet({ type: ee.CONNECT, data: t });
    }) : this.packet({ type: ee.CONNECT, data: this.auth });
  }
  onerror(t) {
    this.connected || this.emitReserved("connect_error", t);
  }
  onclose(t, e) {
    this.connected = !1, delete this.id, this.emitReserved("disconnect", t, e);
  }
  onpacket(t) {
    if (t.nsp === this.nsp)
      switch (t.type) {
        case ee.CONNECT:
          if (t.data && t.data.sid) {
            const n = t.data.sid;
            this.onconnect(n);
          } else
            this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
          break;
        case ee.EVENT:
        case ee.BINARY_EVENT:
          this.onevent(t);
          break;
        case ee.ACK:
        case ee.BINARY_ACK:
          this.onack(t);
          break;
        case ee.DISCONNECT:
          this.ondisconnect();
          break;
        case ee.CONNECT_ERROR:
          this.destroy();
          const i = new Error(t.data.message);
          i.data = t.data.data, this.emitReserved("connect_error", i);
          break;
      }
  }
  onevent(t) {
    const e = t.data || [];
    t.id != null && e.push(this.ack(t.id)), this.connected ? this.emitEvent(e) : this.receiveBuffer.push(Object.freeze(e));
  }
  emitEvent(t) {
    if (this._anyListeners && this._anyListeners.length) {
      const e = this._anyListeners.slice();
      for (const i of e)
        i.apply(this, t);
    }
    super.emit.apply(this, t);
  }
  ack(t) {
    const e = this;
    let i = !1;
    return function(...n) {
      i || (i = !0, e.packet({
        type: ee.ACK,
        id: t,
        data: n
      }));
    };
  }
  onack(t) {
    const e = this.acks[t.id];
    typeof e == "function" && (e.apply(this, t.data), delete this.acks[t.id]);
  }
  onconnect(t) {
    this.id = t, this.connected = !0, this.emitBuffered(), this.emitReserved("connect");
  }
  emitBuffered() {
    this.receiveBuffer.forEach((t) => this.emitEvent(t)), this.receiveBuffer = [], this.sendBuffer.forEach((t) => {
      this.notifyOutgoingListeners(t), this.packet(t);
    }), this.sendBuffer = [];
  }
  ondisconnect() {
    this.destroy(), this.onclose("io server disconnect");
  }
  destroy() {
    this.subs && (this.subs.forEach((t) => t()), this.subs = void 0), this.io._destroy(this);
  }
  disconnect() {
    return this.connected && this.packet({ type: ee.DISCONNECT }), this.destroy(), this.connected && this.onclose("io client disconnect"), this;
  }
  close() {
    return this.disconnect();
  }
  compress(t) {
    return this.flags.compress = t, this;
  }
  get volatile() {
    return this.flags.volatile = !0, this;
  }
  timeout(t) {
    return this.flags.timeout = t, this;
  }
  onAny(t) {
    return this._anyListeners = this._anyListeners || [], this._anyListeners.push(t), this;
  }
  prependAny(t) {
    return this._anyListeners = this._anyListeners || [], this._anyListeners.unshift(t), this;
  }
  offAny(t) {
    if (!this._anyListeners)
      return this;
    if (t) {
      const e = this._anyListeners;
      for (let i = 0; i < e.length; i++)
        if (t === e[i])
          return e.splice(i, 1), this;
    } else
      this._anyListeners = [];
    return this;
  }
  listenersAny() {
    return this._anyListeners || [];
  }
  onAnyOutgoing(t) {
    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.push(t), this;
  }
  prependAnyOutgoing(t) {
    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.unshift(t), this;
  }
  offAnyOutgoing(t) {
    if (!this._anyOutgoingListeners)
      return this;
    if (t) {
      const e = this._anyOutgoingListeners;
      for (let i = 0; i < e.length; i++)
        if (t === e[i])
          return e.splice(i, 1), this;
    } else
      this._anyOutgoingListeners = [];
    return this;
  }
  listenersAnyOutgoing() {
    return this._anyOutgoingListeners || [];
  }
  notifyOutgoingListeners(t) {
    if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {
      const e = this._anyOutgoingListeners.slice();
      for (const i of e)
        i.apply(this, t.data);
    }
  }
}
function Sl(r) {
  r = r || {}, this.ms = r.min || 100, this.max = r.max || 1e4, this.factor = r.factor || 2, this.jitter = r.jitter > 0 && r.jitter <= 1 ? r.jitter : 0, this.attempts = 0;
}
Sl.prototype.duration = function() {
  var r = this.ms * Math.pow(this.factor, this.attempts++);
  if (this.jitter) {
    var t = Math.random(), e = Math.floor(t * this.jitter * r);
    r = (Math.floor(t * 10) & 1) == 0 ? r - e : r + e;
  }
  return Math.min(r, this.max) | 0;
};
Sl.prototype.reset = function() {
  this.attempts = 0;
};
Sl.prototype.setMin = function(r) {
  this.ms = r;
};
Sl.prototype.setMax = function(r) {
  this.max = r;
};
Sl.prototype.setJitter = function(r) {
  this.jitter = r;
};
class Z_ extends rr {
  constructor(t, e) {
    var i;
    super(), this.nsps = {}, this.subs = [], t && typeof t == "object" && (e = t, t = void 0), e = e || {}, e.path = e.path || "/socket.io", this.opts = e, Fg(this, e), this.reconnection(e.reconnection !== !1), this.reconnectionAttempts(e.reconnectionAttempts || 1 / 0), this.reconnectionDelay(e.reconnectionDelay || 1e3), this.reconnectionDelayMax(e.reconnectionDelayMax || 5e3), this.randomizationFactor((i = e.randomizationFactor) !== null && i !== void 0 ? i : 0.5), this.backoff = new Sl({
      min: this.reconnectionDelay(),
      max: this.reconnectionDelayMax(),
      jitter: this.randomizationFactor()
    }), this.timeout(e.timeout == null ? 2e4 : e.timeout), this._readyState = "closed", this.uri = t;
    const n = e.parser || iL;
    this.encoder = new n.Encoder(), this.decoder = new n.Decoder(), this._autoConnect = e.autoConnect !== !1, this._autoConnect && this.open();
  }
  reconnection(t) {
    return arguments.length ? (this._reconnection = !!t, this) : this._reconnection;
  }
  reconnectionAttempts(t) {
    return t === void 0 ? this._reconnectionAttempts : (this._reconnectionAttempts = t, this);
  }
  reconnectionDelay(t) {
    var e;
    return t === void 0 ? this._reconnectionDelay : (this._reconnectionDelay = t, (e = this.backoff) === null || e === void 0 || e.setMin(t), this);
  }
  randomizationFactor(t) {
    var e;
    return t === void 0 ? this._randomizationFactor : (this._randomizationFactor = t, (e = this.backoff) === null || e === void 0 || e.setJitter(t), this);
  }
  reconnectionDelayMax(t) {
    var e;
    return t === void 0 ? this._reconnectionDelayMax : (this._reconnectionDelayMax = t, (e = this.backoff) === null || e === void 0 || e.setMax(t), this);
  }
  timeout(t) {
    return arguments.length ? (this._timeout = t, this) : this._timeout;
  }
  maybeReconnectOnOpen() {
    !this._reconnecting && this._reconnection && this.backoff.attempts === 0 && this.reconnect();
  }
  open(t) {
    if (~this._readyState.indexOf("open"))
      return this;
    this.engine = new $s(this.uri, this.opts);
    const e = this.engine, i = this;
    this._readyState = "opening", this.skipReconnect = !1;
    const n = Wi(e, "open", function() {
      i.onopen(), t && t();
    }), s = Wi(e, "error", (a) => {
      i.cleanup(), i._readyState = "closed", this.emitReserved("error", a), t ? t(a) : i.maybeReconnectOnOpen();
    });
    if (this._timeout !== !1) {
      const a = this._timeout;
      a === 0 && n();
      const o = this.setTimeoutFn(() => {
        n(), e.close(), e.emit("error", new Error("timeout"));
      }, a);
      this.opts.autoUnref && o.unref(), this.subs.push(function() {
        clearTimeout(o);
      });
    }
    return this.subs.push(n), this.subs.push(s), this;
  }
  connect(t) {
    return this.open(t);
  }
  onopen() {
    this.cleanup(), this._readyState = "open", this.emitReserved("open");
    const t = this.engine;
    this.subs.push(Wi(t, "ping", this.onping.bind(this)), Wi(t, "data", this.ondata.bind(this)), Wi(t, "error", this.onerror.bind(this)), Wi(t, "close", this.onclose.bind(this)), Wi(this.decoder, "decoded", this.ondecoded.bind(this)));
  }
  onping() {
    this.emitReserved("ping");
  }
  ondata(t) {
    try {
      this.decoder.add(t);
    } catch {
      this.onclose("parse error");
    }
  }
  ondecoded(t) {
    this.emitReserved("packet", t);
  }
  onerror(t) {
    this.emitReserved("error", t);
  }
  socket(t, e) {
    let i = this.nsps[t];
    return i || (i = new IC(this, t, e), this.nsps[t] = i), i;
  }
  _destroy(t) {
    const e = Object.keys(this.nsps);
    for (const i of e)
      if (this.nsps[i].active)
        return;
    this._close();
  }
  _packet(t) {
    const e = this.encoder.encode(t);
    for (let i = 0; i < e.length; i++)
      this.engine.write(e[i], t.options);
  }
  cleanup() {
    this.subs.forEach((t) => t()), this.subs.length = 0, this.decoder.destroy();
  }
  _close() {
    this.skipReconnect = !0, this._reconnecting = !1, this.onclose("forced close"), this.engine && this.engine.close();
  }
  disconnect() {
    return this._close();
  }
  onclose(t, e) {
    this.cleanup(), this.backoff.reset(), this._readyState = "closed", this.emitReserved("close", t, e), this._reconnection && !this.skipReconnect && this.reconnect();
  }
  reconnect() {
    if (this._reconnecting || this.skipReconnect)
      return this;
    const t = this;
    if (this.backoff.attempts >= this._reconnectionAttempts)
      this.backoff.reset(), this.emitReserved("reconnect_failed"), this._reconnecting = !1;
    else {
      const e = this.backoff.duration();
      this._reconnecting = !0;
      const i = this.setTimeoutFn(() => {
        t.skipReconnect || (this.emitReserved("reconnect_attempt", t.backoff.attempts), !t.skipReconnect && t.open((n) => {
          n ? (t._reconnecting = !1, t.reconnect(), this.emitReserved("reconnect_error", n)) : t.onreconnect();
        }));
      }, e);
      this.opts.autoUnref && i.unref(), this.subs.push(function() {
        clearTimeout(i);
      });
    }
  }
  onreconnect() {
    const t = this.backoff.attempts;
    this._reconnecting = !1, this.backoff.reset(), this.emitReserved("reconnect", t);
  }
}
const jl = {};
function wp(r, t) {
  typeof r == "object" && (t = r, r = void 0), t = t || {};
  const e = WB(r, t.path || "/socket.io"), i = e.source, n = e.id, s = e.path, a = jl[n] && s in jl[n].nsps, o = t.forceNew || t["force new connection"] || t.multiplex === !1 || a;
  let u;
  return o ? u = new Z_(i, t) : (jl[n] || (jl[n] = new Z_(i, t)), u = jl[n]), e.query && !t.query && (t.query = e.queryKey), u.socket(e.path, t);
}
Object.assign(wp, {
  Manager: Z_,
  Socket: IC,
  io: wp,
  connect: wp
});
var RC = (r, t, e) => {
  if (!t.has(r))
    throw TypeError("Cannot " + e);
}, Dt = (r, t, e) => (RC(r, t, "read from private field"), e ? e.call(r) : t.get(r)), fr = (r, t, e) => {
  if (t.has(r))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(r) : t.set(r, e);
}, pe = (r, t, e, i) => (RC(r, t, "write to private field"), i ? i.call(r, e) : t.set(r, e), e), sn, jn, $n, $a, Va, Xa, Wa, Ya, J_, kb, Tp, Wl, K_, Yl, Tu, Q_, Cu, ql;
const ty = class {
  constructor(r = {}, t) {
    this.hPlg = r, this.arg = t, this.hFactoryCls = {}, this.elc = new gl(), this.fetch = (e) => fetch(e), this.resolution = 1, this.data = { sys: {}, mark: {}, kidoku: {} }, fr(this, sn, 0), fr(this, jn, 0), fr(this, $n, 1), fr(this, $a, 0), fr(this, Va, 0), fr(this, Xa, 0), fr(this, Wa, 0), this.isFullScr = !1, this.extPort = 3776, fr(this, Ya, void 0), fr(this, J_, {
      auth: (e) => {
        if (e.t !== this.cfg.oCfg.debuger_token) {
          this.end();
          return;
        }
        this.toast("\u63A5\u7D9A");
      },
      continue: () => this.toast("\u518D\u751F"),
      disconnect: () => this.toast("\u5207\u65AD"),
      restart: (e) => {
        var i;
        this.send2Dbg((i = e == null ? void 0 : e.ri) != null ? i : "", {}), this.end(), this.run();
      },
      pause: () => this.toast("\u4E00\u6642\u505C\u6B62"),
      stopOnEntry: () => this.toast("\u4E00\u6642\u505C\u6B62"),
      stopOnDataBreakpoint: () => this.toast("\u6CE8\u610F"),
      stopOnBreakpoint: () => this.toast("\u6CE8\u610F"),
      stopOnStep: () => this.toast("\u4E00\u6B69\u9032\u3080"),
      stopOnStepIn: () => this.toast("\u30B9\u30C6\u30C3\u30D5\u309A\u30A4\u30F3"),
      stopOnStepOut: () => this.toast("\u30B9\u30C6\u30C3\u30D5\u309A\u30A2\u30A6\u30C8"),
      stopOnBackstep: () => this.toast("\u4E00\u6B69\u623B\u308B"),
      _addPath: (e) => this.cfg.addPath(e.fn, e.o)
    }), this.pathBaseCnvSnPath4Dbg = "", fr(this, Tp, []), this.callHook = (e, i) => {
    }, this.send2Dbg = (e, i) => {
      var n;
      (n = Dt(this, Ya)) == null || n.emit("data", e, i);
    }, this.copyBMFolder = (e, i) => {
    }, this.eraseBMFolder = (e) => {
    }, this.close = () => !1, this._export = () => !1, this._import = () => !1, this.navigate_to = () => !1, this.title = (e) => {
      const { text: i } = e;
      if (!i)
        throw "[title] text\u306F\u5FC5\u9808\u3067\u3059";
      return pe(this, Wl, i), this.titleSub(Dt(this, Wl) + Dt(this, Yl)), !1;
    }, fr(this, Wl, ""), fr(this, K_, (e) => {
      if (!e.key)
        return this.tglFlscr_sub(), !1;
      const i = e.key.toLowerCase();
      return this.elc.add(document, "keydown", (n) => {
        (n.altKey ? n.key === "Alt" ? "" : "alt+" : "") + (n.ctrlKey ? n.key === "Control" ? "" : "ctrl+" : "") + (n.shiftKey ? n.key === "Shift" ? "" : "shift+" : "") + n.key.toLowerCase() === i && (n.stopPropagation(), this.tglFlscr_sub());
      }, { passive: !0 }), !1;
    }), this.update_check = () => !1, this.window = () => !1, fr(this, Yl, ""), fr(this, Tu, (e, i) => ({ ret: i.toString(), ext_num: 0 })), fr(this, Q_, {
      1: { ext: "jpeg", fnc: (e) => Dt(this, Cu).call(this, e), mime: "image/jpeg" },
      2: { ext: "png", fnc: (e) => Dt(this, Cu).call(this, e), mime: "image/png" },
      3: { ext: "svg", fnc: (e) => Dt(this, Cu).call(this, e), mime: "image/svg+xml" },
      4: { ext: "webp", fnc: (e) => Dt(this, Cu).call(this, e), mime: "image/webp" },
      10: { ext: "mp3", fnc: (e) => e.arrayBuffer(), mime: "audio/mpeg" },
      11: { ext: "m4a", fnc: (e) => e.arrayBuffer(), mime: "audio/aac" },
      12: { ext: "ogg", fnc: (e) => e.arrayBuffer(), mime: "audio/ogg" },
      13: { ext: "aac", fnc: (e) => e.arrayBuffer(), mime: "audio/aac" },
      14: { ext: "flac", fnc: (e) => e.arrayBuffer(), mime: "audio/flac" },
      15: { ext: "wav", fnc: (e) => e.arrayBuffer(), mime: "audio/wav" },
      20: { ext: "mp4", fnc: (e) => Dt(this, ql).call(this, e), mime: "video/mp4" },
      21: { ext: "webm", fnc: (e) => Dt(this, ql).call(this, e), mime: "video/webm" },
      22: { ext: "ogv", fnc: (e) => Dt(this, ql).call(this, e), mime: "video/ogv" }
    }), fr(this, Cu, (e) => new Promise((i, n) => {
      const s = new Image();
      s.onload = () => i(s), s.onerror = (a) => n(a), s.src = URL.createObjectURL(e);
    })), fr(this, ql, (e) => new Promise((i, n) => {
      const s = document.createElement("video");
      this.elc.add(s, "error", () => {
        var a, o;
        return n((o = (a = s == null ? void 0 : s.error) == null ? void 0 : a.message) != null ? o : "");
      }), this.elc.add(s, "canplay", () => i(s)), s.src = URL.createObjectURL(e);
    })), this.enc = (e) => e, this.stk = () => "", this.hash = (e) => "", this.isApp = !1, this.$path_downloads = "", this.$path_userdata = "", this.canCapturePage = (e) => !1;
  }
  async loaded(r, t) {
    const e = r.snsys_pre;
    return delete r.snsys_pre, e == null ? void 0 : e.init({
      addTag: () => {
      },
      addLayCls: () => {
      },
      searchPath: () => "",
      getVal: () => ({}),
      resume: () => {
      },
      render: () => {
      },
      setDec: (i) => pe(this, Tu, i),
      setEnc: (i) => this.enc = i,
      getStK: (i) => this.stk = i,
      getHash: (i) => this.hash = i
    });
  }
  get cur() {
    return this.arg.cur;
  }
  get crypto() {
    return this.arg.crypto;
  }
  destroy() {
    this.elc.clear();
  }
  async loadPath(r, t) {
    this.cfg = t;
  }
  initVal(r, t, e) {
  }
  flush() {
  }
  async run() {
  }
  init(r, t, e, i) {
    this.val = e, this.appPixi = t;
    let n = "";
    try {
      this.val.setSys(this), n = "sys", n += Number(this.val.getVal("sys:TextLayer.Back.Alpha", 1)), n = "kidoku", this.val.saveKidoku();
    } catch (a) {
      console.error(`\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\uFF08${n}\uFF09\u304C\u58CA\u308C\u3066\u3044\u307E\u3059\u3002\u4E00\u5EA6\u30AF\u30EA\u30A2\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059 %o`, a);
    }
    r.close = (a) => this.close(a), r.export = (a) => this._export(a), r.import = (a) => this._import(a), r.navigate_to = (a) => this.navigate_to(a), r.title = (a) => this.title(a), r.toggle_full_screen = (a) => Dt(this, K_).call(this, a), r.update_check = (a) => this.update_check(a), r.window = (a) => this.window(a), e.setVal_Nochk("tmp", "const.sn.isApp", () => this.isApp), e.setVal_Nochk("tmp", "const.sn.isDbg", () => Y.isDbg), e.setVal_Nochk("tmp", "const.sn.isPackaged", () => Y.isPackaged), this.val.defTmp("const.sn.displayState", () => this.isFullScr), e.setVal_Nochk("sys", ty.VALNM_CFG_NS, this.cfg.oCfg.save_ns), e.flush(), Y.isDbg && this.attach_debug(i), this.hFactoryCls = {};
    const s = [];
    for (const a in this.hPlg)
      s.push(this.hPlg[a].init({
        addTag: (o, u) => {
          if (r[o])
            throw `\u3059\u3067\u306B\u5B9A\u7FA9\u6E08\u307F\u306E\u30BF\u30B0[${o}]\u3067\u3059`;
          r[o] = u;
        },
        addLayCls: (o, u) => {
          if (this.hFactoryCls[o])
            throw `\u3059\u3067\u306B\u5B9A\u7FA9\u6E08\u307F\u306E\u30EC\u30A4\u30E4cls\u3010${o}\u3011\u3067\u3059`;
          this.hFactoryCls[o] = u;
        },
        searchPath: (o, u = "") => this.cfg.searchPath(o, u),
        getVal: e.getVal,
        resume: () => i.resume(),
        render: (o, u, h = !1) => this.appPixi.renderer.render(o, { renderTexture: u, clear: h }),
        setDec: (o) => pe(this, Tu, o),
        setEnc: (o) => this.enc = o,
        getStK: (o) => this.stk = o,
        getHash: (o) => this.hash = o
      }));
    return s;
  }
  get cvsWidth() {
    return Dt(this, sn);
  }
  get cvsHeight() {
    return Dt(this, jn);
  }
  get cvsScale() {
    return Dt(this, $n);
  }
  get ofsLeft4elm() {
    return Dt(this, $a);
  }
  get ofsTop4elm() {
    return Dt(this, Va);
  }
  get ofsPadLeft_Dom2PIXI() {
    return Dt(this, Xa);
  }
  get ofsPadTop_Dom2PIXI() {
    return Dt(this, Wa);
  }
  cvsResize() {
    var o, u;
    let r = globalThis.innerWidth, t = globalThis.innerHeight;
    const e = this.appPixi.view, i = e.parentElement !== document.body;
    if (i) {
      const h = globalThis.getComputedStyle(e);
      r = parseFloat(h.width), t = parseFloat(h.height);
    }
    if (Y.isMobile) {
      const l = ((u = (o = screen.orientation) == null ? void 0 : o.angle) != null ? u : 0) % 180 === 0;
      (l && r > t || !l && r < t) && ([r, t] = [t, r]);
    }
    const n = e.getBoundingClientRect();
    if (pt(Y.hDip, "expanding", !0) || i || Y.stageW > r || Y.stageH > t)
      if (Y.stageW / Y.stageH <= r / t ? (pe(this, jn, t), pe(this, sn, Y.stageW / Y.stageH * t)) : (pe(this, sn, r), pe(this, jn, Y.stageH / Y.stageW * r)), pe(this, $n, Dt(this, sn) / Y.stageW), i)
        pe(this, Xa, 0), pe(this, Wa, 0);
      else {
        const h = 1 - Dt(this, $n);
        Y.isMobile ? (pe(this, Xa, (r - Dt(this, sn)) / 2 * h), pe(this, Wa, (t - Dt(this, jn)) / 2 * h)) : (pe(this, Xa, n.left * h), pe(this, Wa, n.top * h));
      }
    else
      pe(this, sn, Y.stageW), pe(this, jn, Y.stageH), pe(this, $n, 1), pe(this, Xa, 0), pe(this, Wa, 0);
    const s = e.parentElement.style;
    i || (s.position = "relative", s.width = `${Dt(this, sn)}px`, s.height = `${Dt(this, jn)}px`);
    const a = e.style;
    a.width = s.width, a.height = s.height, i ? (pe(this, $a, n.left), pe(this, Va, n.top)) : (pe(this, $a, 0), pe(this, Va, 0)), this.isFullScr && (pe(this, $a, Dt(this, $a) + (r - Dt(this, sn)) / 2), pe(this, Va, Dt(this, Va) + (t - Dt(this, jn)) / 2));
  }
  attach_debug(r) {
    this.attach_debug = () => {
    };
    const t = document.createElement("style");
    t.innerHTML = `/* SKYNovel Dbg */
.sn_BounceInOut { animation: sn_kfBounceInOut linear 1.5s; }
@keyframes sn_kfBounceInOut{
0%	{opacity: 0;	transform: scaleX(0.30) scaleY(0.30);}
10%	{opacity: 1;	transform: scaleX(1.10) scaleY(1.10);}
20%	{				transform: scaleX(0.95) scaleY(0.95);}
30%	{				transform: scaleX(1.00) scaleY(1.00);}
70%	{opacity: 1;}
100%{opacity: 0;}
}
.sn_BounceIn { animation: sn_kfBounceIn linear 0.3s; }
@keyframes sn_kfBounceIn{
0%	{opacity: 0;	transform: scaleX(0.30) scaleY(0.30);}
50%	{opacity: 1;	transform: scaleX(1.10) scaleY(1.10);}
100%{				transform: scaleX(0.95) scaleY(0.95);}
}
.sn_HopIn { animation: sn_kfHopIn linear 0.8s; }
@keyframes sn_kfHopIn{
0%	{transform:	translate(0px,   0px);}
15% {transform:	translate(0px, -25px);}
30% {transform:	translate(0px,   0px);}
45% {transform:	translate(0px, -15px);}
60% {transform:	translate(0px,   0px);}
75% {transform:	translate(0px,  -5px);}
100%{transform:	translate(0px,   0px);}
}`, document.getElementsByTagName("head")[0].appendChild(t), this.addHook((e, i) => {
      var n, s;
      return (s = (n = Dt(this, J_))[e]) == null ? void 0 : s.call(n, i);
    }), pe(this, Ya, wp(`http://localhost:${this.extPort}`)), Dt(this, Ya).on("data", (e, i) => {
      this.callHook(e, i);
    }).on("disconnect", () => r.setLoop(!0)), this.callHook = (e, i) => Dt(this, Tp).forEach((n) => n(e, i));
  }
  end() {
    var r;
    (r = Dt(this, Ya)) == null || r.disconnect(), pe(this, Ya, void 0);
  }
  toast(r) {
    var s, a, o;
    const t = document.body;
    t.querySelectorAll(".sn_BounceIn, .sn_HopIn").forEach((u) => t.removeChild(u));
    const e = document.createElement("img"), i = Dt(ty, kb)[r];
    e.src = `data:image/svg+xml;base64,${i.dat}`;
    const n = Math.min(Y.stageW, Y.stageH) / 4 * Dt(this, $n);
    e.width = e.height = n, e.style.cssText = `position: absolute;
left: ${(Y.stageW - n) / 2 * Dt(this, $n) + n * ((s = i.dx) != null ? s : 0)}px;
top: ${(Y.stageH - n) / 2 * Dt(this, $n) + n * ((a = i.dy) != null ? a : 0)}px;`, e.classList.add("sn_toast", (o = i.ease) != null ? o : "sn_BounceInOut"), i.ease || e.addEventListener("animationend", () => t.removeChild(e), { once: !0, passive: !0 }), t.insertBefore(e, this.appPixi.view);
  }
  setFire(r) {
    this.fire = r;
  }
  addHook(r) {
    Dt(this, Tp).push(r);
  }
  titleSub(r) {
  }
  tglFlscr_sub() {
  }
  setTitleInfo(r) {
    pe(this, Yl, r), this.titleSub(Dt(this, Wl) + Dt(this, Yl));
  }
  decStr(r, t) {
    return Dt(this, Tu).call(this, r, t).ret;
  }
  async dec(r, t) {
    const { ret: e, ext_num: i } = Dt(this, Tu).call(this, r, t), n = Dt(this, Q_)[i];
    return n != null && n.fnc ? await n.fnc(new Blob([e], { type: n.mime })) : e;
  }
  get path_downloads() {
    return this.$path_downloads;
  }
  get path_userdata() {
    return this.$path_userdata;
  }
  async savePic(r, t) {
  }
  async appendFile(r, t, e) {
  }
  async ensureFileSync(r) {
  }
};
let Bb = ty;
sn = /* @__PURE__ */ new WeakMap();
jn = /* @__PURE__ */ new WeakMap();
$n = /* @__PURE__ */ new WeakMap();
$a = /* @__PURE__ */ new WeakMap();
Va = /* @__PURE__ */ new WeakMap();
Xa = /* @__PURE__ */ new WeakMap();
Wa = /* @__PURE__ */ new WeakMap();
Ya = /* @__PURE__ */ new WeakMap();
J_ = /* @__PURE__ */ new WeakMap();
kb = /* @__PURE__ */ new WeakMap();
Tp = /* @__PURE__ */ new WeakMap();
Wl = /* @__PURE__ */ new WeakMap();
K_ = /* @__PURE__ */ new WeakMap();
Yl = /* @__PURE__ */ new WeakMap();
Tu = /* @__PURE__ */ new WeakMap();
Q_ = /* @__PURE__ */ new WeakMap();
Cu = /* @__PURE__ */ new WeakMap();
ql = /* @__PURE__ */ new WeakMap();
Bb.VALNM_CFG_NS = "const.sn.cfg.ns";
fr(Bb, kb, {
  \u63A5\u7D9A: { dx: -1, dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtNjQwIDMyMGMwIDE3Ni43My0xNDMuMjcgMzIwLTMyMCAzMjBzLTMyMC0xNDMuMjctMzIwLTMyMCAxNDMuMjctMzIwIDMyMC0zMjAgMzIwIDE0My4yNyAzMjAgMzIweiIvPjxwYXRoIGlkPSJiIiBkPSJtMCAyOTJ2NTUuODhoMTI3LjEzYzEyLjM3IDQ2IDU0LjEyIDc5Ljg3IDEwNCA3OS44N2g3Ny44N3YtMjE1LjYyYy00Ni43MyAwLTcyLjY4IDAtNzcuODggMC00OS43NCAwLTkxLjYyIDMzLjg3LTEwMy45OSA3OS44Ny0xNi45NSAwLTU5LjMzIDAtMTI3LjEzIDB6Ii8+PHBhdGggaWQ9ImMiIGQ9Im01MTIuODggMjkyYy0xMi4zOC00Ni01NC4xMy03OS44Ny0xMDQtNzkuODctNS4yMSAwLTMxLjIxIDAtNzggMHYyMTUuNzRoNzcuODdjNDkuODggMCA5MS43NS0zMy44NyAxMDQtNzkuODdoMTI3LjI1di01NmMtNzYuMjcgMC0xMTguNjUgMC0xMjcuMTIgMHoiLz48L2RlZnM+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9IiMzYWFiZDIiIHhsaW5rOmhyZWY9IiNiIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYiIvPjx1c2UgZmlsbD0iIzNhYWJkMiIgeGxpbms6aHJlZj0iI2MiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNjIi8+PC9zdmc+" },
  \u5207\u65AD: { dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtNjQwIDMyMGMwIDE3Ni43My0xNDMuMjcgMzIwLTMyMCAzMjBzLTMyMC0xNDMuMjctMzIwLTMyMCAxNDMuMjctMzIwIDMyMC0zMjAgMzIwIDE0My4yNyAzMjAgMzIweiIvPjxwYXRoIGlkPSJiIiBkPSJtMTkxLjUzIDIyMS4yNGMtNDUuNjggMC04NC4wMSAzMS4wNC05NS4zIDczLjE2LTYuNDEgMC0zOC40OSAwLTk2LjIzIDB2NTEuMjFoOTYuMjNjMTEuMyA0Mi4xMSA0OS42MyA3My4xNiA5NS4zIDczLjE2aDcxLjMzdi00OC4yNGg1My43OHYtMTAxLjA1aC01My43OHYtNDguMjRjLTQyLjggMC02Ni41NyAwLTcxLjMzIDB6Ii8+PHBhdGggaWQ9ImMiIGQ9Im00NDguNDcgMjIxLjIzYy00Ljc2IDAtMjguNTMgMC03MS4zMyAwdjE5Ny41M2g3MS4zM2M0NS42OCAwIDgzLjk5LTMxLjA0IDk1LjI5LTczLjE1aDk2LjI0di01MS4yMWgtOTYuMjRjLTMzLjA4LTQ4Ljc4LTY0Ljg0LTczLjE3LTk1LjI5LTczLjE3eiIvPjwvZGVmcz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0iI2RmNTY1NiIgeGxpbms6aHJlZj0iI2IiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNiIi8+PHVzZSBmaWxsPSIjZGY1NjU2IiB4bGluazpocmVmPSIjYyIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2MiLz48L3N2Zz4=" },
  \u518D\u751F: { dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0yNTguODMgMTExLjA1Yy0xLjI5Ljc5LTIuOTMuODMtNC4yNi4wNC0xLjI5LS43NC0yLjExLTIuMTItMi4xMS0zLjY3IDAtNy4xNiAwLTQyLjk3IDAtMTA3LjQzczAtMTAwLjI3IDAtMTA3LjQzYzAtMS41My44Mi0yLjkzIDIuMTEtMy42OCAxLjMzLS43NiAyLjk3LS43MiA0LjI2LjA0IDE4IDEwLjc1IDE2MiA5Ni43MSAxODAgMTA3LjQ2IDEuMjkuNzMgMi4wNSAyLjE0IDIuMDUgMy42MSAwIDEuNDktLjc2IDIuODgtMi4wNSAzLjYzLTM2IDIxLjQ5LTE2MiA5Ni42OS0xODAgMTA3LjQzeiIvPjwvZGVmcz48cGF0aCBkPSJtMTU0LjU3IDE3MC4xOWgzNDYuMTV2MzA3LjY5aC0zNDYuMTV6IiBmaWxsPSIjZmZmIi8+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48L3N2Zz4=" },
  \u4E00\u6642\u505C\u6B62: { dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0yMDAgMTAwdi0yMDBoODB2MjAwem0xNjAgMHYtMjAwaDgwdjIwMHoiLz48L2RlZnM+PHBhdGggZD0ibTE0Ny40OSAxODAuNDFoMzUyLjR2MjgyLjY5aC0zNTIuNHoiIGZpbGw9IiNmZmYiLz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjwvc3ZnPg==" },
  \u6CE8\u610F: { ease: "sn_HopIn", dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMzQzLjM0IDI5LjJjLTEwLjM3LTE3Ljk3LTM2LjMxLTE3Ljk3LTQ2LjY5IDAtMjkuMyA1MC43NS0yNjMuNyA0NTYuNzQtMjkzIDUwNy40OS0xMC4zNyAxNy45NyAyLjU5IDQwLjQ0IDIzLjM0IDQwLjQ0aDU4Ni4wMWMyMC43NSAwIDMzLjcyLTIyLjQ2IDIzLjM1LTQwLjQ0LTU4LjYtMTAxLjUtMjYzLjctNDU2Ljc0LTI5My4wMS01MDcuNDl6bS0yMy4zNCA0ODIuODNjLTE0LjUyIDAtMjYuMjktMi43MS0yNi4yOS02LjA2IDAtNC4yMSAwLTM3Ljg2IDAtNDIuMDcgMC0zLjM1IDExLjc3LTYuMDcgMjYuMjktNi4wN3MyNi4yOSAyLjcyIDI2LjI5IDYuMDd2NDIuMDdjLTcuODQgNC4wNC0xNi42MSA2LjA2LTI2LjI5IDYuMDZ6bTIxLjk5LTEwMy44NGMwIDUuNDMtOS44NSA5LjgzLTIxLjk5IDkuODMtMTIuMTUgMC0yMS45OS00LjQtMjEuOTktOS44MyAwLS4xMy4wNy0uMjUuMDgtLjM4LTEuMzctMTcuNTYtMTIuMy0xNTguMDYtMTMuNjctMTc1LjYyIDAtNS40MyAxNS45My05Ljg0IDM1LjU4LTkuODRzMzUuNTggNC40MSAzNS41OCA5Ljg0Yy0uOTEgMTEuNy01LjQ3IDcwLjI1LTEzLjY3IDE3NS42Mi4wNi4xNi4wOC4yOS4wOC4zOHoiLz48L2RlZnM+PHBhdGggZD0ibTI0MS4yOSAxOTEuNDRoMTQ1LjQ5djM1MS42NmgtMTQ1LjQ5eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iI2QyYmYzYSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+" },
  \u4E00\u6B69\u9032\u3080: { ease: "sn_BounceIn", dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0zNzYuOTMgOTEuOTdjMC01My41MSAwLTgzLjI0IDAtODkuMTktLjE1LjE0LS4yNS4zNC0uNDQuNDUtMTYuMTEgOS42Mi0xNDQuOTUgODYuNTQtMTYxLjA2IDk2LjE1LTEuMTUuNjktMi42Mi43My0zLjgxLjAyLTEuMTUtLjY0LTEuODktMS44OS0xLjg5LTMuMjggMC02LjQxIDAtMzguNDQgMC05Ni4xMSAwLTU3LjY5IDAtODkuNzQgMC05Ni4xNSAwLTEuMzUuNzQtMi42MiAxLjg5LTMuMjkgMS4xOS0uNjggMi42Ni0uNjQgMy44MS4wNCAxNi4xMSA5LjYyIDE0NC45NSA4Ni41NCAxNjEuMDYgOTYuMTYuMTkuMS4yOS4zMS40NC40NSAwLTYuMTMgMC0zNi43NyAwLTkxLjkyaDUzLjMydjE4Ni42N3oiLz48L2RlZnM+PHBhdGggZD0ibTE0Ny40OSAxNTQuMmgzNTIuNHYzMDguOWgtMzUyLjR6IiBmaWxsPSIjZmZmIi8+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48L3N2Zz4=" },
  \u4E00\u6B69\u623B\u308B: { ease: "sn_BounceIn", dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem00MzAuMjcgOTYuMTRjMCAxLjM1LS43NCAyLjYyLTEuODkgMy4yOC0xLjE5LjY5LTIuNjYuNjUtMy44MS0uMDMtMTYuMTEtOS42Mi0xNDQuOTUtODYuNTQtMTYxLjA1LTk2LjE2LS4yLS4xLS4yOS0uMzEtLjQ1LS40NXY5MS45MmgtNTMuMzJ2LTE4Ni42N2g1My4zMnY4OS4xOWMuMTYtLjE0LjI1LS4zNC40NS0uNDUgMTYuMS05LjYyIDE0NC45NC04Ni41NCAxNjEuMDUtOTYuMTYgMS4xNS0uNjggMi42Mi0uNzIgMy44MS0uMDEgMS4xNS42NCAxLjg5IDEuODkgMS44OSAzLjI4djk2LjExeiIvPjwvZGVmcz48cGF0aCBkPSJtMTQ3LjQ5IDE1NC4yaDM1Mi40djMwOC45aC0zNTIuNHoiIGZpbGw9IiNmZmYiLz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjwvc3ZnPg==" },
  \u30B9\u30C6\u30C3\u30D5\u309A\u30A4\u30F3: { ease: "sn_BounceIn", dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMTkuOTljMCAxNzYuNzQgMTQzLjI3IDMyMC4wMSAzMjAuMDEgMzIwLjAxIDE3Ni43MiAwIDMxOS45OS0xNDMuMjcgMzE5Ljk5LTMyMC4wMSAwLTE3Ni43Mi0xNDMuMjctMzE5Ljk5LTMxOS45OS0zMTkuOTktMTc2Ljc0IDAtMzIwLjAxIDE0My4yNy0zMjAuMDEgMzE5Ljk5em0xNTMuMDUtMjkuNzIgNTUuMTItNTUuMTMgMTExLjg0IDExMS44MiAxMTEuODItMTExLjgyIDU1LjEyIDU1LjEyLTE2Ni45NCAxNjYuOTd6Ii8+PC9kZWZzPjxwYXRoIGQ9Im0xNDcuNDkgMTU0LjJoMzUyLjR2MzA4LjloLTM1Mi40eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iIzJlMmUyZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+" },
  \u30B9\u30C6\u30C3\u30D5\u309A\u30A2\u30A6\u30C8: { ease: "sn_BounceIn", dat: "PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjAuMDFjMCAxNzYuNzIgMTQzLjI3IDMxOS45OSAzMTkuOTkgMzE5Ljk5IDE3Ni43NCAwIDMyMC4wMS0xNDMuMjcgMzIwLjAxLTMxOS45OSAwLTE3Ni43NC0xNDMuMjctMzIwLjAxLTMyMC4wMS0zMjAuMDEtMTc2LjcyIDAtMzE5Ljk5IDE0My4yNy0zMTkuOTkgMzIwLjAxem0zMTkuOTktMjYuOTgtMTExLjgyIDExMS44My01NS4xMi01NS4xMyAxNjYuOTQtMTY2Ljk2IDE2Ni45NiAxNjYuOTYtNTUuMTIgNTUuMTN6Ii8+PC9kZWZzPjxwYXRoIGQ9Im0xNDcuNDkgMTU0LjJoMzUyLjR2MzA4LjloLTM1Mi40eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iIzJlMmUyZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+" }
});
class sL extends Bb {
  constructor() {
    super(...arguments), this.isApp = !0;
  }
  async loadPath(t, e) {
    await super.loadPath(t, e);
    const i = this.arg.cur + "path.json", n = await this.readFileSync(i), s = JSON.parse(this.decStr(i, n));
    for (const a in s) {
      const o = t[a] = s[a];
      for (const u in o)
        u !== ":cnt" && (o[u] = this.arg.cur + o[u]);
    }
  }
  async savePic(t, e) {
    const i = e.slice(e.indexOf(",", 20) + 1);
    try {
      await this.writeFileSync(t, Buffer.from(i, "base64")), Y.debugLog && console.log(`\u753B\u50CF\u30D5\u30A1\u30A4\u30EB ${t} \u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F`);
    } catch (n) {
      throw n;
    }
  }
  async readFileSync(t) {
    return "";
  }
  async writeFileSync(t, e, i) {
  }
}
var SC = (r, t, e) => {
  if (!t.has(r))
    throw TypeError("Cannot " + e);
}, Fm = (r, t, e) => (SC(r, t, "read from private field"), e ? e.call(r) : t.get(r)), Mm = (r, t, e) => {
  if (t.has(r))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(r) : t.set(r, e);
}, uw = (r, t, e, i) => (SC(r, t, "write to private field"), i ? i.call(r, e) : t.set(r, e), e), Cp, Ip, ey;
const Rp = class {
  constructor(r) {
    this.sys = r, this.oCfg = {
      save_ns: "",
      window: {
        width: 300,
        height: 300
      },
      book: {
        title: "",
        creator: "",
        cre_url: "",
        publisher: "",
        pub_url: "",
        detail: "",
        version: "1.0"
      },
      log: { max_len: 1024 },
      init: {
        bg_color: "#000000",
        tagch_msecwait: 10,
        auto_msecpagewait: 3500,
        escape: ""
      },
      debug: {
        devtool: !1,
        token: !1,
        tag: !1,
        putCh: !1,
        debugLog: !1,
        baseTx: !1,
        masume: !1,
        variable: !1
      },
      code: {},
      debuger_token: ""
    }, this.userFnTail = "", this.hPathFn2Exts = {}, Mm(this, Cp, !1), Mm(this, Ip, !1), Mm(this, ey, /([^\/\s]+)\.([^\d]\w+)/);
  }
  static async generate(r) {
    const t = new Rp(r), e = r.cur + "prj.json", i = await (await r.fetch(e)).text(), n = JSON.parse(r.decStr(e, i));
    return await t.load(n), t;
  }
  async load(r) {
    var t, e, i, n, s, a, o, u;
    if (this.oCfg.save_ns = (t = r == null ? void 0 : r.save_ns) != null ? t : this.oCfg.save_ns, Y.stageW = this.oCfg.window.width = Number((i = (e = r == null ? void 0 : r.window) == null ? void 0 : e.width) != null ? i : this.oCfg.window.width), Y.stageH = this.oCfg.window.height = Number((s = (n = r == null ? void 0 : r.window) == null ? void 0 : n.height) != null ? s : this.oCfg.window.height), this.oCfg.book = { ...this.oCfg.book, ...r.book }, this.oCfg.log.max_len = (u = (o = (a = r.log) == null ? void 0 : a.max_len) == null ? void 0 : o.max_len) != null ? u : this.oCfg.log.max_len, this.oCfg.init = { ...this.oCfg.init, ...r.init }, this.oCfg.debug = { ...this.oCfg.debug, ...r.debug }, Y.debugLog = this.oCfg.debug.debugLog, this.oCfg.debuger_token = r.debuger_token, await this.sys.loadPath(this.hPathFn2Exts, this), uw(this, Cp, this.matchPath("^breakline$", Rp.EXT_SPRITE).length > 0), uw(this, Ip, this.matchPath("^breakpage$", Rp.EXT_SPRITE).length > 0), this.sys.crypto)
      for (const h in this.hPathFn2Exts) {
        const l = this.hPathFn2Exts[h];
        for (const c in l) {
          if (c.slice(-10) !== ":RIPEMD160")
            continue;
          const d = l[c].slice(l[c].lastIndexOf("/") + 1), p = l[c.slice(0, -10)], v = await (await this.sys.fetch(p)).text(), m = this.sys.hash(v);
          if (d !== m)
            throw `\u30D5\u30A1\u30A4\u30EB\u6539\u7AC4\u30A8\u30E9\u30FC\u3067\u3059 fn:${p}`;
        }
      }
  }
  get existsBreakline() {
    return Fm(this, Cp);
  }
  get existsBreakpage() {
    return Fm(this, Ip);
  }
  getNs() {
    return `skynovel.${this.oCfg.save_ns} - `;
  }
  searchPath(r, t = "") {
    if (!r)
      throw "[searchPath] fn\u304C\u7A7A\u3067\u3059";
    if (r.slice(0, 7) === "http://")
      return r;
    if (r.slice(0, 11) === "downloads:/") {
      const o = this.sys.path_downloads + r.slice(11);
      return this.sys.ensureFileSync(o), o;
    }
    if (r.slice(0, 10) === "userdata:/") {
      const o = this.sys.path_userdata + "storage/" + r.slice(10);
      return this.sys.ensureFileSync(o), o;
    }
    const e = r.match(Fm(this, ey));
    let i = e ? e[1] : r;
    const n = e ? e[2] : "";
    if (this.userFnTail) {
      const o = i + "@@" + this.userFnTail;
      if (o in this.hPathFn2Exts) {
        if (t === "")
          i = o;
        else
          for (let u in this.hPathFn2Exts[o])
            if (`|${t}|`.indexOf(`|${u}|`) !== -1) {
              i = o;
              break;
            }
      }
    }
    const s = this.hPathFn2Exts[i];
    if (!s)
      throw `\u30B5\u30FC\u30C1\u30D1\u30B9\u306B\u5B58\u5728\u3057\u306A\u3044\u30D5\u30A1\u30A4\u30EB\u3010${r}\u3011\u3067\u3059`;
    let a = "";
    if (!n) {
      const o = jt(s[":cnt"]);
      if (t === "") {
        if (o > 1)
          throw `\u6307\u5B9A\u30D5\u30A1\u30A4\u30EB\u3010${r}\u3011\u304C\u8907\u6570\u30DE\u30C3\u30C1\u3057\u307E\u3059\u3002\u30B5\u30FC\u30C1\u5BFE\u8C61\u62E1\u5F35\u5B50\u7FA4\u3010${t}\u3011\u3067\u7D5E\u308A\u8FBC\u3080\u304B\u3001\u30D5\u30A1\u30A4\u30EB\u540D\u3092\u500B\u5225\u306B\u3057\u3066\u4E0B\u3055\u3044\u3002`;
        return r;
      }
      const u = `|${t}|`;
      if (o > 1) {
        let h = 0;
        for (const l in s)
          if (u.indexOf(`|${l}|`) !== -1 && ++h > 1)
            throw `\u6307\u5B9A\u30D5\u30A1\u30A4\u30EB\u3010${r}\u3011\u304C\u8907\u6570\u30DE\u30C3\u30C1\u3057\u307E\u3059\u3002\u30B5\u30FC\u30C1\u5BFE\u8C61\u62E1\u5F35\u5B50\u7FA4\u3010${t}\u3011\u3067\u7D5E\u308A\u8FBC\u3080\u304B\u3001\u30D5\u30A1\u30A4\u30EB\u540D\u3092\u500B\u5225\u306B\u3057\u3066\u4E0B\u3055\u3044\u3002`;
      }
      for (let h in s)
        if (u.indexOf(`|${h}|`) > -1)
          return s[h];
      throw `\u30B5\u30FC\u30C1\u5BFE\u8C61\u62E1\u5F35\u5B50\u7FA4\u3010${t}\u3011\u306B\u30DE\u30C3\u30C1\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u304C\u30B5\u30FC\u30C1\u30D1\u30B9\u306B\u5B58\u5728\u3057\u307E\u305B\u3093\u3002\u63A2\u7D22\u30D5\u30A1\u30A4\u30EB\u540D=\u3010${r}\u3011`;
    }
    if (t !== "" && `|${t}|`.indexOf(`|${n}|`) === -1)
      throw `\u6307\u5B9A\u30D5\u30A1\u30A4\u30EB\u306E\u62E1\u5F35\u5B50\u3010${n}\u3011\u306F\u3001\u30B5\u30FC\u30C1\u5BFE\u8C61\u62E1\u5F35\u5B50\u7FA4\u3010${t}\u3011\u306B\u30DE\u30C3\u30C1\u3057\u307E\u305B\u3093\u3002\u63A2\u7D22\u30D5\u30A1\u30A4\u30EB\u540D=\u3010${r}\u3011`;
    if (a = s[n], !a)
      throw `\u30B5\u30FC\u30C1\u30D1\u30B9\u306B\u5B58\u5728\u3057\u306A\u3044\u62E1\u5F35\u5B50\u3010${n}\u3011\u3067\u3059\u3002\u63A2\u7D22\u30D5\u30A1\u30A4\u30EB\u540D=\u3010${r}\u3011\u3001\u30B5\u30FC\u30C1\u5BFE\u8C61\u62E1\u5F35\u5B50\u7FA4\u3010${t}\u3011`;
    return a;
  }
  matchPath(r, t = "") {
    const e = [], i = new RegExp(r), n = new RegExp(t);
    for (let s in this.hPathFn2Exts) {
      if (s.search(i) === -1)
        continue;
      const a = this.hPathFn2Exts[s];
      if (t === "") {
        e.push(a);
        continue;
      }
      const o = {};
      let u = !1;
      for (const h in a)
        h.search(n) !== -1 && (o[h] = s, u = !0);
      u && e.push(o);
    }
    return e;
  }
  addPath(r, t) {
    const e = {};
    for (const i in t)
      e[i] = (i.charAt(0) === ":" ? "" : this.sys.cur) + t[i];
    this.hPathFn2Exts[r] = e;
  }
};
let hr = Rp;
Cp = /* @__PURE__ */ new WeakMap();
Ip = /* @__PURE__ */ new WeakMap();
ey = /* @__PURE__ */ new WeakMap();
hr.EXT_SPRITE = "png|jpg|jpeg|json|svg|webp|mp4|webm";
hr.EXT_SCRIPT = "sn|ssn";
hr.EXT_FONT = "woff2|woff|otf|ttf";
hr.EXT_SOUND = "mp3|m4a|ogg|aac|flac|wav";
hr.EXT_HTML = "htm|html";
var uo, ln, ef;
const zs = class {
  constructor() {
    I(this, ln, () => {
    });
  }
  static setting(t) {
    t.sesame && T(zs, uo, t.sesame);
  }
  static getSesame() {
    return f(zs, uo);
  }
  static destroy() {
    T(zs, uo, "\u30FD");
  }
  init(t) {
    T(this, ln, t);
  }
  static setEscape(t) {
    T(zs, ef, new RegExp(
      `${t ? `(?<ce>\\${t}\\S)|` : ""}\uFF5C(?<str>[^\u300A\\n]+)\u300A(?<ruby>[^\u300B\\n]+)\u300B|(?:(?<kan>[\u2E80-\u2FDF\u3005\u3007\u303B\u3400-\u9FFF\u8C48-\uFAFF]+[\u3041-\u30FF]*|[^\u3000\uFF5C\u300A\u300B\\n])\u300A(?<kan_ruby>[^\u300B\\n]+)\u300B)|(?<txt>[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\u3000\uFF5C\u300A\u300B]+(?=\uFF5C)|[^\u3000\uFF5C\u300A\u300B]*[\u3041-\u30FF](?=[\u2E80-\u2FDF\u3005\u3007\u303B\u3400-\u9FFF\u8C48-\uFAFF]+\u300A)|.)`,
      "gs"
    ));
  }
  putTxt(t) {
    var i;
    let e = null;
    for (; e = f(zs, ef).exec(t); ) {
      const n = e == null ? void 0 : e.groups;
      if (!n)
        continue;
      const s = n.ruby;
      if (s) {
        this.putTxtRb(decodeURIComponent(n.str), s);
        continue;
      }
      const a = n.kan_ruby;
      if (a) {
        this.putTxtRb(n.kan, a);
        continue;
      }
      if (n.ce) {
        f(this, ln).call(this, n.ce.slice(1), "");
        continue;
      }
      Array.from((i = n.txt) != null ? i : "").forEach((o) => f(this, ln).call(this, o, ""));
    }
  }
  putTxtRb(t, e) {
    if (/^\w+｜{"/.test(e)) {
      f(this, ln).call(this, t, e);
      return;
    }
    const i = Array.from(t), n = i.length;
    if (/^\*.?$/.test(e)) {
      const u = "center\uFF5C" + (e === "*" ? f(zs, uo) : e.charAt(1));
      for (let h = 0; h < n; ++h)
        f(this, ln).call(this, i[h], u);
      return;
    }
    if (n === 1 || e.indexOf(" ") === -1) {
      f(this, ln).call(this, t, decodeURIComponent(e));
      return;
    }
    const s = e.split(" "), a = s.length, o = a > n ? a : n;
    for (let u = 0; u < o; ++u)
      f(this, ln).call(this, u < n ? i[u] : "", u < a ? decodeURIComponent(s[u]) : "");
  }
};
let wa = zs;
uo = new WeakMap(), ln = new WeakMap(), ef = new WeakMap(), I(wa, uo, "\u30FD"), I(wa, ef, void 0);
const PC = /(?<name>[^\s;\]]+)/;
function Sp(r) {
  const t = PC.exec(r.slice(1, -1)), e = t == null ? void 0 : t.groups;
  if (!e)
    throw `\u30BF\u30B0\u8A18\u8FF0\u3010${r}\u3011\u7570\u5E38\u3067\u3059(\u30BF\u30B0\u89E3\u6790)`;
  const i = e.name;
  return [i, r.slice(1 + i.length, -1)];
}
function Pp(r) {
  const t = PC.exec(r.slice(1)), e = t == null ? void 0 : t.groups;
  if (!e)
    throw `\u30BF\u30B0\u8A18\u8FF0\u3010${r}\u3011\u7570\u5E38\u3067\u3059(\u30BF\u30B0\u89E3\u6790)`;
  return e.name;
}
function aL(r) {
  const t = r.replaceAll("==", "\uFF1D").replaceAll("!=", "\u2260").split("="), e = t.length;
  if (e < 2 || e > 3)
    throw "\u300C&\u8A08\u7B97\u300D\u66F8\u5F0F\u3067\u306F\u300C=\u300D\u6307\u5B9A\u304C\u4E00\u3064\u304B\u4E8C\u3064\u5FC5\u8981\u3067\u3059";
  if (t[1].charAt(0) === "&")
    throw "\u300C&\u8A08\u7B97\u300D\u66F8\u5F0F\u3067\u306F\u300C&\u300D\u6307\u5B9A\u304C\u4E0D\u8981\u3067\u3059";
  return {
    name: t[0].replaceAll("\uFF1D", "==").replaceAll("\u2260", "!="),
    text: t[1].replaceAll("\uFF1D", "==").replaceAll("\u2260", "!="),
    cast: e === 3 ? t[2].trim() : void 0
  };
}
var ho, th, eh, rh, Pr;
class oL {
  constructor() {
    I(this, ho, void 0);
    I(this, th, void 0);
    I(this, eh, void 0);
    I(this, rh, void 0);
    I(this, Pr, void 0);
    T(this, th, new RegExp("")), T(this, eh, ""), T(this, rh, ""), this.replaceScr_C2M_And_let_ml = (t, e = 0) => {
      if (!!f(this, Pr)) {
        for (let i = t.len - 1; i >= e; --i) {
          const n = t.aToken[i];
          if (this.REG_TOKEN_NOTXT.test(n.charAt(0)))
            continue;
          const s = t.aLNum[i], a = n.match(f(this, th));
          if (!a)
            continue;
          let o = 1;
          for (let u = a.length - 1; u >= 0; --u) {
            let h = a[u];
            const l = f(this, Pr)[h.charAt(0)];
            l && (h = l + (l.slice(-1) === "]" ? "" : `'${h.slice(1, -1)}']`)), t.aToken.splice(i, o, h), t.aLNum.splice(i, o, s), o = 0;
          }
        }
        t.len = t.aToken.length;
      }
    }, this.setEscape("");
  }
  setEscape(t) {
    if (f(this, Pr) && t in f(this, Pr))
      throw "[\u30A8\u30B9\u30B1\u30FC\u30D7\u6587\u5B57] char\u3010" + t + "\u3011\u304C\u767B\u9332\u6E08\u307F\u306E\u62EC\u5F27\u30DE\u30AF\u30ED\u307E\u305F\u306F\u4E00\u6587\u5B57\u30DE\u30AF\u30ED\u3067\u3059";
    const e = t != null ? t : "\\";
    this.REG_TOKEN = new RegExp(
      (t ? `\\${t}\\S|` : "") + `\\n+|\\t+|\\[let_ml\\s+[^\\]]+\\].+?(?=\\[endlet_ml[\\]\\s])|\\[(?:[^"'#;\\]]+|` + (e ? `(?:"(?:\\${e}["'#\\n]|[^"])*"|'(?:\\${e}["'#\\n]|[^'])*'|\\#(?:\\${e}["'#\\n]|[^#])*\\#)` : `(["'#]).*?\\1`) + `|;[^\\n]*)*?]|;[^\\n]*|&[^&\\n]+&|&&?[^;\\n\\t&]+|^\\*\\w+|[^\\n\\t\\[;${t ? `\\${t}` : ""}]+`,
      "gs"
    ), wa.setEscape(t), T(this, ho, new RegExp(`[\\w\\s;[\\]*=&\uFF5C\u300A\u300B${t ? `\\${t}` : ""}]`)), this.REG_TOKEN_NOTXT = new RegExp(`[\\n\\t;\\[*&${t ? `\\${t}` : ""}]`);
  }
  matchToken(t) {
    var e;
    return (e = t.match(this.REG_TOKEN)) != null ? e : [];
  }
  bracket2macro(t, e, i) {
    var u;
    const { name: n, text: s } = t;
    if (!n)
      throw "[bracket2macro] name\u306F\u5FC5\u9808\u3067\u3059";
    if (!s)
      throw "[bracket2macro] text\u306F\u5FC5\u9808\u3067\u3059";
    if (s.length !== 2)
      throw "[bracket2macro] text\u306F\u62EC\u5F27\u306E\u524D\u5F8C\u3092\u793A\u3059\u4E8C\u6587\u5B57\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044";
    (u = f(this, Pr)) != null || T(this, Pr, {});
    const a = s.charAt(0), o = s.charAt(1);
    if (a in f(this, Pr))
      throw "[bracket2macro] text\u3010" + a + "\u3011\u304C\u767B\u9332\u6E08\u307F\u306E\u62EC\u5F27\u30DE\u30AF\u30ED\u307E\u305F\u306F\u4E00\u6587\u5B57\u30DE\u30AF\u30ED\u3067\u3059";
    if (o in f(this, Pr))
      throw "[bracket2macro] text\u3010" + o + "\u3011\u304C\u767B\u9332\u6E08\u307F\u306E\u62EC\u5F27\u30DE\u30AF\u30ED\u307E\u305F\u306F\u4E00\u6587\u5B57\u30DE\u30AF\u30ED\u3067\u3059";
    if (f(this, ho).test(a))
      throw "[bracket2macro] text\u3010" + a + "\u3011\u306F\u62EC\u5F27\u30DE\u30AF\u30ED\u306B\u4F7F\u7528\u3067\u304D\u306A\u3044\u6587\u5B57\u3067\u3059";
    if (f(this, ho).test(o))
      throw "[bracket2macro] text\u3010" + o + "\u3011\u306F\u62EC\u5F27\u30DE\u30AF\u30ED\u306B\u4F7F\u7528\u3067\u304D\u306A\u3044\u6587\u5B57\u3067\u3059";
    f(this, Pr)[o] = "0", f(this, Pr)[a] = `[${n} text=`, this.addC2M(`\\${a}[^\\${o}]*\\${o}`, `\\${a}\\${o}`), this.replaceScr_C2M_And_let_ml(e, i);
  }
  char2macro(t, e, i, n) {
    var o;
    const { char: s, name: a } = t;
    if (!s)
      throw "[char2macro] char\u306F\u5FC5\u9808\u3067\u3059";
    if ((o = f(this, Pr)) != null || T(this, Pr, {}), s in f(this, Pr))
      throw "[char2macro] char\u3010" + s + "\u3011\u304C\u767B\u9332\u6E08\u307F\u306E\u62EC\u5F27\u30DE\u30AF\u30ED\u307E\u305F\u306F\u4E00\u6587\u5B57\u30DE\u30AF\u30ED\u3067\u3059";
    if (f(this, ho).test(s))
      throw "[char2macro] char\u3010" + s + "\u3011\u306F\u4E00\u6587\u5B57\u30DE\u30AF\u30ED\u306B\u4F7F\u7528\u3067\u304D\u306A\u3044\u6587\u5B57\u3067\u3059";
    if (!a)
      throw "[char2macro] name\u306F\u5FC5\u9808\u3067\u3059";
    if (!(a in e))
      throw `[char2macro] \u672A\u5B9A\u7FA9\u306E\u30BF\u30B0\u53C8\u306F\u30DE\u30AF\u30ED[${a}]\u3067\u3059`;
    f(this, Pr)[s] = `[${a}]`, this.addC2M(`\\${s}`, `\\${s}`), this.replaceScr_C2M_And_let_ml(i, n);
  }
  addC2M(t, e) {
    T(this, eh, f(this, eh) + `${t}|`), T(this, rh, f(this, rh) + `${e}`), T(this, th, new RegExp(
      `(${f(this, eh)}[^${f(this, rh)}]+)`,
      "g"
    ));
  }
}
ho = new WeakMap(), th = new WeakMap(), eh = new WeakMap(), rh = new WeakMap(), Pr = new WeakMap();
var Fv, lo, ih;
class uL {
  constructor() {
    I(this, Fv, /;[^\n]*|(?<key>\w+)(?:\s|;[^\n]*\n)*=(?:\s|;[^\n]*\n)*(?:(?<val>[^\s"'#|;]+)|(["'#])(?<val2>.*?)\3)(?:\|(?:(?<def>[^\s"'#;]+)|(["'#])(?<def2>.*?)\6))?|(?<literal>[^\s;]+)/g);
    I(this, lo, {});
    I(this, ih, !1);
  }
  go(t) {
    var i, n;
    if (T(this, lo, {}), T(this, ih, !1), !t)
      return;
    let e = null;
    for (; e = f(this, Fv).exec(t); ) {
      const s = e == null ? void 0 : e.groups;
      !s || (s.key ? f(this, lo)[s.key] = {
        val: (i = s.val) != null ? i : s.val2,
        def: (n = s.def) != null ? n : s.def2
      } : s.literal && (s.literal === "*" ? T(this, ih, !0) : f(this, lo)[s.literal] = { val: "1" }));
    }
  }
  get hPrm() {
    return f(this, lo);
  }
  get isKomeParam() {
    return f(this, ih);
  }
}
Fv = new WeakMap(), lo = new WeakMap(), ih = new WeakMap();
var be = { exports: {} };
(function(r, t) {
  (function(e, i) {
    r.exports = i();
  })(typeof self < "u" ? self : mp, function() {
    return function(e) {
      var i = {};
      function n(s) {
        if (i[s])
          return i[s].exports;
        var a = i[s] = { i: s, l: !1, exports: {} };
        return e[s].call(a.exports, a, a.exports, n), a.l = !0, a.exports;
      }
      return n.m = e, n.c = i, n.d = function(s, a, o) {
        n.o(s, a) || Object.defineProperty(s, a, { configurable: !1, enumerable: !0, get: o });
      }, n.r = function(s) {
        Object.defineProperty(s, "__esModule", { value: !0 });
      }, n.n = function(s) {
        var a = s && s.__esModule ? function() {
          return s.default;
        } : function() {
          return s;
        };
        return n.d(a, "a", a), a;
      }, n.o = function(s, a) {
        return Object.prototype.hasOwnProperty.call(s, a);
      }, n.p = "", n(n.s = 0);
    }([function(e, i, n) {
      function s(O) {
        if (!(this instanceof s))
          return new s(O);
        this._ = O;
      }
      var a = s.prototype;
      function o(O, D) {
        for (var $ = 0; $ < O; $++)
          D($);
      }
      function u(O, D, $) {
        return function(J, st) {
          o(st.length, function(at) {
            J(st[at], at, st);
          });
        }(function(J, st, at) {
          D = O(D, J, st, at);
        }, $), D;
      }
      function h(O, D) {
        return u(function($, J, st, at) {
          return $.concat([O(J, st, at)]);
        }, [], D);
      }
      function l(O, D) {
        var $ = { v: 0, buf: D };
        return o(O, function() {
          var J;
          $ = { v: $.v << 1 | (J = $.buf, J[0] >> 7), buf: function(st) {
            var at = u(function(ct, Ft, Te, Sr) {
              return ct.concat(Te === Sr.length - 1 ? Buffer.from([Ft, 0]).readUInt16BE(0) : Sr.readUInt16BE(Te));
            }, [], st);
            return Buffer.from(h(function(ct) {
              return (ct << 1 & 65535) >> 8;
            }, at));
          }($.buf) };
        }), $;
      }
      function c() {
        return typeof Buffer < "u";
      }
      function d() {
        if (!c())
          throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.");
      }
      function p(O) {
        d();
        var D = u(function(at, ct) {
          return at + ct;
        }, 0, O);
        if (D % 8 != 0)
          throw new Error("The bits [" + O.join(", ") + "] add up to " + D + " which is not an even number of bytes; the total should be divisible by 8");
        var $, J = D / 8, st = ($ = function(at) {
          return at > 48;
        }, u(function(at, ct) {
          return at || ($(ct) ? ct : at);
        }, null, O));
        if (st)
          throw new Error(st + " bit range requested exceeds 48 bit (6 byte) Number max.");
        return new s(function(at, ct) {
          var Ft = J + ct;
          return Ft > at.length ? C(ct, J.toString() + " bytes") : R(Ft, u(function(Te, Sr) {
            var yr = l(Sr, Te.buf);
            return { coll: Te.coll.concat(yr.v), buf: yr.buf };
          }, { coll: [], buf: at.slice(ct, Ft) }, O).coll);
        });
      }
      function g(O, D) {
        return new s(function($, J) {
          return d(), J + D > $.length ? C(J, D + " bytes for " + O) : R(J + D, $.slice(J, J + D));
        });
      }
      function v(O, D) {
        if (typeof ($ = D) != "number" || Math.floor($) !== $ || D < 0 || D > 6)
          throw new Error(O + " requires integer length in range [0, 6].");
        var $;
      }
      function m(O) {
        return v("uintBE", O), g("uintBE(" + O + ")", O).map(function(D) {
          return D.readUIntBE(0, O);
        });
      }
      function _(O) {
        return v("uintLE", O), g("uintLE(" + O + ")", O).map(function(D) {
          return D.readUIntLE(0, O);
        });
      }
      function y(O) {
        return v("intBE", O), g("intBE(" + O + ")", O).map(function(D) {
          return D.readIntBE(0, O);
        });
      }
      function b(O) {
        return v("intLE", O), g("intLE(" + O + ")", O).map(function(D) {
          return D.readIntLE(0, O);
        });
      }
      function x(O) {
        return O instanceof s;
      }
      function w(O) {
        return {}.toString.call(O) === "[object Array]";
      }
      function E(O) {
        return c() && Buffer.isBuffer(O);
      }
      function R(O, D) {
        return { status: !0, index: O, value: D, furthest: -1, expected: [] };
      }
      function C(O, D) {
        return w(D) || (D = [D]), { status: !1, index: -1, value: null, furthest: O, expected: D };
      }
      function P(O, D) {
        if (!D || O.furthest > D.furthest)
          return O;
        var $ = O.furthest === D.furthest ? function(J, st) {
          if (function() {
            if (s._supportsSet !== void 0)
              return s._supportsSet;
            var Un = typeof Set < "u";
            return s._supportsSet = Un, Un;
          }() && Array.from) {
            for (var at = new Set(J), ct = 0; ct < st.length; ct++)
              at.add(st[ct]);
            var Ft = Array.from(at);
            return Ft.sort(), Ft;
          }
          for (var Te = {}, Sr = 0; Sr < J.length; Sr++)
            Te[J[Sr]] = !0;
          for (var yr = 0; yr < st.length; yr++)
            Te[st[yr]] = !0;
          var Dn = [];
          for (var ti in Te)
            ({}).hasOwnProperty.call(Te, ti) && Dn.push(ti);
          return Dn.sort(), Dn;
        }(O.expected, D.expected) : D.expected;
        return { status: O.status, index: O.index, value: O.value, furthest: D.furthest, expected: $ };
      }
      var N = {};
      function M(O, D) {
        if (E(O))
          return { offset: D, line: -1, column: -1 };
        O in N || (N[O] = {});
        for (var $ = N[O], J = 0, st = 0, at = 0, ct = D; ct >= 0; ) {
          if (ct in $) {
            J = $[ct].line, at === 0 && (at = $[ct].lineStart);
            break;
          }
          (O.charAt(ct) === `
` || O.charAt(ct) === "\r" && O.charAt(ct + 1) !== `
`) && (st++, at === 0 && (at = ct + 1)), ct--;
        }
        var Ft = J + st, Te = D - at;
        return $[D] = { line: Ft, lineStart: at }, { offset: D, line: Ft + 1, column: Te + 1 };
      }
      function A(O) {
        if (!x(O))
          throw new Error("not a parser: " + O);
      }
      function k(O, D) {
        return typeof O == "string" ? O.charAt(D) : O[D];
      }
      function H(O) {
        if (typeof O != "number")
          throw new Error("not a number: " + O);
      }
      function L(O) {
        if (typeof O != "function")
          throw new Error("not a function: " + O);
      }
      function U(O) {
        if (typeof O != "string")
          throw new Error("not a string: " + O);
      }
      var V = 2, K = 3, G = 8, B = 5 * G, W = 4 * G, Q = "  ";
      function ut(O, D) {
        return new Array(D + 1).join(O);
      }
      function it(O, D, $) {
        var J = D - O.length;
        return J <= 0 ? O : ut($, J) + O;
      }
      function ht(O, D, $, J) {
        return { from: O - D > 0 ? O - D : 0, to: O + $ > J ? J : O + $ };
      }
      function F(O, D) {
        var $, J, st, at, ct, Ft = D.index, Te = Ft.offset, Sr = 1;
        if (Te === O.length)
          return "Got the end of the input";
        if (E(O)) {
          var yr = Te - Te % G, Dn = Te - yr, ti = ht(yr, B, W + G, O.length), Un = h(function(nr) {
            return h(function(du) {
              return it(du.toString(16), 2, "0");
            }, nr);
          }, function(nr, du) {
            var pu = nr.length, ka = [], vu = 0;
            if (pu <= du)
              return [nr.slice()];
            for (var gu = 0; gu < pu; gu++)
              ka[vu] || ka.push([]), ka[vu].push(nr[gu]), (gu + 1) % du == 0 && vu++;
            return ka;
          }(O.slice(ti.from, ti.to).toJSON().data, G));
          at = function(nr) {
            return nr.from === 0 && nr.to === 1 ? { from: nr.from, to: nr.to } : { from: nr.from / G, to: Math.floor(nr.to / G) };
          }(ti), J = yr / G, $ = 3 * Dn, Dn >= 4 && ($ += 1), Sr = 2, st = h(function(nr) {
            return nr.length <= 4 ? nr.join(" ") : nr.slice(0, 4).join(" ") + "  " + nr.slice(4).join(" ");
          }, Un), (ct = (8 * (at.to > 0 ? at.to - 1 : at.to)).toString(16).length) < 2 && (ct = 2);
        } else {
          var fu = O.split(/\r\n|[\n\r\u2028\u2029]/);
          $ = Ft.column - 1, J = Ft.line - 1, at = ht(J, V, K, fu.length), st = fu.slice(at.from, at.to), ct = at.to.toString().length;
        }
        var gS = J - at.from;
        return E(O) && (ct = (8 * (at.to > 0 ? at.to - 1 : at.to)).toString(16).length) < 2 && (ct = 2), u(function(nr, du, pu) {
          var ka, vu = pu === gS, gu = vu ? "> " : Q;
          return ka = E(O) ? it((8 * (at.from + pu)).toString(16), ct, "0") : it((at.from + pu + 1).toString(), ct, " "), [].concat(nr, [gu + ka + " | " + du], vu ? [Q + ut(" ", ct) + " | " + it("", $, " ") + ut("^", Sr)] : []);
        }, [], st).join(`
`);
      }
      function vt(O, D) {
        return [`
`, "-- PARSING FAILED " + ut("-", 50), `

`, F(O, D), `

`, ($ = D.expected, $.length === 1 ? `Expected:

` + $[0] : `Expected one of the following: 

` + $.join(", ")), `
`].join("");
        var $;
      }
      function nt(O) {
        return O.flags !== void 0 ? O.flags : [O.global ? "g" : "", O.ignoreCase ? "i" : "", O.multiline ? "m" : "", O.unicode ? "u" : "", O.sticky ? "y" : ""].join("");
      }
      function ft() {
        for (var O = [].slice.call(arguments), D = O.length, $ = 0; $ < D; $ += 1)
          A(O[$]);
        return s(function(J, st) {
          for (var at, ct = new Array(D), Ft = 0; Ft < D; Ft += 1) {
            if (!(at = P(O[Ft]._(J, st), at)).status)
              return at;
            ct[Ft] = at.value, st = at.index;
          }
          return P(R(st, ct), at);
        });
      }
      function rt() {
        var O = [].slice.call(arguments);
        if (O.length === 0)
          throw new Error("seqMap needs at least one argument");
        var D = O.pop();
        return L(D), ft.apply(null, O).map(function($) {
          return D.apply(null, $);
        });
      }
      function j() {
        var O = [].slice.call(arguments), D = O.length;
        if (D === 0)
          return q("zero alternates");
        for (var $ = 0; $ < D; $ += 1)
          A(O[$]);
        return s(function(J, st) {
          for (var at, ct = 0; ct < O.length; ct += 1)
            if ((at = P(O[ct]._(J, st), at)).status)
              return at;
          return at;
        });
      }
      function xt(O, D) {
        return Z(O, D).or(ot([]));
      }
      function Z(O, D) {
        return A(O), A(D), rt(O, D.then(O).many(), function($, J) {
          return [$].concat(J);
        });
      }
      function X(O) {
        U(O);
        var D = "'" + O + "'";
        return s(function($, J) {
          var st = J + O.length, at = $.slice(J, st);
          return at === O ? R(st, at) : C(J, D);
        });
      }
      function et(O, D) {
        (function(st) {
          if (!(st instanceof RegExp))
            throw new Error("not a regexp: " + st);
          for (var at = nt(st), ct = 0; ct < at.length; ct++) {
            var Ft = at.charAt(ct);
            if (Ft !== "i" && Ft !== "m" && Ft !== "u" && Ft !== "s")
              throw new Error('unsupported regexp flag "' + Ft + '": ' + st);
          }
        })(O), arguments.length >= 2 ? H(D) : D = 0;
        var $ = function(st) {
          return RegExp("^(?:" + st.source + ")", nt(st));
        }(O), J = "" + O;
        return s(function(st, at) {
          var ct = $.exec(st.slice(at));
          if (ct) {
            if (0 <= D && D <= ct.length) {
              var Ft = ct[0], Te = ct[D];
              return R(at + Ft.length, Te);
            }
            return C(at, "valid match group (0 to " + ct.length + ") in " + J);
          }
          return C(at, J);
        });
      }
      function ot(O) {
        return s(function(D, $) {
          return R($, O);
        });
      }
      function q(O) {
        return s(function(D, $) {
          return C($, O);
        });
      }
      function Gt(O) {
        if (x(O))
          return s(function(D, $) {
            var J = O._(D, $);
            return J.index = $, J.value = "", J;
          });
        if (typeof O == "string")
          return Gt(X(O));
        if (O instanceof RegExp)
          return Gt(et(O));
        throw new Error("not a string, regexp, or parser: " + O);
      }
      function Bt(O) {
        return A(O), s(function(D, $) {
          var J = O._(D, $), st = D.slice($, J.index);
          return J.status ? C($, 'not "' + st + '"') : R($, null);
        });
      }
      function ie(O) {
        return L(O), s(function(D, $) {
          var J = k(D, $);
          return $ < D.length && O(J) ? R($ + 1, J) : C($, "a character/byte matching " + O);
        });
      }
      function Ve(O, D) {
        arguments.length < 2 && (D = O, O = void 0);
        var $ = s(function(J, st) {
          return $._ = D()._, $._(J, st);
        });
        return O ? $.desc(O) : $;
      }
      function _r() {
        return q("fantasy-land/empty");
      }
      a.parse = function(O) {
        if (typeof O != "string" && !E(O))
          throw new Error(".parse must be called with a string or Buffer as its argument");
        var D, $ = this.skip(oe)._(O, 0);
        return D = $.status ? { status: !0, value: $.value } : { status: !1, index: M(O, $.furthest), expected: $.expected }, delete N[O], D;
      }, a.tryParse = function(O) {
        var D = this.parse(O);
        if (D.status)
          return D.value;
        var $ = vt(O, D), J = new Error($);
        throw J.type = "ParsimmonError", J.result = D, J;
      }, a.assert = function(O, D) {
        return this.chain(function($) {
          return O($) ? ot($) : q(D);
        });
      }, a.or = function(O) {
        return j(this, O);
      }, a.trim = function(O) {
        return this.wrap(O, O);
      }, a.wrap = function(O, D) {
        return rt(O, this, D, function($, J) {
          return J;
        });
      }, a.thru = function(O) {
        return O(this);
      }, a.then = function(O) {
        return A(O), ft(this, O).map(function(D) {
          return D[1];
        });
      }, a.many = function() {
        var O = this;
        return s(function(D, $) {
          for (var J = [], st = void 0; ; ) {
            if (!(st = P(O._(D, $), st)).status)
              return P(R($, J), st);
            if ($ === st.index)
              throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");
            $ = st.index, J.push(st.value);
          }
        });
      }, a.tieWith = function(O) {
        return U(O), this.map(function(D) {
          if (function(st) {
            if (!w(st))
              throw new Error("not an array: " + st);
          }(D), D.length) {
            U(D[0]);
            for (var $ = D[0], J = 1; J < D.length; J++)
              U(D[J]), $ += O + D[J];
            return $;
          }
          return "";
        });
      }, a.tie = function() {
        return this.tieWith("");
      }, a.times = function(O, D) {
        var $ = this;
        return arguments.length < 2 && (D = O), H(O), H(D), s(function(J, st) {
          for (var at = [], ct = void 0, Ft = void 0, Te = 0; Te < O; Te += 1) {
            if (Ft = P(ct = $._(J, st), Ft), !ct.status)
              return Ft;
            st = ct.index, at.push(ct.value);
          }
          for (; Te < D && (Ft = P(ct = $._(J, st), Ft), ct.status); Te += 1)
            st = ct.index, at.push(ct.value);
          return P(R(st, at), Ft);
        });
      }, a.result = function(O) {
        return this.map(function() {
          return O;
        });
      }, a.atMost = function(O) {
        return this.times(0, O);
      }, a.atLeast = function(O) {
        return rt(this.times(O), this.many(), function(D, $) {
          return D.concat($);
        });
      }, a.map = function(O) {
        L(O);
        var D = this;
        return s(function($, J) {
          var st = D._($, J);
          return st.status ? P(R(st.index, O(st.value)), st) : st;
        });
      }, a.contramap = function(O) {
        L(O);
        var D = this;
        return s(function($, J) {
          var st = D.parse(O($.slice(J)));
          return st.status ? R(J + $.length, st.value) : st;
        });
      }, a.promap = function(O, D) {
        return L(O), L(D), this.contramap(O).map(D);
      }, a.skip = function(O) {
        return ft(this, O).map(function(D) {
          return D[0];
        });
      }, a.mark = function() {
        return rt(Xt, this, Xt, function(O, D, $) {
          return { start: O, value: D, end: $ };
        });
      }, a.node = function(O) {
        return rt(Xt, this, Xt, function(D, $, J) {
          return { name: O, value: $, start: D, end: J };
        });
      }, a.sepBy = function(O) {
        return xt(this, O);
      }, a.sepBy1 = function(O) {
        return Z(this, O);
      }, a.lookahead = function(O) {
        return this.skip(Gt(O));
      }, a.notFollowedBy = function(O) {
        return this.skip(Bt(O));
      }, a.desc = function(O) {
        w(O) || (O = [O]);
        var D = this;
        return s(function($, J) {
          var st = D._($, J);
          return st.status || (st.expected = O), st;
        });
      }, a.fallback = function(O) {
        return this.or(ot(O));
      }, a.ap = function(O) {
        return rt(O, this, function(D, $) {
          return D($);
        });
      }, a.chain = function(O) {
        var D = this;
        return s(function($, J) {
          var st = D._($, J);
          return st.status ? P(O(st.value)._($, st.index), st) : st;
        });
      }, a.concat = a.or, a.empty = _r, a.of = ot, a["fantasy-land/ap"] = a.ap, a["fantasy-land/chain"] = a.chain, a["fantasy-land/concat"] = a.concat, a["fantasy-land/empty"] = a.empty, a["fantasy-land/of"] = a.of, a["fantasy-land/map"] = a.map;
      var Xt = s(function(O, D) {
        return R(D, M(O, D));
      }), ir = s(function(O, D) {
        return D >= O.length ? C(D, "any character/byte") : R(D + 1, k(O, D));
      }), _e = s(function(O, D) {
        return R(O.length, O.slice(D));
      }), oe = s(function(O, D) {
        return D < O.length ? C(D, "EOF") : R(D, null);
      }), ne = et(/[0-9]/).desc("a digit"), Vt = et(/[0-9]*/).desc("optional digits"), cr = et(/[a-z]/i).desc("a letter"), Al = et(/[a-z]*/i).desc("optional letters"), Jg = et(/\s*/).desc("optional whitespace"), Rd = et(/\s+/).desc("whitespace"), Fl = X("\r"), Sd = X(`
`), Pd = X(`\r
`), Nd = j(Pd, Sd, Fl).desc("newline"), Ml = j(Nd, oe);
      s.all = _e, s.alt = j, s.any = ir, s.cr = Fl, s.createLanguage = function(O) {
        var D = {};
        for (var $ in O)
          ({}).hasOwnProperty.call(O, $) && function(J) {
            D[J] = Ve(function() {
              return O[J](D);
            });
          }($);
        return D;
      }, s.crlf = Pd, s.custom = function(O) {
        return s(O(R, C));
      }, s.digit = ne, s.digits = Vt, s.empty = _r, s.end = Ml, s.eof = oe, s.fail = q, s.formatError = vt, s.index = Xt, s.isParser = x, s.lazy = Ve, s.letter = cr, s.letters = Al, s.lf = Sd, s.lookahead = Gt, s.makeFailure = C, s.makeSuccess = R, s.newline = Nd, s.noneOf = function(O) {
        return ie(function(D) {
          return O.indexOf(D) < 0;
        }).desc("none of '" + O + "'");
      }, s.notFollowedBy = Bt, s.of = ot, s.oneOf = function(O) {
        for (var D = O.split(""), $ = 0; $ < D.length; $++)
          D[$] = "'" + D[$] + "'";
        return ie(function(J) {
          return O.indexOf(J) >= 0;
        }).desc(D);
      }, s.optWhitespace = Jg, s.Parser = s, s.range = function(O, D) {
        return ie(function($) {
          return O <= $ && $ <= D;
        }).desc(O + "-" + D);
      }, s.regex = et, s.regexp = et, s.sepBy = xt, s.sepBy1 = Z, s.seq = ft, s.seqMap = rt, s.seqObj = function() {
        for (var O, D = {}, $ = 0, J = (O = arguments, Array.prototype.slice.call(O)), st = J.length, at = 0; at < st; at += 1) {
          var ct = J[at];
          if (!x(ct)) {
            if (w(ct) && ct.length === 2 && typeof ct[0] == "string" && x(ct[1])) {
              var Ft = ct[0];
              if (Object.prototype.hasOwnProperty.call(D, Ft))
                throw new Error("seqObj: duplicate key " + Ft);
              D[Ft] = !0, $++;
              continue;
            }
            throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.");
          }
        }
        if ($ === 0)
          throw new Error("seqObj expects at least one named parser, found zero");
        return s(function(Te, Sr) {
          for (var yr, Dn = {}, ti = 0; ti < st; ti += 1) {
            var Un, fu;
            if (w(J[ti]) ? (Un = J[ti][0], fu = J[ti][1]) : (Un = null, fu = J[ti]), !(yr = P(fu._(Te, Sr), yr)).status)
              return yr;
            Un && (Dn[Un] = yr.value), Sr = yr.index;
          }
          return P(R(Sr, Dn), yr);
        });
      }, s.string = X, s.succeed = ot, s.takeWhile = function(O) {
        return L(O), s(function(D, $) {
          for (var J = $; J < D.length && O(k(D, J)); )
            J++;
          return R(J, D.slice($, J));
        });
      }, s.test = ie, s.whitespace = Rd, s["fantasy-land/empty"] = _r, s["fantasy-land/of"] = ot, s.Binary = { bitSeq: p, bitSeqObj: function(O) {
        d();
        var D = {}, $ = 0, J = h(function(at) {
          if (w(at)) {
            var ct = at;
            if (ct.length !== 2)
              throw new Error("[" + ct.join(", ") + "] should be length 2, got length " + ct.length);
            if (U(ct[0]), H(ct[1]), Object.prototype.hasOwnProperty.call(D, ct[0]))
              throw new Error("duplicate key in bitSeqObj: " + ct[0]);
            return D[ct[0]] = !0, $++, ct;
          }
          return H(at), [null, at];
        }, O);
        if ($ < 1)
          throw new Error("bitSeqObj expects at least one named pair, got [" + O.join(", ") + "]");
        var st = h(function(at) {
          return at[0];
        }, J);
        return p(h(function(at) {
          return at[1];
        }, J)).map(function(at) {
          return u(function(ct, Ft) {
            return Ft[0] !== null && (ct[Ft[0]] = Ft[1]), ct;
          }, {}, h(function(ct, Ft) {
            return [ct, at[Ft]];
          }, st));
        });
      }, byte: function(O) {
        if (d(), H(O), O > 255)
          throw new Error("Value specified to byte constructor (" + O + "=0x" + O.toString(16) + ") is larger in value than a single byte.");
        var D = (O > 15 ? "0x" : "0x0") + O.toString(16);
        return s(function($, J) {
          var st = k($, J);
          return st === O ? R(J + 1, st) : C(J, D);
        });
      }, buffer: function(O) {
        return g("buffer", O).map(function(D) {
          return Buffer.from(D);
        });
      }, encodedString: function(O, D) {
        return g("string", D).map(function($) {
          return $.toString(O);
        });
      }, uintBE: m, uint8BE: m(1), uint16BE: m(2), uint32BE: m(4), uintLE: _, uint8LE: _(1), uint16LE: _(2), uint32LE: _(4), intBE: y, int8BE: y(1), int16BE: y(2), int32BE: y(4), intLE: b, int8LE: b(1), int16LE: b(2), int32LE: b(4), floatBE: g("floatBE", 4).map(function(O) {
        return O.readFloatBE(0);
      }), floatLE: g("floatLE", 4).map(function(O) {
        return O.readFloatLE(0);
      }), doubleBE: g("doubleBE", 8).map(function(O) {
        return O.readDoubleBE(0);
      }), doubleLE: g("doubleLE", 8).map(function(O) {
        return O.readDoubleLE(0);
      }) }, e.exports = s;
    }]);
  });
})(be);
var Ws, Ct, Rt, qn, Ys, Iu, rf, nf, ry, Mv, kv, NC;
const D1 = class {
  constructor(t, e = "\\") {
    I(this, Ct);
    I(this, Ys);
    I(this, nf);
    I(this, Ws, void 0);
    I(this, qn, void 0);
    I(this, rf, void 0);
    this.val = t, T(this, Ws, null), T(this, qn, {
      "!num!": (m) => m.shift(),
      "!str!": (m) => S(this, nf, ry).call(this, m.shift()),
      "!bool!": (m) => m.shift(),
      "!": (m) => {
        const _ = m.shift();
        return _[0] === "!bool!" ? !Boolean(_[1]) : String(S(this, Ct, Rt).call(this, _)) !== "true";
      },
      "~": (m) => ~Number(S(this, Ct, Rt).call(this, m.shift())),
      "**": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) ** Number(S(this, Ct, Rt).call(this, m.shift())),
      "*": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) * Number(S(this, Ct, Rt).call(this, m.shift())),
      "/": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) / Number(S(this, Ct, Rt).call(this, m.shift())),
      "\xA5": (m) => Math.floor(f(this, qn)["/"](m)),
      "%": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) % Number(S(this, Ct, Rt).call(this, m.shift())),
      "+": (m) => {
        const _ = S(this, Ct, Rt).call(this, m.shift()), y = S(this, Ct, Rt).call(this, m.shift());
        return Object.prototype.toString.call(_) === "[object String]" || Object.prototype.toString.call(y) === "[object String]" ? String(_) + String(y) : Number(_) + Number(y);
      },
      "-": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) - Number(S(this, Ct, Rt).call(this, m.shift())),
      int: (m) => jt(S(this, Ys, Iu).call(this, m.shift())),
      parseInt: (m) => jt(f(this, qn).Number(m)),
      Number: (m) => {
        const _ = S(this, Ct, Rt).call(this, m.shift());
        return Object.prototype.toString.call(_) !== "[object String]" ? Number(_) : S(this, Ys, Iu).call(this, f(this, Ws).parse(String(_)).value);
      },
      ceil: (m) => Math.ceil(S(this, Ys, Iu).call(this, m.shift())),
      floor: (m) => Math.floor(S(this, Ys, Iu).call(this, m.shift())),
      round: (m) => Math.round(S(this, Ys, Iu).call(this, m.shift())),
      isNaN: (m) => isNaN(Number(S(this, Ct, Rt).call(this, m.shift()))),
      "<<": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) << Number(S(this, Ct, Rt).call(this, m.shift())),
      ">>": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) >> Number(S(this, Ct, Rt).call(this, m.shift())),
      ">>>": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) >>> Number(S(this, Ct, Rt).call(this, m.shift())),
      "<": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) < Number(S(this, Ct, Rt).call(this, m.shift())),
      "<=": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) <= Number(S(this, Ct, Rt).call(this, m.shift())),
      ">": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) > Number(S(this, Ct, Rt).call(this, m.shift())),
      ">=": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) >= Number(S(this, Ct, Rt).call(this, m.shift())),
      "==": (m) => {
        const _ = S(this, Ct, Rt).call(this, m.shift()), y = S(this, Ct, Rt).call(this, m.shift());
        return _ == null && y == null && (!_ || !y) ? _ == y : String(_) === String(y);
      },
      "!=": (m) => !f(this, qn)["=="](m),
      "===": (m) => {
        const _ = S(this, Ct, Rt).call(this, m.shift()), y = S(this, Ct, Rt).call(this, m.shift());
        return Object.prototype.toString.call(_) != Object.prototype.toString.call(y) ? !1 : String(_) === String(y);
      },
      "!==": (m) => !f(this, qn)["==="](m),
      "&": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) & Number(S(this, Ct, Rt).call(this, m.shift())),
      "^": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) ^ Number(S(this, Ct, Rt).call(this, m.shift())),
      "|": (m) => Number(S(this, Ct, Rt).call(this, m.shift())) | Number(S(this, Ct, Rt).call(this, m.shift())),
      "&&": (m) => String(S(this, Ct, Rt).call(this, m.shift())) === "true" && String(S(this, Ct, Rt).call(this, m.shift())) === "true",
      "||": (m) => String(S(this, Ct, Rt).call(this, m.shift())) === "true" || String(S(this, Ct, Rt).call(this, m.shift())) === "true",
      "?": (m) => {
        const _ = m.shift();
        let y = !1;
        if (_[0] === "!bool!")
          y = Boolean(_[1]);
        else {
          const x = String(S(this, Ct, Rt).call(this, _));
          y = x !== "true" && x !== "false" ? jt(x) !== 0 : x === "true";
        }
        const b = m.shift();
        if (b[0] !== ":")
          throw Error("(PropParser)\u4E09\u9805\u6F14\u7B97\u5B50\u306E\u6587\u6CD5\u30A8\u30E9\u30FC\u3067\u3059\u3002: \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093");
        return S(this, Ct, Rt).call(this, b[y ? 1 : 2]);
      },
      ":": () => {
        throw Error("(PropParser)\u4E09\u9805\u6F14\u7B97\u5B50\u306E\u6587\u6CD5\u30A8\u30E9\u30FC\u3067\u3059\u3002? \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093");
      }
    }), T(this, rf, /(\$((tmp|sys|save|mp):)?[^\s!--\/:-@[-^`{-~]+|\#\{[^\}]+})/g), this.getValAmpersand = (m) => m.charAt(0) === "&" ? String(this.parse(m.slice(1))) : m;
    function i(m) {
      const _ = [];
      return m.forEach((y) => _.push(
        (y instanceof RegExp ? be.exports.regex(y) : be.exports.string(y)).trim(be.exports.optWhitespace)
      )), be.exports.alt.apply(null, _);
    }
    function n(m, _) {
      const y = be.exports.lazy(() => be.exports.seq(m, y).or(_));
      return y;
    }
    function s(m, _) {
      let y = be.exports.lazy(
        () => _.chain(
          (b) => be.exports.seq(
            m,
            be.exports.of(b),
            y
          ).or(be.exports.of(b))
        )
      );
      return y;
    }
    function a(m, _) {
      return be.exports.seqMap(
        _,
        be.exports.seq(m, _).many(),
        (y, b) => b.reduce((x, w) => [w[0], x, w[1]], y)
      );
    }
    const o = be.exports.alt(
      be.exports.alt(
        be.exports.regex(/-?(0|[1-9][0-9]*)\.[0-9]+/),
        be.exports.regex(/0x[0-9a-fA-F]+/)
      ).map(Number),
      be.exports.alt(
        be.exports.regex(/-?(0|[1-9][0-9]*)/)
      ).map((m) => jt(m))
    ).map((m) => ["!num!", m]).desc("number"), u = be.exports.string("null").map(() => ["!str!", null]), h = be.exports.regex(/(true|false)/).map((m) => ["!bool!", m === "true"]).desc("boolean"), l = be.exports.regex(new RegExp(`(?:"(?:\\${e}["'#\\n]|[^"])*"|'(?:\\${e}["'#\\n]|[^'])*'|\\#(?:\\${e}["'#\\n]|[^#])*\\#)`)).map((m) => ["!str!", m.slice(1, -1).replaceAll(e, "")]).desc("string"), c = /\[[^\]]+\]/g, d = be.exports.regex(/-?(?:(?:tmp|sys|save|mp):)?[^\s!-\/:-@[-^`{-~]+(?:\.[^\s!-\/:-@[-^`{-~]+|\[[^\]]+\])*(?:@str)?/).map((m) => {
      const _ = String(m).replace(
        c,
        (b) => "." + this.parse(b.slice(1, -1))
      );
      if (_.charAt(0) === "-") {
        const b = this.val.getVal(_.slice(1));
        if (b == null || String(b) === "null")
          throw Error("(PropParser)\u6570\u5024\u4EE5\u5916\u306B-\u7B26\u53F7\u304C\u3064\u3044\u3066\u3044\u307E\u3059");
        return ["!num!", -Number(b)];
      }
      const y = this.val.getVal(_);
      return y == null ? ["!str!", y] : typeof y == "boolean" ? ["!bool!", y] : Object.prototype.toString.call(y) === "[object String]" ? ["!str!", String(y)] : ["!num!", Number(y)];
    }).desc("string"), p = be.exports.lazy(
      () => be.exports.string("(").then(f(this, Ws)).skip(be.exports.string(")")).or(o).or(u).or(h).or(l).or(d)
    ), v = [
      { type: n, ops: i([/[A-Za-z_][A-Za-z0-9_]*(?=\()/]) },
      { type: n, ops: i([/(!(?!=)|~)/]) },
      { type: s, ops: i(["**"]) },
      { type: a, ops: i(["*", "/", "\xA5", "%"]) },
      { type: a, ops: i(["+", "-"]) },
      { type: a, ops: i([/(>>>|<<|>>)/]) },
      { type: a, ops: i([/(<=|<|>=|>)/]) },
      { type: a, ops: i([/(===|!==|==|!=)/]) },
      { type: a, ops: i([/&(?!&)/]) },
      { type: a, ops: i(["^"]) },
      { type: a, ops: i([/\|(?!\|)/]) },
      { type: a, ops: i(["&&"]) },
      { type: a, ops: i(["||"]) },
      { type: s, ops: i([":"]) },
      { type: s, ops: i(["?"]) }
    ].reduce(
      (m, _) => _.type(_.ops, m),
      p
    );
    T(this, Ws, v.trim(be.exports.optWhitespace));
  }
  parse(t) {
    const e = f(this, Ws).parse(t);
    if (!e.status)
      throw Error("(PropParser)\u6587\u6CD5\u30A8\u30E9\u30FC\u3010" + t + "\u3011");
    const i = e.value;
    return i[0] === "!str!" ? S(this, nf, ry).call(this, i[1]) : S(this, Ct, Rt).call(this, i);
  }
  static getValName(t) {
    var n, s;
    const e = f(this, Mv).exec(t.trim()), i = e == null ? void 0 : e.groups;
    if (!!i)
      return {
        scope: i.scope || "tmp",
        name: S(n = D1, kv, NC).call(n, i.name),
        at: (s = i.at) != null ? s : ""
      };
  }
};
let ao = D1;
Ws = new WeakMap(), Ct = new WeakSet(), Rt = function(t) {
  const e = t.shift();
  if (e instanceof Array)
    return S(this, Ct, Rt).call(this, e);
  const i = f(this, qn)[e];
  return i ? i(t) : Object(null);
}, qn = new WeakMap(), Ys = new WeakSet(), Iu = function(t) {
  const e = S(this, Ct, Rt).call(this, t);
  if (Object.prototype.toString.call(e) !== "[object Number]")
    throw Error("(PropParser)\u5F15\u6570\u3010" + e + "\u3011\u304C\u6570\u5024\u3067\u306F\u3042\u308A\u307E\u305B\u3093");
  return Number(e);
}, rf = new WeakMap(), nf = new WeakSet(), ry = function(t) {
  return t == null ? t : String(t).replace(f(this, rf), (e) => e.charAt(0) === "$" ? this.val.getVal(e.slice(1)) : this.parse(e.slice(2, -1)));
}, Mv = new WeakMap(), kv = new WeakSet(), NC = function(t) {
  let e = 0, i = 0;
  for (; ; ) {
    if (e = t.indexOf('["'), e < 0) {
      if (e = t.indexOf("['"), e < 0)
        break;
      i = t.indexOf("']", e + 2);
    } else
      i = t.indexOf('"]', e + 2);
    if (i < 0)
      break;
    t = t.slice(0, e) + "." + t.slice(e + 2, i) + t.slice(i + 2), e = i - 2;
  }
  return t;
}, I(ao, kv), I(ao, Mv, /^((?<scope>\w+?):)?(?<name>[^\s :@]+)(?<at>\@str)?$/);
var Lb = (r, t, e) => {
  if (!t.has(r))
    throw TypeError("Cannot " + e);
}, ur = (r, t, e) => (Lb(r, t, "read from private field"), e ? e.call(r) : t.get(r)), Es = (r, t, e) => {
  if (t.has(r))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(r) : t.set(r, e);
}, Ru = (r, t, e, i) => (Lb(r, t, "write to private field"), i ? i.call(r, e) : t.set(r, e), e), Np = (r, t, e) => (Lb(r, t, "access private method"), e), Cn, Zu, Xc, xn, vv, iy, OC, ny, AC, Db, FC, Ub, MC;
const fe = class {
  constructor(r, t, e) {
    this.sys = r, Es(this, iy), Es(this, ny), Es(this, vv, !0), Ru(fe, Cn, e), Ru(fe, Zu, t), Ru(fe, Xc, t.title), fe.myTrace = Np(fe, Db, FC), t.log = (i) => Np(this, iy, OC).call(this, i), t.trace = (i) => Np(this, ny, AC).call(this, i), Ru(fe, xn, document.createElement("span")), ur(fe, xn).hidden = !0, ur(fe, xn).textContent = "", ur(fe, xn).style.cssText = `	z-index: ${Number.MAX_SAFE_INTEGER};
			position: absolute; left: 0; top: 0;
			color: black;
			background-color: rgba(255, 255, 255, 0.7);`, document.body.appendChild(ur(fe, xn));
  }
  destroy() {
    Ru(fe, Xc, () => !1), document.body.removeChild(ur(fe, xn)), fe.myTrace = fe.trace_beforeNew;
  }
  static trace_beforeNew(r, t = "E") {
    let e = `{${t}} ` + r, i = "";
    switch (t) {
      case "D":
        i = `color:#${Y.isDarkMode ? "49F" : "05A"};`;
        break;
      case "W":
        i = "color:#FF8800;";
        break;
      case "F":
        i = "color:#BB0000;";
        break;
      case "ET":
        throw e;
      case "E":
        console.error("%c" + e, "color:#FF3300;");
        return;
      default:
        i = "color:black;", e = " " + e;
    }
    console.info("%c" + e, i);
  }
};
let $t = fe;
Cn = /* @__PURE__ */ new WeakMap();
Zu = /* @__PURE__ */ new WeakMap();
Xc = /* @__PURE__ */ new WeakMap();
xn = /* @__PURE__ */ new WeakMap();
vv = /* @__PURE__ */ new WeakMap();
iy = /* @__PURE__ */ new WeakSet();
OC = function(r) {
  let t = "";
  return ur(this, vv) && (Ru(this, vv, !1), t = `== ${vT.description} ==
`), this.sys.appendFile(
    this.sys.path_downloads + "log.txt",
    `${t}--- ${Mc("-", "_", "")} [fn:${ur(fe, Cn).scriptFn} line:${ur(fe, Cn).lineNum}] prj:${this.sys.cur}
${r.text || `(text is ${r.text})`}
`,
    (e) => {
      e && console.log(e);
    }
  ), !1;
};
ny = /* @__PURE__ */ new WeakSet();
AC = function(r) {
  return fe.myTrace(r.text || `(text is ${r.text})`, "I"), !1;
};
Db = /* @__PURE__ */ new WeakSet();
FC = function(r, t = "E") {
  var e, i;
  let n = `{${t}} ` + fe.strPos() + r;
  Np(e = fe, Ub, MC).call(e, n, t);
  let s = "";
  switch (t) {
    case "D":
      s = `color:#${Y.isDarkMode ? "49F" : "05A"};`;
      break;
    case "W":
      s = "color:#F80;";
      break;
    case "F":
      s = "color:#B00;";
      break;
    case "ET":
    case "E":
      if (ur(i = fe, Xc).call(i, { text: r }), ur(this, Zu).dump_lay({}), ur(this, Zu).dump_val({}), ur(fe, Cn).dumpErrForeLine(), ur(this, Zu).dump_stack({}), t === "ET")
        throw n;
      console.error("%c" + n, "color:#F30;");
      return;
    default:
      s = "", n = " " + n;
  }
  console.info("%c" + n, s);
};
Ub = /* @__PURE__ */ new WeakSet();
MC = function(r, t) {
  let e = "";
  switch (t) {
    case "D":
      e = "color:#05A;";
      break;
    case "W":
      e = "color:#F80;";
      break;
    case "F":
      e = "color:#B00;";
      break;
    case "ET":
    case "E":
      e = "color:#F30;";
      break;
    default:
      e = "";
  }
  ur(fe, xn).innerHTML += `<span style='${e}'>${r}</span><br/>`, ur(fe, xn).hidden = !1;
};
Es($t, Db);
Es($t, Ub);
Es($t, Cn, void 0);
Es($t, Zu, void 0);
Es($t, Xc, void 0);
Es($t, xn, void 0);
$t.myTrace = fe.trace_beforeNew;
$t.strPos = () => ur(fe, Cn) && ur(fe, Cn).lineNum > 0 ? `(fn:${ur(fe, Cn).scriptFn} line:${ur(fe, Cn).lineNum}) ` : "";
class hw {
  constructor() {
    this.hAreas = {};
  }
  clear() {
    this.hAreas = {};
  }
  search(t) {
    for (const e in this.hAreas)
      if (!(t < parseInt(e)) && t <= this.hAreas[e])
        return !0;
    return !1;
  }
  record(t) {
    if (!this.search(t)) {
      for (const e in this.hAreas)
        if (this.hAreas[e] + 1 === t) {
          t + 1 in this.hAreas ? (this.hAreas[e] = this.hAreas[t + 1], delete this.hAreas[t + 1]) : this.hAreas[e] = t;
          return;
        }
      if (t + 1 in this.hAreas) {
        this.hAreas[t] = this.hAreas[t + 1], delete this.hAreas[t + 1];
        return;
      }
      this.hAreas[t] = t;
    }
  }
  erase(t) {
    if (!!this.search(t)) {
      if (t in this.hAreas) {
        this.hAreas[t] > t && (this.hAreas[t + 1] = this.hAreas[t]), delete this.hAreas[t];
        return;
      }
      for (const e in this.hAreas)
        if (!(t < parseInt(e)) && !(this.hAreas[e] < t)) {
          if (this.hAreas[e] === t) {
            this.hAreas[e] = t - 1;
            return;
          }
          this.hAreas[t + 1] = this.hAreas[e], this.hAreas[e] = t - 1;
          return;
        }
    }
  }
  get count() {
    return Object.keys(this.hAreas).length;
  }
  toString() {
    let t = "";
    const e = [];
    for (const i in this.hAreas)
      e.push(parseInt(i));
    return e.sort(function(i, n) {
      return i - n;
    }), e.forEach((i) => {
      t += "," + i + (i === this.hAreas[i]) ? "" : "~" + this.hAreas[i];
    }), t !== "" && (t = t.slice(1)), t;
  }
}
var Xe, Gr, xe, Zn, Pe, Hr, _i, sf, af, of, sy, nh, sh, Bv, kC, Lv, BC, yi, an, Dv, LC, Uv, DC, Gv, UC, Hv, GC, zv, HC, jv, zC, $v, jC, Vv, $C, ah, Ap, uf, ay, oh, co, hf, oy, lf, cf, fo, uh, hh, Fp, Xv, VC, Wv, XC, ff, uy, df, hy, Yv, WC, qv, YC, lh, Mp;
const Xu = class {
  constructor(t, e) {
    I(this, of);
    I(this, Bv);
    I(this, Lv);
    I(this, yi);
    I(this, Dv);
    I(this, Uv);
    I(this, Gv);
    I(this, Hv);
    I(this, zv);
    I(this, jv);
    I(this, $v);
    I(this, Vv);
    I(this, ah);
    I(this, uf);
    I(this, hf);
    I(this, hh);
    I(this, Xv);
    I(this, Wv);
    I(this, ff);
    I(this, df);
    I(this, Yv);
    I(this, qv);
    I(this, lh);
    I(this, Xe, void 0);
    I(this, Gr, void 0);
    I(this, xe, void 0);
    I(this, Zn, void 0);
    I(this, Pe, void 0);
    I(this, Hr, void 0);
    I(this, _i, void 0);
    I(this, sf, void 0);
    I(this, af, void 0);
    I(this, nh, void 0);
    I(this, sh, void 0);
    I(this, oh, void 0);
    I(this, lf, void 0);
    I(this, cf, void 0);
    I(this, fo, void 0);
    I(this, uh, void 0);
    var s;
    if (this.cfg = t, T(this, Xe, { sys: {}, save: {}, tmp: {}, mp: {} }), T(this, Gr, f(this, Xe).save), T(this, xe, f(this, Xe).tmp), T(this, Pe, { sys: {}, mark: {}, kidoku: {} }), T(this, _i, {}), T(this, af, {
      auth: (a, o) => S(this, of, sy).call(this, o.hBreakpoint.aData),
      var: (a, o) => {
        var u;
        return f(this, Zn).send2Dbg(o.ri, { v: (u = f(this, Xe)[o.scope]) != null ? u : {} });
      },
      set_var: (a, o) => {
        try {
          f(this, oh).call(this, o.nm, o.val), f(this, Zn).send2Dbg(o.ri, {});
        } catch {
        }
      },
      set_data_break: (a, o) => {
        S(this, of, sy).call(this, o.a), f(this, Zn).send2Dbg(o.ri, {});
      },
      disconnect: (a) => T(Xu, co, {})
    }), T(this, nh, () => {
    }), T(this, sh, (a) => {
    }), this.getMark = (a) => f(this, Pe).mark[a], this.getAreaKidoku = (a) => f(this, _i)[a], T(this, oh, (a, o, u = !0) => {
      if (!a)
        throw "[\u5909\u6570\u306B\u5024\u30BB\u30C3\u30C8] name\u306F\u5FC5\u9808\u3067\u3059";
      if (o == null)
        throw "[\u5909\u6570\u306B\u5024\u30BB\u30C3\u30C8] text\u306F\u5FC5\u9808\u3067\u3059\uFF08\u7A7A\u6587\u5B57\u306FOK\uFF09";
      const h = ao.getValName(a);
      if (h === void 0)
        throw "[\u5909\u6570\u53C2\u7167] name(" + a + ")\u304C\u5909\u6570\u540D\u3068\u3057\u3066\u7570\u5E38\u3067\u3059";
      const l = f(this, Xe)[h.scope];
      if (!l)
        throw "[\u5909\u6570\u306B\u5024\u30BB\u30C3\u30C8] scope\u304C\u7570\u5E38\u3010" + h.scope + "\u3011\u3067\u3059";
      const c = h.name;
      if (c.slice(0, 6) === "const." && c in l)
        throw "[\u5909\u6570\u306B\u5024\u30BB\u30C3\u30C8] \u5909\u6570\u3010" + c + "\u3011\u306F\u66F8\u304D\u63DB\u3048\u4E0D\u53EF\u3067\u3059";
      this.setVal_Nochk(h.scope, c, o, u);
    }), this.getVal = (a, o) => {
      if (!a)
        throw "[\u5909\u6570\u53C2\u7167] name\u306F\u5FC5\u9808\u3067\u3059";
      const u = ao.getValName(a);
      if (u === void 0)
        throw "[\u5909\u6570\u53C2\u7167] name(" + a + ")\u304C\u5909\u6570\u540D\u3068\u3057\u3066\u7570\u5E38\u3067\u3059";
      const h = f(this, Xe)[u.scope];
      if (!h)
        throw "[\u5909\u6570\u53C2\u7167] scope\u304C\u7570\u5E38\u3010" + u.scope + "\u3011\u3067\u3059";
      const l = u.name;
      let c = h[l];
      if (!(l in h)) {
        c = o;
        let d = "";
        const p = l.split("."), g = p.length;
        for (let v = 0; v < g; ++v, d += ".") {
          if (d += p[v], !(d in h))
            continue;
          let m = JSON.parse(h[d]);
          if (Object.prototype.toString.call(m) !== "[object Object]") {
            if (v + 1 === g) {
              c = m;
              break;
            }
            continue;
          }
          let _ = v;
          for (; ++_ < g; ) {
            if (!(p[_] in m)) {
              c = o;
              break;
            }
            if (m = m[p[_]], Object.prototype.toString.call(m) !== "[object Object]" || _ + 1 === g) {
              c = m;
              break;
            }
          }
          c instanceof Object && (c = JSON.stringify(c));
          break;
        }
      }
      return c instanceof Function && (c = c()), u.at === "@str" ? c : S(this, hf, oy).call(this, c);
    }, T(this, lf, /^-?[\d\.]+$/), T(this, cf, () => {
      const a = { tmp: {}, sys: {}, save: {}, mp: {} };
      for (let o in a) {
        const u = f(this, Xe)[o], h = a[o];
        for (let l in u) {
          const c = u[l];
          Object.prototype.toString.call(c) === "[object Function]" ? h[l] = c() : h[l] = c;
        }
      }
      return console.info("\u{1F95F} [dump_val]", a), !1;
    }), T(this, fo, !1), T(this, uh, {
      "sys:sn.tagCh.doWait": (a) => S(this, hh, Fp).call(this, a),
      "sys:sn.tagCh.doWait_Kidoku": (a) => S(this, hh, Fp).call(this, a),
      "sys:sn.tagCh.msecWait": (a) => S(this, Xv, VC).call(this, a),
      "sys:sn.tagCh.msecWait_Kidoku": (a) => S(this, Wv, XC).call(this, a),
      "sys:sn.tagCh.canskip": (a) => S(this, hh, Fp).call(this, a),
      "sys:sn.auto.msecPageWait": (a) => S(this, ff, uy).call(this, a),
      "sys:sn.auto.msecPageWait_Kidoku": (a) => S(this, ff, uy).call(this, a),
      "sys:sn.auto.msecLineWait": (a) => S(this, df, hy).call(this, a),
      "sys:sn.auto.msecLineWait_Kidoku": (a) => S(this, df, hy).call(this, a),
      "save:sn.doRecLog": (a) => {
        f(this, sh).call(this, T(this, fo, S(this, Yv, WC).call(this, a)));
      },
      "save:sn.userFnTail": (a, o) => this.cfg.userFnTail = o,
      "tmp:sn.tagL.enabled": (a) => S(this, qv, YC).call(this, a),
      "tmp:sn.skip.all": (a) => S(this, lh, Mp).call(this, a),
      "tmp:sn.skip.enabled": (a) => S(this, lh, Mp).call(this, a),
      "tmp:sn.auto.enabled": (a) => S(this, lh, Mp).call(this, a),
      "tmp:flash.desktop.NativeApplication.nativeApplication.systemIdleMode": () => {
      }
    }), e.let = (a) => S(this, yi, an).call(this, a), e.let_abs = (a) => S(this, Dv, LC).call(this, a), e.let_char_at = (a) => S(this, Uv, DC).call(this, a), e.let_index_of = (a) => S(this, Gv, UC).call(this, a), e.let_length = (a) => S(this, Hv, GC).call(this, a), e.let_replace = (a) => S(this, zv, HC).call(this, a), e.let_round = (a) => S(this, jv, zC).call(this, a), e.let_search = (a) => S(this, $v, jC).call(this, a), e.let_substr = (a) => S(this, Vv, $C).call(this, a), e.clearsysvar = () => S(this, ah, Ap).call(this), e.clearvar = () => S(this, uf, ay).call(this), e.dump_val = () => f(this, cf).call(this), e.copybookmark = (a) => S(this, Bv, kC).call(this, a), e.erasebookmark = (a) => S(this, Lv, BC).call(this, a), f(this, Gr)["sn.userFnTail"] = "", this.defTmp("const.sn.bookmark.json", () => {
      const a = [];
      return Object.keys(f(this, Pe).mark).sort().forEach((o) => {
        const u = { ...f(this, Pe).mark[o].json };
        u.place = o, a.push(u);
      }), JSON.stringify(a);
    }), f(this, xe)["const.sn.isFirstBoot"] = !0, f(this, xe)["sn.tagL.enabled"] = !0, f(this, xe)["sn.skip.all"] = !1, f(this, xe)["sn.skip.enabled"] = !1, f(this, xe)["sn.auto.enabled"] = !1, f(this, xe)["const.sn.last_page_text"] = "", f(this, xe)["const.sn.displayState"] = !1, f(this, xe)["const.Date.getTime"] = () => new Date().getTime(), f(this, xe)["const.Date.getDateStr"] = () => Mc(), f(this, xe)["const.sn.platform"] = JSON.stringify(vT), S(this, ah, Ap).call(this), S(this, uf, ay).call(this), f(this, xe)["const.sn.config.window.width"] = t.oCfg.window.width, f(this, xe)["const.sn.config.window.height"] = t.oCfg.window.height, f(this, xe)["const.sn.config.book.title"] = t.oCfg.book.title, f(this, xe)["const.sn.config.book.version"] = t.oCfg.book.version, f(this, xe)["const.sn.Math.PI"] = Math.PI, typeof window > "u")
      return;
    const i = window, n = (s = i.AudioContext) != null ? s : i.webkitAudioContext;
    f(this, xe)["const.sn.needClick2Play"] = () => new n().state === "suspended";
  }
  setSys(t) {
    T(this, Zn, t), t.initVal(f(this, Pe), f(this, xe), (e) => {
      this.updateData(e), sessionStorage.clear();
      const i = this.cfg.getNs();
      T(this, nh, this.cfg.oCfg.debug.variable ? () => {
        const s = {};
        Object.keys(f(this, Hr)).forEach((c) => {
          const d = f(this, Hr)[c];
          s["sys:" + c] = d instanceof Function ? d() : d;
        }), sessionStorage[i + "sys"] = JSON.stringify(s);
        const a = {};
        Object.keys(f(this, Gr)).forEach((c) => {
          const d = f(this, Gr)[c];
          a["save:" + c] = d instanceof Function ? d() : d;
        }), sessionStorage[i + "save"] = JSON.stringify(a);
        const o = {};
        Object.keys(f(this, xe)).forEach((c) => {
          const d = f(this, xe)[c];
          o[c] = d instanceof Function ? d() : d;
        }), sessionStorage[i + "tmp"] = JSON.stringify(o);
        const u = {};
        Object.keys(f(this, Xe).mp).forEach((c) => {
          const d = f(this, Xe).mp[c];
          u[c] = d instanceof Function ? d() : d;
        }), sessionStorage[i + "mp"] = JSON.stringify(u);
        const h = {};
        Object.keys(f(this, Pe).mark).forEach((c) => {
          const d = f(this, Pe).mark[c];
          h[c] = d instanceof Function ? d() : d;
        }), sessionStorage[i + "mark"] = JSON.stringify(h);
        const l = {};
        Object.keys(f(this, Pe).kidoku).forEach((c) => {
          const d = f(this, Pe).kidoku[c];
          l[c] = d instanceof Function ? d() : d;
        }), sessionStorage[i + "kidoku"] = JSON.stringify(l), t.flush();
      } : () => t.flush()), T(this, sf, (s, a) => t.callHook(s, a)), t.addHook((s, a) => {
        var o, u;
        return (u = (o = f(this, af))[s]) == null ? void 0 : u.call(o, s, a);
      });
      const n = this.getVal("sys:sn.tagCh.msecWait", -1);
      (f(this, xe)["const.sn.isFirstBoot"] || n === -1) && S(this, ah, Ap).call(this);
    });
  }
  updateData(t) {
    T(this, Pe, t), T(this, Hr, f(this, Xe).sys = f(this, Pe).sys), T(this, _i, {});
    for (const e in f(this, Pe).kidoku) {
      const i = new hw();
      i.hAreas = { ...f(this, Pe).kidoku[e] }, f(this, _i)[e] = i;
    }
  }
  flush() {
    f(this, nh).call(this);
  }
  setDoRecProc(t) {
    T(this, sh, t);
  }
  defTmp(t, e) {
    f(this, xe)[t] = e;
  }
  cloneMp() {
    return { ...f(this, Xe).mp };
  }
  setMp(t) {
    f(this, Xe).mp = t;
  }
  setMark(t, e) {
    f(this, Pe).mark[t] = e, this.flush();
  }
  cloneSave() {
    return { ...f(this, Xe).save };
  }
  mark2save(t) {
    var e;
    T(this, Gr, f(this, Xe).save = { ...t.hSave }), T(this, fo, (e = f(this, Gr)["sn.doRecLog"]) != null ? e : !1);
  }
  loadScrWork(t) {
    t in f(this, _i) || (f(this, _i)[t] = new hw());
  }
  saveKidoku() {
    for (const t in f(this, _i))
      f(this, Pe).kidoku[t] = { ...f(this, _i)[t].hAreas };
    this.flush();
  }
  setVal_Nochk(t, e, i, n = !1) {
    var o, u;
    const s = f(this, Xe)[t];
    n && (i = S(this, hf, oy).call(this, i));
    const a = t + ":" + e;
    if (a in f(Xu, co)) {
      const h = s[e], l = i;
      h != l && f(this, sf).call(this, "data_break", {
        dataId: a,
        old_v: h,
        new_v: l
      });
    }
    s[e] = i, (u = (o = f(this, uh))[a]) == null || u.call(o, e, i);
  }
  doRecLog() {
    return f(this, fo);
  }
  defValTrg(t, e) {
    f(this, uh)[t] = e;
  }
};
let Op = Xu;
Xe = new WeakMap(), Gr = new WeakMap(), xe = new WeakMap(), Zn = new WeakMap(), Pe = new WeakMap(), Hr = new WeakMap(), _i = new WeakMap(), sf = new WeakMap(), af = new WeakMap(), of = new WeakSet(), sy = function(t) {
  T(Xu, co, {}), t.forEach((e) => f(Xu, co)[e.dataId] = 1);
}, nh = new WeakMap(), sh = new WeakMap(), Bv = new WeakSet(), kC = function(t) {
  if (!("from" in t))
    throw "from\u306F\u5FC5\u9808\u3067\u3059";
  if (!("to" in t))
    throw "to\u306F\u5FC5\u9808\u3067\u3059";
  const e = Number(t.from), i = Number(t.to);
  if (e === i)
    return !1;
  if (!(e in f(this, Pe).mark))
    throw `from:${e} \u306E\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\u306F\u5B58\u5728\u3057\u307E\u305B\u3093`;
  return this.setMark(i, { ...f(this, Pe).mark[e] }), f(this, Zn).copyBMFolder(e, i), !1;
}, Lv = new WeakSet(), BC = function(t) {
  const { place: e } = t;
  if (!e)
    throw "place\u306F\u5FC5\u9808\u3067\u3059";
  return delete f(this, Pe).mark[e], this.flush(), f(this, Zn).eraseBMFolder(e), !1;
}, yi = new WeakSet(), an = function(t) {
  if (!t.name)
    throw "name\u306F\u5FC5\u9808\u3067\u3059";
  let e = !0;
  if (t.cast)
    switch (t.cast) {
      case "num":
        tt(t, "text", NaN);
        break;
      case "int":
        t.text = String(jt(tt(t, "text", NaN)));
        break;
      case "uint":
        t.text = String(vi(tt(t, "text", NaN)));
        break;
      case "bool":
        pt(t, "text", !1);
        break;
      case "str":
        e = !1;
        break;
      default:
        throw "cast\u3010" + t.cast + "\u3011\u306F\u672A\u5B9A\u7FA9\u3067\u3059";
    }
  return f(this, oh).call(this, t.name, t.text, e), !1;
}, Dv = new WeakSet(), LC = function(t) {
  const e = tt(t, "text", 0);
  return t.text = String(e < 0 ? -e : e), S(this, yi, an).call(this, t), !1;
}, Uv = new WeakSet(), DC = function(t) {
  var e;
  return t.text = ((e = t.text) != null ? e : "").charAt(tt(t, "pos", 0)), S(this, yi, an).call(this, t), !1;
}, Gv = new WeakSet(), UC = function(t) {
  var n;
  const { val: e } = t;
  if (!e)
    throw "val\u306F\u5FC5\u9808\u3067\u3059";
  const i = tt(t, "start", 0);
  return t.text = String(((n = t.text) != null ? n : "").indexOf(e, i)), S(this, yi, an).call(this, t), !1;
}, Hv = new WeakSet(), GC = function(t) {
  var e;
  return t.text = String(((e = t.text) != null ? e : "").length), S(this, yi, an).call(this, t), !1;
}, zv = new WeakSet(), HC = function(t) {
  var n;
  if (!t.reg)
    throw "reg\u306F\u5FC5\u9808\u3067\u3059";
  const { flags: e } = t, i = e ? new RegExp(t.reg, e) : new RegExp(t.reg);
  return t.text = String((n = t.text) != null ? n : "").replace(i, String(t.val)), S(this, yi, an).call(this, t), !1;
}, jv = new WeakSet(), zC = function(t) {
  const e = tt(t, "text", 0);
  return t.text = String(Math.round(e)), S(this, yi, an).call(this, t), !1;
}, $v = new WeakSet(), jC = function(t) {
  var n;
  if (!t.reg)
    throw "reg\u306F\u5FC5\u9808\u3067\u3059";
  const { flags: e } = t, i = e ? new RegExp(t.reg, e) : new RegExp(t.reg);
  return t.text = String(((n = t.text) != null ? n : "").search(i)), S(this, yi, an).call(this, t), !1;
}, Vv = new WeakSet(), $C = function(t) {
  var i, n;
  const e = tt(t, "pos", 0);
  return t.text = t.len !== "all" ? ((i = t.text) != null ? i : "").slice(e, e + jt(tt(t, "len", 1))) : ((n = t.text) != null ? n : "").slice(e), S(this, yi, an).call(this, t), !1;
}, ah = new WeakSet(), Ap = function() {
  var i, n;
  const t = T(this, Hr, f(this, Xe).sys = f(this, Pe).sys = {});
  typeof process < "u" || (this.setVal_Nochk("sys", "const.sn.window.x", 0), this.setVal_Nochk("sys", "const.sn.window.y", 0)), this.setVal_Nochk("sys", "sn.tagCh.doWait", !0), this.setVal_Nochk("sys", "sn.tagCh.doWait_Kidoku", !0), this.setVal_Nochk("sys", "sn.tagCh.msecWait", this.cfg.oCfg.init.tagch_msecwait), this.setVal_Nochk("sys", "sn.tagCh.msecWait_Kidoku", this.cfg.oCfg.init.tagch_msecwait), this.setVal_Nochk("sys", "sn.tagCh.canskip", !0), this.setVal_Nochk("sys", "sn.skip.mode", "s"), this.setVal_Nochk("sys", "sn.auto.msecPageWait", tt(t, "sn.auto.msecPageWait", (i = this.cfg.oCfg.init.auto_msecpagewait) != null ? i : 3500)), this.setVal_Nochk("sys", "sn.auto.msecPageWait_Kidoku", tt(t, "sn.auto.msecPageWait", (n = this.cfg.oCfg.init.auto_msecpagewait) != null ? n : 3500)), this.setVal_Nochk("sys", "sn.auto.msecLineWait", 500), this.setVal_Nochk("sys", "sn.auto.msecLineWait_Kidoku", 500), this.setVal_Nochk("sys", "const.sn.sound.BGM.volume", 1), this.setVal_Nochk("sys", "const.sn.sound.SE.volume", 1), this.setVal_Nochk("sys", "const.sn.sound.SYS.volume", 1);
  for (const s in f(this, Pe).kidoku)
    f(this, Pe).kidoku[s].hAreas = {}, f(this, _i)[s].clear();
  return this.setVal_Nochk("sys", "TextLayer.Back.Alpha", 0.5), f(this, Xe).mark = f(this, Pe).mark = {}, this.setVal_Nochk("sys", "const.sn.save.place", 1), this.flush(), !1;
}, uf = new WeakSet(), ay = function() {
  var n, s, a;
  const t = (n = f(this, Gr)["const.sn.mesLayer"]) != null ? n : "", e = (s = f(this, Gr)["sn.doRecLog"]) != null ? s : !1, i = (a = f(this, Gr)["const.sn.sLog"]) != null ? a : "[]";
  return T(this, Gr, f(this, Xe).save = {}), this.setVal_Nochk("save", "const.sn.mesLayer", t), this.setVal_Nochk("save", "sn.doRecLog", e), this.setVal_Nochk("save", "const.sn.sLog", i), !1;
}, oh = new WeakMap(), co = new WeakMap(), hf = new WeakSet(), oy = function(t) {
  const e = t;
  if (e === "true")
    return !0;
  if (e === "false")
    return !1;
  if (e === "null")
    return null;
  if (e !== "undefined")
    return f(this, lf).test(e) ? parseFloat(e) : t;
}, lf = new WeakMap(), cf = new WeakMap(), fo = new WeakMap(), uh = new WeakMap(), hh = new WeakSet(), Fp = function(t) {
  pt(f(this, Hr), t, !0);
}, Xv = new WeakSet(), VC = function(t) {
  tt(f(this, Hr), t, 10), f(this, Hr)["sn.tagCh.doWait"];
}, Wv = new WeakSet(), XC = function(t) {
  tt(
    f(this, Hr),
    t,
    this.cfg.oCfg.init.tagch_msecwait === void 0 ? 10 : this.cfg.oCfg.init.tagch_msecwait
  ), f(this, Hr)["sn.tagCh.doWait_Kidoku"];
}, ff = new WeakSet(), uy = function(t) {
  tt(
    f(this, Hr),
    t,
    this.cfg.oCfg.init.auto_msecpagewait === void 0 ? 3500 : this.cfg.oCfg.init.auto_msecpagewait
  );
}, df = new WeakSet(), hy = function(t) {
  tt(f(this, Hr), t, 500);
}, Yv = new WeakSet(), WC = function(t) {
  return pt(f(this, Gr), t, !0);
}, qv = new WeakSet(), YC = function(t) {
  pt(f(this, xe), t, !0);
}, lh = new WeakSet(), Mp = function(t) {
  pt(f(this, xe), t, !1);
}, I(Op, co, {});
var qt = {
  Linear: {
    None: function(r) {
      return r;
    }
  },
  Quadratic: {
    In: function(r) {
      return r * r;
    },
    Out: function(r) {
      return r * (2 - r);
    },
    InOut: function(r) {
      return (r *= 2) < 1 ? 0.5 * r * r : -0.5 * (--r * (r - 2) - 1);
    }
  },
  Cubic: {
    In: function(r) {
      return r * r * r;
    },
    Out: function(r) {
      return --r * r * r + 1;
    },
    InOut: function(r) {
      return (r *= 2) < 1 ? 0.5 * r * r * r : 0.5 * ((r -= 2) * r * r + 2);
    }
  },
  Quartic: {
    In: function(r) {
      return r * r * r * r;
    },
    Out: function(r) {
      return 1 - --r * r * r * r;
    },
    InOut: function(r) {
      return (r *= 2) < 1 ? 0.5 * r * r * r * r : -0.5 * ((r -= 2) * r * r * r - 2);
    }
  },
  Quintic: {
    In: function(r) {
      return r * r * r * r * r;
    },
    Out: function(r) {
      return --r * r * r * r * r + 1;
    },
    InOut: function(r) {
      return (r *= 2) < 1 ? 0.5 * r * r * r * r * r : 0.5 * ((r -= 2) * r * r * r * r + 2);
    }
  },
  Sinusoidal: {
    In: function(r) {
      return 1 - Math.cos(r * Math.PI / 2);
    },
    Out: function(r) {
      return Math.sin(r * Math.PI / 2);
    },
    InOut: function(r) {
      return 0.5 * (1 - Math.cos(Math.PI * r));
    }
  },
  Exponential: {
    In: function(r) {
      return r === 0 ? 0 : Math.pow(1024, r - 1);
    },
    Out: function(r) {
      return r === 1 ? 1 : 1 - Math.pow(2, -10 * r);
    },
    InOut: function(r) {
      return r === 0 ? 0 : r === 1 ? 1 : (r *= 2) < 1 ? 0.5 * Math.pow(1024, r - 1) : 0.5 * (-Math.pow(2, -10 * (r - 1)) + 2);
    }
  },
  Circular: {
    In: function(r) {
      return 1 - Math.sqrt(1 - r * r);
    },
    Out: function(r) {
      return Math.sqrt(1 - --r * r);
    },
    InOut: function(r) {
      return (r *= 2) < 1 ? -0.5 * (Math.sqrt(1 - r * r) - 1) : 0.5 * (Math.sqrt(1 - (r -= 2) * r) + 1);
    }
  },
  Elastic: {
    In: function(r) {
      return r === 0 ? 0 : r === 1 ? 1 : -Math.pow(2, 10 * (r - 1)) * Math.sin((r - 1.1) * 5 * Math.PI);
    },
    Out: function(r) {
      return r === 0 ? 0 : r === 1 ? 1 : Math.pow(2, -10 * r) * Math.sin((r - 0.1) * 5 * Math.PI) + 1;
    },
    InOut: function(r) {
      return r === 0 ? 0 : r === 1 ? 1 : (r *= 2, r < 1 ? -0.5 * Math.pow(2, 10 * (r - 1)) * Math.sin((r - 1.1) * 5 * Math.PI) : 0.5 * Math.pow(2, -10 * (r - 1)) * Math.sin((r - 1.1) * 5 * Math.PI) + 1);
    }
  },
  Back: {
    In: function(r) {
      var t = 1.70158;
      return r * r * ((t + 1) * r - t);
    },
    Out: function(r) {
      var t = 1.70158;
      return --r * r * ((t + 1) * r + t) + 1;
    },
    InOut: function(r) {
      var t = 2.5949095;
      return (r *= 2) < 1 ? 0.5 * (r * r * ((t + 1) * r - t)) : 0.5 * ((r -= 2) * r * ((t + 1) * r + t) + 2);
    }
  },
  Bounce: {
    In: function(r) {
      return 1 - qt.Bounce.Out(1 - r);
    },
    Out: function(r) {
      return r < 1 / 2.75 ? 7.5625 * r * r : r < 2 / 2.75 ? 7.5625 * (r -= 1.5 / 2.75) * r + 0.75 : r < 2.5 / 2.75 ? 7.5625 * (r -= 2.25 / 2.75) * r + 0.9375 : 7.5625 * (r -= 2.625 / 2.75) * r + 0.984375;
    },
    InOut: function(r) {
      return r < 0.5 ? qt.Bounce.In(r * 2) * 0.5 : qt.Bounce.Out(r * 2 - 1) * 0.5 + 0.5;
    }
  }
}, Zl;
typeof self > "u" && typeof process < "u" && process.hrtime ? Zl = function() {
  var r = process.hrtime();
  return r[0] * 1e3 + r[1] / 1e6;
} : typeof self < "u" && self.performance !== void 0 && self.performance.now !== void 0 ? Zl = self.performance.now.bind(self.performance) : Date.now !== void 0 ? Zl = Date.now : Zl = function() {
  return new Date().getTime();
};
var Su = Zl, hL = function() {
  function r() {
    this._tweens = {}, this._tweensAddedDuringUpdate = {};
  }
  return r.prototype.getAll = function() {
    var t = this;
    return Object.keys(this._tweens).map(function(e) {
      return t._tweens[e];
    });
  }, r.prototype.removeAll = function() {
    this._tweens = {};
  }, r.prototype.add = function(t) {
    this._tweens[t.getId()] = t, this._tweensAddedDuringUpdate[t.getId()] = t;
  }, r.prototype.remove = function(t) {
    delete this._tweens[t.getId()], delete this._tweensAddedDuringUpdate[t.getId()];
  }, r.prototype.update = function(t, e) {
    t === void 0 && (t = Su()), e === void 0 && (e = !1);
    var i = Object.keys(this._tweens);
    if (i.length === 0)
      return !1;
    for (; i.length > 0; ) {
      this._tweensAddedDuringUpdate = {};
      for (var n = 0; n < i.length; n++) {
        var s = this._tweens[i[n]], a = !e;
        s && s.update(t, a) === !1 && !e && delete this._tweens[i[n]];
      }
      i = Object.keys(this._tweensAddedDuringUpdate);
    }
    return !0;
  }, r;
}(), Jl = {
  Linear: function(r, t) {
    var e = r.length - 1, i = e * t, n = Math.floor(i), s = Jl.Utils.Linear;
    return t < 0 ? s(r[0], r[1], i) : t > 1 ? s(r[e], r[e - 1], e - i) : s(r[n], r[n + 1 > e ? e : n + 1], i - n);
  },
  Bezier: function(r, t) {
    for (var e = 0, i = r.length - 1, n = Math.pow, s = Jl.Utils.Bernstein, a = 0; a <= i; a++)
      e += n(1 - t, i - a) * n(t, a) * r[a] * s(i, a);
    return e;
  },
  CatmullRom: function(r, t) {
    var e = r.length - 1, i = e * t, n = Math.floor(i), s = Jl.Utils.CatmullRom;
    return r[0] === r[e] ? (t < 0 && (n = Math.floor(i = e * (1 + t))), s(r[(n - 1 + e) % e], r[n], r[(n + 1) % e], r[(n + 2) % e], i - n)) : t < 0 ? r[0] - (s(r[0], r[0], r[1], r[1], -i) - r[0]) : t > 1 ? r[e] - (s(r[e], r[e], r[e - 1], r[e - 1], i - e) - r[e]) : s(r[n ? n - 1 : 0], r[n], r[e < n + 1 ? e : n + 1], r[e < n + 2 ? e : n + 2], i - n);
  },
  Utils: {
    Linear: function(r, t, e) {
      return (t - r) * e + r;
    },
    Bernstein: function(r, t) {
      var e = Jl.Utils.Factorial;
      return e(r) / e(t) / e(r - t);
    },
    Factorial: function() {
      var r = [1];
      return function(t) {
        var e = 1;
        if (r[t])
          return r[t];
        for (var i = t; i > 1; i--)
          e *= i;
        return r[t] = e, e;
      };
    }(),
    CatmullRom: function(r, t, e, i, n) {
      var s = (e - r) * 0.5, a = (i - t) * 0.5, o = n * n, u = n * o;
      return (2 * t - 2 * e + s + a) * u + (-3 * t + 3 * e - 2 * s - a) * o + s * n + t;
    }
  }
}, qC = function() {
  function r() {
  }
  return r.nextId = function() {
    return r._nextId++;
  }, r._nextId = 0, r;
}(), ZC = new hL(), Ta = function() {
  function r(t, e) {
    e === void 0 && (e = ZC), this._object = t, this._group = e, this._isPaused = !1, this._pauseStart = 0, this._valuesStart = {}, this._valuesEnd = {}, this._valuesStartRepeat = {}, this._duration = 1e3, this._initialRepeat = 0, this._repeat = 0, this._yoyo = !1, this._isPlaying = !1, this._reversed = !1, this._delayTime = 0, this._startTime = 0, this._easingFunction = qt.Linear.None, this._interpolationFunction = Jl.Linear, this._chainedTweens = [], this._onStartCallbackFired = !1, this._id = qC.nextId(), this._isChainStopped = !1, this._goToEnd = !1;
  }
  return r.prototype.getId = function() {
    return this._id;
  }, r.prototype.isPlaying = function() {
    return this._isPlaying;
  }, r.prototype.isPaused = function() {
    return this._isPaused;
  }, r.prototype.to = function(t, e) {
    return this._valuesEnd = Object.create(t), e !== void 0 && (this._duration = e), this;
  }, r.prototype.duration = function(t) {
    return this._duration = t, this;
  }, r.prototype.start = function(t) {
    if (this._isPlaying)
      return this;
    if (this._group && this._group.add(this), this._repeat = this._initialRepeat, this._reversed) {
      this._reversed = !1;
      for (var e in this._valuesStartRepeat)
        this._swapEndStartRepeatValues(e), this._valuesStart[e] = this._valuesStartRepeat[e];
    }
    return this._isPlaying = !0, this._isPaused = !1, this._onStartCallbackFired = !1, this._isChainStopped = !1, this._startTime = t !== void 0 ? typeof t == "string" ? Su() + parseFloat(t) : t : Su(), this._startTime += this._delayTime, this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat), this;
  }, r.prototype._setupProperties = function(t, e, i, n) {
    for (var s in i) {
      var a = t[s], o = Array.isArray(a), u = o ? "array" : typeof a, h = !o && Array.isArray(i[s]);
      if (!(u === "undefined" || u === "function")) {
        if (h) {
          var l = i[s];
          if (l.length === 0)
            continue;
          l = l.map(this._handleRelativeValue.bind(this, a)), i[s] = [a].concat(l);
        }
        if ((u === "object" || o) && a && !h) {
          e[s] = o ? [] : {};
          for (var c in a)
            e[s][c] = a[c];
          n[s] = o ? [] : {}, this._setupProperties(a, e[s], i[s], n[s]);
        } else
          typeof e[s] > "u" && (e[s] = a), o || (e[s] *= 1), h ? n[s] = i[s].slice().reverse() : n[s] = e[s] || 0;
      }
    }
  }, r.prototype.stop = function() {
    return this._isChainStopped || (this._isChainStopped = !0, this.stopChainedTweens()), this._isPlaying ? (this._group && this._group.remove(this), this._isPlaying = !1, this._isPaused = !1, this._onStopCallback && this._onStopCallback(this._object), this) : this;
  }, r.prototype.end = function() {
    return this._goToEnd = !0, this.update(1 / 0), this;
  }, r.prototype.pause = function(t) {
    return t === void 0 && (t = Su()), this._isPaused || !this._isPlaying ? this : (this._isPaused = !0, this._pauseStart = t, this._group && this._group.remove(this), this);
  }, r.prototype.resume = function(t) {
    return t === void 0 && (t = Su()), !this._isPaused || !this._isPlaying ? this : (this._isPaused = !1, this._startTime += t - this._pauseStart, this._pauseStart = 0, this._group && this._group.add(this), this);
  }, r.prototype.stopChainedTweens = function() {
    for (var t = 0, e = this._chainedTweens.length; t < e; t++)
      this._chainedTweens[t].stop();
    return this;
  }, r.prototype.group = function(t) {
    return this._group = t, this;
  }, r.prototype.delay = function(t) {
    return this._delayTime = t, this;
  }, r.prototype.repeat = function(t) {
    return this._initialRepeat = t, this._repeat = t, this;
  }, r.prototype.repeatDelay = function(t) {
    return this._repeatDelayTime = t, this;
  }, r.prototype.yoyo = function(t) {
    return this._yoyo = t, this;
  }, r.prototype.easing = function(t) {
    return this._easingFunction = t, this;
  }, r.prototype.interpolation = function(t) {
    return this._interpolationFunction = t, this;
  }, r.prototype.chain = function() {
    for (var t = [], e = 0; e < arguments.length; e++)
      t[e] = arguments[e];
    return this._chainedTweens = t, this;
  }, r.prototype.onStart = function(t) {
    return this._onStartCallback = t, this;
  }, r.prototype.onUpdate = function(t) {
    return this._onUpdateCallback = t, this;
  }, r.prototype.onRepeat = function(t) {
    return this._onRepeatCallback = t, this;
  }, r.prototype.onComplete = function(t) {
    return this._onCompleteCallback = t, this;
  }, r.prototype.onStop = function(t) {
    return this._onStopCallback = t, this;
  }, r.prototype.update = function(t, e) {
    if (t === void 0 && (t = Su()), e === void 0 && (e = !0), this._isPaused)
      return !0;
    var i, n, s = this._startTime + this._duration;
    if (!this._goToEnd && !this._isPlaying) {
      if (t > s)
        return !1;
      e && this.start(t);
    }
    if (this._goToEnd = !1, t < this._startTime)
      return !0;
    this._onStartCallbackFired === !1 && (this._onStartCallback && this._onStartCallback(this._object), this._onStartCallbackFired = !0), n = (t - this._startTime) / this._duration, n = this._duration === 0 || n > 1 ? 1 : n;
    var a = this._easingFunction(n);
    if (this._updateProperties(this._object, this._valuesStart, this._valuesEnd, a), this._onUpdateCallback && this._onUpdateCallback(this._object, n), n === 1)
      if (this._repeat > 0) {
        isFinite(this._repeat) && this._repeat--;
        for (i in this._valuesStartRepeat)
          !this._yoyo && typeof this._valuesEnd[i] == "string" && (this._valuesStartRepeat[i] = this._valuesStartRepeat[i] + parseFloat(this._valuesEnd[i])), this._yoyo && this._swapEndStartRepeatValues(i), this._valuesStart[i] = this._valuesStartRepeat[i];
        return this._yoyo && (this._reversed = !this._reversed), this._repeatDelayTime !== void 0 ? this._startTime = t + this._repeatDelayTime : this._startTime = t + this._delayTime, this._onRepeatCallback && this._onRepeatCallback(this._object), !0;
      } else {
        this._onCompleteCallback && this._onCompleteCallback(this._object);
        for (var o = 0, u = this._chainedTweens.length; o < u; o++)
          this._chainedTweens[o].start(this._startTime + this._duration);
        return this._isPlaying = !1, !1;
      }
    return !0;
  }, r.prototype._updateProperties = function(t, e, i, n) {
    for (var s in i)
      if (e[s] !== void 0) {
        var a = e[s] || 0, o = i[s], u = Array.isArray(t[s]), h = Array.isArray(o), l = !u && h;
        l ? t[s] = this._interpolationFunction(o, n) : typeof o == "object" && o ? this._updateProperties(t[s], a, o, n) : (o = this._handleRelativeValue(a, o), typeof o == "number" && (t[s] = a + (o - a) * n));
      }
  }, r.prototype._handleRelativeValue = function(t, e) {
    return typeof e != "string" ? e : e.charAt(0) === "+" || e.charAt(0) === "-" ? t + parseFloat(e) : parseFloat(e);
  }, r.prototype._swapEndStartRepeatValues = function(t) {
    var e = this._valuesStartRepeat[t], i = this._valuesEnd[t];
    typeof i == "string" ? this._valuesStartRepeat[t] = this._valuesStartRepeat[t] + parseFloat(i) : this._valuesStartRepeat[t] = this._valuesEnd[t], this._valuesEnd[t] = e;
  }, r;
}();
qC.nextId;
var An = ZC;
An.getAll.bind(An);
var lL = An.removeAll.bind(An);
An.add.bind(An);
An.remove.bind(An);
var cL = An.update.bind(An), pf;
const Zv = class {
  static ease(t) {
    if (!t)
      return (e) => qt.Linear.None(e);
    if (!(t in f(Zv, pf)))
      throw "\u7570\u5E38\u306Aease\u6307\u5B9A\u3067\u3059";
    return f(Zv, pf)[t];
  }
};
let ws = Zv;
pf = new WeakMap(), I(ws, pf, {
  "Back.In": (t) => qt.Back.In(t),
  "Back.InOut": (t) => qt.Back.InOut(t),
  "Back.Out": (t) => qt.Back.Out(t),
  "Bounce.In": (t) => qt.Bounce.In(t),
  "Bounce.InOut": (t) => qt.Bounce.InOut(t),
  "Bounce.Out": (t) => qt.Bounce.Out(t),
  "Circular.In": (t) => qt.Circular.In(t),
  "Circular.InOut": (t) => qt.Circular.InOut(t),
  "Circular.Out": (t) => qt.Circular.Out(t),
  "Cubic.In": (t) => qt.Cubic.In(t),
  "Cubic.InOut": (t) => qt.Cubic.InOut(t),
  "Cubic.Out": (t) => qt.Cubic.Out(t),
  "Elastic.In": (t) => qt.Elastic.In(t),
  "Elastic.InOut": (t) => qt.Elastic.InOut(t),
  "Elastic.Out": (t) => qt.Elastic.Out(t),
  "Exponential.In": (t) => qt.Exponential.In(t),
  "Exponential.InOut": (t) => qt.Exponential.InOut(t),
  "Exponential.Out": (t) => qt.Exponential.Out(t),
  "Linear.None": (t) => qt.Linear.None(t),
  "Quadratic.In": (t) => qt.Quadratic.In(t),
  "Quadratic.InOut": (t) => qt.Quadratic.InOut(t),
  "Quadratic.Out": (t) => qt.Quadratic.Out(t),
  "Quartic.In": (t) => qt.Quartic.In(t),
  "Quartic.InOut": (t) => qt.Quartic.InOut(t),
  "Quartic.Out": (t) => qt.Quartic.Out(t),
  "Quintic.In": (t) => qt.Quintic.In(t),
  "Quintic.InOut": (t) => qt.Quintic.InOut(t),
  "Quintic.Out": (t) => qt.Quintic.Out(t),
  "Sinusoidal.In": (t) => qt.Sinusoidal.In(t),
  "Sinusoidal.InOut": (t) => qt.Sinusoidal.InOut(t),
  "Sinusoidal.Out": (t) => qt.Sinusoidal.Out(t)
});
/*!
 * @pixi/sound - v4.3.0
 * https://github.com/pixijs/pixi-sound
 * Compiled Fri, 05 Aug 2022 20:12:47 UTC
 *
 * @pixi/sound is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
var JC;
function Me() {
  return JC;
}
var KC = function(r, t) {
  return (KC = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n]);
  })(r, t);
};
function ci(r, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  function e() {
    this.constructor = r;
  }
  KC(r, t), r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var nu = function() {
  return (nu = Object.assign || function(r) {
    for (var t, e = 1, i = arguments.length; e < i; e++)
      for (var n in t = arguments[e])
        Object.prototype.hasOwnProperty.call(t, n) && (r[n] = t[n]);
    return r;
  }).apply(this, arguments);
}, gv = ["mp3", "ogg", "oga", "opus", "mpeg", "wav", "m4a", "aiff", "wma", "mid", "caf"], Gb = {};
function QC(r) {
  var t = nu({ m4a: "audio/mp4", oga: "audio/ogg", opus: 'audio/ogg; codecs="opus"', caf: 'audio/x-caf; codecs="opus"' }, r || {}), e = document.createElement("audio"), i = {}, n = /^no$/;
  gv.forEach(function(s) {
    var a = e.canPlayType("audio/".concat(s)).replace(n, ""), o = t[s] ? e.canPlayType(t[s]).replace(n, "") : "";
    i[s] = !!a || !!o;
  }), Object.assign(Gb, i);
}
QC();
var fL = /\.(\{([^\}]+)\})(\?.*)?$/;
function Hb(r) {
  var t = fL, e = typeof r == "string" ? r : r.url;
  if (!t.test(e))
    return e;
  for (var i = t.exec(e), n = i[2].split(","), s = n[n.length - 1], a = 0, o = n.length; a < o; a++) {
    var u = n[a];
    if (Gb[u]) {
      s = u;
      break;
    }
  }
  var h = e.replace(i[1], s);
  if (typeof r != "string") {
    var l = r;
    l.extension = s, l.url = h;
  }
  return h;
}
var tI = function() {
  function r() {
  }
  return r.add = function() {
    r.setLegacy(Me().useLegacy);
  }, r.setLegacy = function(t) {
    var e = gv;
    t ? e.forEach(function(i) {
      Lt.setExtensionXhrType(i, Lt.XHR_RESPONSE_TYPE.DEFAULT), Lt.setExtensionLoadType(i, Lt.LOAD_TYPE.AUDIO);
    }) : e.forEach(function(i) {
      Lt.setExtensionXhrType(i, Lt.XHR_RESPONSE_TYPE.BUFFER), Lt.setExtensionLoadType(i, Lt.LOAD_TYPE.XHR);
    });
  }, r.pre = function(t, e) {
    Hb(t), e();
  }, r.use = function(t, e) {
    t.data && gv.indexOf(t.extension) > -1 ? t.sound = Me().add(t.name, { loaded: e, preload: !0, url: t.url, source: t.data }) : e();
  }, r;
}(), dL = 0, pL = function(r) {
  function t(e) {
    var i = r.call(this) || this;
    return i.id = dL++, i.init(e), i;
  }
  return ci(t, r), t.prototype.set = function(e, i) {
    if (this[e] === void 0)
      throw new Error("Property with name ".concat(e, " does not exist."));
    switch (e) {
      case "speed":
        this.speed = i;
        break;
      case "volume":
        this.volume = i;
        break;
      case "paused":
        this.paused = i;
        break;
      case "loop":
        this.loop = i;
        break;
      case "muted":
        this.muted = i;
    }
    return this;
  }, Object.defineProperty(t.prototype, "progress", { get: function() {
    return this._source.currentTime / this._duration;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "paused", { get: function() {
    return this._paused;
  }, set: function(e) {
    this._paused = e, this.refreshPaused();
  }, enumerable: !1, configurable: !0 }), t.prototype._onPlay = function() {
    this._playing = !0;
  }, t.prototype._onPause = function() {
    this._playing = !1;
  }, t.prototype.init = function(e) {
    this._playing = !1, this._duration = e.source.duration;
    var i = this._source = e.source.cloneNode(!1);
    i.src = e.parent.url, i.onplay = this._onPlay.bind(this), i.onpause = this._onPause.bind(this), e.context.on("refresh", this.refresh, this), e.context.on("refreshPaused", this.refreshPaused, this), this._media = e;
  }, t.prototype._internalStop = function() {
    this._source && this._playing && (this._source.onended = null, this._source.pause());
  }, t.prototype.stop = function() {
    this._internalStop(), this._source && this.emit("stop");
  }, Object.defineProperty(t.prototype, "speed", { get: function() {
    return this._speed;
  }, set: function(e) {
    this._speed = e, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "volume", { get: function() {
    return this._volume;
  }, set: function(e) {
    this._volume = e, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "loop", { get: function() {
    return this._loop;
  }, set: function(e) {
    this._loop = e, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "muted", { get: function() {
    return this._muted;
  }, set: function(e) {
    this._muted = e, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "filters", { get: function() {
    return null;
  }, set: function(e) {
  }, enumerable: !1, configurable: !0 }), t.prototype.refresh = function() {
    var e = this._media.context, i = this._media.parent;
    this._source.loop = this._loop || i.loop;
    var n = e.volume * (e.muted ? 0 : 1), s = i.volume * (i.muted ? 0 : 1), a = this._volume * (this._muted ? 0 : 1);
    this._source.volume = a * n * s, this._source.playbackRate = this._speed * e.speed * i.speed;
  }, t.prototype.refreshPaused = function() {
    var e = this._media.context, i = this._media.parent, n = this._paused || i.paused || e.paused;
    n !== this._pausedReal && (this._pausedReal = n, n ? (this._internalStop(), this.emit("paused")) : (this.emit("resumed"), this.play({ start: this._source.currentTime, end: this._end, volume: this._volume, speed: this._speed, loop: this._loop })), this.emit("pause", n));
  }, t.prototype.play = function(e) {
    var i = this, n = e.start, s = e.end, a = e.speed, o = e.loop, u = e.volume, h = e.muted;
    this._speed = a, this._volume = u, this._loop = !!o, this._muted = h, this.refresh(), this.loop && s !== null && (this.loop = !1), this._start = n, this._end = s || this._duration, this._start = Math.max(0, this._start - t.PADDING), this._end = Math.min(this._end + t.PADDING, this._duration), this._source.onloadedmetadata = function() {
      i._source && (i._source.currentTime = n, i._source.onloadedmetadata = null, i.emit("progress", n, i._duration), He.shared.add(i._onUpdate, i));
    }, this._source.onended = this._onComplete.bind(this), this._source.play(), this.emit("start");
  }, t.prototype._onUpdate = function() {
    this.emit("progress", this.progress, this._duration), this._source.currentTime >= this._end && !this._source.loop && this._onComplete();
  }, t.prototype._onComplete = function() {
    He.shared.remove(this._onUpdate, this), this._internalStop(), this.emit("progress", 1, this._duration), this.emit("end", this);
  }, t.prototype.destroy = function() {
    He.shared.remove(this._onUpdate, this), this.removeAllListeners();
    var e = this._source;
    e && (e.onended = null, e.onplay = null, e.onpause = null, this._internalStop()), this._source = null, this._speed = 1, this._volume = 1, this._loop = !1, this._end = null, this._start = 0, this._duration = 0, this._playing = !1, this._pausedReal = !1, this._paused = !1, this._muted = !1, this._media && (this._media.context.off("refresh", this.refresh, this), this._media.context.off("refreshPaused", this.refreshPaused, this), this._media = null);
  }, t.prototype.toString = function() {
    return "[HTMLAudioInstance id=".concat(this.id, "]");
  }, t.PADDING = 0.1, t;
}(Fi), vL = function(r) {
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  return ci(t, r), t.prototype.init = function(e) {
    this.parent = e, this._source = e.options.source || new Audio(), e.url && (this._source.src = e.url);
  }, t.prototype.create = function() {
    return new pL(this);
  }, Object.defineProperty(t.prototype, "isPlayable", { get: function() {
    return !!this._source && this._source.readyState === 4;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "duration", { get: function() {
    return this._source.duration;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "context", { get: function() {
    return this.parent.context;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "filters", { get: function() {
    return null;
  }, set: function(e) {
  }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function() {
    this.removeAllListeners(), this.parent = null, this._source && (this._source.src = "", this._source.load(), this._source = null);
  }, Object.defineProperty(t.prototype, "source", { get: function() {
    return this._source;
  }, enumerable: !1, configurable: !0 }), t.prototype.load = function(e) {
    var i = this._source, n = this.parent;
    if (i.readyState !== 4)
      if (n.url) {
        i.src = n.url;
        var s = function() {
          u(), n.isLoaded = !0;
          var l = n.autoPlayStart();
          e && e(null, n, l);
        }, a = function() {
          u(), e && e(new Error("Sound loading has been aborted"));
        }, o = function() {
          u();
          var l = "Failed to load audio element (code: ".concat(i.error.code, ")");
          e && e(new Error(l));
        }, u = function() {
          i.removeEventListener("canplaythrough", s), i.removeEventListener("load", s), i.removeEventListener("abort", a), i.removeEventListener("error", o);
        };
        i.addEventListener("canplaythrough", s, !1), i.addEventListener("load", s, !1), i.addEventListener("abort", a, !1), i.addEventListener("error", o, !1), i.load();
      } else
        e(new Error("sound.url or sound.source must be set"));
    else {
      n.isLoaded = !0;
      var h = n.autoPlayStart();
      e && setTimeout(function() {
        e(null, n, h);
      }, 0);
    }
  }, t;
}(Fi), gL = function() {
  function r(t, e) {
    this.parent = t, Object.assign(this, e), this.duration = this.end - this.start;
  }
  return r.prototype.play = function(t) {
    return this.parent.play({ complete: t, speed: this.speed || this.parent.speed, end: this.end, start: this.start, loop: this.loop });
  }, r.prototype.destroy = function() {
    this.parent = null;
  }, r;
}(), mi = function() {
  function r() {
  }
  return r.setParamValue = function(t, e) {
    if (t.setValueAtTime) {
      var i = Me().context;
      t.setValueAtTime(e, i.audioContext.currentTime);
    } else
      t.value = e;
    return e;
  }, r;
}(), mL = 0, _L = function(r) {
  function t(e) {
    var i = r.call(this) || this;
    return i.id = mL++, i._media = null, i._paused = !1, i._muted = !1, i._elapsed = 0, i.init(e), i;
  }
  return ci(t, r), t.prototype.set = function(e, i) {
    if (this[e] === void 0)
      throw new Error("Property with name ".concat(e, " does not exist."));
    switch (e) {
      case "speed":
        this.speed = i;
        break;
      case "volume":
        this.volume = i;
        break;
      case "muted":
        this.muted = i;
        break;
      case "loop":
        this.loop = i;
        break;
      case "paused":
        this.paused = i;
    }
    return this;
  }, t.prototype.stop = function() {
    this._source && (this._internalStop(), this.emit("stop"));
  }, Object.defineProperty(t.prototype, "speed", { get: function() {
    return this._speed;
  }, set: function(e) {
    this._speed = e, this.refresh(), this._update(!0);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "volume", { get: function() {
    return this._volume;
  }, set: function(e) {
    this._volume = e, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "muted", { get: function() {
    return this._muted;
  }, set: function(e) {
    this._muted = e, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "loop", { get: function() {
    return this._loop;
  }, set: function(e) {
    this._loop = e, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "filters", { get: function() {
    return this._filters;
  }, set: function(e) {
    var i;
    this._filters && ((i = this._filters) === null || i === void 0 || i.filter(function(n) {
      return n;
    }).forEach(function(n) {
      return n.disconnect();
    }), this._filters = null, this._source.connect(this._gain)), this._filters = e != null && e.length ? e.slice(0) : null, this.refresh();
  }, enumerable: !1, configurable: !0 }), t.prototype.refresh = function() {
    if (this._source) {
      var e = this._media.context, i = this._media.parent;
      this._source.loop = this._loop || i.loop;
      var n = e.volume * (e.muted ? 0 : 1), s = i.volume * (i.muted ? 0 : 1), a = this._volume * (this._muted ? 0 : 1);
      mi.setParamValue(this._gain.gain, a * s * n), mi.setParamValue(this._source.playbackRate, this._speed * i.speed * e.speed), this.applyFilters();
    }
  }, t.prototype.applyFilters = function() {
    var e;
    if (!((e = this._filters) === null || e === void 0) && e.length) {
      this._source.disconnect();
      var i = this._source;
      this._filters.forEach(function(n) {
        i.connect(n.destination), i = n;
      }), i.connect(this._gain);
    }
  }, t.prototype.refreshPaused = function() {
    var e = this._media.context, i = this._media.parent, n = this._paused || i.paused || e.paused;
    n !== this._pausedReal && (this._pausedReal = n, n ? (this._internalStop(), this.emit("paused")) : (this.emit("resumed"), this.play({ start: this._elapsed % this._duration, end: this._end, speed: this._speed, loop: this._loop, volume: this._volume })), this.emit("pause", n));
  }, t.prototype.play = function(e) {
    var i = e.start, n = e.end, s = e.speed, a = e.loop, o = e.volume, u = e.muted, h = e.filters;
    this._paused = !1;
    var l = this._media.nodes.cloneBufferSource(), c = l.source, d = l.gain;
    this._source = c, this._gain = d, this._speed = s, this._volume = o, this._loop = !!a, this._muted = u, this._filters = h, this.refresh();
    var p = this._source.buffer.duration;
    this._duration = p, this._end = n, this._lastUpdate = this._now(), this._elapsed = i, this._source.onended = this._onComplete.bind(this), this._loop ? (this._source.loopEnd = n, this._source.loopStart = i, this._source.start(0, i)) : n ? this._source.start(0, i, n - i) : this._source.start(0, i), this.emit("start"), this._update(!0), this.enableTicker(!0);
  }, t.prototype.enableTicker = function(e) {
    He.shared.remove(this._updateListener, this), e && He.shared.add(this._updateListener, this);
  }, Object.defineProperty(t.prototype, "progress", { get: function() {
    return this._progress;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "paused", { get: function() {
    return this._paused;
  }, set: function(e) {
    this._paused = e, this.refreshPaused();
  }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function() {
    var e;
    this.removeAllListeners(), this._internalStop(), this._gain && (this._gain.disconnect(), this._gain = null), this._media && (this._media.context.events.off("refresh", this.refresh, this), this._media.context.events.off("refreshPaused", this.refreshPaused, this), this._media = null), (e = this._filters) === null || e === void 0 || e.forEach(function(i) {
      return i.disconnect();
    }), this._filters = null, this._end = null, this._speed = 1, this._volume = 1, this._loop = !1, this._elapsed = 0, this._duration = 0, this._paused = !1, this._muted = !1, this._pausedReal = !1;
  }, t.prototype.toString = function() {
    return "[WebAudioInstance id=".concat(this.id, "]");
  }, t.prototype._now = function() {
    return this._media.context.audioContext.currentTime;
  }, t.prototype._updateListener = function() {
    this._update();
  }, t.prototype._update = function(e) {
    if (e === void 0 && (e = !1), this._source) {
      var i = this._now(), n = i - this._lastUpdate;
      if (n > 0 || e) {
        var s = this._source.playbackRate.value;
        this._elapsed += n * s, this._lastUpdate = i;
        var a = this._duration, o = void 0;
        if (this._source.loopStart) {
          var u = this._source.loopEnd - this._source.loopStart;
          o = (this._source.loopStart + this._elapsed % u) / a;
        } else
          o = this._elapsed % a / a;
        this._progress = o, this.emit("progress", this._progress, a);
      }
    }
  }, t.prototype.init = function(e) {
    this._media = e, e.context.events.on("refresh", this.refresh, this), e.context.events.on("refreshPaused", this.refreshPaused, this);
  }, t.prototype._internalStop = function() {
    if (this._source) {
      this.enableTicker(!1), this._source.onended = null, this._source.stop(0), this._source.disconnect();
      try {
        this._source.buffer = null;
      } catch {
      }
      this._source = null;
    }
  }, t.prototype._onComplete = function() {
    if (this._source) {
      this.enableTicker(!1), this._source.onended = null, this._source.disconnect();
      try {
        this._source.buffer = null;
      } catch {
      }
    }
    this._source = null, this._progress = 1, this.emit("progress", 1, this._duration), this.emit("end", this);
  }, t;
}(Fi), eI = function() {
  function r(t, e) {
    this._output = e, this._input = t;
  }
  return Object.defineProperty(r.prototype, "destination", { get: function() {
    return this._input;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "filters", { get: function() {
    return this._filters;
  }, set: function(t) {
    var e = this;
    if (this._filters && (this._filters.forEach(function(n) {
      n && n.disconnect();
    }), this._filters = null, this._input.connect(this._output)), t && t.length) {
      this._filters = t.slice(0), this._input.disconnect();
      var i = null;
      t.forEach(function(n) {
        i === null ? e._input.connect(n.destination) : i.connect(n.destination), i = n;
      }), i.connect(this._output);
    }
  }, enumerable: !1, configurable: !0 }), r.prototype.destroy = function() {
    this.filters = null, this._input = null, this._output = null;
  }, r;
}(), yL = function(r) {
  function t(e) {
    var i = this, n = e.audioContext, s = n.createBufferSource(), a = n.createGain(), o = n.createAnalyser();
    return s.connect(o), o.connect(a), a.connect(e.destination), (i = r.call(this, o, a) || this).context = e, i.bufferSource = s, i.gain = a, i.analyser = o, i;
  }
  return ci(t, r), Object.defineProperty(t.prototype, "script", { get: function() {
    return this._script || (this._script = this.context.audioContext.createScriptProcessor(t.BUFFER_SIZE), this._script.connect(this.context.destination)), this._script;
  }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function() {
    r.prototype.destroy.call(this), this.bufferSource.disconnect(), this._script && this._script.disconnect(), this.gain.disconnect(), this.analyser.disconnect(), this.bufferSource = null, this._script = null, this.gain = null, this.analyser = null, this.context = null;
  }, t.prototype.cloneBufferSource = function() {
    var e = this.bufferSource, i = this.context.audioContext.createBufferSource();
    i.buffer = e.buffer, mi.setParamValue(i.playbackRate, e.playbackRate.value), i.loop = e.loop;
    var n = this.context.audioContext.createGain();
    return i.connect(n), n.connect(this.destination), { source: i, gain: n };
  }, Object.defineProperty(t.prototype, "bufferSize", { get: function() {
    return this.script.bufferSize;
  }, enumerable: !1, configurable: !0 }), t.BUFFER_SIZE = 0, t;
}(eI), ly = function() {
  function r() {
  }
  return r.prototype.init = function(t) {
    this.parent = t, this._nodes = new yL(this.context), this._source = this._nodes.bufferSource, this.source = t.options.source;
  }, r.prototype.destroy = function() {
    this.parent = null, this._nodes.destroy(), this._nodes = null;
    try {
      this._source.buffer = null;
    } catch {
    }
    this._source = null, this.source = null;
  }, r.prototype.create = function() {
    return new _L(this);
  }, Object.defineProperty(r.prototype, "context", { get: function() {
    return this.parent.context;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "isPlayable", { get: function() {
    return !!this._source && !!this._source.buffer;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "filters", { get: function() {
    return this._nodes.filters;
  }, set: function(t) {
    this._nodes.filters = t;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "duration", { get: function() {
    return this._source.buffer.duration;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "buffer", { get: function() {
    return this._source.buffer;
  }, set: function(t) {
    this._source.buffer = t;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "nodes", { get: function() {
    return this._nodes;
  }, enumerable: !1, configurable: !0 }), r.prototype.load = function(t) {
    this.source ? this._decode(this.source, t) : this.parent.url ? this._loadUrl(t) : t && t(new Error("sound.url or sound.source must be set"));
  }, r.prototype._loadUrl = function(t) {
    var e = this, i = new XMLHttpRequest(), n = this.parent.url;
    i.open("GET", n, !0), i.responseType = "arraybuffer", i.onload = function() {
      e.source = i.response, e._decode(i.response, t);
    }, i.send();
  }, r.prototype._decode = function(t, e) {
    var i = this, n = function(s, a) {
      if (s)
        e && e(s);
      else {
        i.parent.isLoaded = !0, i.buffer = a;
        var o = i.parent.autoPlayStart();
        e && e(null, i.parent, o);
      }
    };
    t instanceof AudioBuffer ? n(null, t) : this.parent.context.decode(t, n);
  }, r;
}(), Ju = function() {
  function r(t, e) {
    this.media = t, this.options = e, this._instances = [], this._sprites = {}, this.media.init(this);
    var i = e.complete;
    this._autoPlayOptions = i ? { complete: i } : null, this.isLoaded = !1, this.isPlaying = !1, this.autoPlay = e.autoPlay, this.singleInstance = e.singleInstance, this.preload = e.preload || this.autoPlay, this.url = e.url, this.speed = e.speed, this.volume = e.volume, this.loop = e.loop, e.sprites && this.addSprites(e.sprites), this.preload && this._preload(e.loaded);
  }
  return r.from = function(t) {
    var e = {};
    return typeof t == "string" ? e.url = t : t instanceof ArrayBuffer || t instanceof AudioBuffer || t instanceof HTMLAudioElement ? e.source = t : e = t, (e = nu({ autoPlay: !1, singleInstance: !1, url: null, source: null, preload: !1, volume: 1, speed: 1, complete: null, loaded: null, loop: !1 }, e)).url && (e.url = Hb(e.url)), Object.freeze(e), new r(Me().useLegacy ? new vL() : new ly(), e);
  }, Object.defineProperty(r.prototype, "context", { get: function() {
    return Me().context;
  }, enumerable: !1, configurable: !0 }), r.prototype.pause = function() {
    return this.isPlaying = !1, this.paused = !0, this;
  }, r.prototype.resume = function() {
    return this.isPlaying = this._instances.length > 0, this.paused = !1, this;
  }, Object.defineProperty(r.prototype, "paused", { get: function() {
    return this._paused;
  }, set: function(t) {
    this._paused = t, this.refreshPaused();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "speed", { get: function() {
    return this._speed;
  }, set: function(t) {
    this._speed = t, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "filters", { get: function() {
    return this.media.filters;
  }, set: function(t) {
    this.media.filters = t;
  }, enumerable: !1, configurable: !0 }), r.prototype.addSprites = function(t, e) {
    if (typeof t == "object") {
      var i = {};
      for (var n in t)
        i[n] = this.addSprites(n, t[n]);
      return i;
    }
    var s = new gL(this, e);
    return this._sprites[t] = s, s;
  }, r.prototype.destroy = function() {
    this._removeInstances(), this.removeSprites(), this.media.destroy(), this.media = null, this._sprites = null, this._instances = null;
  }, r.prototype.removeSprites = function(t) {
    if (t) {
      var e = this._sprites[t];
      e !== void 0 && (e.destroy(), delete this._sprites[t]);
    } else
      for (var i in this._sprites)
        this.removeSprites(i);
    return this;
  }, Object.defineProperty(r.prototype, "isPlayable", { get: function() {
    return this.isLoaded && this.media && this.media.isPlayable;
  }, enumerable: !1, configurable: !0 }), r.prototype.stop = function() {
    if (!this.isPlayable)
      return this.autoPlay = !1, this._autoPlayOptions = null, this;
    this.isPlaying = !1;
    for (var t = this._instances.length - 1; t >= 0; t--)
      this._instances[t].stop();
    return this;
  }, r.prototype.play = function(t, e) {
    var i, n = this;
    if (typeof t == "string" ? i = { sprite: a = t, loop: this.loop, complete: e } : typeof t == "function" ? (i = {}).complete = t : i = t, (i = nu({ complete: null, loaded: null, sprite: null, end: null, start: 0, volume: 1, speed: 1, muted: !1, loop: !1 }, i || {})).sprite) {
      var s = i.sprite, a = this._sprites[s];
      i.start = a.start + (i.start || 0), i.end = a.end, i.speed = a.speed || 1, i.loop = a.loop || i.loop, delete i.sprite;
    }
    if (i.offset && (i.start = i.offset), !this.isLoaded)
      return new Promise(function(u, h) {
        n.autoPlay = !0, n._autoPlayOptions = i, n._preload(function(l, c, d) {
          l ? h(l) : (i.loaded && i.loaded(l, c, d), u(d));
        });
      });
    (this.singleInstance || i.singleInstance) && this._removeInstances();
    var o = this._createInstance();
    return this._instances.push(o), this.isPlaying = !0, o.once("end", function() {
      i.complete && i.complete(n), n._onComplete(o);
    }), o.once("stop", function() {
      n._onComplete(o);
    }), o.play(i), o;
  }, r.prototype.refresh = function() {
    for (var t = this._instances.length, e = 0; e < t; e++)
      this._instances[e].refresh();
  }, r.prototype.refreshPaused = function() {
    for (var t = this._instances.length, e = 0; e < t; e++)
      this._instances[e].refreshPaused();
  }, Object.defineProperty(r.prototype, "volume", { get: function() {
    return this._volume;
  }, set: function(t) {
    this._volume = t, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "muted", { get: function() {
    return this._muted;
  }, set: function(t) {
    this._muted = t, this.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "loop", { get: function() {
    return this._loop;
  }, set: function(t) {
    this._loop = t, this.refresh();
  }, enumerable: !1, configurable: !0 }), r.prototype._preload = function(t) {
    this.media.load(t);
  }, Object.defineProperty(r.prototype, "instances", { get: function() {
    return this._instances;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "sprites", { get: function() {
    return this._sprites;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "duration", { get: function() {
    return this.media.duration;
  }, enumerable: !1, configurable: !0 }), r.prototype.autoPlayStart = function() {
    var t;
    return this.autoPlay && (t = this.play(this._autoPlayOptions)), t;
  }, r.prototype._removeInstances = function() {
    for (var t = this._instances.length - 1; t >= 0; t--)
      this._poolInstance(this._instances[t]);
    this._instances.length = 0;
  }, r.prototype._onComplete = function(t) {
    if (this._instances) {
      var e = this._instances.indexOf(t);
      e > -1 && this._instances.splice(e, 1), this.isPlaying = this._instances.length > 0;
    }
    this._poolInstance(t);
  }, r.prototype._createInstance = function() {
    if (r._pool.length > 0) {
      var t = r._pool.pop();
      return t.init(this.media), t;
    }
    return this.media.create();
  }, r.prototype._poolInstance = function(t) {
    t.destroy(), r._pool.indexOf(t) < 0 && r._pool.push(t);
  }, r._pool = [], r;
}(), bL = function(r) {
  function t() {
    var e = r !== null && r.apply(this, arguments) || this;
    return e.speed = 1, e.muted = !1, e.volume = 1, e.paused = !1, e;
  }
  return ci(t, r), t.prototype.refresh = function() {
    this.emit("refresh");
  }, t.prototype.refreshPaused = function() {
    this.emit("refreshPaused");
  }, Object.defineProperty(t.prototype, "filters", { get: function() {
    return null;
  }, set: function(e) {
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "audioContext", { get: function() {
    return null;
  }, enumerable: !1, configurable: !0 }), t.prototype.toggleMute = function() {
    return this.muted = !this.muted, this.refresh(), this.muted;
  }, t.prototype.togglePause = function() {
    return this.paused = !this.paused, this.refreshPaused(), this.paused;
  }, t.prototype.destroy = function() {
    this.removeAllListeners();
  }, t;
}(Fi), lw = function(r) {
  function t() {
    var e = this, i = window, n = new t.AudioContext(), s = n.createDynamicsCompressor(), a = n.createAnalyser();
    return a.connect(s), s.connect(n.destination), (e = r.call(this, a, s) || this)._ctx = n, e._offlineCtx = new t.OfflineAudioContext(1, 2, i.OfflineAudioContext ? Math.max(8e3, Math.min(96e3, n.sampleRate)) : 44100), e._unlocked = !1, e.compressor = s, e.analyser = a, e.events = new Fi(), e.volume = 1, e.speed = 1, e.muted = !1, e.paused = !1, n.state !== "running" && (e._unlock(), e._unlock = e._unlock.bind(e), document.addEventListener("mousedown", e._unlock, !0), document.addEventListener("touchstart", e._unlock, !0), document.addEventListener("touchend", e._unlock, !0)), e;
  }
  return ci(t, r), t.prototype._unlock = function() {
    this._unlocked || (this.playEmptySound(), this._ctx.state === "running" && (document.removeEventListener("mousedown", this._unlock, !0), document.removeEventListener("touchend", this._unlock, !0), document.removeEventListener("touchstart", this._unlock, !0), this._unlocked = !0));
  }, t.prototype.playEmptySound = function() {
    var e = this._ctx.createBufferSource();
    e.buffer = this._ctx.createBuffer(1, 1, 22050), e.connect(this._ctx.destination), e.start(0, 0, 0), e.context.state === "suspended" && e.context.resume();
  }, Object.defineProperty(t, "AudioContext", { get: function() {
    var e = window;
    return e.AudioContext || e.webkitAudioContext || null;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t, "OfflineAudioContext", { get: function() {
    var e = window;
    return e.OfflineAudioContext || e.webkitOfflineAudioContext || null;
  }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function() {
    r.prototype.destroy.call(this);
    var e = this._ctx;
    e.close !== void 0 && e.close(), this.events.removeAllListeners(), this.analyser.disconnect(), this.compressor.disconnect(), this.analyser = null, this.compressor = null, this.events = null, this._offlineCtx = null, this._ctx = null;
  }, Object.defineProperty(t.prototype, "audioContext", { get: function() {
    return this._ctx;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "offlineContext", { get: function() {
    return this._offlineCtx;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "paused", { get: function() {
    return this._paused;
  }, set: function(e) {
    e && this._ctx.state === "running" ? this._ctx.suspend() : e || this._ctx.state !== "suspended" || this._ctx.resume(), this._paused = e;
  }, enumerable: !1, configurable: !0 }), t.prototype.refresh = function() {
    this.events.emit("refresh");
  }, t.prototype.refreshPaused = function() {
    this.events.emit("refreshPaused");
  }, t.prototype.toggleMute = function() {
    return this.muted = !this.muted, this.refresh(), this.muted;
  }, t.prototype.togglePause = function() {
    return this.paused = !this.paused, this.refreshPaused(), this._paused;
  }, t.prototype.decode = function(e, i) {
    var n = function(a) {
      i(new Error((a == null ? void 0 : a.message) || "Unable to decode file"));
    }, s = this._offlineCtx.decodeAudioData(e, function(a) {
      i(null, a);
    }, n);
    s && s.catch(n);
  }, t;
}(eI), xL = function() {
  function r() {
    this.init();
  }
  return r.prototype.init = function() {
    return this.supported && (this._webAudioContext = new lw()), this._htmlAudioContext = new bL(), this._sounds = {}, this.useLegacy = !this.supported, this;
  }, Object.defineProperty(r.prototype, "context", { get: function() {
    return this._context;
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "filtersAll", { get: function() {
    return this.useLegacy ? [] : this._context.filters;
  }, set: function(t) {
    this.useLegacy || (this._context.filters = t);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "supported", { get: function() {
    return lw.AudioContext !== null;
  }, enumerable: !1, configurable: !0 }), r.prototype.add = function(t, e) {
    if (typeof t == "object") {
      var i = {};
      for (var n in t) {
        var s = this._getOptions(t[n], e);
        i[n] = this.add(n, s);
      }
      return i;
    }
    if (e instanceof Ju)
      return this._sounds[t] = e, e;
    var a = this._getOptions(e), o = Ju.from(a);
    return this._sounds[t] = o, o;
  }, r.prototype._getOptions = function(t, e) {
    var i;
    return i = typeof t == "string" ? { url: t } : t instanceof ArrayBuffer || t instanceof AudioBuffer || t instanceof HTMLAudioElement ? { source: t } : t, i = nu(nu({}, i), e || {});
  }, Object.defineProperty(r.prototype, "useLegacy", { get: function() {
    return this._useLegacy;
  }, set: function(t) {
    tI.setLegacy(t), this._useLegacy = t, this._context = !t && this.supported ? this._webAudioContext : this._htmlAudioContext;
  }, enumerable: !1, configurable: !0 }), r.prototype.remove = function(t) {
    return this.exists(t, !0), this._sounds[t].destroy(), delete this._sounds[t], this;
  }, Object.defineProperty(r.prototype, "volumeAll", { get: function() {
    return this._context.volume;
  }, set: function(t) {
    this._context.volume = t, this._context.refresh();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(r.prototype, "speedAll", { get: function() {
    return this._context.speed;
  }, set: function(t) {
    this._context.speed = t, this._context.refresh();
  }, enumerable: !1, configurable: !0 }), r.prototype.togglePauseAll = function() {
    return this._context.togglePause();
  }, r.prototype.pauseAll = function() {
    return this._context.paused = !0, this._context.refreshPaused(), this;
  }, r.prototype.resumeAll = function() {
    return this._context.paused = !1, this._context.refreshPaused(), this;
  }, r.prototype.toggleMuteAll = function() {
    return this._context.toggleMute();
  }, r.prototype.muteAll = function() {
    return this._context.muted = !0, this._context.refresh(), this;
  }, r.prototype.unmuteAll = function() {
    return this._context.muted = !1, this._context.refresh(), this;
  }, r.prototype.removeAll = function() {
    for (var t in this._sounds)
      this._sounds[t].destroy(), delete this._sounds[t];
    return this;
  }, r.prototype.stopAll = function() {
    for (var t in this._sounds)
      this._sounds[t].stop();
    return this;
  }, r.prototype.exists = function(t, e) {
    return !!this._sounds[t];
  }, r.prototype.find = function(t) {
    return this.exists(t, !0), this._sounds[t];
  }, r.prototype.play = function(t, e) {
    return this.find(t).play(e);
  }, r.prototype.stop = function(t) {
    return this.find(t).stop();
  }, r.prototype.pause = function(t) {
    return this.find(t).pause();
  }, r.prototype.resume = function(t) {
    return this.find(t).resume();
  }, r.prototype.volume = function(t, e) {
    var i = this.find(t);
    return e !== void 0 && (i.volume = e), i.volume;
  }, r.prototype.speed = function(t, e) {
    var i = this.find(t);
    return e !== void 0 && (i.speed = e), i.speed;
  }, r.prototype.duration = function(t) {
    return this.find(t).duration;
  }, r.prototype.close = function() {
    return this.removeAll(), this._sounds = null, this._webAudioContext && (this._webAudioContext.destroy(), this._webAudioContext = null), this._htmlAudioContext && (this._htmlAudioContext.destroy(), this._htmlAudioContext = null), this._context = null, this;
  }, r;
}(), Fs = function() {
  function r(t, e) {
    this.init(t, e);
  }
  return r.prototype.init = function(t, e) {
    this.destination = t, this.source = e || t;
  }, r.prototype.connect = function(t) {
    this.source.connect(t);
  }, r.prototype.disconnect = function() {
    this.source.disconnect();
  }, r.prototype.destroy = function() {
    this.disconnect(), this.destination = null, this.source = null;
  }, r;
}(), km = { __proto__: null, Filter: Fs, EqualizerFilter: function(r) {
  function t(e, i, n, s, a, o, u, h, l, c) {
    e === void 0 && (e = 0), i === void 0 && (i = 0), n === void 0 && (n = 0), s === void 0 && (s = 0), a === void 0 && (a = 0), o === void 0 && (o = 0), u === void 0 && (u = 0), h === void 0 && (h = 0), l === void 0 && (l = 0), c === void 0 && (c = 0);
    var d = this;
    if (!Me().useLegacy) {
      var p = [{ f: t.F32, type: "lowshelf", gain: e }, { f: t.F64, type: "peaking", gain: i }, { f: t.F125, type: "peaking", gain: n }, { f: t.F250, type: "peaking", gain: s }, { f: t.F500, type: "peaking", gain: a }, { f: t.F1K, type: "peaking", gain: o }, { f: t.F2K, type: "peaking", gain: u }, { f: t.F4K, type: "peaking", gain: h }, { f: t.F8K, type: "peaking", gain: l }, { f: t.F16K, type: "highshelf", gain: c }].map(function(m) {
        var _ = Me().context.audioContext.createBiquadFilter();
        return _.type = m.type, mi.setParamValue(_.Q, 1), _.frequency.value = m.f, mi.setParamValue(_.gain, m.gain), _;
      });
      (d = r.call(this, p[0], p[p.length - 1]) || this).bands = p, d.bandsMap = {};
      for (var g = 0; g < d.bands.length; g++) {
        var v = d.bands[g];
        g > 0 && d.bands[g - 1].connect(v), d.bandsMap[v.frequency.value] = v;
      }
      return d;
    }
    d = r.call(this, null) || this;
  }
  return ci(t, r), t.prototype.setGain = function(e, i) {
    if (i === void 0 && (i = 0), !this.bandsMap[e])
      throw new Error("No band found for frequency ".concat(e));
    mi.setParamValue(this.bandsMap[e].gain, i);
  }, t.prototype.getGain = function(e) {
    if (!this.bandsMap[e])
      throw new Error("No band found for frequency ".concat(e));
    return this.bandsMap[e].gain.value;
  }, Object.defineProperty(t.prototype, "f32", { get: function() {
    return this.getGain(t.F32);
  }, set: function(e) {
    this.setGain(t.F32, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f64", { get: function() {
    return this.getGain(t.F64);
  }, set: function(e) {
    this.setGain(t.F64, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f125", { get: function() {
    return this.getGain(t.F125);
  }, set: function(e) {
    this.setGain(t.F125, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f250", { get: function() {
    return this.getGain(t.F250);
  }, set: function(e) {
    this.setGain(t.F250, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f500", { get: function() {
    return this.getGain(t.F500);
  }, set: function(e) {
    this.setGain(t.F500, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f1k", { get: function() {
    return this.getGain(t.F1K);
  }, set: function(e) {
    this.setGain(t.F1K, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f2k", { get: function() {
    return this.getGain(t.F2K);
  }, set: function(e) {
    this.setGain(t.F2K, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f4k", { get: function() {
    return this.getGain(t.F4K);
  }, set: function(e) {
    this.setGain(t.F4K, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f8k", { get: function() {
    return this.getGain(t.F8K);
  }, set: function(e) {
    this.setGain(t.F8K, e);
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "f16k", { get: function() {
    return this.getGain(t.F16K);
  }, set: function(e) {
    this.setGain(t.F16K, e);
  }, enumerable: !1, configurable: !0 }), t.prototype.reset = function() {
    this.bands.forEach(function(e) {
      mi.setParamValue(e.gain, 0);
    });
  }, t.prototype.destroy = function() {
    this.bands.forEach(function(e) {
      e.disconnect();
    }), this.bands = null, this.bandsMap = null;
  }, t.F32 = 32, t.F64 = 64, t.F125 = 125, t.F250 = 250, t.F500 = 500, t.F1K = 1e3, t.F2K = 2e3, t.F4K = 4e3, t.F8K = 8e3, t.F16K = 16e3, t;
}(Fs), DistortionFilter: function(r) {
  function t(e) {
    e === void 0 && (e = 0);
    var i = this;
    if (!Me().useLegacy) {
      var n = Me().context.audioContext.createWaveShaper();
      return (i = r.call(this, n) || this)._distortion = n, i.amount = e, i;
    }
    i = r.call(this, null) || this;
  }
  return ci(t, r), Object.defineProperty(t.prototype, "amount", { get: function() {
    return this._amount;
  }, set: function(e) {
    this._amount = e;
    for (var i, n = 1e3 * e, s = 44100, a = new Float32Array(s), o = Math.PI / 180, u = 0; u < s; ++u)
      i = 2 * u / s - 1, a[u] = (3 + n) * i * 20 * o / (Math.PI + n * Math.abs(i));
    this._distortion.curve = a, this._distortion.oversample = "4x";
  }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function() {
    this._distortion = null, r.prototype.destroy.call(this);
  }, t;
}(Fs), StereoFilter: function(r) {
  function t(e) {
    e === void 0 && (e = 0);
    var i = this;
    if (!Me().useLegacy) {
      var n, s, a, o = Me().context.audioContext;
      return o.createStereoPanner ? a = n = o.createStereoPanner() : ((s = o.createPanner()).panningModel = "equalpower", a = s), (i = r.call(this, a) || this)._stereo = n, i._panner = s, i.pan = e, i;
    }
    i = r.call(this, null) || this;
  }
  return ci(t, r), Object.defineProperty(t.prototype, "pan", { get: function() {
    return this._pan;
  }, set: function(e) {
    this._pan = e, this._stereo ? mi.setParamValue(this._stereo.pan, e) : this._panner.setPosition(e, 0, 1 - Math.abs(e));
  }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function() {
    r.prototype.destroy.call(this), this._stereo = null, this._panner = null;
  }, t;
}(Fs), ReverbFilter: function(r) {
  function t(e, i, n) {
    e === void 0 && (e = 3), i === void 0 && (i = 2), n === void 0 && (n = !1);
    var s = this;
    if (!Me().useLegacy)
      return (s = r.call(this, null) || this)._seconds = s._clamp(e, 1, 50), s._decay = s._clamp(i, 0, 100), s._reverse = n, s._rebuild(), s;
    s = r.call(this, null) || this;
  }
  return ci(t, r), t.prototype._clamp = function(e, i, n) {
    return Math.min(n, Math.max(i, e));
  }, Object.defineProperty(t.prototype, "seconds", { get: function() {
    return this._seconds;
  }, set: function(e) {
    this._seconds = this._clamp(e, 1, 50), this._rebuild();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "decay", { get: function() {
    return this._decay;
  }, set: function(e) {
    this._decay = this._clamp(e, 0, 100), this._rebuild();
  }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "reverse", { get: function() {
    return this._reverse;
  }, set: function(e) {
    this._reverse = e, this._rebuild();
  }, enumerable: !1, configurable: !0 }), t.prototype._rebuild = function() {
    for (var e, i = Me().context.audioContext, n = i.sampleRate, s = n * this._seconds, a = i.createBuffer(2, s, n), o = a.getChannelData(0), u = a.getChannelData(1), h = 0; h < s; h++)
      e = this._reverse ? s - h : h, o[h] = (2 * Math.random() - 1) * Math.pow(1 - e / s, this._decay), u[h] = (2 * Math.random() - 1) * Math.pow(1 - e / s, this._decay);
    var l = Me().context.audioContext.createConvolver();
    l.buffer = a, this.init(l);
  }, t;
}(Fs), MonoFilter: function(r) {
  function t() {
    var e = this;
    if (!Me().useLegacy) {
      var i = Me().context.audioContext, n = i.createChannelSplitter(), s = i.createChannelMerger();
      return s.connect(n), (e = r.call(this, s, n) || this)._merger = s, e;
    }
    e = r.call(this, null) || this;
  }
  return ci(t, r), t.prototype.destroy = function() {
    this._merger.disconnect(), this._merger = null, r.prototype.destroy.call(this);
  }, t;
}(Fs), StreamFilter: function(r) {
  function t() {
    var e = this;
    if (!Me().useLegacy) {
      var i = Me().context.audioContext, n = i.createMediaStreamDestination(), s = i.createMediaStreamSource(n.stream);
      return (e = r.call(this, n, s) || this)._stream = n.stream, e;
    }
    e = r.call(this, null) || this;
  }
  return ci(t, r), Object.defineProperty(t.prototype, "stream", { get: function() {
    return this._stream;
  }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function() {
    this._stream = null, r.prototype.destroy.call(this);
  }, t;
}(Fs), TelephoneFilter: function(r) {
  function t() {
    if (!Me().useLegacy) {
      var e = Me().context.audioContext, i = e.createBiquadFilter(), n = e.createBiquadFilter(), s = e.createBiquadFilter(), a = e.createBiquadFilter();
      return i.type = "lowpass", mi.setParamValue(i.frequency, 2e3), n.type = "lowpass", mi.setParamValue(n.frequency, 2e3), s.type = "highpass", mi.setParamValue(s.frequency, 500), a.type = "highpass", mi.setParamValue(a.frequency, 500), i.connect(n), n.connect(s), s.connect(a), r.call(this, i, a) || this;
    }
    r.call(this, null);
  }
  return ci(t, r), t;
}(Fs) }, cw = 0, EL = { __proto__: null, playOnce: function(r, t) {
  var e = "alias".concat(cw++);
  return Me().add(e, { url: r, preload: !0, autoPlay: !0, loaded: function(i) {
    i && (Me().remove(e), t && t(i));
  }, complete: function() {
    Me().remove(e), t && t(null);
  } }), e;
}, get PLAY_ID() {
  return cw;
}, render: function(r, t) {
  var e = document.createElement("canvas");
  t = nu({ width: 512, height: 128, fill: "black" }, t || {}), e.width = t.width, e.height = t.height;
  var i = Zt.from(e);
  if (!(r.media instanceof ly))
    return i;
  var n = r.media, s = e.getContext("2d");
  s.fillStyle = t.fill;
  for (var a = n.buffer.getChannelData(0), o = Math.ceil(a.length / t.width), u = t.height / 2, h = 0; h < t.width; h++) {
    for (var l = 1, c = -1, d = 0; d < o; d++) {
      var p = a[h * o + d];
      p < l && (l = p), p > c && (c = p);
    }
    s.fillRect(h, (1 + l) * u, 1, Math.max(1, (c - l) * u));
  }
  return i;
}, resolveUrl: Hb, sineTone: function(r, t) {
  r === void 0 && (r = 200), t === void 0 && (t = 1);
  var e = Ju.from({ singleInstance: !0 });
  if (!(e.media instanceof ly))
    return e;
  for (var i = e.media, n = e.context.audioContext.createBuffer(1, 48e3 * t, 48e3), s = n.getChannelData(0), a = 0; a < s.length; a++) {
    var o = r * (a / n.sampleRate) * Math.PI;
    s[a] = 2 * Math.sin(o);
  }
  return i.buffer = n, e.isLoaded = !0, e;
}, validateFormats: QC, supported: Gb, extensions: gv }, Ms = function(r) {
  return JC = r, r;
}(new xL());
fi.registerPlugin(tI);
var Oe, br, qs, Jv, rI, ch, Bp, Kv, iI, Qv, nI, vf, cy, po, Kl, gf, fy, fh, dh, Lp, vo, Ql, mf, ph, Dp, t0, sI, cn, Ls, e0, aI, _f, dy, go, tc, r0, oI, yf, py, i0, uI, n0, hI, vh, Up;
const Fc = class {
  constructor(t, e, i, n, s) {
    I(this, Jv);
    I(this, ch);
    I(this, Kv);
    I(this, Qv);
    I(this, vf);
    I(this, po);
    I(this, gf);
    I(this, dh);
    I(this, vo);
    I(this, ph);
    I(this, t0);
    I(this, cn);
    I(this, e0);
    I(this, _f);
    I(this, go);
    I(this, r0);
    I(this, yf);
    I(this, i0);
    I(this, n0);
    I(this, vh);
    I(this, Oe, {});
    I(this, br, {});
    I(this, qs, void 0);
    I(this, mf, () => {
      Ms.volumeAll = Number(this.val.getVal("sys:sn.sound.global_volume", 1)), T(this, mf, () => {
      });
    });
    this.cfg = t, this.val = i, this.main = n, this.sys = s, e.volume = (a) => S(this, Jv, rI).call(this, a), e.fadebgm = (a) => S(this, vf, cy).call(this, a), e.fadeoutbgm = (a) => S(this, Kv, iI).call(this, a), e.fadeoutse = (a) => S(this, Qv, nI).call(this, a), e.fadese = (a) => S(this, po, Kl).call(this, a), e.playbgm = (a) => S(this, gf, fy).call(this, a), e.playse = (a) => S(this, dh, Lp).call(this, a), e.stop_allse = () => S(this, ph, Dp).call(this), e.stopbgm = (a) => S(this, t0, sI).call(this, a), e.stopse = (a) => S(this, cn, Ls).call(this, a), e.wb = (a) => S(this, e0, aI).call(this, a), e.wf = (a) => S(this, _f, dy).call(this, a), e.stopfadese = (a) => S(this, go, tc).call(this, a), e.wl = (a) => S(this, r0, oI).call(this, a), e.ws = (a) => S(this, yf, py).call(this, a), e.xchgbuf = (a) => S(this, i0, uI).call(this, a), this.val.setVal_Nochk("save", "const.sn.loopPlaying", "{}"), i.setVal_Nochk("tmp", "const.sn.sound.codecs", JSON.stringify(EL.supported));
  }
  setEvtMng(t) {
    T(this, qs, t);
  }
  setNoticeChgVolume(t, e) {
    this.val.defValTrg("sys:sn.sound.global_volume", (i, n) => t(Ms.volumeAll = Number(n))), this.val.defValTrg("sys:sn.sound.movie_volume", (i, n) => e(Number(n))), this.val.setVal_Nochk("sys", "sn.sound.global_volume", this.val.getVal("sys:sn.sound.global_volume", 1)), this.val.setVal_Nochk("sys", "sn.sound.movie_volume", this.val.getVal("sys:sn.sound.movie_volume", 1));
  }
  clearCache() {
    Ms.removeAll();
  }
  loadAheadSnd(t) {
    [t.clickse, t.enterse, t.leavese].forEach((e) => {
      !e || Ms.exists(e) || S(this, vo, Ql).call(this, "", e, { preload: !0, autoPlay: !1 });
    });
  }
  playLoopFromSaveObj() {
    const t = String(this.val.getVal("save:const.sn.loopPlaying", "{}"));
    if (this.val.flush(), t === "{}") {
      S(this, ph, Dp).call(this);
      return;
    }
    const e = [];
    T(this, br, JSON.parse(t));
    for (const i in f(this, br)) {
      const n = "save:const.sn.sound." + i + ".", s = {
        fn: String(this.val.getVal(n + "fn")),
        buf: i,
        join: !1,
        loop: !0,
        volume: Number(this.val.getVal(n + "volume")),
        start_ms: Number(this.val.getVal(n + "start_ms")),
        end_ms: Number(this.val.getVal(n + "end_ms")),
        ret_ms: Number(this.val.getVal(n + "ret_ms"))
      };
      e.push(() => {
        s.buf === "BGM" ? S(this, gf, fy).call(this, s) : S(this, dh, Lp).call(this, s);
      });
    }
    S(this, ph, Dp).call(this), e.forEach((i) => i());
  }
};
let kp = Fc;
Oe = new WeakMap(), br = new WeakMap(), qs = new WeakMap(), Jv = new WeakSet(), rI = function(t) {
  const { buf: e = "SE" } = t, i = "const.sn.sound." + e + ".volume", n = S(this, ch, Bp).call(this, t, 1);
  return Number(this.val.getVal("sys:" + i)) === n ? !1 : (this.val.setVal_Nochk("sys", i, n), this.val.flush(), t.time = 0, t.volume = Number(this.val.getVal("save:" + i)), S(this, po, Kl).call(this, t));
}, ch = new WeakSet(), Bp = function(t, e) {
  const i = tt(t, "volume", e);
  return i < 0 ? 0 : i > 1 ? 1 : i;
}, Kv = new WeakSet(), iI = function(t) {
  return t.volume = 0, S(this, vf, cy).call(this, t);
}, Qv = new WeakSet(), nI = function(t) {
  return t.volume = 0, S(this, po, Kl).call(this, t);
}, vf = new WeakSet(), cy = function(t) {
  return t.buf = "BGM", S(this, po, Kl).call(this, t);
}, po = new WeakSet(), Kl = function(t) {
  S(this, go, tc).call(this, t);
  const { buf: e = "SE" } = t, i = f(this, Oe)[e];
  if (!(i != null && i.playing()) || !i.snd)
    return !1;
  const n = "const.sn.sound." + e + ".volume", s = S(this, ch, Bp).call(this, t, NaN);
  this.val.setVal_Nochk("save", n, s);
  const a = s * Number(this.val.getVal("sys:" + n, 1)), o = pt(t, "stop", s === 0);
  o && (S(this, vh, Up).call(this, e), this.val.setVal_Nochk("save", "const.sn.sound." + e + ".fn", "")), this.val.flush();
  const u = tt(t, "time", NaN), h = tt(t, "delay", 0);
  if (u === 0 && h === 0 || this.val.getVal("tmp:sn.skip.enabled") || f(this, qs).isSkippingByKeyDown())
    return i.snd.volume = a, o && S(this, cn, Ls).call(this, t), !1;
  const l = tt(t, "repeat", 1);
  return i.twFade = new Ta({ v: i.snd.volume }).to({ v: a }, u).delay(h).easing(ws.ease(t.ease)).repeat(l === 0 ? 1 / 0 : l - 1).yoyo(pt(t, "yoyo", !1)).onUpdate((c) => {
    i.playing() && (i.snd.volume = c.v);
  }).onComplete(() => {
    const c = f(this, Oe)[t.buf = i.now_buf];
    !(c != null && c.twFade) || (delete c.twFade, o && S(this, cn, Ls).call(this, t), c.resumeFade && this.main.resume());
  }).start(), !1;
}, gf = new WeakSet(), fy = function(t) {
  return t.buf = "BGM", t.canskip = !1, pt(t, "loop", !0), S(this, dh, Lp).call(this, t);
}, fh = new WeakMap(), dh = new WeakSet(), Lp = function(t) {
  var _;
  const { buf: e = "SE", fn: i } = t;
  if (S(this, cn, Ls).call(this, { buf: e }), !i)
    throw `[playse] fn\u306F\u5FC5\u9808\u3067\u3059 buf:${e}`;
  if (pt(t, "canskip", !0) && f(this, qs).isSkippingByKeyDown())
    return !1;
  const n = pt(t, "loop", !1);
  S(this, n0, hI).call(this, e, n);
  const s = "const.sn.sound." + e + ".";
  this.val.setVal_Nochk("save", s + "fn", i);
  const a = S(this, ch, Bp).call(this, t, 1);
  this.val.setVal_Nochk("save", s + "volume", a);
  const o = a * Number(this.val.getVal("sys:" + s + "volume", 1)), u = tt(t, "start_ms", 0), h = tt(t, "end_ms", f(Fc, fh)), l = tt(t, "ret_ms", 0), c = tt(t, "pan", 0);
  if (u < 0)
    throw `[playse] start_ms:${u} \u304C\u8CA0\u306E\u5024\u3067\u3059`;
  if (l < 0)
    throw `[playse] ret_ms:${l} \u304C\u8CA0\u306E\u5024\u3067\u3059`;
  if (h > 0) {
    if (u >= h)
      throw `[playse] start_ms:${u} >= end_ms:${h} \u306F\u7570\u5E38\u5024\u3067\u3059`;
    if (l >= h)
      throw `[playse] ret_ms:${l} >= end_ms:${h} \u306F\u7570\u5E38\u5024\u3067\u3059`;
  }
  this.val.setVal_Nochk("save", s + "start_ms", u), this.val.setVal_Nochk("save", s + "end_ms", h), this.val.setVal_Nochk("save", s + "ret_ms", l), this.val.flush();
  const d = Ms.find(i), p = f(this, Oe)[e] = {
    now_buf: e,
    snd: d,
    loop: n,
    start_ms: u,
    end_ms: h,
    ret_ms: l,
    resume: !1,
    pan: c,
    playing: () => !0,
    onend: () => {
      const y = f(this, Oe)[t.buf = p.now_buf];
      !y || (delete f(this, Oe)[t.buf], y.playing = () => !1, S(this, go, tc).call(this, t), y.resume && this.main.resume());
    }
  }, g = {
    loop: n,
    volume: o,
    loaded: (y, b) => {
      if (y) {
        this.main.errScript(`Sound \u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059a fn:${i} ${y}`, !1);
        return;
      }
      if (!b)
        return;
      const x = f(this, Oe)[p.now_buf];
      x && (x.snd = b);
    }
  };
  "speed" in t && (g.speed = tt(t, "speed", 1));
  let v = "";
  if (u > 0 || h < f(Fc, fh)) {
    v = `${i};${u};${h};${l}`;
    const y = ((_ = g.sprites) != null ? _ : g.sprites = {})[v] = {
      start: u / 1e3,
      end: h / 1e3
    };
    g.preload = !0;
    const b = g.loaded;
    g.loaded = (x, w) => {
      if (x) {
        this.main.errScript(`Sound \u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059b fn:${i} ${x}`, !1);
        return;
      }
      if (!w)
        return;
      const E = w.duration;
      if (b == null || b(x, w), y.end < 0) {
        if (y.end += E, w.removeSprites(v), w.addSprites(v, y), y.start >= y.end)
          throw `[playse] start_ms:${u} >= end_ms:${h}(${y.end * 1e3}) \u306F\u7570\u5E38\u5024\u3067\u3059`;
        if (l >= y.end * 1e3)
          throw `[playse] ret_ms:${l} >= end_ms:${h}(${y.end * 1e3}) \u306F\u7570\u5E38\u5024\u3067\u3059`;
      }
      if (y.start >= E)
        throw `[playse] start_ms:${u} >= \u97F3\u58F0\u30D5\u30A1\u30A4\u30EB\u518D\u751F\u6642\u9593:${E} \u306F\u7570\u5E38\u5024\u3067\u3059`;
      if (h !== f(Fc, fh) && y.end >= E)
        throw `[playse] end_ms:${h} >= \u97F3\u58F0\u30D5\u30A1\u30A4\u30EB\u518D\u751F\u6642\u9593:${E} \u306F\u7570\u5E38\u5024\u3067\u3059`;
      w.play(v, g.complete);
    };
  } else
    g.autoPlay = !0;
  if (n ? l !== 0 && (g.loop = !1, g.complete = (y) => {
    const b = y.duration, x = `${i};loop2;${h};${l}`, w = {
      preload: !0,
      loop: !0,
      volume: o,
      speed: g.speed,
      sprites: {},
      loaded: (R, C) => {
        if (!C)
          return;
        const P = f(this, Oe)[p.now_buf];
        P && (P.snd = C), C.play(x);
      }
    }, E = w.sprites[x] = {
      start: l / 1e3,
      end: h / 1e3
    };
    if (E.end < 0 && (E.end += b, y.removeSprites(x), y.addSprites(x, E)), E.start >= b)
      throw `[playse] ret_ms:${l} >= \u97F3\u58F0\u30D5\u30A1\u30A4\u30EB\u518D\u751F\u6642\u9593:${b} \u306F\u7570\u5E38\u5024\u3067\u3059`;
    S(this, vo, Ql).call(this, e, i, w);
  }) : g.complete = () => {
    var y;
    return (y = f(this, Oe)[p.now_buf]) == null ? void 0 : y.onend();
  }, f(this, mf).call(this), d) {
    if (d.volume = o, v)
      S(this, vo, Ql).call(this, e, i, g);
    else if (d.isPlayable) {
      const y = d.options.source;
      !(y instanceof ArrayBuffer) || y.byteLength === 0 ? d.play(g) : p.snd = Ju.from({
        ...g,
        url: d.options.url,
        source: y
      }), d.filters = [new km.StereoFilter(c)];
    }
    return !1;
  }
  const m = pt(t, "join", !0);
  if (m) {
    const y = g.loaded;
    g.loaded = (b, x) => {
      y == null || y(b, x), this.main.resume();
    };
  }
  return S(this, vo, Ql).call(this, e, i, g), m;
}, vo = new WeakSet(), Ql = function(t, e, i) {
  const n = this.cfg.searchPath(e, hr.EXT_SOUND);
  if (n.slice(-4) !== ".bin") {
    i.url = n;
    const s = Ju.from(i);
    if (t) {
      const a = f(this, Oe)[t];
      a.snd = s, a.pan !== 0 && (s.filters = [new km.StereoFilter(a.pan)]);
    }
    i.loop || Ms.add(e, s);
    return;
  }
  new fi().add({ name: e, url: n, xhrType: Lt.XHR_RESPONSE_TYPE.BUFFER }).use((s, a) => {
    this.sys.dec(s.extension, s.data).then((o) => {
      s.data = o, a == null || a();
    }).catch((o) => this.main.errScript(`Sound \u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059 fn:${s.name} ${o}`, !1));
  }).load((s, a) => {
    var u;
    i.source = (u = a[e]) == null ? void 0 : u.data;
    const o = Ju.from(i);
    if (t) {
      const h = f(this, Oe)[t];
      h.snd = o, h.pan !== 0 && (o.filters = [new km.StereoFilter(h.pan)]);
    }
    i.loop || Ms.add(e, o);
  });
}, mf = new WeakMap(), ph = new WeakSet(), Dp = function() {
  for (const t in f(this, Oe))
    S(this, cn, Ls).call(this, { buf: t });
  return T(this, Oe, {}), Ms.stopAll(), !1;
}, t0 = new WeakSet(), sI = function(t) {
  return t.buf = "BGM", S(this, cn, Ls).call(this, t);
}, cn = new WeakSet(), Ls = function(t) {
  var n;
  const { buf: e = "SE" } = t;
  S(this, vh, Up).call(this, e);
  const i = f(this, Oe)[e];
  return i && ((n = i.snd) == null || n.stop(), i.onend()), !1;
}, e0 = new WeakSet(), aI = function(t) {
  return t.buf = "BGM", S(this, _f, dy).call(this, t);
}, _f = new WeakSet(), dy = function(t) {
  const { buf: e = "SE" } = t, i = f(this, Oe)[e];
  return !(i != null && i.twFade) || !i.playing() ? !1 : i.resumeFade = f(this, qs).waitEvent(
    () => S(this, go, tc).call(this, t),
    pt(t, "canskip", !0),
    pt(t, "global", !1)
  );
}, go = new WeakSet(), tc = function(t) {
  var i, n;
  const { buf: e = "SE" } = t;
  return (n = (i = f(this, Oe)[e]) == null ? void 0 : i.twFade) == null || n.stop().end(), !1;
}, r0 = new WeakSet(), oI = function(t) {
  return t.buf = "BGM", S(this, yf, py).call(this, t);
}, yf = new WeakSet(), py = function(t) {
  const { buf: e = "SE" } = t, i = f(this, Oe)[e];
  return !(i != null && i.playing()) || i.loop ? !1 : i.resume = f(this, qs).waitEvent(
    () => {
      t.buf = i.now_buf, S(this, cn, Ls).call(this, t);
      const n = f(this, Oe)[t.buf];
      !(n != null && n.playing()) || n.loop || n.onend();
    },
    pt(t, "canskip", !1),
    pt(t, "global", !1)
  );
}, i0 = new WeakSet(), uI = function(t) {
  const { buf: e = "SE", buf2: i = "SE" } = t;
  if (e === i)
    return !1;
  const n = f(this, Oe)[e];
  n && (n.now_buf = i);
  const s = f(this, Oe)[i];
  s && (s.now_buf = e), [f(this, Oe)[e], f(this, Oe)[i]] = [s, n];
  const a = "const.sn.sound." + e + ".", o = Number(this.val.getVal("save:" + a + "volume")), u = Number(this.val.getVal("save:" + a + "fn")), h = "const.sn.sound." + i + ".", l = Number(this.val.getVal("save:" + h + "volume")), c = Number(this.val.getVal("save:" + h + "fn"));
  return this.val.setVal_Nochk("save", a + "volume", l), this.val.setVal_Nochk("save", h + "volume", o), this.val.setVal_Nochk("save", a + "fn", c), this.val.setVal_Nochk("save", h + "fn", u), e in f(this, br) == i in f(this, br) && (e in f(this, br) ? (delete f(this, br)[e], f(this, br)[i] = 0) : (delete f(this, br)[i], f(this, br)[e] = 0), this.val.setVal_Nochk("save", "const.sn.loopPlaying", JSON.stringify(f(this, br)))), this.val.flush(), !1;
}, n0 = new WeakSet(), hI = function(t, e) {
  if (!e) {
    S(this, vh, Up).call(this, t);
    return;
  }
  f(this, br)[t] = 0, this.val.setVal_Nochk("save", "const.sn.loopPlaying", JSON.stringify(f(this, br))), this.val.flush();
}, vh = new WeakSet(), Up = function(t) {
  delete f(this, br)[t], this.val.setVal_Nochk("save", "const.sn.loopPlaying", JSON.stringify(f(this, br))), this.val.flush();
}, I(kp, fh, 999e3);
var se;
const U1 = class {
  constructor(t, e, i, n, s, a, o, u) {
    I(this, se, void 0);
    this.cls = e, this.hArg = s, this.sys = a, this.val = o, this.ret = u, this.lay = (d) => this.getPage(d).lay(d), this.getPage = (d) => U1.argChk_page(d, "fore") !== "back" ? f(this, se).fore : f(this, se).back;
    const h = a.hFactoryCls[e];
    if (!h)
      throw `\u5C5E\u6027 class\u3010${e}\u3011\u304C\u4E0D\u6B63\u3067\u3059`;
    T(this, se, { fore: h(), back: h() }), f(this, se).fore.layname = f(this, se).back.layname = t;
    const l = s[":id_tag"] = `layer:${t} cls:${e}`;
    f(this, se).fore.name = `${l} page:A`, f(this, se).back.name = `${l} page:B`, i.addChild(this.fore.spLay), n.addChild(this.back.spLay), pt(s, "visible", !0), pt(s, "visible", !0), u.isWait = this.fore.lay(s) || this.back.lay(s);
    const c = `const.sn.lay.${t}`;
    o.setVal_Nochk("tmp", c, !0), o.defTmp(c + ".fore.alpha", () => f(this, se).fore.alpha), o.defTmp(c + ".back.alpha", () => f(this, se).back.alpha), o.defTmp(c + ".fore.height", () => f(this, se).fore.height), o.defTmp(c + ".back.height", () => f(this, se).back.height), o.defTmp(c + ".fore.visible", () => f(this, se).fore.spLay.visible), o.defTmp(c + ".back.visible", () => f(this, se).back.spLay.visible), o.defTmp(c + ".fore.width", () => f(this, se).fore.width), o.defTmp(c + ".back.width", () => f(this, se).back.width), o.defTmp(c + ".fore.x", () => f(this, se).fore.x), o.defTmp(c + ".back.x", () => f(this, se).back.x), o.defTmp(c + ".fore.y", () => f(this, se).fore.y), o.defTmp(c + ".back.y", () => f(this, se).back.y);
  }
  destroy() {
    f(this, se).fore.destroy(), f(this, se).back.destroy();
  }
  static argChk_page(t, e) {
    var n;
    const i = (n = t.page) != null ? n : e;
    if (i === "fore" || i === "back")
      return t.page = i;
    throw Error("\u5C5E\u6027 page\u3010" + i + "\u3011\u304C\u4E0D\u6B63\u3067\u3059");
  }
  get fore() {
    return f(this, se).fore;
  }
  get back() {
    return f(this, se).back;
  }
  transPage(t) {
    [f(this, se).back, f(this, se).fore] = [f(this, se).fore, f(this, se).back], f(this, se).back.copy(f(this, se).fore, t);
  }
};
let yc = U1;
se = new WeakMap();
var s0, a0;
const js = class {
  constructor() {
    this.layname = "", this.name_ = "", this.spLay = new qe(It.EMPTY);
  }
  set name(t) {
    this.name_ = t;
  }
  get name() {
    return this.name_;
  }
  get alpha() {
    return this.spLay.alpha;
  }
  set alpha(t) {
    this.spLay.alpha = t;
  }
  get height() {
    return this.spLay.height;
  }
  get rotation() {
    return this.spLay.angle;
  }
  set rotation(t) {
    this.spLay.angle = t;
  }
  get scale_x() {
    return this.spLay.scale.x;
  }
  set scale_x(t) {
    this.spLay.scale.x = t;
  }
  get scale_y() {
    return this.spLay.scale.y;
  }
  set scale_y(t) {
    this.spLay.scale.y = t;
  }
  get width() {
    return this.spLay.width;
  }
  get x() {
    return this.spLay.x;
  }
  set x(t) {
    this.spLay.x = t;
  }
  get y() {
    return this.spLay.y;
  }
  set y(t) {
    this.spLay.y = t;
  }
  destroy() {
  }
  lay(t) {
    return "alpha" in t && (this.spLay.alpha = tt(t, "alpha", 1)), js.setBlendmode(this.spLay, t), ("pivot_x" in t || "pivot_y" in t) && this.spLay.pivot.set(
      tt(t, "pivot_x", this.spLay.pivot.x),
      tt(t, "pivot_y", this.spLay.pivot.y)
    ), "rotation" in t && (this.spLay.angle = tt(t, "rotation", 0)), ("scale_x" in t || "scale_y" in t) && this.spLay.scale.set(
      tt(t, "scale_x", this.spLay.scale.x),
      tt(t, "scale_y", this.spLay.scale.y)
    ), "visible" in t && (this.spLay.visible = pt(t, "visible", !0)), !1;
  }
  static setBlendmode(t, e) {
    const { blendmode: i } = e;
    if (!i)
      return;
    const n = js.getBlendmodeNum(i);
    t instanceof qe && (t.blendMode = n), t.children.forEach((s) => {
      s instanceof qe && (s.blendMode = n);
    });
  }
  static getBlendmodeNum(t) {
    if (!t)
      return bt.NORMAL;
    const e = f(js, s0)[t];
    if (e !== void 0)
      return e;
    throw `${t} \u306F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u306A\u3044 blendmode \u3067\u3059`;
  }
  static getNum2Blendmode(t) {
    var e;
    return (e = f(js, a0)[t]) != null ? e : "normal";
  }
  get containMovement() {
    return !1;
  }
  renderStart() {
  }
  renderEnd() {
  }
  clearLay(t) {
    this.spLay.alpha = 1, this.spLay.blendMode = bt.NORMAL, this.spLay.pivot.set(0, 0), this.spLay.angle = 0, this.spLay.scale.set(1, 1), pt(t, "filter", !1) && (this.spLay.filters = []);
  }
  copy(t, e) {
    const i = this.name_;
    this.playback(t.record(), e), this.name = i;
  }
  record() {
    return {
      name: this.name_,
      idx: this.spLay.parent.getChildIndex(this.spLay),
      alpha: this.spLay.alpha,
      blendMode: this.spLay.blendMode,
      rotation: this.spLay.angle,
      scale_x: this.spLay.scale.x,
      scale_y: this.spLay.scale.y,
      pivot_x: this.spLay.pivot.x,
      pivot_y: this.spLay.pivot.y,
      x: this.spLay.x,
      y: this.spLay.y,
      visible: this.spLay.visible
    };
  }
  playback(t, e) {
    this.name = t.name, this.clearLay({ filter: "true" }), this.spLay.alpha = t.alpha, this.spLay.blendMode = t.blendMode, this.spLay.angle = t.rotation, this.spLay.scale.set(t.scale_x, t.scale_y), this.spLay.pivot.set(t.pivot_x, t.pivot_y), this.spLay.position.set(t.x, t.y), this.spLay.visible = t.visible;
  }
  snapshot(t, e) {
    t.render(this.spLay, { clear: !1 }), e();
  }
  snapshot_end() {
  }
  makeDesignCast(t) {
  }
  makeDesignCastChildren(t) {
  }
  showDesignCast() {
  }
  showDesignCastChildren() {
  }
  cvsResize() {
  }
  cvsResizeChildren() {
  }
  dump() {
    return ` "idx":${this.spLay.parent.getChildIndex(this.spLay)}, "visible":"${this.spLay.visible}", "left":${this.spLay.x}, "top":${this.spLay.y}, "alpha":${this.spLay.alpha}, "rotation":${this.spLay.angle}, "name":"${this.name_}", "scale_x":${this.spLay.scale.x}, "scale_y":${this.spLay.scale.y}`;
  }
  static setXY(t, e, i, n = !1, s = !1) {
    if (e.pos) {
      js.setXYByPos(t, e.pos, i);
      return;
    }
    const a = t.getBounds(), o = i.scale.x < 0 ? -i.scale.x : i.scale.x, u = o === 1 ? a.width : a.width * o, h = i.scale.y < 0 ? -i.scale.y : i.scale.y, l = h === 1 ? a.height : a.height * h;
    let c = i.x;
    "left" in e ? (c = tt(e, "left", 0), c > -1 && c < 1 && (c *= Y.stageW)) : "center" in e ? (c = tt(e, "center", 0), c > -1 && c < 1 && (c *= Y.stageW), c = c - (s ? u / 3 : u) / 2) : "right" in e ? (c = tt(e, "right", 0), c > -1 && c < 1 && (c *= Y.stageW), c = c - (s ? u / 3 : u)) : "s_right" in e && (c = tt(e, "s_right", 0), c > -1 && c < 1 && (c *= Y.stageW), c = Y.stageW - c - (s ? u / 3 : u)), i.x = jt(i.scale.x < 0 ? c + (s ? u / 3 : u) : c);
    let d = i.y;
    "top" in e ? (d = tt(e, "top", 0), d > -1 && d < 1 && (d *= Y.stageH)) : "middle" in e ? (d = tt(e, "middle", 0), d > -1 && d < 1 && (d *= Y.stageH), d = d - l / 2) : "bottom" in e ? (d = tt(e, "bottom", 0), d > -1 && d < 1 && (d *= Y.stageH), d = d - l) : "s_bottom" in e && (d = tt(e, "s_bottom", 0), d > -1 && d < 1 && (d *= Y.stageH), d = Y.stageH - d - l), i.y = jt(i.scale.y < 0 ? d + l : d), n && !("left" in e) && !("center" in e) && !("right" in e) && !("s_right" in e) && !("top" in e) && !("middle" in e) && !("bottom" in e) && !("s_bottom" in e) && js.setXYByPos(t, "c", i);
  }
  static setXYByPos(t, e, i) {
    if (e === "stay")
      return;
    if (t === void 0)
      throw "setXYByPos base === undefined";
    if (i === void 0)
      throw "setXYByPos result === undefined";
    const n = t.getBounds(), s = i.scale.x < 0 ? -i.scale.x : i.scale.x, a = s === 1 ? n.width : n.width * s, o = i.scale.y < 0 ? -i.scale.y : i.scale.y, u = o === 1 ? n.height : n.height * o;
    let h = 0;
    !e || e === "c" ? h = Y.stageW * 0.5 : e === "r" ? h = Y.stageW - a * 0.5 : e === "l" ? h = a * 0.5 : h = jt(e), i.x = jt(h - a * 0.5), i.y = Y.stageH - u, i.scale.x < 0 && (i.x += a), i.scale.y < 0 && (i.y += u);
  }
  static setXYCenter(t) {
    const e = t.getBounds();
    t.x = (Y.stageW - e.width) * 0.5, t.y = (Y.stageH - e.height) * 0.5;
  }
};
let Rr = js;
s0 = new WeakMap(), a0 = new WeakMap(), I(Rr, s0, {
  normal: bt.NORMAL,
  add: bt.ADD,
  multiply: bt.MULTIPLY,
  screen: bt.SCREEN
}), I(Rr, a0, {
  0: "normal",
  1: "add",
  2: "multiply",
  3: "screen"
});
function wL(r) {
  for (var t = [], e = 1; e < arguments.length; e++)
    t[e - 1] = arguments[e];
  return t.map(function(i) {
    return i.split(" ").map(function(n) {
      return n ? "" + r + n : "";
    }).join(" ");
  }).join(" ");
}
function TL(r, t) {
  return t.replace(/([^}{]*){/gm, function(e, i) {
    return i.replace(/\.([^{,\s\d.]+)/g, "." + r + "$1") + "{";
  });
}
function Pn(r, t) {
  return function(e) {
    e && (r[t] = e);
  };
}
function lI(r, t, e) {
  return function(i) {
    i && (r[t][e] = i);
  };
}
function fw(r, t) {
  return function(e) {
    var i = e.prototype;
    r.forEach(function(n) {
      t(i, n);
    });
  };
}
function CL(r, t) {
  return t === void 0 && (t = {}), function(e, i) {
    r.forEach(function(n) {
      var s = t[n] || n;
      s in e || (e[s] = function() {
        for (var a, o = [], u = 0; u < arguments.length; u++)
          o[u] = arguments[u];
        var h = (a = this[i])[n].apply(a, o);
        return h === this[i] ? this : h;
      });
    });
  };
}
var IL = /* @__PURE__ */ function() {
  function r() {
    this.keys = [], this.values = [];
  }
  var t = r.prototype;
  return t.get = function(e) {
    return this.values[this.keys.indexOf(e)];
  }, t.set = function(e, i) {
    var n = this.keys, s = this.values, a = n.indexOf(e), o = a === -1 ? n.length : a;
    n[o] = e, s[o] = i;
  }, r;
}(), RL = /* @__PURE__ */ function() {
  function r() {
    this.object = {};
  }
  var t = r.prototype;
  return t.get = function(e) {
    return this.object[e];
  }, t.set = function(e, i) {
    this.object[e] = i;
  }, r;
}(), SL = typeof Map == "function", PL = /* @__PURE__ */ function() {
  function r() {
  }
  var t = r.prototype;
  return t.connect = function(e, i) {
    this.prev = e, this.next = i, e && (e.next = this), i && (i.prev = this);
  }, t.disconnect = function() {
    var e = this.prev, i = this.next;
    e && (e.next = i), i && (i.prev = e);
  }, t.getIndex = function() {
    for (var e = this, i = -1; e; )
      e = e.prev, ++i;
    return i;
  }, r;
}();
function NL(r, t) {
  var e = [], i = [];
  return r.forEach(function(n) {
    var s = n[0], a = n[1], o = new PL();
    e[s] = o, i[a] = o;
  }), e.forEach(function(n, s) {
    n.connect(e[s - 1]);
  }), r.filter(function(n, s) {
    return !t[s];
  }).map(function(n, s) {
    var a = n[0], o = n[1];
    if (a === o)
      return [0, 0];
    var u = e[a], h = i[o - 1], l = u.getIndex();
    u.disconnect(), h ? u.connect(h, h.next) : u.connect(void 0, e[0]);
    var c = u.getIndex();
    return [l, c];
  });
}
var OL = /* @__PURE__ */ function() {
  function r(e, i, n, s, a, o, u, h) {
    this.prevList = e, this.list = i, this.added = n, this.removed = s, this.changed = a, this.maintained = o, this.changedBeforeAdded = u, this.fixed = h;
  }
  var t = r.prototype;
  return Object.defineProperty(t, "ordered", {
    get: function() {
      return this.cacheOrdered || this.caculateOrdered(), this.cacheOrdered;
    },
    enumerable: !0,
    configurable: !0
  }), Object.defineProperty(t, "pureChanged", {
    get: function() {
      return this.cachePureChanged || this.caculateOrdered(), this.cachePureChanged;
    },
    enumerable: !0,
    configurable: !0
  }), t.caculateOrdered = function() {
    var e = NL(this.changedBeforeAdded, this.fixed), i = this.changed, n = [];
    this.cacheOrdered = e.filter(function(s, a) {
      var o = s[0], u = s[1], h = i[a], l = h[0], c = h[1];
      if (o !== u)
        return n.push([l, c]), !0;
    }), this.cachePureChanged = n;
  }, r;
}();
function Mg(r, t, e) {
  var i = SL ? Map : e ? RL : IL, n = e || function(y) {
    return y;
  }, s = [], a = [], o = [], u = r.map(n), h = t.map(n), l = new i(), c = new i(), d = [], p = [], g = {}, v = [], m = 0, _ = 0;
  return u.forEach(function(y, b) {
    l.set(y, b);
  }), h.forEach(function(y, b) {
    c.set(y, b);
  }), u.forEach(function(y, b) {
    var x = c.get(y);
    typeof x > "u" ? (++_, a.push(b)) : g[x] = _;
  }), h.forEach(function(y, b) {
    var x = l.get(y);
    typeof x > "u" ? (s.push(b), ++m) : (o.push([x, b]), _ = g[b] || 0, d.push([x - _, b - m]), p.push(b === x), x !== b && v.push([x, b]));
  }), a.reverse(), new OL(r, t, s, a, v, o, d, p);
}
var AL = /* @__PURE__ */ function() {
  function r(e, i) {
    e === void 0 && (e = []), this.findKeyCallback = i, this.list = [].slice.call(e);
  }
  var t = r.prototype;
  return t.update = function(e) {
    var i = [].slice.call(e), n = Mg(this.list, i, this.findKeyCallback);
    return this.list = i, n;
  }, r;
}(), FL = "function", ML = "object", kL = "string", BL = "number", cI = "undefined", fI = typeof window !== cI, LL = [{
  open: "(",
  close: ")"
}, {
  open: '"',
  close: '"'
}, {
  open: "'",
  close: "'"
}, {
  open: '\\"',
  close: '\\"'
}, {
  open: "\\'",
  close: "\\'"
}], er = 1e-7, np = {
  cm: function(r) {
    return r * 96 / 2.54;
  },
  mm: function(r) {
    return r * 96 / 254;
  },
  in: function(r) {
    return r * 96;
  },
  pt: function(r) {
    return r * 96 / 72;
  },
  pc: function(r) {
    return r * 96 / 6;
  },
  "%": function(r, t) {
    return r * t / 100;
  },
  vw: function(r, t) {
    return t === void 0 && (t = window.innerWidth), r / 100 * t;
  },
  vh: function(r, t) {
    return t === void 0 && (t = window.innerHeight), r / 100 * t;
  },
  vmax: function(r, t) {
    return t === void 0 && (t = Math.max(window.innerWidth, window.innerHeight)), r / 100 * t;
  },
  vmin: function(r, t) {
    return t === void 0 && (t = Math.min(window.innerWidth, window.innerHeight)), r / 100 * t;
  }
};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function DL() {
  for (var r = 0, t = 0, e = arguments.length; t < e; t++)
    r += arguments[t].length;
  for (var i = Array(r), n = 0, t = 0; t < e; t++)
    for (var s = arguments[t], a = 0, o = s.length; a < o; a++, n++)
      i[n] = s[a];
  return i;
}
function qa(r, t, e, i) {
  return (r * i + t * e) / (e + i);
}
function kg(r) {
  return typeof r === cI;
}
function en(r) {
  return r && typeof r === ML;
}
function wr(r) {
  return Array.isArray(r);
}
function Ni(r) {
  return typeof r === kL;
}
function vy(r) {
  return typeof r === BL;
}
function dI(r) {
  return typeof r === FL;
}
function UL(r, t) {
  var e = r === "" || r == " ", i = t === "" || t == " ";
  return i && e || r === t;
}
function pI(r, t, e, i, n) {
  var s = zb(r, t, e);
  return s ? e : GL(r, t, e + 1, i, n);
}
function zb(r, t, e) {
  if (!r.ignore)
    return null;
  var i = t.slice(Math.max(e - 3, 0), e + 3).join("");
  return new RegExp(r.ignore).exec(i);
}
function GL(r, t, e, i, n) {
  for (var s = function(h) {
    var l = t[h].trim();
    if (l === r.close && !zb(r, t, h))
      return {
        value: h
      };
    var c = h, d = Na(n, function(p) {
      var g = p.open;
      return g === l;
    });
    if (d && (c = pI(d, t, h, i, n)), c === -1)
      return a = h, "break";
    h = c, a = h;
  }, a, o = e; o < i; ++o) {
    var u = s(o);
    if (o = a, typeof u == "object")
      return u.value;
    if (u === "break")
      break;
  }
  return -1;
}
function jb(r, t) {
  var e = Ni(t) ? {
    separator: t
  } : t, i = e.separator, n = i === void 0 ? "," : i, s = e.isSeparateFirst, a = e.isSeparateOnlyOpenClose, o = e.isSeparateOpenClose, u = o === void 0 ? a : o, h = e.openCloseCharacters, l = h === void 0 ? LL : h, c = l.map(function(R) {
    var C = R.open, P = R.close;
    return C === P ? C : C + "|" + P;
  }).join("|"), d = "(\\s*" + n + "\\s*|" + c + "|\\s+)", p = new RegExp(d, "g"), g = r.split(p).filter(Boolean), v = g.length, m = [], _ = [];
  function y() {
    return _.length ? (m.push(_.join("")), _ = [], !0) : !1;
  }
  for (var b = function(R) {
    var C = g[R].trim(), P = R, N = Na(l, function(k) {
      var H = k.open;
      return H === C;
    }), M = Na(l, function(k) {
      var H = k.close;
      return H === C;
    });
    if (N) {
      if (P = pI(N, g, R, v, l), P !== -1 && u)
        return y() && s || (m.push(g.slice(R, P + 1).join("")), R = P, s) ? (x = R, "break") : (x = R, "continue");
    } else if (M && !zb(M, g, R)) {
      var A = DL(l);
      return A.splice(l.indexOf(M), 1), {
        value: jb(r, {
          separator: n,
          isSeparateFirst: s,
          isSeparateOnlyOpenClose: a,
          isSeparateOpenClose: u,
          openCloseCharacters: A
        })
      };
    } else if (UL(C, n) && !a)
      return y(), s ? (x = R, "break") : (x = R, "continue");
    P === -1 && (P = v - 1), _.push(g.slice(R, P + 1).join("")), R = P, x = R;
  }, x, w = 0; w < v; ++w) {
    var E = b(w);
    if (w = x, typeof E == "object")
      return E.value;
    if (E === "break")
      break;
  }
  return _.length && m.push(_.join("")), m;
}
function Pa(r) {
  return jb(r, "");
}
function oo(r) {
  return jb(r, ",");
}
function vI(r) {
  var t = /([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(r);
  return !t || t.length < 4 ? {} : {
    prefix: t[1],
    value: t[2],
    suffix: t[3]
  };
}
function md(r) {
  var t = /^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(r);
  if (!t)
    return {
      prefix: "",
      unit: "",
      value: NaN
    };
  var e = t[1], i = t[2], n = t[3];
  return {
    prefix: e,
    unit: n,
    value: parseFloat(i)
  };
}
function HL(r) {
  return r.replace(/[\s-_]([a-z])/g, function(t, e) {
    return e.toUpperCase();
  });
}
function Bm(r, t) {
  return t === void 0 && (t = "-"), r.replace(/([a-z])([A-Z])/g, function(e, i, n) {
    return "" + i + t + n.toLowerCase();
  });
}
function mv() {
  return Date.now ? Date.now() : new Date().getTime();
}
function Ps(r, t, e) {
  e === void 0 && (e = -1);
  for (var i = r.length, n = 0; n < i; ++n)
    if (t(r[n], n, r))
      return n;
  return e;
}
function Na(r, t, e) {
  var i = Ps(r, t);
  return i > -1 ? r[i] : e;
}
var gI = /* @__PURE__ */ function() {
  var r = mv(), t = fI && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);
  return t ? t.bind(window) : function(e) {
    var i = mv(), n = window.setTimeout(function() {
      e(i - r);
    }, 1e3 / 60);
    return n;
  };
}(), zL = /* @__PURE__ */ function() {
  var r = fI && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);
  return r ? r.bind(window) : function(t) {
    clearTimeout(t);
  };
}();
function Pl(r) {
  return Object.keys(r);
}
function Le(r, t) {
  var e = md(r), i = e.value, n = e.unit;
  if (en(t)) {
    var s = t[n];
    if (s) {
      if (dI(s))
        return s(i);
      if (np[n])
        return np[n](i, s);
    }
  } else if (n === "%")
    return i * t / 100;
  return np[n] ? np[n](i) : i;
}
function gy(r, t, e) {
  return Math.max(t, Math.min(r, e));
}
function dw(r, t, e, i) {
  return i === void 0 && (i = r[0] / r[1]), [[Yt(t[0], er), Yt(t[0] / i, er)], [Yt(t[1] * i, er), Yt(t[1], er)]].filter(function(n) {
    return n.every(function(s, a) {
      var o = t[a], u = Yt(o, er);
      return e ? s <= o || s <= u : s >= o || s >= u;
    });
  })[0] || r;
}
function jL(r, t, e, i) {
  if (!i)
    return r.map(function(p, g) {
      return gy(p, t[g], e[g]);
    });
  var n = r[0], s = r[1], a = i === !0 ? n / s : i, o = dw(r, t, !1, a), u = o[0], h = o[1], l = dw(r, e, !0, a), c = l[0], d = l[1];
  return n < u || s < h ? (n = u, s = h) : (n > c || s > d) && (n = c, s = d), [n, s];
}
function $L(r) {
  for (var t = r.length, e = 0, i = t - 1; i >= 0; --i)
    e += r[i];
  return e;
}
function my(r) {
  for (var t = r.length, e = 0, i = t - 1; i >= 0; --i)
    e += r[i];
  return t ? e / t : 0;
}
function $e(r, t) {
  var e = t[0] - r[0], i = t[1] - r[1], n = Math.atan2(i, e);
  return n >= 0 ? n : n + Math.PI * 2;
}
function VL(r) {
  return [0, 1].map(function(t) {
    return my(r.map(function(e) {
      return e[t];
    }));
  });
}
function _y(r) {
  var t = VL(r), e = $e(t, r[0]), i = $e(t, r[1]);
  return e < i && i - e < Math.PI || e > i && i - e < -Math.PI ? 1 : -1;
}
function Zi(r, t) {
  return Math.sqrt(Math.pow((t ? t[0] : 0) - r[0], 2) + Math.pow((t ? t[1] : 0) - r[1], 2));
}
function Yt(r, t) {
  if (!t)
    return r;
  var e = 1 / t;
  return Math.round(r / t) / e;
}
function sp(r, t) {
  return r.forEach(function(e, i) {
    r[i] = Yt(r[i], t);
  }), r;
}
function mr(r, t) {
  return r.classList ? r.classList.contains(t) : !!r.className.match(new RegExp("(\\s|^)" + t + "(\\s|$)"));
}
function XL(r, t) {
  r.classList ? r.classList.add(t) : r.className += " " + t;
}
function WL(r, t) {
  if (r.classList)
    r.classList.remove(t);
  else {
    var e = new RegExp("(\\s|^)" + t + "(\\s|$)");
    r.className = r.className.replace(e, " ");
  }
}
function ei(r, t, e, i) {
  r.addEventListener(t, e, i);
}
function Dr(r, t, e, i) {
  r.removeEventListener(t, e, i);
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var yy = function(r, t) {
  return yy = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, yy(r, t);
};
function hu(r, t) {
  yy(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Ca = function() {
  return Ca = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, Ca.apply(this, arguments);
};
function mI(r, t) {
  var e = {};
  for (var i in r)
    Object.prototype.hasOwnProperty.call(r, i) && t.indexOf(i) < 0 && (e[i] = r[i]);
  if (r != null && typeof Object.getOwnPropertySymbols == "function")
    for (var n = 0, i = Object.getOwnPropertySymbols(r); n < i.length; n++)
      t.indexOf(i[n]) < 0 && Object.prototype.propertyIsEnumerable.call(r, i[n]) && (e[i[n]] = r[i[n]]);
  return e;
}
function YL() {
  for (var r = 0, t = 0, e = arguments.length; t < e; t++)
    r += arguments[t].length;
  for (var i = Array(r), n = 0, t = 0; t < e; t++)
    for (var s = arguments[t], a = 0, o = s.length; a < o; a++, n++)
      i[n] = s[a];
  return i;
}
function by(r, t) {
  if (r === t)
    return !1;
  for (var e in r)
    if (!(e in t))
      return !0;
  for (var e in t)
    if (r[e] !== t[e])
      return !0;
  return !1;
}
function $b(r, t) {
  var e = Object.keys(r), i = Object.keys(t), n = Mg(e, i, function(u) {
    return u;
  }), s = {}, a = {}, o = {};
  return n.added.forEach(function(u) {
    var h = i[u];
    s[h] = t[h];
  }), n.removed.forEach(function(u) {
    var h = e[u];
    a[h] = r[h];
  }), n.maintained.forEach(function(u) {
    var h = u[0], l = e[h], c = [r[l], t[l]];
    r[l] !== t[l] && (o[l] = c);
  }), {
    added: s,
    removed: a,
    changed: o
  };
}
function _I(r) {
  r.forEach(function(t) {
    t();
  });
}
function pw(r) {
  var t = 0;
  return r.map(function(e) {
    return e == null ? "$compat" + ++t : "" + e;
  });
}
function vw(r, t, e, i) {
  if (Ni(r) || vy(r))
    return new KL("text_" + r, t, e, i, null, {});
  var n = typeof r.type == "string" ? QL : r.type.prototype.render ? e5 : t5;
  return new n(r.type, t, e, i, r.ref, r.props);
}
function yI(r) {
  var t = [];
  return r.forEach(function(e) {
    t = t.concat(wr(e) ? yI(e) : e);
  }), t;
}
function gw(r) {
  var t = r.className, e = mI(r, ["className"]);
  return t != null && (e.class = t), delete e.style, delete e.children, e;
}
function Lm(r, t) {
  if (!t)
    return r;
  for (var e in t)
    kg(r[e]) && (r[e] = t[e]);
  return r;
}
function Si(r, t) {
  for (var e = [], i = 2; i < arguments.length; i++)
    e[i - 2] = arguments[i];
  var n = t || {}, s = n.key, a = n.ref, o = mI(n, ["key", "ref"]);
  return {
    type: r,
    key: s,
    ref: a,
    props: Ca(Ca({}, o), {
      children: yI(e).filter(function(u) {
        return u != null && u !== !1;
      })
    })
  };
}
var _d = /* @__PURE__ */ function() {
  function r(e, i, n, s, a, o) {
    o === void 0 && (o = {}), this.type = e, this.key = i, this.index = n, this.container = s, this.ref = a, this.props = o, this._providers = [];
  }
  var t = r.prototype;
  return t._should = function(e, i) {
    return !0;
  }, t._update = function(e, i, n, s) {
    if (this.base && !Ni(i) && !s && !this._should(i.props, n))
      return !1;
    this.original = i, this._setState(n);
    var a = this.props;
    return Ni(i) || (this.props = i.props, this.ref = i.ref), this._render(e, this.base ? a : {}, n), !0;
  }, t._mounted = function() {
    var e = this.ref;
    e && e(this.base);
  }, t._setState = function(e) {
  }, t._updated = function() {
    var e = this.ref;
    e && e(this.base);
  }, t._destroy = function() {
    var e = this.ref;
    e && e(null);
  }, r;
}();
function qL(r, t, e) {
  var i = $b(r, t), n = i.added, s = i.removed, a = i.changed;
  for (var o in n)
    e.setAttribute(o, n[o]);
  for (var o in a)
    e.setAttribute(o, a[o][1]);
  for (var o in s)
    e.removeAttribute(o);
}
function ZL(r, t, e) {
  var i = $b(r, t), n = i.added, s = i.removed, a = i.changed;
  for (var o in s)
    e.removeEventListener(o);
  for (var o in n)
    e.addEventListener(o, n[o]);
  for (var o in a)
    e.removeEventListener(o), e.addEventListener(o, a[o][1]);
  for (var o in s)
    e.removeEventListener(o);
}
function JL(r, t, e) {
  var i = e.style, n = $b(r, t), s = n.added, a = n.removed, o = n.changed;
  for (var u in s) {
    var h = Bm(u, "-");
    i.setProperty ? i.setProperty(h, s[u]) : i[h] = s[u];
  }
  for (var u in o) {
    var h = Bm(u, "-");
    i.setProperty ? i.setProperty(h, o[u][1]) : i[h] = o[u][1];
  }
  for (var u in a) {
    var h = Bm(u, "-");
    i.removeProperty ? i.removeProperty(h) : i[h] = "";
  }
}
function mw(r) {
  var t = {}, e = {};
  for (var i in r)
    i.indexOf("on") === 0 ? e[i.replace("on", "").toLowerCase()] = r[i] : t[i] = r[i];
  return {
    attributes: t,
    events: e
  };
}
var KL = /* @__PURE__ */ function(r) {
  hu(t, r);
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  var e = t.prototype;
  return e._render = function(i) {
    var n = this, s = !this.base;
    return s && (this.base = document.createTextNode(this.type.replace("text_", ""))), i.push(function() {
      s ? n._mounted() : n._updated();
    }), !0;
  }, e._unmount = function() {
    this.base.parentNode.removeChild(this.base);
  }, t;
}(_d), QL = /* @__PURE__ */ function(r) {
  hu(t, r);
  function t() {
    var i = r !== null && r.apply(this, arguments) || this;
    return i.events = {}, i._isSVG = !1, i;
  }
  var e = t.prototype;
  return e.addEventListener = function(i, n) {
    var s = this.events;
    s[i] = function(a) {
      a.nativeEvent = a, n(a);
    }, this.base.addEventListener(i, s[i]);
  }, e.removeEventListener = function(i) {
    var n = this.events;
    this.base.removeEventListener(i, n[i]), delete n[i];
  }, e._should = function(i) {
    return by(this.props, i);
  }, e._render = function(i, n) {
    var s = this, a = !this.base;
    if (a) {
      var o = this._hasSVG();
      this._isSVG = o;
      var u = this.props.portalContainer;
      if (!u) {
        var h = this.type;
        o ? u = document.createElementNS("http://www.w3.org/2000/svg", h) : u = document.createElement(h);
      }
      this.base = u;
    }
    yd(this, this._providers, this.props.children, i, null);
    var l = this.base, c = mw(n), d = c.attributes, p = c.events, g = mw(this.props), v = g.attributes, m = g.events;
    return qL(gw(d), gw(v), l), ZL(p, m, this), JL(n.style || {}, this.props.style || {}, l), i.push(function() {
      a ? s._mounted() : s._updated();
    }), !0;
  }, e._unmount = function() {
    var i = this.events, n = this.base;
    for (var s in i)
      n.removeEventListener(s, i[s]);
    this._providers.forEach(function(a) {
      a._unmount();
    }), this.events = {}, this.props.portalContainer || n.parentNode.removeChild(n);
  }, e._hasSVG = function() {
    if (this._isSVG || this.type === "svg")
      return !0;
    var i = Vb(this.container);
    return i && "ownerSVGElement" in i;
  }, t;
}(_d);
function Vb(r) {
  if (!r)
    return null;
  var t = r.base;
  return t instanceof Node ? t : Vb(r.container);
}
function Wc(r) {
  if (!r)
    return null;
  if (r instanceof Node)
    return r;
  var t = r.$_provider._providers;
  return t.length ? Wc(t[0].base) : null;
}
var t5 = /* @__PURE__ */ function(r) {
  hu(t, r);
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  var e = t.prototype;
  return e._render = function(i) {
    var n = this.type(this.props);
    return yd(this, this._providers, n ? [n] : [], i), !0;
  }, e._unmount = function() {
    this._providers.forEach(function(i) {
      i._unmount();
    });
  }, t;
}(_d), bI = /* @__PURE__ */ function(r) {
  hu(t, r);
  function t(i) {
    var n = r.call(this, "container", "container", 0, null) || this;
    return n.base = i, n;
  }
  var e = t.prototype;
  return e._render = function() {
    return !0;
  }, e._unmount = function() {
  }, t;
}(_d), e5 = /* @__PURE__ */ function(r) {
  hu(t, r);
  function t(i, n, s, a, o, u) {
    return u === void 0 && (u = {}), r.call(this, i, n, s, a, o, Lm(u, i.defaultProps)) || this;
  }
  var e = t.prototype;
  return e._should = function(i, n) {
    return this.base.shouldComponentUpdate(Lm(i, this.type.defaultProps), n || this.base.state);
  }, e._render = function(i, n) {
    var s = this;
    this.props = Lm(this.props, this.type.defaultProps);
    var a = !this.base;
    a ? (this.base = new this.type(this.props), this.base.$_provider = this) : this.base.props = this.props;
    var o = this.base, u = o.state, h = o.render();
    h && h.props && !h.props.children.length && (h.props.children = this.props.children), yd(this, this._providers, h ? [h] : [], i), i.push(function() {
      a ? (s._mounted(), o.componentDidMount()) : (s._updated(), o.componentDidUpdate(n, u));
    });
  }, e._setState = function(i) {
    var n = this.base;
    !n || !i || (n.state = i);
  }, e._unmount = function() {
    this._providers.forEach(function(i) {
      i._unmount();
    }), clearTimeout(this.base.$_timer), this.base.componentWillUnmount();
  }, t;
}(_d), Xb = /* @__PURE__ */ function() {
  function r(e) {
    e === void 0 && (e = {}), this.props = e, this.state = {}, this.$_timer = 0, this.$_state = {};
  }
  var t = r.prototype;
  return t.shouldComponentUpdate = function(e, i) {
    return !0;
  }, t.render = function() {
    return null;
  }, t.setState = function(e, i, n) {
    var s = this;
    this.$_timer || (this.$_state = {}), clearTimeout(this.$_timer), this.$_timer = 0, this.$_state = Ca(Ca({}, this.$_state), e), n ? this.$_setState(i, n) : this.$_timer = setTimeout(function() {
      s.$_timer = 0, s.$_setState(i, n);
    });
  }, t.forceUpdate = function(e) {
    this.setState({}, e, !0);
  }, t.componentDidMount = function() {
  }, t.componentDidUpdate = function(e, i) {
  }, t.componentWillUnmount = function() {
  }, t.$_setState = function(e, i) {
    var n = [], s = this.$_provider, a = yd(s.container, [s], [s.original], n, Ca(Ca({}, this.state), this.$_state), i);
    a && (e && n.push(e), _I(n));
  }, r;
}(), Wb = /* @__PURE__ */ function(r) {
  hu(t, r);
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  var e = t.prototype;
  return e.shouldComponentUpdate = function(i, n) {
    return by(this.props, i) || by(this.state, n);
  }, t;
}(Xb), r5 = /* @__PURE__ */ function(r) {
  hu(t, r);
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  var e = t.prototype;
  return e.componentDidMount = function() {
    var i = this.props, n = i.element, s = i.container;
    this._portalProvider = new bI(s), Gp(n, s, this._portalProvider);
  }, e.componentDidUpdate = function() {
    var i = this.props, n = i.element, s = i.container;
    Gp(n, s, this._portalProvider);
  }, e.componentWillUnmount = function() {
    var i = this.props.container;
    Gp(null, i, this._portalProvider), this._portalProvider = null;
  }, t;
}(Wb);
function i5(r, t, e) {
  var i = [];
  yd(r, r._providers, t, i, e), _I(i);
}
function n5(r, t) {
  for (var e = r._providers, i = e.length, n = t.index + 1; n < i; ++n) {
    var s = Wc(e[n].base);
    if (s)
      return s;
  }
  return null;
}
function s5(r, t, e) {
  var i = e.map(function(u) {
    return Ni(u) ? null : u.key;
  }), n = pw(t.map(function(u) {
    return u.key;
  })), s = pw(i), a = Mg(n, s, function(u) {
    return u;
  });
  a.removed.forEach(function(u) {
    t.splice(u, 1)[0]._unmount();
  }), a.ordered.forEach(function(u) {
    var h = u[0], l = u[1], c = t.splice(h, 1)[0];
    t.splice(l, 0, c);
    var d = Wc(c.base), p = Wc(t[l + 1] && t[l + 1].base);
    d && d.parentNode.insertBefore(d, p);
  }), a.added.forEach(function(u) {
    t.splice(u, 0, vw(e[u], i[u], u, r));
  });
  var o = a.maintained.filter(function(u) {
    u[0];
    var h = u[1], l = e[h], c = t[h], d = Ni(l) ? "text_" + l : l.type;
    return d !== c.type ? (c._unmount(), t.splice(h, 1, vw(l, i[h], h, r)), !0) : (c.index = h, !1);
  });
  return YL(a.added, o.map(function(u) {
    u[0];
    var h = u[1];
    return h;
  }));
}
function yd(r, t, e, i, n, s) {
  var a = s5(r, t, e), o = t.filter(function(h, l) {
    return h._update(i, e[l], n, s);
  }), u = Vb(r);
  return u && a.reverse().forEach(function(h) {
    var l = t[h], c = Wc(l.base);
    if (!!c && u !== c && !c.parentNode) {
      var d = n5(r, l);
      u.insertBefore(c, d);
    }
  }), o.length > 0;
}
function Gp(r, t, e) {
  e === void 0 && (e = t.__REACT_COMPAT__);
  var i = !!e;
  return e || (e = new bI(t)), i5(e, r ? [r] : []), i || (t.__REACT_COMPAT__ = e), e;
}
function _w(r, t, e) {
  var i = t.__REACT_COMPAT__;
  r && !i && (t.innerHTML = ""), Gp(r, t, i), e && e();
}
function a5(r, t) {
  return Si(r5, {
    element: r,
    container: t
  });
}
var o5 = "simple-1.1.0";
function Yb(r, t) {
  for (var e = r.length, i = 0; i < e; ++i)
    if (t(r[i], i))
      return !0;
  return !1;
}
function xI(r, t) {
  for (var e = r.length, i = 0; i < e; ++i)
    if (t(r[i], i))
      return r[i];
  return null;
}
function EI(r) {
  var t = r;
  if (typeof t > "u") {
    if (typeof navigator > "u" || !navigator)
      return "";
    t = navigator.userAgent || "";
  }
  return t.toLowerCase();
}
function qb(r, t) {
  try {
    return new RegExp(r, "g").exec(t);
  } catch {
    return null;
  }
}
function u5() {
  if (typeof navigator > "u" || !navigator || !navigator.userAgentData)
    return !1;
  var r = navigator.userAgentData, t = r.brands || r.uaList;
  return !!(t && t.length);
}
function h5(r, t) {
  var e = qb("(" + r + ")((?:\\/|\\s|:)([0-9|\\.|_]+))", t);
  return e ? e[3] : "";
}
function xy(r) {
  return r.replace(/_/g, ".");
}
function ec(r, t) {
  var e = null, i = "-1";
  return Yb(r, function(n) {
    var s = qb("(" + n.test + ")((?:\\/|\\s|:)([0-9|\\.|_]+))?", t);
    return !s || n.brand ? !1 : (e = n, i = s[3] || "-1", n.versionAlias ? i = n.versionAlias : n.versionTest && (i = h5(n.versionTest.toLowerCase(), t) || i), i = xy(i), !0);
  }), {
    preset: e,
    version: i
  };
}
function $l(r, t) {
  var e = {
    brand: "",
    version: "-1"
  };
  return Yb(r, function(i) {
    var n = wI(t, i);
    return n ? (e.brand = i.id, e.version = i.versionAlias || n.version, e.version !== "-1") : !1;
  }), e;
}
function wI(r, t) {
  return xI(r, function(e) {
    var i = e.brand;
    return qb("" + t.test, i.toLowerCase());
  });
}
var Ey = [{
  test: "phantomjs",
  id: "phantomjs"
}, {
  test: "whale",
  id: "whale"
}, {
  test: "edgios|edge|edg",
  id: "edge"
}, {
  test: "msie|trident|windows phone",
  id: "ie",
  versionTest: "iemobile|msie|rv"
}, {
  test: "miuibrowser",
  id: "miui browser"
}, {
  test: "samsungbrowser",
  id: "samsung internet"
}, {
  test: "samsung",
  id: "samsung internet",
  versionTest: "version"
}, {
  test: "chrome|crios",
  id: "chrome"
}, {
  test: "firefox|fxios",
  id: "firefox"
}, {
  test: "android",
  id: "android browser",
  versionTest: "version"
}, {
  test: "safari|iphone|ipad|ipod",
  id: "safari",
  versionTest: "version"
}], TI = [{
  test: "(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",
  id: "chrome",
  versionTest: "chrome"
}, {
  test: "chromium",
  id: "chrome"
}, {
  test: "whale",
  id: "chrome",
  versionAlias: "-1",
  brand: !0
}], wy = [{
  test: "applewebkit",
  id: "webkit",
  versionTest: "applewebkit|safari"
}], CI = [{
  test: "(?=(iphone|ipad))(?!(.*version))",
  id: "webview"
}, {
  test: "(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",
  id: "webview"
}, {
  test: "webview",
  id: "webview"
}], II = [{
  test: "windows phone",
  id: "windows phone"
}, {
  test: "windows 2000",
  id: "window",
  versionAlias: "5.0"
}, {
  test: "windows nt",
  id: "window"
}, {
  test: "win32|windows",
  id: "window"
}, {
  test: "iphone|ipad|ipod",
  id: "ios",
  versionTest: "iphone os|cpu os"
}, {
  test: "macos|macintel|mac os x",
  id: "mac"
}, {
  test: "android|linux armv81",
  id: "android"
}, {
  test: "tizen",
  id: "tizen"
}, {
  test: "webos|web0s",
  id: "webos"
}];
function RI(r) {
  return !!ec(CI, r).preset;
}
function l5(r) {
  var t = EI(r), e = !!/mobi/g.exec(t), i = {
    name: "unknown",
    version: "-1",
    majorVersion: -1,
    webview: RI(t),
    chromium: !1,
    chromiumVersion: "-1",
    webkit: !1,
    webkitVersion: "-1"
  }, n = {
    name: "unknown",
    version: "-1",
    majorVersion: -1
  }, s = ec(Ey, t), a = s.preset, o = s.version, u = ec(II, t), h = u.preset, l = u.version, c = ec(TI, t);
  if (i.chromium = !!c.preset, i.chromiumVersion = c.version, !i.chromium) {
    var d = ec(wy, t);
    i.webkit = !!d.preset, i.webkitVersion = d.version;
  }
  return h && (n.name = h.id, n.version = l, n.majorVersion = parseInt(l, 10)), a && (i.name = a.id, i.version = o, i.webview && n.name === "ios" && i.name !== "safari" && (i.webview = !1)), i.majorVersion = parseInt(i.version, 10), {
    browser: i,
    os: n,
    isMobile: e,
    isHints: !1
  };
}
function c5(r) {
  var t = navigator.userAgentData, e = (t.uaList || t.brands).slice(), i = r && r.fullVersionList, n = t.mobile || !1, s = e[0], a = (r && r.platform || t.platform || navigator.platform).toLowerCase(), o = {
    name: s.brand,
    version: s.version,
    majorVersion: -1,
    webkit: !1,
    webkitVersion: "-1",
    chromium: !1,
    chromiumVersion: "-1",
    webview: !!$l(CI, e).brand || RI(EI())
  }, u = {
    name: "unknown",
    version: "-1",
    majorVersion: -1
  };
  o.webkit = !o.chromium && Yb(wy, function(g) {
    return wI(e, g);
  });
  var h = $l(TI, e);
  if (o.chromium = !!h.brand, o.chromiumVersion = h.version, !o.chromium) {
    var l = $l(wy, e);
    o.webkit = !!l.brand, o.webkitVersion = l.version;
  }
  var c = xI(II, function(g) {
    return new RegExp("" + g.test, "g").exec(a);
  });
  if (u.name = c ? c.id : "", r && (u.version = r.platformVersion), i && i.length) {
    var d = $l(Ey, i);
    o.name = d.brand || o.name, o.version = d.version || o.version;
  } else {
    var p = $l(Ey, e);
    o.name = p.brand || o.name, o.version = p.brand && r ? r.uaFullVersion : p.version;
  }
  return o.webkit && (u.name = n ? "ios" : "mac"), u.name === "ios" && o.webview && (o.version = "-1"), u.version = xy(u.version), o.version = xy(o.version), u.majorVersion = parseInt(u.version, 10), o.majorVersion = parseInt(o.version, 10), {
    browser: o,
    os: u,
    isMobile: n,
    isHints: !0
  };
}
function f5(r) {
  return typeof r > "u" && u5() ? c5() : l5(r);
}
function d5(r, t, e, i, n, s) {
  for (var a = 0; a < n; ++a) {
    var o = e + a * n, u = i + a * n;
    r[o] += r[u] * s, t[o] += t[u] * s;
  }
}
function p5(r, t, e, i, n) {
  for (var s = 0; s < n; ++s) {
    var a = e + s * n, o = i + s * n, u = r[a], h = t[a];
    r[a] = r[o], r[o] = u, t[a] = t[o], t[o] = h;
  }
}
function v5(r, t, e, i, n) {
  for (var s = 0; s < i; ++s) {
    var a = e + s * i;
    r[a] /= n, t[a] /= n;
  }
}
function SI(r, t, e) {
  e === void 0 && (e = Math.sqrt(r.length));
  for (var i = r.slice(), n = 0; n < e; ++n)
    i[n * e + t - 1] = 0, i[(t - 1) * e + n] = 0;
  return i[(t - 1) * (e + 1)] = 1, i;
}
function Fn(r, t) {
  t === void 0 && (t = Math.sqrt(r.length));
  for (var e = r.slice(), i = De(t), n = 0; n < t; ++n) {
    var s = t * n + n;
    if (!Yt(e[s], er)) {
      for (var a = n + 1; a < t; ++a)
        if (e[t * n + a]) {
          p5(e, i, n, a, t);
          break;
        }
    }
    if (!Yt(e[s], er))
      return [];
    v5(e, i, n, t, e[s]);
    for (var a = 0; a < t; ++a) {
      var o = a, u = a + n * t, h = e[u];
      !Yt(h, er) || n === a || d5(e, i, o, n, t, -h);
    }
  }
  return i;
}
function g5(r, t) {
  t === void 0 && (t = Math.sqrt(r.length));
  for (var e = [], i = 0; i < t; ++i)
    for (var n = 0; n < t; ++n)
      e[n * t + i] = r[t * i + n];
  return e;
}
function PI(r, t) {
  t === void 0 && (t = Math.sqrt(r.length));
  for (var e = [], i = r[t * t - 1], n = 0; n < t - 1; ++n)
    e[n] = r[t * (t - 1) + n] / i;
  return e[t - 1] = 0, e;
}
function m5(r, t) {
  for (var e = De(t), i = 0; i < t - 1; ++i)
    e[t * (t - 1) + i] = r[i] || 0;
  return e;
}
function su(r, t) {
  for (var e = r.slice(), i = r.length; i < t - 1; ++i)
    e[i] = 0;
  return e[t - 1] = 1, e;
}
function Mn(r, t, e) {
  if (t === void 0 && (t = Math.sqrt(r.length)), t === e)
    return r;
  for (var i = De(e), n = Math.min(t, e), s = 0; s < n - 1; ++s) {
    for (var a = 0; a < n - 1; ++a)
      i[s * e + a] = r[s * t + a];
    i[(s + 1) * e - 1] = r[(s + 1) * t - 1], i[(e - 1) * e + s] = r[(t - 1) * t + s];
  }
  return i[e * e - 1] = r[t * t - 1], i;
}
function Ty(r) {
  for (var t = [], e = 1; e < arguments.length; e++)
    t[e - 1] = arguments[e];
  var i = De(r);
  return t.forEach(function(n) {
    i = we(i, n, r);
  }), i;
}
function we(r, t, e) {
  e === void 0 && (e = Math.sqrt(r.length));
  var i = [], n = r.length / e, s = t.length / n;
  if (n) {
    if (!s)
      return r;
  } else
    return t;
  for (var a = 0; a < e; ++a)
    for (var o = 0; o < s; ++o) {
      i[o * e + a] = 0;
      for (var u = 0; u < n; ++u)
        i[o * e + a] += r[u * e + a] * t[o * n + u];
    }
  return i;
}
function te(r, t) {
  for (var e = Math.min(r.length, t.length), i = r.slice(), n = 0; n < e; ++n)
    i[n] = i[n] + t[n];
  return i;
}
function kt(r, t) {
  for (var e = Math.min(r.length, t.length), i = r.slice(), n = 0; n < e; ++n)
    i[n] = i[n] - t[n];
  return i;
}
function _5(r, t) {
  return t === void 0 && (t = r.length === 6), t ? [r[0], r[1], 0, r[2], r[3], 0, r[4], r[5], 1] : r;
}
function NI(r, t) {
  return t === void 0 && (t = r.length === 9), t ? [r[0], r[1], r[3], r[4], r[6], r[7]] : r;
}
function Tr(r, t, e) {
  e === void 0 && (e = t.length);
  var i = we(r, t, e), n = i[e - 1];
  return i.map(function(s) {
    return s / n;
  });
}
function y5(r, t) {
  return we(r, [1, 0, 0, 0, 0, Math.cos(t), Math.sin(t), 0, 0, -Math.sin(t), Math.cos(t), 0, 0, 0, 0, 1], 4);
}
function b5(r, t) {
  return we(r, [Math.cos(t), 0, -Math.sin(t), 0, 0, 1, 0, 0, Math.sin(t), 0, Math.cos(t), 0, 0, 0, 0, 1], 4);
}
function x5(r, t) {
  return we(r, ml(t, 4));
}
function ap(r, t) {
  var e = t[0], i = e === void 0 ? 1 : e, n = t[1], s = n === void 0 ? 1 : n, a = t[2], o = a === void 0 ? 1 : a;
  return we(r, [i, 0, 0, 0, 0, s, 0, 0, 0, 0, o, 0, 0, 0, 0, 1], 4);
}
function Bg(r, t) {
  return Tr(ml(t, 3), su(r, 3));
}
function Dm(r, t) {
  var e = t[0], i = e === void 0 ? 0 : e, n = t[1], s = n === void 0 ? 0 : n, a = t[2], o = a === void 0 ? 0 : a;
  return we(r, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, i, s, o, 1], 4);
}
function yw(r, t) {
  return we(r, t, 4);
}
function ml(r, t) {
  var e = Math.cos(r), i = Math.sin(r), n = De(t);
  return n[0] = e, n[1] = i, n[t] = -i, n[t + 1] = e, n;
}
function De(r) {
  for (var t = r * r, e = [], i = 0; i < t; ++i)
    e[i] = i % (r + 1) ? 0 : 1;
  return e;
}
function OI(r, t) {
  for (var e = De(t), i = Math.min(r.length, t - 1), n = 0; n < i; ++n)
    e[(t + 1) * n] = r[n];
  return e;
}
function Yc(r, t) {
  for (var e = De(t), i = Math.min(r.length, t - 1), n = 0; n < i; ++n)
    e[t * (t - 1) + n] = r[n];
  return e;
}
function Zb(r, t, e, i, n, s, a, o) {
  var u = r[0], h = r[1], l = t[0], c = t[1], d = e[0], p = e[1], g = i[0], v = i[1], m = n[0], _ = n[1], y = s[0], b = s[1], x = a[0], w = a[1], E = o[0], R = o[1], C = [u, 0, l, 0, d, 0, g, 0, h, 0, c, 0, p, 0, v, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, u, 0, l, 0, d, 0, g, 0, h, 0, c, 0, p, 0, v, 0, 1, 0, 1, 0, 1, 0, 1, -m * u, -_ * u, -y * l, -b * l, -x * d, -w * d, -E * g, -R * g, -m * h, -_ * h, -y * c, -b * c, -x * p, -w * p, -E * v, -R * v], P = Fn(C, 8);
  if (!P.length)
    return [];
  var N = we(P, [m, _, y, b, x, w, E, R], 8);
  return N[8] = 1, Mn(g5(N), 3, 4);
}
function E5() {
  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
}
function Jb(r) {
  return Pu(eo(r));
}
function w5(r, t) {
  var e = Tr(r, [t[0], t[1] || 0, t[2] || 0, 1], 4), i = e[3] || 1;
  return [e[0] / i, e[1] / i, e[2] / i];
}
function Pu(r) {
  var t = E5();
  return r.forEach(function(e) {
    var i = e.matrixFunction, n = e.functionValue;
    !i || (t = i(t, n));
  }), t;
}
function eo(r) {
  var t = wr(r) ? r : Pa(r);
  return t.map(function(e) {
    var i = vI(e), n = i.prefix, s = i.value, a = null, o = n, u = "";
    if (n === "translate" || n === "translateX" || n === "translate3d") {
      var h = oo(s).map(function(N) {
        return parseFloat(N);
      }), l = h[0], c = h[1], d = c === void 0 ? 0 : c, p = h[2], g = p === void 0 ? 0 : p;
      a = Dm, u = [l, d, g];
    } else if (n === "translateY") {
      var d = parseFloat(s);
      a = Dm, u = [0, d, 0];
    } else if (n === "translateZ") {
      var g = parseFloat(s);
      a = Dm, u = [0, 0, g];
    } else if (n === "scale" || n === "scale3d") {
      var v = oo(s).map(function(N) {
        return parseFloat(N);
      }), m = v[0], _ = v[1], y = _ === void 0 ? m : _, b = v[2], x = b === void 0 ? 1 : b;
      a = ap, u = [m, y, x];
    } else if (n === "scaleX") {
      var m = parseFloat(s);
      a = ap, u = [m, 1, 1];
    } else if (n === "scaleY") {
      var y = parseFloat(s);
      a = ap, u = [1, y, 1];
    } else if (n === "scaleZ") {
      var x = parseFloat(s);
      a = ap, u = [1, 1, x];
    } else if (n === "rotate" || n === "rotateZ" || n === "rotateX" || n === "rotateY") {
      var w = md(s), E = w.unit, R = w.value, C = E === "rad" ? R : R * Math.PI / 180;
      n === "rotate" || n === "rotateZ" ? (o = "rotateZ", a = x5) : n === "rotateX" ? a = y5 : n === "rotateY" && (a = b5), u = C;
    } else if (n === "matrix3d")
      a = yw, u = oo(s).map(function(N) {
        return parseFloat(N);
      });
    else if (n === "matrix") {
      var P = oo(s).map(function(N) {
        return parseFloat(N);
      });
      a = yw, u = [P[0], P[1], 0, 0, P[2], P[3], 0, 0, 0, 0, 1, 0, P[4], P[5], 0, 1];
    } else
      o = "";
    return {
      name: n,
      functionName: o,
      value: s,
      matrixFunction: a,
      functionValue: u
    };
  });
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Cy = function(r, t) {
  return Cy = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, Cy(r, t);
};
function T5(r, t) {
  Cy(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var AI = typeof Map == "function" ? void 0 : function() {
  var r = 0;
  return function(t) {
    return t.__DIFF_KEY__ || (t.__DIFF_KEY__ = ++r);
  };
}(), C5 = /* @__PURE__ */ function(r) {
  T5(t, r);
  function t(e) {
    return e === void 0 && (e = []), r.call(this, e, AI) || this;
  }
  return t;
}(AL);
function I5(r, t) {
  return Mg(r, t, AI);
}
const FI = C5;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function R5() {
  for (var r = 0, t = 0, e = arguments.length; t < e; t++)
    r += arguments[t].length;
  for (var i = Array(r), n = 0, t = 0; t < e; t++)
    for (var s = arguments[t], a = 0, o = s.length; a < o; a++, n++)
      i[n] = s[a];
  return i;
}
function qr(r) {
  return Yt(r, er);
}
function S5(r, t) {
  return r.every(function(e, i) {
    return qr(e - t[i]) === 0;
  });
}
function P5(r, t) {
  return !qr(r[0] - t[0]) && !qr(r[1] - t[1]);
}
function MI(r) {
  return r.length < 3 ? 0 : Math.abs($L(r.map(function(t, e) {
    var i = r[e + 1] || r[0];
    return t[0] * i[1] - i[0] * t[1];
  }))) / 2;
}
function bw(r, t) {
  var e = t.width, i = t.height, n = t.left, s = t.top, a = bd(r), o = a.minX, u = a.minY, h = a.maxX, l = a.maxY, c = e / (h - o), d = i / (l - u);
  return r.map(function(p) {
    return [n + (p[0] - o) * c, s + (p[1] - u) * d];
  });
}
function bd(r) {
  var t = r.map(function(i) {
    return i[0];
  }), e = r.map(function(i) {
    return i[1];
  });
  return {
    minX: Math.min.apply(Math, t),
    minY: Math.min.apply(Math, e),
    maxX: Math.max.apply(Math, t),
    maxY: Math.max.apply(Math, e)
  };
}
function Iy(r, t, e) {
  var i = r[0], n = r[1], s = bd(t), a = s.minX, o = s.maxX, u = [[a, n], [o, n]], h = _v(u[0], u[1]), l = Ry(t), c = [];
  if (l.forEach(function(g) {
    var v = _v(g[0], g[1]), m = g[0];
    if (S5(h, v))
      c.push({
        pos: r,
        line: g,
        type: "line"
      });
    else {
      var _ = kI(Kb(h, v), [u, g]);
      _.forEach(function(y) {
        g.some(function(b) {
          return P5(b, y);
        }) ? c.push({
          pos: y,
          line: g,
          type: "point"
        }) : qr(m[1] - n) !== 0 && c.push({
          pos: y,
          line: g,
          type: "intersection"
        });
      });
    }
  }), !e && Na(c, function(g) {
    return g[0] === i;
  }))
    return !0;
  var d = 0, p = {};
  return c.forEach(function(g) {
    var v = g.pos, m = g.type, _ = g.line;
    if (!(v[0] > i))
      if (m === "intersection")
        ++d;
      else {
        if (m === "line")
          return;
        if (m === "point") {
          var y = Na(_, function(w) {
            return w[1] !== n;
          }), b = p[v[0]], x = y[1] > n ? 1 : -1;
          b ? b !== x && ++d : p[v[0]] = x;
        }
      }
  }), d % 2 === 1;
}
function _v(r, t) {
  var e = r[0], i = r[1], n = t[0], s = t[1], a = n - e, o = s - i;
  Math.abs(a) < er && (a = 0), Math.abs(o) < er && (o = 0);
  var u = 0, h = 0, l = 0;
  return a ? o ? (u = -o / a, h = 1, l = -u * e - i) : (h = 1, l = -i) : o && (u = -1, l = e), [u, h, l];
}
function Kb(r, t) {
  var e = r[0], i = r[1], n = r[2], s = t[0], a = t[1], o = t[2], u = e === 0 && s === 0, h = i === 0 && a === 0, l = [];
  if (u && h)
    return [];
  if (u) {
    var c = -n / i, d = -o / a;
    return c !== d ? [] : [[-1 / 0, c], [1 / 0, c]];
  } else if (h) {
    var p = -n / e, g = -o / s;
    return p !== g ? [] : [[p, -1 / 0], [p, 1 / 0]];
  } else if (e === 0) {
    var v = -n / i, m = -(a * v + o) / s;
    l = [[m, v]];
  } else if (s === 0) {
    var v = -o / a, m = -(i * v + n) / e;
    l = [[m, v]];
  } else if (i === 0) {
    var m = -n / e, v = -(s * m + o) / a;
    l = [[m, v]];
  } else if (a === 0) {
    var m = -o / s, v = -(e * m + n) / i;
    l = [[m, v]];
  } else {
    var m = (i * o - a * n) / (a * e - i * s), v = -(e * m + n) / i;
    l = [[m, v]];
  }
  return l.map(function(_) {
    return [_[0], _[1]];
  });
}
function kI(r, t) {
  var e = t.map(function(c) {
    return [0, 1].map(function(d) {
      return [Math.min(c[0][d], c[1][d]), Math.max(c[0][d], c[1][d])];
    });
  }), i = [];
  if (r.length === 2) {
    var n = r[0], s = n[0], a = n[1];
    if (qr(s - r[1][0])) {
      if (!qr(a - r[1][1])) {
        var h = Math.max.apply(Math, e.map(function(c) {
          return c[0][0];
        })), l = Math.min.apply(Math, e.map(function(c) {
          return c[0][1];
        }));
        if (qr(h - l) > 0)
          return [];
        i = [[h, a], [l, a]];
      }
    } else {
      var o = Math.max.apply(Math, e.map(function(c) {
        return c[1][0];
      })), u = Math.min.apply(Math, e.map(function(c) {
        return c[1][1];
      }));
      if (qr(o - u) > 0)
        return [];
      i = [[s, o], [s, u]];
    }
  }
  return i.length || (i = r.filter(function(c) {
    var d = c[0], p = c[1];
    return e.every(function(g) {
      return 0 <= qr(d - g[0][0]) && 0 <= qr(g[0][1] - d) && 0 <= qr(p - g[1][0]) && 0 <= qr(g[1][1] - p);
    });
  })), i.map(function(c) {
    return [qr(c[0]), qr(c[1])];
  });
}
function Ry(r) {
  return R5(r.slice(1), [r[0]]).map(function(t, e) {
    return [r[e], t];
  });
}
function N5(r, t) {
  var e = r.slice(), i = t.slice();
  _y(e) === -1 && e.reverse(), _y(i) === -1 && i.reverse();
  var n = Ry(e), s = Ry(i), a = n.map(function(l) {
    return _v(l[0], l[1]);
  }), o = s.map(function(l) {
    return _v(l[0], l[1]);
  }), u = [];
  a.forEach(function(l, c) {
    var d = n[c], p = [];
    o.forEach(function(g, v) {
      var m = Kb(l, g), _ = kI(m, [d, s[v]]);
      p.push.apply(p, _.map(function(y) {
        return {
          index1: c,
          index2: v,
          pos: y,
          type: "intersection"
        };
      }));
    }), p.sort(function(g, v) {
      return Zi(d[0], g.pos) - Zi(d[0], v.pos);
    }), u.push.apply(u, p), Iy(d[1], i) && u.push({
      index1: c,
      index2: -1,
      pos: d[1],
      type: "inside"
    });
  }), s.forEach(function(l, c) {
    if (!!Iy(l[1], e)) {
      var d = !1, p = Ps(u, function(g) {
        var v = g.index2;
        return v === c ? (d = !0, !1) : !!d;
      });
      p === -1 && (d = !1, p = Ps(u, function(g) {
        var v = g.index1, m = g.index2;
        return v === -1 && m + 1 === c ? (d = !0, !1) : !!d;
      })), p === -1 ? u.push({
        index1: -1,
        index2: c,
        pos: l[1],
        type: "inside"
      }) : u.splice(p, 0, {
        index1: -1,
        index2: c,
        pos: l[1],
        type: "inside"
      });
    }
  });
  var h = {};
  return u.filter(function(l) {
    var c = l.pos, d = c[0] + "x" + c[1];
    return h[d] ? !1 : (h[d] = !0, !0);
  });
}
function O5(r, t) {
  var e = N5(r, t);
  return e.map(function(i) {
    var n = i.pos;
    return n;
  });
}
function A5(r, t) {
  var e = O5(r, t);
  return MI(e);
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Sy = function() {
  return Sy = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, Sy.apply(this, arguments);
};
function F5() {
  for (var r = 0, t = 0, e = arguments.length; t < e; t++)
    r += arguments[t].length;
  for (var i = Array(r), n = 0, t = 0; t < e; t++)
    for (var s = arguments[t], a = 0, o = s.length; a < o; a++, n++)
      i[n] = s[a];
  return i;
}
var M5 = /* @__PURE__ */ function() {
  function r() {
    this._events = {};
  }
  var t = r.prototype;
  return t.on = function(e, i) {
    if (en(e))
      for (var n in e)
        this.on(n, e[n]);
    else
      this._addEvent(e, i, {});
    return this;
  }, t.off = function(e, i) {
    if (!e)
      this._events = {};
    else if (en(e))
      for (var n in e)
        this.off(n);
    else if (!i)
      this._events[e] = [];
    else {
      var s = this._events[e];
      if (s) {
        var a = Ps(s, function(o) {
          return o.listener === i;
        });
        a > -1 && s.splice(a, 1);
      }
    }
    return this;
  }, t.once = function(e, i) {
    var n = this;
    return i && this._addEvent(e, i, {
      once: !0
    }), new Promise(function(s) {
      n._addEvent(e, s, {
        once: !0
      });
    });
  }, t.emit = function(e, i) {
    var n = this;
    i === void 0 && (i = {});
    var s = this._events[e];
    if (!e || !s)
      return !0;
    var a = !1;
    return i.eventType = e, i.stop = function() {
      a = !0;
    }, i.currentTarget = this, F5(s).forEach(function(o) {
      o.listener(i), o.once && n.off(e, o.listener);
    }), !a;
  }, t.trigger = function(e, i) {
    return i === void 0 && (i = {}), this.emit(e, i);
  }, t._addEvent = function(e, i, n) {
    var s = this._events;
    s[e] = s[e] || [];
    var a = s[e];
    a.push(Sy({
      listener: i
    }, n));
  }, r;
}();
const Qb = M5;
var k5 = "function", B5 = "string";
function L5(r) {
  return typeof r === B5;
}
function D5(r) {
  return typeof r === k5;
}
function U5() {
  return Date.now ? Date.now() : new Date().getTime();
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Py = function(r, t) {
  return Py = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, Py(r, t);
};
function G5(r, t) {
  Py(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Uu = function() {
  return Uu = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, Uu.apply(this, arguments);
};
function H5(r) {
  var t = r.container;
  return t === document.body ? [t.scrollLeft || document.documentElement.scrollLeft, t.scrollTop || document.documentElement.scrollTop] : [t.scrollLeft, t.scrollTop];
}
function Um(r) {
  if (r) {
    if (L5(r))
      return document.querySelector(r);
  } else
    return null;
  if (D5(r))
    return r();
  if (r instanceof Element)
    return r;
  if ("current" in r)
    return r.current;
  if ("value" in r)
    return r.value;
}
var z5 = /* @__PURE__ */ function(r) {
  G5(t, r);
  function t() {
    var i = r !== null && r.apply(this, arguments) || this;
    return i._startRect = null, i._startPos = [], i._prevTime = 0, i._timer = 0, i._prevScrollPos = [0, 0], i._isWait = !1, i._flag = !1, i;
  }
  var e = t.prototype;
  return e.dragStart = function(i, n) {
    var s = Um(n.container);
    if (!s) {
      this._flag = !1;
      return;
    }
    var a = 0, o = 0, u = 0, h = 0;
    if (s === document.body)
      u = window.innerWidth, h = window.innerHeight;
    else {
      var l = s.getBoundingClientRect();
      a = l.top, o = l.left, u = l.width, h = l.height;
    }
    this._flag = !0, this._startPos = [i.clientX, i.clientY], this._startRect = {
      top: a,
      left: o,
      width: u,
      height: h
    }, this._prevScrollPos = this._getScrollPosition([0, 0], n);
  }, e.drag = function(i, n) {
    if (!!this._flag) {
      var s = i.clientX, a = i.clientY, o = n.threshold, u = o === void 0 ? 0 : o, h = this, l = h._startRect, c = h._startPos, d = [0, 0];
      return l.top > a - u ? (c[1] > l.top || a < c[1]) && (d[1] = -1) : l.top + l.height < a + u && (c[1] < l.top + l.height || a > c[1]) && (d[1] = 1), l.left > s - u ? (c[0] > l.left || s < c[0]) && (d[0] = -1) : l.left + l.width < s + u && (c[0] < l.left + l.width || s > c[0]) && (d[0] = 1), clearTimeout(this._timer), !d[0] && !d[1] ? !1 : this._continueDrag(Uu(Uu({}, n), {
        direction: d,
        inputEvent: i,
        isDrag: !0
      }));
    }
  }, e.checkScroll = function(i) {
    var n = this;
    if (this._isWait)
      return !1;
    var s = i.prevScrollPos, a = s === void 0 ? this._prevScrollPos : s, o = i.direction, u = i.throttleTime, h = u === void 0 ? 0 : u, l = i.inputEvent, c = i.isDrag, d = this._getScrollPosition(o || [0, 0], i), p = d[0] - a[0], g = d[1] - a[1], v = o || [p ? Math.abs(p) / p : 0, g ? Math.abs(g) / g : 0];
    return this._prevScrollPos = d, !p && !g ? !1 : (this.trigger("move", {
      offsetX: v[0] ? p : 0,
      offsetY: v[1] ? g : 0,
      inputEvent: l
    }), h && c && (this._timer = window.setTimeout(function() {
      n._continueDrag(i);
    }, h)), !0);
  }, e.dragEnd = function() {
    clearTimeout(this._timer);
  }, e._getScrollPosition = function(i, n) {
    var s = n.container, a = n.getScrollPosition, o = a === void 0 ? H5 : a;
    return o({
      container: Um(s),
      direction: i
    });
  }, e._continueDrag = function(i) {
    var n = this, s = i.container, a = i.direction, o = i.throttleTime, u = i.useScroll, h = i.isDrag, l = i.inputEvent;
    if (!(h && this._isWait)) {
      var c = U5(), d = Math.max(o + this._prevTime - c, 0);
      if (d > 0)
        return this._timer = window.setTimeout(function() {
          n._continueDrag(i);
        }, d), !1;
      this._prevTime = c;
      var p = this._getScrollPosition(a, i);
      return this._prevScrollPos = p, h && (this._isWait = !0), this.trigger("scroll", {
        container: Um(s),
        direction: a,
        inputEvent: l
      }), this._isWait = !1, u || this.checkScroll(Uu(Uu({}, i), {
        prevScrollPos: p,
        direction: a,
        inputEvent: l
      }));
    }
  }, t;
}(Qb);
const j5 = z5;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Ny = function(r, t) {
  return Ny = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, Ny(r, t);
};
function $5(r, t) {
  Ny(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Je = function() {
  return Je = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, Je.apply(this, arguments);
};
function V5(r, t) {
  var e = t[0] - r[0], i = t[1] - r[1], n = Math.atan2(i, e);
  return n >= 0 ? n : n + Math.PI * 2;
}
function Gm(r) {
  return V5([r[0].clientX, r[0].clientY], [r[1].clientX, r[1].clientY]) / Math.PI * 180;
}
function X5(r) {
  return r.touches && r.touches.length >= 2;
}
function op(r) {
  return r ? r.touches ? Y5(r.touches) : [BI(r)] : [];
}
function W5(r) {
  return r && (r.type.indexOf("mouse") > -1 || "button" in r);
}
function xw(r, t, e) {
  var i = e.length, n = bc(r, i), s = n.clientX, a = n.clientY, o = n.originalClientX, u = n.originalClientY, h = bc(t, i), l = h.clientX, c = h.clientY, d = bc(e, i), p = d.clientX, g = d.clientY, v = s - l, m = a - c, _ = s - p, y = a - g;
  return {
    clientX: o,
    clientY: u,
    deltaX: v,
    deltaY: m,
    distX: _,
    distY: y
  };
}
function Hm(r) {
  return Math.sqrt(Math.pow(r[0].clientX - r[1].clientX, 2) + Math.pow(r[0].clientY - r[1].clientY, 2));
}
function Y5(r) {
  for (var t = Math.min(r.length, 2), e = [], i = 0; i < t; ++i)
    e.push(BI(r[i]));
  return e;
}
function BI(r) {
  return {
    clientX: r.clientX,
    clientY: r.clientY
  };
}
function bc(r, t) {
  t === void 0 && (t = r.length);
  for (var e = {
    clientX: 0,
    clientY: 0,
    originalClientX: 0,
    originalClientY: 0
  }, i = 0; i < t; ++i) {
    var n = r[i];
    e.originalClientX += "originalClientX" in n ? n.originalClientX : n.clientX, e.originalClientY += "originalClientY" in n ? n.originalClientY : n.clientY, e.clientX += n.clientX, e.clientY += n.clientY;
  }
  return t ? {
    clientX: e.clientX / t,
    clientY: e.clientY / t,
    originalClientX: e.originalClientX / t,
    originalClientY: e.originalClientY / t
  } : e;
}
var zm = /* @__PURE__ */ function() {
  function r(e) {
    this.prevClients = [], this.startClients = [], this.movement = 0, this.length = 0, this.startClients = e, this.prevClients = e, this.length = e.length;
  }
  var t = r.prototype;
  return t.getAngle = function(e) {
    return e === void 0 && (e = this.prevClients), Gm(e);
  }, t.getRotation = function(e) {
    return e === void 0 && (e = this.prevClients), Gm(e) - Gm(this.startClients);
  }, t.getPosition = function(e, i) {
    e === void 0 && (e = this.prevClients);
    var n = xw(e || this.prevClients, this.prevClients, this.startClients), s = n.deltaX, a = n.deltaY;
    return this.movement += Math.sqrt(s * s + a * a), this.prevClients = e, n;
  }, t.getPositions = function(e) {
    e === void 0 && (e = this.prevClients);
    var i = this.prevClients;
    return this.startClients.map(function(n, s) {
      return xw([e[s]], [i[s]], [n]);
    });
  }, t.getMovement = function(e) {
    var i = this.movement;
    if (!e)
      return i;
    var n = bc(e, this.length), s = bc(this.prevClients, this.length), a = n.clientX - s.clientX, o = n.clientY - s.clientY;
    return Math.sqrt(a * a + o * o) + i;
  }, t.getDistance = function(e) {
    return e === void 0 && (e = this.prevClients), Hm(e);
  }, t.getScale = function(e) {
    return e === void 0 && (e = this.prevClients), Hm(e) / Hm(this.startClients);
  }, t.move = function(e, i) {
    this.startClients.forEach(function(n) {
      n.clientX -= e, n.clientY -= i;
    });
  }, r;
}(), Ew = ["textarea", "input"], q5 = /* @__PURE__ */ function(r) {
  $5(t, r);
  function t(i, n) {
    n === void 0 && (n = {});
    var s = r.call(this) || this;
    s.options = {}, s.flag = !1, s.pinchFlag = !1, s.data = {}, s.isDrag = !1, s.isPinch = !1, s.isMouse = !1, s.isTouch = !1, s.clientStores = [], s.targets = [], s.prevTime = 0, s.doubleFlag = !1, s._dragFlag = !1, s._isMouseEvent = !1, s._isSecondaryButton = !1, s._preventMouseEvent = !1, s.onDragStart = function(d, p) {
      if (p === void 0 && (p = !0), !(!s.flag && d.cancelable === !1)) {
        var g = s.options, v = g.container, m = g.pinchOutside, _ = g.preventWheelClick, y = g.preventRightClick, b = g.preventDefault, x = g.checkInput, w = g.preventClickEventOnDragStart, E = g.preventClickEventOnDrag, R = g.preventClickEventByCondition, C = s.isTouch, P = !s.flag;
        if (s._isSecondaryButton = d.which === 3 || d.button === 2, _ && (d.which === 2 || d.button === 1) || y && (d.which === 3 || d.button === 2))
          return s.stop(), !1;
        if (P) {
          var N = document.activeElement, M = d.target;
          if (M) {
            var A = M.tagName.toLowerCase(), k = Ew.indexOf(A) > -1, H = M.isContentEditable;
            if (k || H) {
              if (x || N === M || N && H && N.isContentEditable && N.contains(M))
                return !1;
            } else if ((b || d.type === "touchstart") && N) {
              var L = N.tagName;
              (N.isContentEditable || Ew.indexOf(L) > -1) && N.blur();
            }
            (w || E || R) && ei(window, "click", s._onClick, !0);
          }
          s.clientStores = [new zm(op(d))], s.flag = !0, s.isDrag = !1, s._dragFlag = !0, s.data = {}, s.doubleFlag = mv() - s.prevTime < 200, s._isMouseEvent = W5(d), !s._isMouseEvent && s._preventMouseEvent && (s._preventMouseEvent = !1);
          var U = s._preventMouseEvent || s.emit("dragStart", Je(Je({
            data: s.data,
            datas: s.data,
            inputEvent: d,
            isMouseEvent: s._isMouseEvent,
            isSecondaryButton: s._isSecondaryButton,
            isTrusted: p,
            isDouble: s.doubleFlag
          }, s.getCurrentStore().getPosition()), {
            preventDefault: function() {
              d.preventDefault();
            },
            preventDrag: function() {
              s._dragFlag = !1;
            }
          }));
          U === !1 && s.stop(), s._isMouseEvent && s.flag && b && d.preventDefault();
        }
        if (!s.flag)
          return !1;
        var V = 0;
        if (P ? (s._attchDragEvent(), C && m && (V = setTimeout(function() {
          ei(v, "touchstart", s.onDragStart, {
            passive: !1
          });
        }))) : C && m && Dr(v, "touchstart", s.onDragStart), s.flag && X5(d)) {
          if (clearTimeout(V), P && d.touches.length !== d.changedTouches.length)
            return;
          s.pinchFlag || s.onPinchStart(d);
        }
      }
    }, s.onDrag = function(d, p) {
      if (!!s.flag) {
        var g = s.options.preventDefault;
        !s._isMouseEvent && g && d.preventDefault();
        var v = op(d), m = s.moveClients(v, d, !1);
        if (s._dragFlag) {
          if (s.pinchFlag || m.deltaX || m.deltaY) {
            var _ = s._preventMouseEvent || s.emit("drag", Je(Je({}, m), {
              isScroll: !!p,
              inputEvent: d
            }));
            if (_ === !1) {
              s.stop();
              return;
            }
          }
          s.pinchFlag && s.onPinch(d, v);
        }
        s.getCurrentStore().getPosition(v, !0);
      }
    }, s.onDragEnd = function(d) {
      if (!!s.flag) {
        var p = s.options, g = p.pinchOutside, v = p.container, m = p.preventClickEventOnDrag, _ = p.preventClickEventOnDragStart, y = p.preventClickEventByCondition, b = s.isDrag;
        (m || _ || y) && requestAnimationFrame(function() {
          s._allowClickEvent();
        }), !y && !_ && m && !b && s._allowClickEvent(), s.isTouch && g && Dr(v, "touchstart", s.onDragStart), s.pinchFlag && s.onPinchEnd(d);
        var x = d != null && d.touches ? op(d) : [], w = x.length;
        w === 0 || !s.options.keepDragging ? s.flag = !1 : s._addStore(new zm(x));
        var E = s._getPosition(), R = mv(), C = !b && s.doubleFlag;
        s.prevTime = b || C ? 0 : R, s.flag || (s._dettachDragEvent(), s._preventMouseEvent || s.emit("dragEnd", Je({
          data: s.data,
          datas: s.data,
          isDouble: C,
          isDrag: b,
          isClick: !b,
          isMouseEvent: s._isMouseEvent,
          isSecondaryButton: s._isSecondaryButton,
          inputEvent: d
        }, E)), s.clientStores = [], s._isMouseEvent || (s._preventMouseEvent = !0, requestAnimationFrame(function() {
          requestAnimationFrame(function() {
            s._preventMouseEvent = !1;
          });
        })));
      }
    }, s.onBlur = function() {
      s.onDragEnd();
    }, s._allowClickEvent = function() {
      Dr(window, "click", s._onClick, !0);
    }, s._onClick = function(d) {
      s._preventMouseEvent = !1;
      var p = s.options.preventClickEventByCondition;
      p != null && p(d) || (d.stopPropagation(), d.preventDefault());
    }, s._onContextMenu = function(d) {
      var p = s.options;
      p.preventRightClick ? s.onDragEnd(d) : d.preventDefault();
    }, s._passCallback = function() {
    };
    var a = [].concat(i);
    s.options = Je({
      checkInput: !1,
      container: a.length > 1 ? window : a[0],
      preventRightClick: !0,
      preventWheelClick: !0,
      preventClickEventOnDragStart: !1,
      preventClickEventOnDrag: !1,
      preventClickEventByCondition: null,
      preventDefault: !0,
      checkWindowBlur: !1,
      keepDragging: !1,
      pinchThreshold: 0,
      events: ["touch", "mouse"]
    }, n);
    var o = s.options, u = o.container, h = o.events, l = o.checkWindowBlur;
    if (s.isTouch = h.indexOf("touch") > -1, s.isMouse = h.indexOf("mouse") > -1, s.targets = a, s.isMouse && (a.forEach(function(d) {
      ei(d, "mousedown", s.onDragStart), ei(d, "mousemove", s._passCallback);
    }), ei(u, "contextmenu", s._onContextMenu)), l && ei(window, "blur", s.onBlur), s.isTouch) {
      var c = {
        passive: !1
      };
      a.forEach(function(d) {
        ei(d, "touchstart", s.onDragStart, c), ei(d, "touchmove", s._passCallback, c);
      });
    }
    return s;
  }
  var e = t.prototype;
  return e.stop = function() {
    this.isDrag = !1, this.data = {}, this.clientStores = [], this.pinchFlag = !1, this.doubleFlag = !1, this.prevTime = 0, this.flag = !1, this._allowClickEvent(), this._dettachDragEvent();
  }, e.getMovement = function(i) {
    return this.getCurrentStore().getMovement(i) + this.clientStores.slice(1).reduce(function(n, s) {
      return n + s.movement;
    }, 0);
  }, e.isDragging = function() {
    return this.isDrag;
  }, e.isFlag = function() {
    return this.flag;
  }, e.isPinchFlag = function() {
    return this.pinchFlag;
  }, e.isDoubleFlag = function() {
    return this.doubleFlag;
  }, e.isPinching = function() {
    return this.isPinch;
  }, e.scrollBy = function(i, n, s, a) {
    a === void 0 && (a = !0), this.flag && (this.clientStores[0].move(i, n), a && this.onDrag(s, !0));
  }, e.move = function(i, n) {
    var s = i[0], a = i[1], o = this.getCurrentStore(), u = o.prevClients;
    return this.moveClients(u.map(function(h) {
      var l = h.clientX, c = h.clientY;
      return {
        clientX: l + s,
        clientY: c + a,
        originalClientX: l,
        originalClientY: c
      };
    }), n, !0);
  }, e.triggerDragStart = function(i) {
    this.onDragStart(i, !1);
  }, e.setEventData = function(i) {
    var n = this.data;
    for (var s in i)
      n[s] = i[s];
    return this;
  }, e.setEventDatas = function(i) {
    return this.setEventData(i);
  }, e.getCurrentEvent = function(i) {
    return Je(Je({
      data: this.data,
      datas: this.data
    }, this._getPosition()), {
      movement: this.getMovement(),
      isDrag: this.isDrag,
      isPinch: this.isPinch,
      isScroll: !1,
      inputEvent: i
    });
  }, e.getEventData = function() {
    return this.data;
  }, e.getEventDatas = function() {
    return this.data;
  }, e.unset = function() {
    var i = this, n = this.targets, s = this.options.container;
    this.off(), Dr(window, "blur", this.onBlur), this.isMouse && (n.forEach(function(a) {
      Dr(a, "mousedown", i.onDragStart);
    }), Dr(s, "contextmenu", this._onContextMenu)), this.isTouch && (n.forEach(function(a) {
      Dr(a, "touchstart", i.onDragStart);
    }), Dr(s, "touchstart", this.onDragStart)), this._dettachDragEvent();
  }, e.onPinchStart = function(i) {
    var n = this.options.pinchThreshold;
    if (!(this.isDrag && this.getMovement() > n)) {
      var s = new zm(op(i));
      this.pinchFlag = !0, this._addStore(s);
      var a = this.emit("pinchStart", Je(Je({
        data: this.data,
        datas: this.data,
        angle: s.getAngle(),
        touches: this.getCurrentStore().getPositions()
      }, s.getPosition()), {
        inputEvent: i
      }));
      a === !1 && (this.pinchFlag = !1);
    }
  }, e.onPinch = function(i, n) {
    if (!(!this.flag || !this.pinchFlag || n.length < 2)) {
      var s = this.getCurrentStore();
      this.isPinch = !0, this.emit("pinch", Je(Je({
        data: this.data,
        datas: this.data,
        movement: this.getMovement(n),
        angle: s.getAngle(n),
        rotation: s.getRotation(n),
        touches: s.getPositions(n),
        scale: s.getScale(n),
        distance: s.getDistance(n)
      }, s.getPosition(n)), {
        inputEvent: i
      }));
    }
  }, e.onPinchEnd = function(i) {
    if (!!this.pinchFlag) {
      var n = this.isPinch;
      this.isPinch = !1, this.pinchFlag = !1;
      var s = this.getCurrentStore();
      this.emit("pinchEnd", Je(Je({
        data: this.data,
        datas: this.data,
        isPinch: n,
        touches: s.getPositions()
      }, s.getPosition()), {
        inputEvent: i
      }));
    }
  }, e.getCurrentStore = function() {
    return this.clientStores[0];
  }, e.moveClients = function(i, n, s) {
    var a = this._getPosition(i, s);
    return (a.deltaX || a.deltaY) && (this.isDrag = !0), Je(Je({
      data: this.data,
      datas: this.data
    }, a), {
      movement: this.getMovement(i),
      isDrag: this.isDrag,
      isPinch: this.isPinch,
      isScroll: !1,
      isMouseEvent: this._isMouseEvent,
      isSecondaryButton: this._isSecondaryButton,
      inputEvent: n
    });
  }, e._addStore = function(i) {
    this.clientStores.splice(0, 0, i);
  }, e._getPosition = function(i, n) {
    var s = this.getCurrentStore(), a = s.getPosition(i, n), o = this.clientStores.slice(1).reduce(function(l, c) {
      var d = c.getPosition();
      return l.distX += d.distX, l.distY += d.distY, l;
    }, a), u = o.distX, h = o.distY;
    return Je(Je({}, a), {
      distX: u,
      distY: h
    });
  }, e._attchDragEvent = function() {
    var i = this.options.container, n = {
      passive: !1
    };
    this.isMouse && (ei(i, "mousemove", this.onDrag), ei(i, "mouseup", this.onDragEnd)), this.isTouch && (ei(i, "touchmove", this.onDrag, n), ei(i, "touchend", this.onDragEnd, n), ei(i, "touchcancel", this.onDragEnd, n));
  }, e._dettachDragEvent = function() {
    var i = this.options.container;
    this.isMouse && (Dr(i, "mousemove", this.onDrag), Dr(i, "mouseup", this.onDragEnd)), this.isTouch && (Dr(i, "touchstart", this.onDragStart), Dr(i, "touchmove", this.onDrag), Dr(i, "touchend", this.onDragEnd), Dr(i, "touchcancel", this.onDragEnd));
  }, t;
}(Qb);
const Z5 = q5;
function J5(r) {
  for (var t = 5381, e = r.length; e; )
    t = t * 33 ^ r.charCodeAt(--e);
  return t >>> 0;
}
var K5 = J5;
function Q5(r) {
  return K5(r).toString(36);
}
function tD(r) {
  if (r && r.getRootNode) {
    var t = r.getRootNode();
    if (t.nodeType === 11)
      return t;
  }
}
function eD(r, t, e) {
  return e.original ? t : t.replace(/([^};{\s}][^};{]*|^\s*){/mg, function(i, n) {
    var s = n.trim();
    return (s ? oo(s) : [""]).map(function(a) {
      var o = a.trim();
      return o.indexOf("@") === 0 ? o : o.indexOf(":global") > -1 ? o.replace(/\:global/g, "") : o.indexOf(":host") > -1 ? "" + o.replace(/\:host/g, "." + r) : o ? "." + r + " " + o : "." + r;
    }).join(", ") + " {";
  });
}
function rD(r, t, e, i) {
  var n = document.createElement("style");
  return n.setAttribute("type", "text/css"), n.setAttribute("data-styled-id", r), e.nonce && n.setAttribute("nonce", e.nonce), n.innerHTML = eD(r, t, e), (i || document.head || document.body).appendChild(n), n;
}
function iD(r) {
  var t = "rCS" + Q5(r), e = 0, i;
  return {
    className: t,
    inject: function(n, s) {
      s === void 0 && (s = {});
      var a = tD(n), o = e === 0, u;
      return (a || o) && (u = rD(t, r, s, a)), o && (i = u), a || ++e, {
        destroy: function() {
          a ? (a.removeChild(u), u = null) : (e > 0 && --e, e === 0 && i && (i.parentNode.removeChild(i), i = null));
        }
      };
    }
  };
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Oy = function(r, t) {
  return Oy = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, Oy(r, t);
};
function LI(r, t) {
  Oy(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Ay = function() {
  return Ay = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, Ay.apply(this, arguments);
};
function nD(r, t) {
  var e = {};
  for (var i in r)
    Object.prototype.hasOwnProperty.call(r, i) && t.indexOf(i) < 0 && (e[i] = r[i]);
  if (r != null && typeof Object.getOwnPropertySymbols == "function")
    for (var n = 0, i = Object.getOwnPropertySymbols(r); n < i.length; n++)
      t.indexOf(i[n]) < 0 && Object.prototype.propertyIsEnumerable.call(r, i[n]) && (e[i[n]] = r[i[n]]);
  return e;
}
var sD = /* @__PURE__ */ function(r) {
  LI(t, r);
  function t() {
    var i = r !== null && r.apply(this, arguments) || this;
    return i.injectResult = null, i.tag = "div", i;
  }
  var e = t.prototype;
  return e.render = function() {
    var i = this.props, n = i.className, s = n === void 0 ? "" : n;
    i.cspNonce;
    var a = i.portalContainer, o = nD(i, ["className", "cspNonce", "portalContainer"]), u = this.injector.className, h = this.tag, l = {};
    return o5.indexOf("simple") > -1 && a && (l = {
      portalContainer: a
    }), Si(h, Ay({
      ref: Pn(this, "element"),
      "data-styled-id": u,
      className: s + " " + u
    }, l, o));
  }, e.componentDidMount = function() {
    this.injectResult = this.injector.inject(this.element, {
      nonce: this.props.cspNonce
    });
  }, e.componentWillUnmount = function() {
    this.injectResult.destroy(), this.injectResult = null;
  }, e.getElement = function() {
    return this.element;
  }, t;
}(Xb);
function DI(r, t) {
  var e = iD(t);
  return /* @__PURE__ */ function(i) {
    LI(n, i);
    function n() {
      var s = i !== null && i.apply(this, arguments) || this;
      return s.injector = e, s.tag = r, s;
    }
    return n;
  }(sD);
}
var Fy = function(r, t) {
  return Fy = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n]);
  }, Fy(r, t);
};
function xd(r, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  Fy(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var z = function() {
  return z = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, z.apply(this, arguments);
};
function aD(r, t) {
  var e = {};
  for (var i in r)
    Object.prototype.hasOwnProperty.call(r, i) && t.indexOf(i) < 0 && (e[i] = r[i]);
  if (r != null && typeof Object.getOwnPropertySymbols == "function")
    for (var n = 0, i = Object.getOwnPropertySymbols(r); n < i.length; n++)
      t.indexOf(i[n]) < 0 && Object.prototype.propertyIsEnumerable.call(r, i[n]) && (e[i[n]] = r[i[n]]);
  return e;
}
function oD(r, t, e, i) {
  var n = arguments.length, s = n < 3 ? t : i === null ? i = Object.getOwnPropertyDescriptor(t, e) : i, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
    s = Reflect.decorate(r, t, e, i);
  else
    for (var o = r.length - 1; o >= 0; o--)
      (a = r[o]) && (s = (n < 3 ? a(s) : n > 3 ? a(t, e, s) : a(t, e)) || s);
  return n > 3 && s && Object.defineProperty(t, e, s), s;
}
function Ot(r, t, e) {
  if (e || arguments.length === 2)
    for (var i = 0, n = t.length, s; i < n; i++)
      (s || !(i in t)) && (s || (s = Array.prototype.slice.call(t, 0, i)), s[i] = t[i]);
  return r.concat(s || Array.prototype.slice.call(t));
}
function Ed(r, t) {
  var e;
  return z({
    events: {},
    props: (e = {}, e[r] = Boolean, e),
    name: r
  }, t);
}
function uD(r, t) {
  return 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32 * r, 'px" height="').concat(32 * r, 'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t, 'deg);transform-origin: 16px 16px"></path></svg>');
}
function hD(r) {
  var t = uD(1, r), e = Math.round(r / 45) * 45 % 180, i = "ns-resize";
  return e === 135 ? i = "nwse-resize" : e === 45 ? i = "nesw-resize" : e === 90 && (i = "ew-resize"), "cursor:".concat(i, ";cursor: url('").concat(t, "') 16 16, ").concat(i, ";");
}
var yv = f5(), UI = yv.browser.webkit, GI = UI && function() {
  var r = typeof window > "u" ? {
    userAgent: ""
  } : window.navigator, t = /applewebkit\/([^\s]+)/g.exec(r.userAgent.toLowerCase());
  return t ? parseFloat(t[1]) < 605 : !1;
}(), lD = yv.browser.name === "firefox", cD = parseInt(yv.browser.webkitVersion, 10) >= 612 || parseInt(yv.browser.version, 10) >= 15, t1 = "moveable-", fD = `
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function(r) {
  return `
.direction[data-rotation="`.concat(r, `"] {
	`).concat(hD(r), `
}
`);
}).join(`
`), `
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(GI ? `:global svg *:before {
	content:"";
	transform-origin: inherit;
}` : "", `
`), dD = [[0, 1, 2], [1, 0, 3], [2, 0, 3], [3, 1, 2]], pD = 1e-4, Lr = 1e-7, up = 1e-9, My = Math.pow(10, 10), ww = -My, vD = ["n", "w", "s", "e"], e1 = ["n", "w", "s", "e", "nw", "ne", "sw", "se"], gD = {
  n: [0, -1],
  e: [1, 0],
  s: [0, 1],
  w: [-1, 0],
  nw: [-1, -1],
  ne: [1, -1],
  sw: [-1, 1],
  se: [1, 1]
}, r1 = {
  n: [0, 1],
  e: [1, 3],
  s: [3, 2],
  w: [2, 0],
  nw: [0],
  ne: [1],
  sw: [2],
  se: [3]
}, HI = {
  n: 0,
  s: 180,
  w: 270,
  e: 90,
  nw: 315,
  ne: 45,
  sw: 225,
  se: 135
}, zI = ["isMoveableElement", "updateRect", "updateTarget", "destroy", "dragStart", "isInside", "hitTest", "setState", "getRect", "request", "isDragging", "getManager", "forceUpdate", "waitToChangeTarget"];
function wd(r, t, e, i, n, s) {
  s === void 0 && (s = "draggable");
  var a = t.gestos[s].move(e, r.inputEvent), o = a.originalDatas || a.datas, u = o[s] || (o[s] = {});
  return z(z({}, n ? aR(t, a) : a), {
    isPinch: !!i,
    parentEvent: !0,
    datas: u,
    originalDatas: r.originalDatas
  });
}
var _l = /* @__PURE__ */ function() {
  function r(e) {
    var i;
    e === void 0 && (e = "draggable"), this.ableName = e, this.prevX = 0, this.prevY = 0, this.startX = 0, this.startY = 0, this.isDrag = !1, this.isFlag = !1, this.datas = {
      draggable: {}
    }, this.datas = (i = {}, i[e] = {}, i);
  }
  var t = r.prototype;
  return t.dragStart = function(e, i) {
    this.isDrag = !1, this.isFlag = !1;
    var n = i.originalDatas;
    return this.datas = n, n[this.ableName] || (n[this.ableName] = {}), z(z({}, this.move(e, i.inputEvent)), {
      type: "dragstart"
    });
  }, t.drag = function(e, i) {
    return this.move([e[0] - this.prevX, e[1] - this.prevY], i);
  }, t.move = function(e, i) {
    var n, s;
    return this.isFlag ? (n = this.prevX + e[0], s = this.prevY + e[1], (e[0] || e[1]) && (this.isDrag = !0)) : (this.prevX = e[0], this.prevY = e[1], this.startX = e[0], this.startY = e[1], n = e[0], s = e[1], this.isFlag = !0), this.prevX = n, this.prevY = s, {
      type: "drag",
      clientX: n,
      clientY: s,
      inputEvent: i,
      isDrag: this.isDrag,
      distX: n - this.startX,
      distY: s - this.startY,
      deltaX: e[0],
      deltaY: e[1],
      datas: this.datas[this.ableName],
      originalDatas: this.datas,
      parentEvent: !0,
      parentGesto: this
    };
  }, r;
}();
function jI(r, t) {
  var e = t.clientX, i = t.clientY, n = t.datas, s = r.state, a = s.moveableClientRect, o = s.rootMatrix, u = s.is3d, h = s.pos1, l = a.left, c = a.top, d = u ? 4 : 3, p = kt(Ku(o, [e - l, i - c], d), h), g = p[0], v = p[1], m = Ln({
    datas: n,
    distX: g,
    distY: v
  }), _ = m[0], y = m[1];
  return [_, y];
}
function lu(r, t) {
  var e = t.datas, i = r.state, n = i.allMatrix, s = i.beforeMatrix, a = i.is3d, o = i.left, u = i.top, h = i.origin, l = i.offsetMatrix, c = i.targetMatrix, d = i.transformOrigin, p = a ? 4 : 3;
  e.is3d = a, e.matrix = n, e.targetMatrix = c, e.beforeMatrix = s, e.offsetMatrix = l, e.transformOrigin = d, e.inverseMatrix = Fn(n, p), e.inverseBeforeMatrix = Fn(s, p), e.absoluteOrigin = su(te([o, u], h), p), e.startDragBeforeDist = Tr(e.inverseBeforeMatrix, e.absoluteOrigin, p), e.startDragDist = Tr(e.inverseMatrix, e.absoluteOrigin, p);
}
function mD(r) {
  return xv(r.datas.beforeTransform, [50, 50], 100, 100).direction;
}
function Lg(r, t) {
  var e = r.datas, i = r.originalDatas.beforeRenderable, n = e.transformIndex, s = i.nextTransforms, a = s.length, o = i.nextTransformAppendedIndexes, u = 0;
  n === -1 ? (u = s.length, e.transformIndex = u) : Na(o, function(d) {
    return d.index === n && d.functionName === t;
  }) ? u = n : u = n + o.filter(function(d) {
    return d.index < n;
  }).length;
  var h = VD(s, u), l = h.targetFunction, c = t === "rotate" ? "rotateZ" : t;
  e.beforeFunctionTexts = h.beforeFunctionTexts, e.afterFunctionTexts = h.afterFunctionTexts, e.beforeTransform = h.beforeFunctionMatrix, e.beforeTransform2 = h.beforeFunctionMatrix2, e.targetTansform = h.targetFunctionMatrix, e.afterTransform = h.afterFunctionMatrix, e.afterTransform2 = h.afterFunctionMatrix2, e.targetAllTransform = h.allFunctionMatrix, l.functionName === c ? (e.afterFunctionTexts.splice(0, 1), e.isAppendTransform = !1) : a > u && (e.isAppendTransform = !0, i.nextTransformAppendedIndexes = Ot(Ot([], o, !0), [{
    functionName: t,
    index: u,
    isAppend: !0
  }], !1));
}
function Dg(r, t, e) {
  return "".concat(r.beforeFunctionTexts.join(" "), " ").concat(r.isAppendTransform ? e : t, " ").concat(r.afterFunctionTexts.join(" "));
}
function _D(r) {
  var t = r.datas, e = r.distX, i = r.distY, n = VI({
    datas: t,
    distX: e,
    distY: i
  }), s = n[0], a = n[1], o = $I(t, m5([s, a], 4));
  return Tr(o, su([0, 0, 0], 4), 4);
}
function $I(r, t, e) {
  var i = r.beforeTransform, n = r.afterTransform, s = r.beforeTransform2, a = r.afterTransform2, o = r.targetAllTransform, u = e ? we(o, t, 4) : we(t, o, 4), h = we(Fn(e ? s : i, 4), u, 4), l = we(h, Fn(e ? a : n, 4), 4);
  return l;
}
function VI(r) {
  var t = r.datas, e = r.distX, i = r.distY, n = t.inverseBeforeMatrix, s = t.is3d, a = t.startDragBeforeDist, o = t.absoluteOrigin, u = s ? 4 : 3;
  return kt(Tr(n, te(o, [e, i]), u), a);
}
function Ln(r, t) {
  var e = r.datas, i = r.distX, n = r.distY, s = e.inverseBeforeMatrix, a = e.inverseMatrix, o = e.is3d, u = e.startDragBeforeDist, h = e.startDragDist, l = e.absoluteOrigin, c = o ? 4 : 3;
  return kt(Tr(t ? s : a, te(l, [i, n]), c), t ? u : h);
}
function yD(r, t) {
  var e = r.datas, i = r.distX, n = r.distY, s = e.beforeMatrix, a = e.matrix, o = e.is3d, u = e.startDragBeforeDist, h = e.startDragDist, l = e.absoluteOrigin, c = o ? 4 : 3;
  return kt(Tr(t ? s : a, te(t ? u : h, [i, n]), c), l);
}
function bD(r, t, e, i, n, s) {
  return i === void 0 && (i = t), n === void 0 && (n = e), s === void 0 && (s = [0, 0]), r ? r.map(function(a, o) {
    var u = md(a), h = u.value, l = u.unit, c = o ? n : i, d = o ? e : t;
    if (a === "%" || isNaN(h)) {
      var p = c ? s[o] / c : 0;
      return d * p;
    } else if (l !== "%")
      return h;
    return d * h / 100;
  }) : s;
}
function XI(r) {
  var t = [];
  return r[1] >= 0 && (r[0] >= 0 && t.push(3), r[0] <= 0 && t.push(2)), r[1] <= 0 && (r[0] >= 0 && t.push(1), r[0] <= 0 && t.push(0)), t;
}
function xD(r, t) {
  return XI(t).map(function(e) {
    return r[e];
  });
}
function ze(r, t) {
  var e = (t[0] + 1) / 2, i = (t[1] + 1) / 2, n = [qa(r[0][0], r[1][0], e, 1 - e), qa(r[0][1], r[1][1], e, 1 - e)], s = [qa(r[2][0], r[3][0], e, 1 - e), qa(r[2][1], r[3][1], e, 1 - e)];
  return [qa(n[0], s[0], i, 1 - i), qa(n[1], s[1], i, 1 - i)];
}
function ED(r, t, e, i, n, s) {
  var a = cu(t, e, i, n), o = ze(a, s), u = r[0] - o[0], h = r[1] - o[1];
  return [u, h];
}
function Td(r, t, e, i) {
  return we(r, n1(t, i, e), i);
}
function wD(r, t, e) {
  var i = r.transformOrigin, n = r.offsetMatrix, s = r.is3d, a = t.beforeTransform, o = t.afterTransform, u = s ? 4 : 3, h = Jb([e]);
  return Td(n, Mn(we(we(a, h, 4), o, 4), 4, u), i, u);
}
function TD(r, t) {
  var e = r.transformOrigin, i = r.offsetMatrix, n = r.is3d, s = r.targetMatrix, a = n ? 4 : 3;
  return Td(i, we(s, OI(t, a), a), e, a);
}
function Ug(r) {
  var t = Nl(r);
  return {
    setTransform: function(e, i) {
      i === void 0 && (i = -1), t.startTransforms = wr(e) ? e : Pa(e), ky(r, i);
    },
    setTransformIndex: function(e) {
      ky(r, e);
    }
  };
}
function Gg(r, t) {
  var e = Nl(r), i = e.startTransforms;
  ky(r, Ps(i, function(n) {
    return n.indexOf("".concat(t, "(")) === 0;
  }));
}
function ky(r, t) {
  var e = Nl(r), i = r.datas;
  if (i.transformIndex = t, t !== -1) {
    var n = e.startTransforms[t];
    if (!!n) {
      var s = eo([n]);
      i.startValue = s[0].functionValue;
    }
  }
}
function i1(r, t) {
  var e = Nl(r);
  e.nextTransforms = Pa(t);
}
function Nl(r) {
  return r.originalDatas.beforeRenderable;
}
function WI(r) {
  var t = r.originalDatas.beforeRenderable;
  return t.nextTransforms;
}
function Tw(r) {
  return WI(r).join(" ");
}
function Cw(r) {
  return Nl(r).nextStyle;
}
function YI(r, t, e, i, n) {
  i1(n, t);
  var s = Br.drag(r, wd(n, r.state, e, i, !1)), a = s ? s.transform : t;
  return z(z({
    transform: t,
    drag: s
  }, qc({
    transform: a
  }, n)), {
    afterTransform: a
  });
}
function qI(r, t, e, i, n) {
  var s = r.state, a = s.left, o = s.top, u = r.props.groupable, h = wD(r.state, n, t), l = u ? a : 0, c = u ? o : 0, d = ZI(r, e, h), p = kt(i, d);
  return kt(p, [l, c]);
}
function CD(r, t, e, i, n) {
  var s = qI(r, "scale(".concat(t.join(", "), ")"), e, i, n);
  return s;
}
function ID(r) {
  var t = r.state, e = t.width, i = t.height, n = t.transformOrigin;
  return [-1 + n[0] / (e / 2), -1 + n[1] / (i / 2)];
}
function ZI(r, t, e) {
  e === void 0 && (e = r.state.allMatrix);
  var i = r.state, n = i.width, s = i.height, a = i.is3d, o = a ? 4 : 3, u = [n / 2 * (1 + t[0]), s / 2 * (1 + t[1])];
  return vr(e, u, o);
}
function RD(r, t, e) {
  var i = e.fixedDirection, n = e.fixedPosition;
  return qI(r, "rotate(".concat(t, "deg)"), i, n, e);
}
function SD(r, t, e, i, n, s) {
  var a = r.props.groupable, o = r.state, u = o.transformOrigin, h = o.offsetMatrix, l = o.is3d, c = o.width, d = o.height, p = o.left, g = o.top, v = s.fixedDirection, m = s.nextTargetMatrix || o.targetMatrix, _ = l ? 4 : 3, y = bD(n, t, e, c, d, u), b = a ? p : 0, x = a ? g : 0, w = Td(h, m, y, _), E = ED(i, w, t, e, _, v);
  return kt(E, [b, x]);
}
function JI(r, t) {
  return ze(Qr(r.state), t);
}
function PD(r, t) {
  return [r[0] * t[0], r[1] * t[1]];
}
function St() {
  for (var r = [], t = 0; t < arguments.length; t++)
    r[t] = arguments[t];
  return wL.apply(void 0, Ot([t1], r, !1));
}
function KI(r) {
  r();
}
function ND(r) {
  return !r || r === "none" ? [1, 0, 0, 1, 0, 0] : en(r) ? r : Jb(r);
}
function n1(r, t, e) {
  return Ty(t, Yc(e, t), r, Yc(e.map(function(i) {
    return -i;
  }), t));
}
function OD(r, t, e) {
  if (t === "%") {
    var i = s1(r.ownerSVGElement);
    return i[e ? "width" : "height"] / 100;
  }
  return 1;
}
function AD(r) {
  var t = By(rn(r, ":before"));
  return t.map(function(e, i) {
    var n = md(e), s = n.value, a = n.unit;
    return s * OD(r, a, i === 0);
  });
}
function By(r) {
  var t = r.transformOrigin;
  return t ? t.split(" ") : ["0", "0"];
}
function QI(r, t) {
  t === void 0 && (t = rn(r));
  var e = t.transform;
  if (e && e !== "none")
    return t.transform;
  if ("transform" in r) {
    var i = r.transform, n = i.baseVal;
    if (!n)
      return "";
    var s = n.length;
    if (!s)
      return "";
    for (var a = [], o = function(h) {
      var l = n[h].matrix;
      a.push("matrix(".concat(["a", "b", "c", "d", "e", "f"].map(function(c) {
        return l[c];
      }).join(", "), ")"));
    }, u = 0; u < s; ++u)
      o(u);
    return a.join(" ");
  }
  return "";
}
function bv(r, t, e) {
  var i, n, s = document.body, a = !1, o, u;
  if (!r || e)
    o = r;
  else {
    var h = (i = r == null ? void 0 : r.assignedSlot) === null || i === void 0 ? void 0 : i.parentElement, l = r.parentElement;
    h ? (a = !0, u = l, o = h) : o = l;
  }
  for (var c = !1, d = r === t || o === t, p = "relative"; o && o !== s; ) {
    t === o && (d = !0);
    var g = rn(o), v = o.tagName.toLowerCase(), m = QI(o, g), _ = g.willChange;
    if (p = g.position, v === "svg" || p !== "static" || m && m !== "none" || _ === "transform")
      break;
    var y = (n = r == null ? void 0 : r.assignedSlot) === null || n === void 0 ? void 0 : n.parentNode, b = o.parentNode;
    y && (a = !0, u = b);
    var x = y || b;
    if (x && x.nodeType === 11) {
      o = x.host, c = !0;
      break;
    }
    o = x, p = "relative";
  }
  return {
    hasSlot: a,
    parentSlotElement: u,
    isCustomElement: c,
    isStatic: p === "static",
    isEnd: d || !o || o === s,
    offsetParent: o || s
  };
}
function FD(r, t, e) {
  var i, n = r.tagName.toLowerCase(), s = r.offsetLeft, a = r.offsetTop, o = kg(s), u = !o, h, l;
  return !u && n !== "svg" ? (h = GI ? AD(r) : By(e).map(function(c) {
    return parseFloat(c);
  }), l = h.slice(), u = !0, i = LD(r, h, r === t && t.tagName.toLowerCase() === "g"), s = i[0], a = i[1], h[0] = i[2], h[1] = i[3]) : (h = By(e).map(function(c) {
    return parseFloat(c);
  }), l = h.slice()), {
    tagName: n,
    isSVG: o,
    hasOffset: u,
    offset: [s || 0, a || 0],
    origin: h,
    targetOrigin: l
  };
}
function tR(r, t, e) {
  e === void 0 && (e = rn(r));
  var i = rn(document.body), n = i.position;
  if (!t && (!n || n === "static"))
    return [0, 0];
  var s = parseInt(i.marginLeft, 10), a = parseInt(i.marginTop, 10);
  return e.position === "absolute" && ((e.top !== "auto" || e.bottom !== "auto") && (a = 0), (e.left !== "auto" || e.right !== "auto") && (s = 0)), [s, a];
}
function Ly(r) {
  r.forEach(function(t) {
    var e = t.matrix;
    e && (t.matrix = Mn(e, 3, 4));
  });
}
function MD() {
  return [document.documentElement.scrollLeft || document.body.scrollLeft, document.documentElement.scrollTop || document.body.scrollTop];
}
function kD(r) {
  for (var t = r.parentElement, e = !1; t; ) {
    var i = rn(t).transform;
    if (i && i !== "none") {
      e = !0;
      break;
    }
    if (t === document.body)
      break;
    t = t.parentElement;
  }
  return {
    fixedContainer: t || document.body,
    hasTransform: e
  };
}
function Hg(r, t) {
  return t === void 0 && (t = r.length > 9), "".concat(t ? "matrix3d" : "matrix", "(").concat(NI(r, !t).join(","), ")");
}
function s1(r) {
  var t = r.clientWidth, e = r.clientHeight;
  if (!r)
    return {
      x: 0,
      y: 0,
      width: 0,
      height: 0,
      clientWidth: t,
      clientHeight: e
    };
  var i = r.viewBox, n = i && i.baseVal || {
    x: 0,
    y: 0,
    width: 0,
    height: 0
  };
  return {
    x: n.x,
    y: n.y,
    width: n.width || t,
    height: n.height || e,
    clientWidth: t,
    clientHeight: e
  };
}
function BD(r, t) {
  var e = s1(r), i = e.width, n = e.height, s = e.clientWidth, a = e.clientHeight, o = s / i, u = a / n, h = r.preserveAspectRatio.baseVal, l = h.align, c = h.meetOrSlice, d = [0, 0], p = [o, u], g = [0, 0];
  if (l !== 1) {
    var v = (l - 2) % 3, m = Math.floor((l - 2) / 3);
    d[0] = i * v / 2, d[1] = n * m / 2;
    var _ = c === 2 ? Math.max(u, o) : Math.min(o, u);
    p[0] = _, p[1] = _, g[0] = (s - i) / 2 * v, g[1] = (a - n) / 2 * m;
  }
  var y = OI(p, t);
  return y[t * (t - 1)] = g[0], y[t * (t - 1) + 1] = g[1], n1(y, t, d);
}
function LD(r, t, e) {
  if (!r.getBBox || !e && r.tagName.toLowerCase() === "g")
    return [0, 0, 0, 0];
  var i = r.getBBox(), n = s1(r.ownerSVGElement), s = i.x - n.x, a = i.y - n.y;
  return [s, a, t[0] - s, t[1] - a];
}
function vr(r, t, e) {
  return Tr(r, su(t, e), e);
}
function cu(r, t, e, i) {
  return [[0, 0], [t, 0], [0, e], [t, e]].map(function(n) {
    return vr(r, n, i);
  });
}
function Pi(r) {
  var t = r.map(function(h) {
    return h[0];
  }), e = r.map(function(h) {
    return h[1];
  }), i = Math.min.apply(Math, t), n = Math.min.apply(Math, e), s = Math.max.apply(Math, t), a = Math.max.apply(Math, e), o = s - i, u = a - n;
  return {
    left: i,
    top: n,
    right: s,
    bottom: a,
    width: o,
    height: u
  };
}
function Iw(r, t, e, i) {
  var n = cu(r, t, e, i);
  return Pi(n);
}
function DD(r, t, e, i, n) {
  var s, a = r.target, o = r.origin, u = t.matrix, h = rR(a), l = h.offsetWidth, c = h.offsetHeight, d = e.getBoundingClientRect(), p = [0, 0];
  e === document.body && (p = tR(a, !0));
  for (var g = a.getBoundingClientRect(), v = g.left - d.left + e.scrollLeft - (e.clientLeft || 0) + p[0], m = g.top - d.top + e.scrollTop - (e.clientTop || 0) + p[1], _ = g.width, y = g.height, b = Ty(i, n, u), x = Iw(b, l, c, i), w = x.left, E = x.top, R = x.width, C = x.height, P = vr(b, o, i), N = kt(P, [w, E]), M = [v + N[0] * _ / R, m + N[1] * y / C], A = [0, 0], k = 0; ++k < 10; ) {
    var H = Fn(n, i);
    s = kt(vr(H, M, i), vr(H, P, i)), A[0] = s[0], A[1] = s[1];
    var L = Ty(i, n, Yc(A, i), u), U = Iw(L, l, c, i), V = U.left, K = U.top, G = V - v, B = K - m;
    if (Math.abs(G) < 2 && Math.abs(B) < 2)
      break;
    M[0] -= G, M[1] -= B;
  }
  return A.map(function(W) {
    return Math.round(W);
  });
}
function UD(r, t, e) {
  var i = r.length === 16, n = i ? 4 : 3, s = t.map(function(u) {
    return vr(r, u, n);
  }), a = e.left, o = e.top;
  return s.map(function(u) {
    return [u[0] + a, u[1] + o];
  });
}
function xv(r, t, e, i) {
  var n = r.length === 16, s = n ? 4 : 3, a = cu(r, e, i, s), o = a[0], u = o[0], h = o[1], l = a[1], c = l[0], d = l[1], p = a[2], g = p[0], v = p[1], m = a[3], _ = m[0], y = m[1], b = vr(r, t, s), x = b[0], w = b[1], E = Math.min(u, c, g, _), R = Math.min(h, d, v, y), C = Math.max(u, c, g, _), P = Math.max(h, d, v, y);
  u = u - E || 0, c = c - E || 0, g = g - E || 0, _ = _ - E || 0, h = h - R || 0, d = d - R || 0, v = v - R || 0, y = y - R || 0, x = x - E || 0, w = w - R || 0;
  var N = _y(a);
  return {
    left: E,
    top: R,
    right: C,
    bottom: P,
    origin: [x, w],
    pos1: [u, h],
    pos2: [c, d],
    pos3: [g, v],
    pos4: [_, y],
    direction: N
  };
}
function Ki(r) {
  return Math.sqrt(r[0] * r[0] + r[1] * r[1]);
}
function eR(r, t) {
  return Ki([t[0] - r[0], t[1] - r[1]]);
}
function rc(r, t, e, i) {
  e === void 0 && (e = 1), i === void 0 && (i = $e(r, t));
  var n = eR(r, t);
  return {
    transform: "translateY(-50%) translate(".concat(r[0], "px, ").concat(r[1], "px) rotate(").concat(i, "rad) scaleY(").concat(e, ")"),
    width: "".concat(n, "px")
  };
}
function a1(r, t) {
  for (var e = [], i = 2; i < arguments.length; i++)
    e[i - 2] = arguments[i];
  var n = e.length, s = e.reduce(function(o, u) {
    return o + u[0];
  }, 0) / n, a = e.reduce(function(o, u) {
    return o + u[1];
  }, 0) / n;
  return {
    transform: "translateZ(0px) translate(".concat(s, "px, ").concat(a, "px) rotate(").concat(r, "rad) scale(").concat(t, ")")
  };
}
function au(r, t) {
  var e = r[t];
  return en(e) ? z(z({}, r), e) : r;
}
function rR(r, t) {
  t === void 0 && (t = r ? rn(r) : null);
  var e = r && !kg(r.offsetWidth), i = 0, n = 0, s = 0, a = 0, o = 0, u = 0, h = 0, l = 0, c = 0, d = 0, p = 0, g = 0, v = 1 / 0, m = 1 / 0, _ = 1 / 0, y = 1 / 0, b = !1;
  if (r)
    if (!e && r.tagName.toLowerCase() !== "svg") {
      var x = r.getBBox();
      b = !0, i = x.width, n = x.height, o = i, u = n, h = i, l = n, s = i, a = n;
    } else {
      var w = r.style, E = t.boxSizing === "border-box", R = parseFloat(t.borderLeftWidth) || 0, C = parseFloat(t.borderRightWidth) || 0, P = parseFloat(t.borderTopWidth) || 0, N = parseFloat(t.borderBottomWidth) || 0, M = parseFloat(t.paddingLeft) || 0, A = parseFloat(t.paddingRight) || 0, k = parseFloat(t.paddingTop) || 0, H = parseFloat(t.paddingBottom) || 0, L = M + A, U = k + H, V = R + C, K = P + N, G = L + V, B = U + K;
      c = Math.max(L, Le(t.minWidth, 0) || 0), d = Math.max(U, Le(t.minHeight, 0) || 0), v = Le(t.maxWidth, 0), m = Le(t.maxHeight, 0), isNaN(v) && (v = 1 / 0, m = 1 / 0);
      var W = Le(w.width, 0) || 0, Q = Le(w.height, 0) || 0, ut = parseFloat(t.width) || 0, it = parseFloat(t.height) || 0;
      o = parseFloat(t.width), u = parseFloat(t.height), h = Math.abs(ut - W) < 1 ? gy(c, W || o, v) : ut, l = Math.abs(it - Q) < 1 ? gy(d, Q || u, m) : it, i = h, n = l, s = h, a = l, E ? (_ = v, y = m, p = c, g = d, h = i - G, l = n - B) : (_ = v + G, y = m + B, p = c + G, g = d + B, i = h + G, n = l + B), s = h + L, a = l + U;
    }
  return {
    svg: b,
    offsetWidth: i,
    offsetHeight: n,
    clientWidth: s,
    clientHeight: a,
    contentWidth: h,
    contentHeight: l,
    cssWidth: o,
    cssHeight: u,
    minWidth: c,
    minHeight: d,
    maxWidth: v,
    maxHeight: m,
    minOffsetWidth: p,
    minOffsetHeight: g,
    maxOffsetWidth: _,
    maxOffsetHeight: y
  };
}
function iR(r, t) {
  return $e(t > 0 ? r[0] : r[1], t > 0 ? r[1] : r[0]);
}
function hp() {
  return {
    left: 0,
    top: 0,
    width: 0,
    height: 0,
    right: 0,
    bottom: 0,
    clientLeft: 0,
    clientTop: 0,
    clientWidth: 0,
    clientHeight: 0,
    scrollWidth: 0,
    scrollHeight: 0
  };
}
function ic(r, t) {
  var e, i = 0, n = 0, s = 0, a = 0;
  if (r)
    if (r === document.body || r === document.documentElement) {
      s = window.innerWidth, a = window.innerHeight;
      var o = MD();
      e = [-o[0], -o[1]], i = e[0], n = e[1];
    } else {
      var u = r.getBoundingClientRect();
      i = u.left, n = u.top, s = u.width, a = u.height;
    }
  var h = {
    left: i,
    top: n,
    width: s,
    height: a,
    right: i + s,
    bottom: n + a
  };
  return r && t && (h.clientLeft = r.clientLeft, h.clientTop = r.clientTop, h.clientWidth = r.clientWidth, h.clientHeight = r.clientHeight, h.scrollWidth = r.scrollWidth, h.scrollHeight = r.scrollHeight, h.overflow = rn(r).overflow !== "visible"), h;
}
function o1(r) {
  if (!!r) {
    var t = r.getAttribute("data-direction");
    if (!!t) {
      var e = [0, 0];
      return t.indexOf("w") > -1 && (e[0] = -1), t.indexOf("e") > -1 && (e[0] = 1), t.indexOf("n") > -1 && (e[1] = -1), t.indexOf("s") > -1 && (e[1] = 1), e;
    }
  }
}
function u1(r, t) {
  return [te(t, r[0]), te(t, r[1]), te(t, r[2]), te(t, r[3])];
}
function Qr(r) {
  var t = r.left, e = r.top, i = r.pos1, n = r.pos2, s = r.pos3, a = r.pos4;
  return u1([i, n, s, a], [t, e]);
}
function GD(r) {
  return Math.round(r % 1 === -0.5 ? r - 1 : r);
}
function Gu(r, t) {
  var e;
  (e = r[t]) === null || e === void 0 || e.unset(), r[t] = null;
}
function qc(r, t) {
  if (t) {
    var e = Nl(t);
    e.nextStyle = z(z({}, e.nextStyle), r);
  }
  return {
    style: r,
    cssText: Pl(r).map(function(i) {
      return "".concat(i, ": ").concat(r[i], ";");
    }).join("")
  };
}
function nR(r, t, e) {
  var i = t.afterTransform || t.transform;
  return z(z({}, qc(z(z(z({}, r.style), t.style), {
    transform: i
  }), e)), {
    afterTransform: i,
    transform: r.transform
  });
}
function Ut(r, t, e, i) {
  var n = t.datas;
  n.datas || (n.datas = {});
  var s = z(z({}, e), {
    target: r.state.target,
    clientX: t.clientX,
    clientY: t.clientY,
    inputEvent: t.inputEvent,
    currentTarget: r,
    moveable: r,
    datas: n.datas,
    stopDrag: function() {
      var a;
      (a = t.stop) === null || a === void 0 || a.call(t);
    }
  });
  return n.isStartEvent ? i || (n.lastEvent = s) : n.isStartEvent = !0, s;
}
function gi(r, t, e) {
  var i = t.datas, n = "isDrag" in e ? e.isDrag : t.isDrag;
  return i.datas || (i.datas = {}), z(z({
    isDrag: n
  }, e), {
    moveable: r,
    target: r.state.target,
    clientX: t.clientX,
    clientY: t.clientY,
    inputEvent: t.inputEvent,
    currentTarget: r,
    lastEvent: i.lastEvent,
    isDouble: t.isDouble,
    datas: i.datas
  });
}
function h1(r, t, e) {
  r._emitter.on(t, e);
}
function _t(r, t, e, i) {
  return r.triggerEvent(t, e, i);
}
function rn(r, t) {
  return window.getComputedStyle(r, t);
}
function lp(r, t, e) {
  var i = {}, n = {};
  return r.filter(function(s) {
    var a = s.name;
    if (i[a] || !t.some(function(o) {
      return s[o];
    }))
      return !1;
    if (!e && s.ableGroup) {
      if (n[s.ableGroup])
        return !1;
      n[s.ableGroup] = !0;
    }
    return i[a] = !0, !0;
  });
}
function Dy(r, t) {
  return r === t || r == null && t == null;
}
function HD() {
  for (var r = [], t = 0; t < arguments.length; t++)
    r[t] = arguments[t];
  for (var e = r.length - 1, i = 0; i < e; ++i) {
    var n = r[i];
    if (!kg(n))
      return n;
  }
  return r[e];
}
function zD(r, t) {
  var e = [], i = [];
  return r.forEach(function(n, s) {
    var a = t(n, s, r), o = i.indexOf(a), u = e[o] || [];
    o === -1 && (i.push(a), e.push(u)), u.push(n);
  }), e;
}
function jD(r, t) {
  var e = [], i = {};
  return r.forEach(function(n, s) {
    var a = t(n, s, r), o = i[a];
    o || (o = [], i[a] = o, e.push(o)), o.push(n);
  }), e;
}
function sR(r) {
  return r.reduce(function(t, e) {
    return t.concat(e);
  }, []);
}
function yl() {
  for (var r = [], t = 0; t < arguments.length; t++)
    r[t] = arguments[t];
  return r.sort(function(e, i) {
    return Math.abs(i) - Math.abs(e);
  }), r[0];
}
function Ku(r, t, e) {
  return Tr(Fn(r, e), su(t, e), e);
}
function aR(r, t) {
  var e, i = r.is3d, n = r.rootMatrix, s = i ? 4 : 3;
  return e = Ku(n, [t.distX, t.distY], s), t.distX = e[0], t.distY = e[1], t;
}
function cp(r, t, e, i, n) {
  return kt(vr(r, te(e, t), n), i);
}
function Yi(r, t, e) {
  return e ? "".concat(r / t * 100, "%") : "".concat(r, "px");
}
function Ev(r) {
  return Math.abs(r) <= Lr ? 0 : r;
}
function l1(r, t) {
  return t === void 0 && (t = [r]), function(e, i) {
    if (i.isRequest)
      return t.some(function(s) {
        return i.requestAble === s;
      }) ? i.parentDirection : !1;
    var n = i.inputEvent.target;
    return mr(n, St("direction")) && (!r || mr(n, St(r)));
  };
}
function $D(r) {
  var t = {};
  for (var e in r)
    t[r[e]] = e;
  return t;
}
function VD(r, t) {
  var e = r.slice(0, t < 0 ? void 0 : t), i = r.slice(0, t < 0 ? void 0 : t + 1), n = r[t] || "", s = t < 0 ? [] : r.slice(t), a = t < 0 ? [] : r.slice(t + 1), o = eo(e), u = eo(i), h = eo([n]), l = eo(s), c = eo(a), d = Pu(o), p = Pu(u), g = Pu(l), v = Pu(c), m = we(d, g, 4);
  return {
    transforms: r,
    beforeFunctionMatrix: d,
    beforeFunctionMatrix2: p,
    targetFunctionMatrix: Pu(h),
    afterFunctionMatrix: g,
    afterFunctionMatrix2: v,
    allFunctionMatrix: m,
    beforeFunctions: o,
    beforeFunctions2: u,
    targetFunction: h[0],
    afterFunctions: l,
    afterFunctions2: c,
    beforeFunctionTexts: e,
    beforeFunctionTexts2: i,
    targetFunctionText: n,
    afterFunctionTexts: s,
    afterFunctionTexts2: a
  };
}
function XD(r) {
  return !r || !en(r) || r instanceof Element ? !1 : wr(r) || "length" in r;
}
function Zc(r, t) {
  return r ? r instanceof Element ? r : Ni(r) ? t ? document.querySelector(r) : r : dI(r) ? r() : "current" in r ? r.current : r : null;
}
function c1(r, t) {
  if (!r)
    return [];
  var e = XD(r) ? [].slice.call(r) : [r];
  return e.reduce(function(i, n) {
    return Ni(n) && t ? Ot(Ot([], i, !0), [].slice.call(document.querySelectorAll(n)), !0) : (wr(n) ? i.push(c1(n, t)) : i.push(Zc(n, t)), i);
  }, []);
}
function WD(r, t, e) {
  var i = $e(r, t) / Math.PI * 180;
  return i = e >= 0 ? i : 180 - i, i = i >= 0 ? i : 360 + i, i;
}
function Rw(r, t) {
  var e = r.rootMatrix, i = r.is3d, n = i ? 4 : 3, s = Fn(e, n);
  return i || (s = Mn(s, 3, 4)), s[12] = 0, s[13] = 0, s[14] = 0, w5(s, t);
}
function oR(r, t, e, i, n) {
  var s = r[0], a = r[1], o = 0, u = 0;
  if (n && s && a) {
    var h = $e([0, 0], t), l = $e([0, 0], i), c = Ki(t), d = Math.cos(h - l) * c;
    if (!i[0])
      u = d, o = u * e;
    else if (!i[1])
      o = d, u = o / e;
    else {
      var p = i[0] * 2 * s, g = i[1] * 2 * a, v = Ki([p + t[0], g + t[1]]) - Ki([p, g]), m = $e([0, 0], [e, 1]);
      o = Math.cos(m) * v, u = Math.sin(m) * v;
    }
  } else
    o = i[0] * t[0], u = i[1] * t[1];
  return [o, u];
}
function uR(r, t, e, i) {
  var n, s = e.ratio, a = e.startOffsetWidth, o = e.startOffsetHeight, u = 0, h = 0, l = i.distX, c = i.distY, d = i.parentDistance, p = i.parentDist, g = i.parentScale, v = e.fixedDirection, m = [0, 1].map(function(E) {
    return Math.abs(r[E] - v[E]);
  }), _ = [0, 1].map(function(E) {
    var R = m[E];
    return R !== 0 && (R = 2 / R), R;
  });
  if (p)
    u = p[0], h = p[1], t && (u ? h || (h = u / s) : u = h * s);
  else if (g)
    u = (g[0] - 1) * a, h = (g[1] - 1) * o;
  else if (d) {
    var y = a * m[0], b = o * m[1], x = Ki([y, b]);
    u = d / x * y * _[0], h = d / x * b * _[1];
  } else {
    var w = Ln({
      datas: e,
      distX: l,
      distY: c
    });
    w = _.map(function(E, R) {
      return w[R] * E;
    }), n = oR([a, o], w, s, r, t), u = n[0], h = n[1];
  }
  return {
    distWidth: u,
    distHeight: h
  };
}
var YD = Ed("pinchable", {
  events: {
    onPinchStart: "pinchStart",
    onPinch: "pinch",
    onPinchEnd: "pinchEnd",
    onPinchGroupStart: "pinchGroupStart",
    onPinchGroup: "pinchGroup",
    onPinchGroupEnd: "pinchGroupEnd"
  },
  dragStart: function() {
    return !0;
  },
  pinchStart: function(r, t) {
    var e = t.datas, i = t.targets, n = t.angle, s = t.originalDatas, a = r.props, o = a.pinchable, u = a.ables;
    if (!o)
      return !1;
    var h = "onPinch".concat(i ? "Group" : "", "Start"), l = "drag".concat(i ? "Group" : "", "ControlStart"), c = (o === !0 ? r.controlAbles : u.filter(function(v) {
      return o.indexOf(v.name) > -1;
    })).filter(function(v) {
      return v.canPinch && v[l];
    }), d = Ut(r, t, {});
    i && (d.targets = i);
    var p = _t(r, h, d);
    e.isPinch = p !== !1, e.ables = c;
    var g = e.isPinch;
    return g ? (c.forEach(function(v) {
      if (s[v.name] = s[v.name] || {}, !!v[l]) {
        var m = z(z({}, t), {
          datas: s[v.name],
          parentRotate: n,
          isPinch: !0
        });
        v[l](r, m);
      }
    }), r.state.snapRenderInfo = {
      request: t.isRequest,
      direction: [0, 0]
    }, g) : !1;
  },
  pinch: function(r, t) {
    var e = t.datas, i = t.scale, n = t.distance, s = t.originalDatas, a = t.inputEvent, o = t.targets, u = t.angle;
    if (!!e.isPinch) {
      var h = n * (1 - 1 / i), l = Ut(r, t, {});
      o && (l.targets = o);
      var c = "onPinch".concat(o ? "Group" : "");
      _t(r, c, l);
      var d = e.ables, p = "drag".concat(o ? "Group" : "", "Control");
      return d.forEach(function(g) {
        !g[p] || g[p](r, z(z({}, t), {
          datas: s[g.name],
          inputEvent: a,
          parentDistance: h,
          parentRotate: u,
          isPinch: !0
        }));
      }), l;
    }
  },
  pinchEnd: function(r, t) {
    var e = t.datas, i = t.isPinch, n = t.inputEvent, s = t.targets, a = t.originalDatas;
    if (!!e.isPinch) {
      var o = "onPinch".concat(s ? "Group" : "", "End"), u = gi(r, t, {
        isDrag: i
      });
      s && (u.targets = s), _t(r, o, u);
      var h = e.ables, l = "drag".concat(s ? "Group" : "", "ControlEnd");
      return h.forEach(function(c) {
        !c[l] || c[l](r, z(z({}, t), {
          isDrag: i,
          datas: a[c.name],
          inputEvent: n,
          isPinch: !0
        }));
      }), i;
    }
  },
  pinchGroupStart: function(r, t) {
    return this.pinchStart(r, z(z({}, t), {
      targets: r.props.targets
    }));
  },
  pinchGroup: function(r, t) {
    return this.pinch(r, z(z({}, t), {
      targets: r.props.targets
    }));
  },
  pinchGroupEnd: function(r, t) {
    return this.pinchEnd(r, z(z({}, t), {
      targets: r.props.targets
    }));
  }
});
function Oa(r, t, e) {
  var i = e.originalDatas;
  i.groupable = i.groupable || {};
  var n = i.groupable;
  n.childDatas = n.childDatas || [];
  var s = n.childDatas;
  return r.moveables.map(function(a, o) {
    return s[o] = s[o] || {}, s[o][t] = s[o][t] || {}, z(z({}, e), {
      datas: s[o][t],
      originalDatas: s[o]
    });
  });
}
function jm(r, t, e, i, n, s, a) {
  var o = !!e.match(/Start$/g), u = !!e.match(/End$/g), h = n.isPinch, l = n.datas, c = Oa(r, t.name, n), d = r.moveables, p = c.map(function(g, v) {
    var m = d[v], _ = m.state, y = _.gestos, b = g;
    if (o)
      b = new _l(a).dragStart(i, g);
    else {
      if (y[a] || (y[a] = l.childGestos[v]), !y[a])
        return;
      b = wd(g, _, i, h, s, a);
    }
    var x = t[e](m, z(z({}, b), {
      parentFlag: !0
    }));
    return u && (y[a] = null), x;
  });
  return o && (l.childGestos = d.map(function(g) {
    return g.state.gestos[a];
  })), p;
}
function Ts(r, t, e, i, n, s) {
  n === void 0 && (n = function(l, c) {
    return c;
  });
  var a = !!e.match(/End$/g), o = Oa(r, t.name, i), u = r.moveables, h = o.map(function(l, c) {
    var d = u[c], p = l;
    p = n(d, l);
    var g = t[e](d, z(z({}, p), {
      parentFlag: !0
    }));
    return g && s && s(d, l, g, c), a && (d.state.gestos = {}), g;
  });
  return h;
}
var qD = ["left", "right", "center"], ZD = ["top", "bottom", "middle"], Aa = {
  start: "left",
  end: "right",
  center: "center"
}, Fa = {
  start: "top",
  end: "bottom",
  center: "middle"
};
function Ol(r, t) {
  var e = r.props, i = e.snappable, n = e.bounds, s = e.innerBounds, a = e.verticalGuidelines, o = e.horizontalGuidelines, u = e.snapGridWidth, h = e.snapGridHeight, l = r.state, c = l.guidelines, d = l.enableSnap;
  return !i || !d || t && i !== !0 && i.indexOf(t) < 0 ? !1 : !!(u || h || n || s || c && c.length || a && a.length || o && o.length);
}
function f1(r) {
  return r === !1 ? {} : r === !0 || !r ? {
    left: !0,
    right: !0,
    top: !0,
    bottom: !0
  } : r;
}
function JD(r, t) {
  var e = f1(r), i = {};
  for (var n in e)
    n in t && e[n] && (i[n] = t[n]);
  return i;
}
function d1(r, t) {
  var e = JD(r, t), i = ZD.filter(function(s) {
    return s in e;
  }), n = qD.filter(function(s) {
    return s in e;
  });
  return {
    horizontal: i.map(function(s) {
      return e[s];
    }),
    vertical: n.map(function(s) {
      return e[s];
    })
  };
}
function KD(r, t, e) {
  var i = vr(r, [t.clientLeft, t.clientTop], e);
  return [t.left + i[0], t.top + i[1]];
}
function QD(r) {
  var t = r[0], e = r[1], i = e[0] - t[0], n = e[1] - t[1];
  Math.abs(i) < er && (i = 0), Math.abs(n) < er && (n = 0);
  var s = 0, a = 0, o = 0;
  return i ? n ? (s = -n / i, a = 1, o = s * t[0] - t[1]) : (a = 1, o = -t[1]) : (s = -1, o = t[0]), [s, a, o].map(function(u) {
    return Yt(u, er);
  });
}
function zg(r, t, e, i) {
  var n = r.props, s = HD(i, n.snapThreshold, 5);
  return hR(r.state.guidelines, t, e, s);
}
function hR(r, t, e, i) {
  return {
    vertical: Pw(r, "vertical", t, i),
    horizontal: Pw(r, "horizontal", e, i)
  };
}
function t4(r, t, e) {
  var i = e[0], n = e[1], s = t[0], a = t[1], o = kt(e, t), u = o[0], h = o[1], l = h > 0, c = u > 0;
  u = Ev(u), h = Ev(h);
  var d = {
    isSnap: !1,
    offset: 0,
    pos: 0
  }, p = {
    isSnap: !1,
    offset: 0,
    pos: 0
  };
  if (u === 0 && h === 0)
    return {
      vertical: d,
      horizontal: p
    };
  var g = zg(r, u ? [i] : [], h ? [n] : []), v = g.vertical, m = g.horizontal;
  v.posInfos.filter(function(H) {
    var L = H.pos;
    return c ? L >= s : L <= s;
  }), m.posInfos.filter(function(H) {
    var L = H.pos;
    return l ? L >= a : L <= a;
  }), v.isSnap = v.posInfos.length > 0, m.isSnap = m.posInfos.length > 0;
  var _ = Uy(v), y = _.isSnap, b = _.guideline, x = Uy(m), w = x.isSnap, E = x.guideline, R = w ? E.pos[1] : 0, C = y ? b.pos[0] : 0;
  if (u === 0)
    w && (p.isSnap = !0, p.pos = E.pos[1], p.offset = n - p.pos);
  else if (h === 0)
    y && (d.isSnap = !0, d.pos = C, d.offset = i - C);
  else {
    var P = h / u, N = e[1] - P * i, M = 0, A = 0, k = !1;
    y ? (A = C, M = P * A + N, k = !0) : w && (M = R, A = (M - N) / P, k = !0), k && (d.isSnap = !0, d.pos = A, d.offset = i - A, p.isSnap = !0, p.pos = M, p.offset = n - M);
  }
  return {
    vertical: d,
    horizontal: p
  };
}
function Sw(r, t, e) {
  var i = d1(r.props.snapDirections, t);
  return zg(r, i.vertical, i.horizontal, e);
}
function Uy(r) {
  var t = r.isSnap;
  if (!t)
    return {
      isSnap: !1,
      offset: 0,
      dist: -1,
      pos: 0,
      guideline: null
    };
  var e = r.posInfos[0], i = e.guidelineInfos[0], n = i.offset, s = i.dist, a = i.guideline;
  return {
    isSnap: t,
    offset: n,
    dist: s,
    pos: e.pos,
    guideline: a
  };
}
function Pw(r, t, e, i) {
  if (!r || !r.length)
    return {
      isSnap: !1,
      index: -1,
      posInfos: []
    };
  var n = t === "vertical", s = n ? 0 : 1, a = e.map(function(u, h) {
    var l = r.map(function(c) {
      var d = c.pos, p = u - d[s];
      return {
        offset: p,
        dist: Math.abs(p),
        guideline: c
      };
    }).filter(function(c) {
      var d = c.guideline, p = c.dist, g = d.type;
      return !(g !== t || p > i);
    }).sort(function(c, d) {
      return c.dist - d.dist;
    });
    return {
      pos: u,
      index: h,
      guidelineInfos: l
    };
  }).filter(function(u) {
    return u.guidelineInfos.length > 0;
  }).sort(function(u, h) {
    return u.guidelineInfos[0].dist - h.guidelineInfos[0].dist;
  }), o = a.length > 0;
  return {
    isSnap: o,
    index: o ? a[0].index : -1,
    posInfos: a
  };
}
function e4(r, t, e) {
  var i = [];
  if (e[0] && e[1])
    i = [e, [-e[0], e[1]], [e[0], -e[1]]].map(function(a) {
      return ze(t, a);
    });
  else if (!e[0] && !e[1])
    for (var n = [t[0], t[1], t[3], t[2], t[0]], s = 0; s < 4; ++s)
      i.push(n[s]), i.push([(n[s][0] + n[s + 1][0]) / 2, (n[s][1] + n[s + 1][1]) / 2]);
  else
    r.props.keepRatio ? i = [[-1, -1], [-1, 1], [1, -1], [1, 1], e].map(function(a) {
      return ze(t, a);
    }) : (i = xD(t, e), i.length > 1 && i.push([(i[0][0] + i[1][0]) / 2, (i[0][1] + i[1][1]) / 2]));
  return zg(r, i.map(function(a) {
    return a[0];
  }), i.map(function(a) {
    return a[1];
  }), 1);
}
function lR(r, t) {
  var e = Math.abs(r.offset), i = Math.abs(t.offset);
  return r.isBound && t.isBound ? i - e : r.isBound ? -1 : t.isBound ? 1 : r.isSnap && t.isSnap ? i - e : r.isSnap ? -1 : t.isSnap || e < Lr ? 1 : i < Lr ? -1 : e - i;
}
function wv(r, t) {
  return r.slice().sort(function(e, i) {
    var n = e.sign[t], s = i.sign[t], a = e.offset[t], o = i.offset[t];
    if (n) {
      if (!s)
        return -1;
    } else
      return 1;
    return lR({
      isBound: e.isBound,
      isSnap: e.isSnap,
      offset: a
    }, {
      isBound: i.isBound,
      isSnap: i.isSnap,
      offset: o
    });
  })[0];
}
function r4(r, t, e) {
  var i = [];
  if (e)
    Math.abs(t[0]) !== 1 || Math.abs(t[1]) !== 1 ? i.push([t, [-1, -1]], [t, [-1, 1]], [t, [1, -1]], [t, [1, 1]]) : i.push([t, [r[0], -r[1]]], [t, [-r[0], r[1]]]), i.push([t, r]);
  else if (r[0] && r[1] || !r[0] && !r[1]) {
    var n = r[0] ? r : [1, 1];
    [1, -1].forEach(function(a) {
      [1, -1].forEach(function(o) {
        var u = [a * n[0], o * n[1]];
        t[0] === u[0] && t[1] === u[1] || i.push([t, u]);
      });
    });
  } else if (r[0]) {
    var s = Math.abs(t[0]) === 1 ? [1] : [1, -1];
    s.forEach(function(a) {
      i.push([[t[0], -1], [a * r[0], -1]], [[t[0], 0], [a * r[0], 0]], [[t[0], 1], [a * r[0], 1]]);
    });
  } else if (r[1]) {
    var s = Math.abs(t[1]) === 1 ? [1] : [1, -1];
    s.forEach(function(o) {
      i.push([[-1, t[1]], [-1, o * r[1]]], [[0, t[1]], [0, o * r[1]]], [[1, t[1]], [1, o * r[1]]]);
    });
  }
  return i;
}
function cR(r, t) {
  var e = my([t[0][0], t[1][0]]), i = my([t[0][1], t[1][1]]);
  return {
    vertical: e <= r[0],
    horizontal: i <= r[1]
  };
}
function p1(r, t) {
  var e = t[0], i = t[1], n = i[0] - e[0], s = i[1] - e[1];
  Math.abs(n) < Lr && (n = 0), Math.abs(s) < Lr && (s = 0);
  var a, o;
  if (!n)
    a = e[0], o = r[0];
  else if (!s)
    a = e[1], o = r[1];
  else {
    var u = s / n;
    a = u * (r[0] - e[0]) + e[1], o = r[1];
  }
  return a - o;
}
function fR(r, t, e, i) {
  return i === void 0 && (i = Lr), r.every(function(n) {
    var s = p1(n, t), a = s <= 0;
    return a === e || Math.abs(s) <= i;
  });
}
function Nw(r, t, e, i, n) {
  return n === void 0 && (n = 0), i && t - n <= r || !i && r <= e + n ? {
    isBound: !0,
    offset: i ? t - r : e - r
  } : {
    isBound: !1,
    offset: 0
  };
}
function i4(r, t) {
  var e = t.line, i = t.centerSign, n = t.verticalSign, s = t.horizontalSign, a = t.lineConstants, o = r.props.innerBounds;
  if (!o)
    return {
      isAllBound: !1,
      isBound: !1,
      isVerticalBound: !1,
      isHorizontalBound: !1,
      offset: [0, 0]
    };
  var u = o.left, h = o.top, l = o.width, c = o.height, d = [[u, h], [u, h + c]], p = [[u, h], [u + l, h]], g = [[u + l, h], [u + l, h + c]], v = [[u, h + c], [u + l, h + c]];
  if (fR([[u, h], [u + l, h], [u, h + c], [u + l, h + c]], e, i))
    return {
      isAllBound: !1,
      isBound: !1,
      isVerticalBound: !1,
      isHorizontalBound: !1,
      offset: [0, 0]
    };
  var m = Ia(e, a, p, n), _ = Ia(e, a, v, n), y = Ia(e, a, d, s), b = Ia(e, a, g, s), x = m.isBound && _.isBound, w = m.isBound || _.isBound, E = y.isBound && b.isBound, R = y.isBound || b.isBound, C = yl(m.offset, _.offset), P = yl(y.offset, b.offset), N = [0, 0], M = !1, A = !1;
  return Math.abs(P) < Math.abs(C) ? (N = [C, 0], M = w, A = x) : (N = [0, P], M = R, A = E), {
    isAllBound: A,
    isVerticalBound: w,
    isHorizontalBound: R,
    isBound: M,
    offset: N
  };
}
function Ia(r, t, e, i, n, s) {
  var a = t[0], o = t[1], u = r[0], h = e[0], l = e[1], c = Ev(l[1] - h[1]), d = Ev(l[0] - h[0]), p = o, g = a, v = -a / o;
  if (d) {
    if (!c) {
      if (s && !p)
        return {
          isBound: !1,
          offset: 0
        };
      if (g) {
        var b = (h[1] - u[1]) / v + u[0];
        return Nw(b, h[0], l[0], i, n);
      } else {
        var _ = h[1] - u[1], y = Math.abs(_) <= (n || 0);
        return {
          isBound: y,
          offset: y ? _ : 0
        };
      }
    }
  } else {
    if (s && !g)
      return {
        isBound: !1,
        offset: 0
      };
    if (p) {
      var m = v * (h[0] - u[0]) + u[1];
      return Nw(m, h[1], l[1], i, n);
    } else {
      var _ = h[0] - u[0], y = Math.abs(_) <= (n || 0);
      return {
        isBound: y,
        offset: y ? _ : 0
      };
    }
  }
  return {
    isBound: !1,
    offset: 0
  };
}
function dR(r, t, e) {
  return t.map(function(i) {
    var n = i4(r, i), s = n.isBound, a = n.offset, o = n.isVerticalBound, u = n.isHorizontalBound, h = i.multiple, l = Ln({
      datas: e,
      distX: a[0],
      distY: a[1]
    }).map(function(c, d) {
      return c * (h[d] ? 2 / h[d] : 0);
    });
    return {
      sign: h,
      isBound: s,
      isVerticalBound: o,
      isHorizontalBound: u,
      isSnap: !1,
      offset: l
    };
  });
}
function n4(r, t, e) {
  var i, n = v1(r, t, [0, 0], !1).map(function(d) {
    return z(z({}, d), {
      multiple: d.multiple.map(function(p) {
        return Math.abs(p) * 2;
      })
    });
  }), s = dR(r, n, e), a = wv(s, 0), o = wv(s, 1), u = 0, h = 0, l = a.isVerticalBound || o.isVerticalBound, c = a.isHorizontalBound || o.isHorizontalBound;
  return (l || c) && (i = yD({
    datas: e,
    distX: -a.offset[0],
    distY: -o.offset[1]
  }), u = i[0], h = i[1]), {
    vertical: {
      isBound: l,
      offset: u
    },
    horizontal: {
      isBound: c,
      offset: h
    }
  };
}
function s4(r, t) {
  var e = [], i = r[0], n = r[1];
  return i && n ? e.push([[0, n * 2], r, [-i, n]], [[i * 2, 0], r, [i, -n]]) : i ? (e.push([[i * 2, 0], [i, 1], [i, -1]]), t && e.push([[0, -1], [i, -1], [-i, -1]], [[0, 1], [i, 1], [-i, 1]])) : n ? (e.push([[0, n * 2], [1, n], [-1, n]]), t && e.push([[-1, 0], [-1, n], [-1, -n]], [[1, 0], [1, n], [1, -n]])) : e.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]), e;
}
function v1(r, t, e, i) {
  var n = r.state, s = n.allMatrix, a = n.is3d, o = cu(s, 100, 100, a ? 4 : 3), u = ze(o, [0, 0]);
  return s4(e, i).map(function(h) {
    var l = h[0], c = h[1], d = h[2], p = [ze(o, c), ze(o, d)], g = QD(p), v = cR(u, p), m = v.vertical, _ = v.horizontal, y = p1(u, p) <= 0;
    return {
      multiple: l,
      centerSign: y,
      verticalSign: m,
      horizontalSign: _,
      lineConstants: g,
      line: [ze(t, c), ze(t, d)]
    };
  });
}
function Ow(r, t, e, i) {
  var n = i ? r.map(function(s) {
    return Bg(s, i);
  }) : r;
  return [[n[0], n[1]], [n[1], n[3]], [n[3], n[2]], [n[2], n[0]]].some(function(s) {
    var a = p1(e, s) <= 0;
    return !fR(t, s, a);
  });
}
function a4(r) {
  var t = r[0], e = r[1], i = e[0] - t[0], n = e[1] - t[1];
  if (!i)
    return Math.abs(t[0]);
  if (!n)
    return Math.abs(t[1]);
  var s = n / i;
  return Math.abs((-s * t[0] + t[1]) / Math.sqrt(Math.pow(s, 2) + 1));
}
function o4(r) {
  var t = r[0], e = r[1], i = e[0] - t[0], n = e[1] - t[1];
  if (!i)
    return [t[0], 0];
  if (!n)
    return [0, t[1]];
  var s = n / i, a = -s * t[0] + t[1];
  return [-a / (s + 1 / s), a / (s * s + 1)];
}
function u4(r, t, e, i, n) {
  var s = r.props.innerBounds, a = n * Math.PI / 180;
  if (!s)
    return [];
  var o = s.left, u = s.top, h = s.width, l = s.height, c = o - i[0], d = o + h - i[0], p = u - i[1], g = u + l - i[1], v = [[c, p], [d, p], [c, g], [d, g]], m = ze(e, [0, 0]);
  if (!Ow(e, v, m, 0))
    return [];
  var _ = [], y = v.map(function(b) {
    return [Ki(b), $e([0, 0], b)];
  });
  return [[e[0], e[1]], [e[1], e[3]], [e[3], e[2]], [e[2], e[0]]].forEach(function(b) {
    var x = $e([0, 0], o4(b)), w = a4(b);
    _.push.apply(_, y.filter(function(E) {
      var R = E[0];
      return R && w <= R;
    }).map(function(E) {
      var R = E[0], C = E[1], P = Math.acos(R ? w / R : 0), N = C + P, M = C - P;
      return [a + N - x, a + M - x];
    }).reduce(function(E, R) {
      return E.push.apply(E, R), E;
    }, []).filter(function(E) {
      return !Ow(t, v, m, E);
    }).map(function(E) {
      return Yt(E * 180 / Math.PI, Lr);
    }));
  }), _;
}
function h4(r) {
  var t = r.props.innerBounds;
  if (!t)
    return {
      vertical: [],
      horizontal: []
    };
  var e = r.getRect(), i = e.pos1, n = e.pos2, s = e.pos3, a = e.pos4, o = [i, n, s, a], u = ze(o, [0, 0]), h = t.left, l = t.top, c = t.width, d = t.height, p = [[h, l], [h, l + d]], g = [[h, l], [h + c, l]], v = [[h + c, l], [h + c, l + d]], m = [[h, l + d], [h + c, l + d]], _ = v1(r, o, [0, 0], !1), y = [], b = [], x = {
    top: !1,
    bottom: !1,
    left: !1,
    right: !1
  };
  return _.forEach(function(w) {
    var E = w.line, R = w.lineConstants, C = cR(u, E), P = C.horizontal, N = C.vertical, M = Ia(E, R, g, N, 1, !0), A = Ia(E, R, m, N, 1, !0), k = Ia(E, R, p, P, 1, !0), H = Ia(E, R, v, P, 1, !0);
    M.isBound && !x.top && (y.push(l), x.top = !0), A.isBound && !x.bottom && (y.push(l + d), x.bottom = !0), k.isBound && !x.left && (b.push(h), x.left = !0), H.isBound && !x.right && (b.push(h + c), x.right = !0);
  }), {
    horizontal: y,
    vertical: b
  };
}
function g1(r, t, e) {
  var i = r || {}, n = i.position, s = n === void 0 ? "client" : n, a = i.left, o = a === void 0 ? -1 / 0 : a, u = i.top, h = u === void 0 ? -1 / 0 : u, l = i.right, c = l === void 0 ? 1 / 0 : l, d = i.bottom, p = d === void 0 ? 1 / 0 : d, g = {
    position: s,
    left: o,
    top: h,
    right: c,
    bottom: p
  };
  return {
    vertical: Aw(g, t, !0),
    horizontal: Aw(g, e, !1)
  };
}
function jg(r, t) {
  var e = r.state, i = e.containerClientRect, n = i.clientHeight, s = i.clientWidth, a = i.clientLeft, o = i.clientTop, u = e.snapOffset, h = u.left, l = u.top, c = u.right, d = u.bottom, p = t || r.props.bounds || {}, g = p.position || "client", v = g === "css", m = p.left, _ = m === void 0 ? -1 / 0 : m, y = p.top, b = y === void 0 ? -1 / 0 : y, x = p.right, w = x === void 0 ? v ? -1 / 0 : 1 / 0 : x, E = p.bottom, R = E === void 0 ? v ? -1 / 0 : 1 / 0 : E;
  return v && (w = s + c - h - w, R = n + d - l - R), {
    left: _ + h - a,
    right: w + h - a,
    top: b + l - o,
    bottom: R + l - o
  };
}
function l4(r, t, e) {
  var i = jg(r), n = i.left, s = i.top, a = i.right, o = i.bottom, u = e[0], h = e[1], l = kt(e, t), c = l[0], d = l[1];
  Math.abs(c) < Lr && (c = 0), Math.abs(d) < Lr && (d = 0);
  var p = d > 0, g = c > 0, v = {
    isBound: !1,
    offset: 0,
    pos: 0
  }, m = {
    isBound: !1,
    offset: 0,
    pos: 0
  };
  if (c === 0 && d === 0)
    return {
      vertical: v,
      horizontal: m
    };
  if (c === 0)
    p ? o < h && (m.pos = o, m.offset = h - o) : s > h && (m.pos = s, m.offset = h - s);
  else if (d === 0)
    g ? a < u && (v.pos = a, v.offset = u - a) : n > u && (v.pos = n, v.offset = u - n);
  else {
    var _ = d / c, y = e[1] - _ * u, b = 0, x = 0, w = !1;
    g && a <= u ? (b = _ * a + y, x = a, w = !0) : !g && u <= n && (b = _ * n + y, x = n, w = !0), w && (b < s || b > o) && (w = !1), w || (p && o <= h ? (b = o, x = (b - y) / _, w = !0) : !p && h <= s && (b = s, x = (b - y) / _, w = !0)), w && (v.isBound = !0, v.pos = x, v.offset = u - x, m.isBound = !0, m.pos = b, m.offset = h - b);
  }
  return {
    vertical: v,
    horizontal: m
  };
}
function Aw(r, t, e) {
  var i = r[e ? "left" : "top"], n = r[e ? "right" : "bottom"], s = Math.min.apply(Math, t), a = Math.max.apply(Math, t), o = [];
  return i + 1 > s && o.push({
    isBound: !0,
    offset: s - i,
    pos: i
  }), n - 1 < a && o.push({
    isBound: !0,
    offset: a - n,
    pos: n
  }), o.length || o.push({
    isBound: !1,
    offset: 0,
    pos: 0
  }), o.sort(function(u, h) {
    return Math.abs(h.offset) - Math.abs(u.offset);
  });
}
function Fw(r, t, e) {
  var i = e ? r.map(function(n) {
    return Bg(n, e);
  }) : r;
  return i.some(function(n) {
    return n[0] < t.left && Math.abs(n[0] - t.left) > 0.1 || n[0] > t.right && Math.abs(n[0] - t.right) > 0.1 || n[1] < t.top && Math.abs(n[1] - t.top) > 0.1 || n[1] > t.bottom && Math.abs(n[1] - t.bottom) > 0.1;
  });
}
function c4(r, t, e) {
  var i = Ki(r), n = Math.sqrt(i * i - t * t) || 0;
  return [n, -n].sort(function(s, a) {
    return Math.abs(s - r[e ? 0 : 1]) - Math.abs(a - r[e ? 0 : 1]);
  }).map(function(s) {
    return $e([0, 0], e ? [s, t] : [t, s]);
  });
}
function f4(r, t, e, i, n) {
  if (!r.props.bounds)
    return [];
  var s = n * Math.PI / 180, a = jg(r), o = a.left, u = a.top, h = a.right, l = a.bottom, c = o - i[0], d = h - i[0], p = u - i[1], g = l - i[1], v = {
    left: c,
    top: p,
    right: d,
    bottom: g
  };
  if (!Fw(e, v, 0))
    return [];
  var m = [];
  return [[c, 0], [d, 0], [p, 1], [g, 1]].forEach(function(_) {
    var y = _[0], b = _[1];
    e.forEach(function(x) {
      var w = $e([0, 0], x);
      m.push.apply(m, c4(x, y, b).map(function(E) {
        return s + E - w;
      }).filter(function(E) {
        return !Fw(t, v, E);
      }).map(function(E) {
        return Yt(E * 180 / Math.PI, Lr);
      }));
    });
  }), m;
}
function d4(r, t) {
  var e, i = r.direction, n = r.classNames, s = r.size, a = r.pos, o = r.zoom, u = r.key, h = i === "horizontal", l = h ? "Y" : "X";
  return t.createElement("div", {
    key: u,
    className: n.join(" "),
    style: (e = {}, e[h ? "width" : "height"] = "".concat(s), e.transform = "translate(".concat(a[0], ", ").concat(a[1], ") translate").concat(l, "(-50%) scale").concat(l, "(").concat(o, ")"), e)
  });
}
function m1(r, t) {
  return d4(z(z({}, r), {
    classNames: Ot([St("line", "guideline", r.direction)], r.classNames, !0).filter(function(e) {
      return e;
    }),
    size: r.size || "".concat(r.sizeValue, "px"),
    pos: r.pos || r.posValue.map(function(e) {
      return "".concat(Yt(e, 0.1), "px");
    })
  }), t);
}
function Mw(r, t, e, i, n, s, a, o) {
  var u = r.props.zoom;
  return e.map(function(h, l) {
    var c = h.type, d = h.pos, p = [0, 0];
    return p[a] = i, p[a ? 0 : 1] = -n + d, m1({
      key: "".concat(t, "TargetGuideline").concat(l),
      classNames: [St("target", "bold", c)],
      posValue: p,
      sizeValue: s,
      zoom: u,
      direction: t
    }, o);
  });
}
function kw(r, t, e, i, n, s) {
  var a = r.props, o = a.zoom, u = a.isDisplayInnerSnapDigit, h = t === "horizontal" ? Aa : Fa, l = n[h.start], c = n[h.end];
  return e.filter(function(d) {
    var p = d.hide, g = d.elementRect;
    if (p)
      return !1;
    if (u && g) {
      var v = g.rect;
      if (v[h.start] <= l && c <= v[h.end])
        return !1;
    }
    return !0;
  }).map(function(d, p) {
    var g = d.pos, v = d.size, m = d.element, _ = d.className, y = [-i[0] + g[0], -i[1] + g[1]];
    return m1({
      key: "".concat(t, "-default-guideline-").concat(p),
      classNames: m ? [St("bold"), _] : [St("normal"), _],
      direction: t,
      posValue: y,
      sizeValue: v,
      zoom: o
    }, s);
  });
}
function nc(r, t, e, i, n, s, a, o) {
  var u, h = r.props, l = h.snapDigit, c = l === void 0 ? 0 : l, d = h.isDisplaySnapDigit, p = d === void 0 ? !0 : d, g = h.snapDistFormat, v = g === void 0 ? function(w, E) {
    return w;
  } : g, m = h.zoom, _ = t === "horizontal" ? "X" : "Y", y = t === "vertical" ? "height" : "width", b = Math.abs(n), x = p ? parseFloat(b.toFixed(c)) : 0;
  return o.createElement("div", {
    key: "".concat(t, "-").concat(e, "-guideline-").concat(i),
    className: St("guideline-group", t),
    style: (u = {
      left: "".concat(s[0], "px"),
      top: "".concat(s[1], "px")
    }, u[y] = "".concat(b, "px"), u)
  }, m1({
    direction: t,
    classNames: [St(e), a],
    size: "100%",
    posValue: [0, 0],
    sizeValue: b,
    zoom: m
  }, o), o.createElement("div", {
    className: St("size-value", "gap"),
    style: {
      transform: "translate".concat(_, "(-50%) scale(").concat(m, ")")
    }
  }, x > 0 ? v(x, t) : ""));
}
function p4(r, t, e, i) {
  var n = r === "vertical" ? 0 : 1, s = r === "vertical" ? 1 : 0, a = n ? Aa : Fa, o = e[a.start], u = e[a.end];
  return zD(t, function(h) {
    return h.pos[n];
  }).map(function(h) {
    var l = [], c = [], d = [];
    return h.forEach(function(p) {
      var g, v, m = p.element, _ = p.elementRect.rect;
      if (_[a.end] < o)
        l.push(p);
      else if (u < _[a.start])
        c.push(p);
      else if (_[a.start] <= o && u <= _[a.end] && i) {
        var y = p.pos, b = {
          element: m,
          rect: z(z({}, _), (g = {}, g[a.end] = _[a.start], g))
        }, x = {
          element: m,
          rect: z(z({}, _), (v = {}, v[a.start] = _[a.end], v))
        }, w = [0, 0], E = [0, 0];
        w[n] = y[n], w[s] = y[s], E[n] = y[n], E[s] = y[s] + p.size, l.push({
          type: r,
          pos: w,
          size: 0,
          elementRect: b
        }), c.push({
          type: r,
          pos: E,
          size: 0,
          elementRect: x
        });
      }
    }), l.sort(function(p, g) {
      return g.pos[s] - p.pos[s];
    }), c.sort(function(p, g) {
      return p.pos[s] - g.pos[s];
    }), {
      total: h,
      start: l,
      end: c,
      inner: d
    };
  });
}
function v4(r, t, e, i, n) {
  var s = r.props.isDisplayInnerSnapDigit, a = [];
  return ["vertical", "horizontal"].forEach(function(o) {
    var u = t.filter(function(m) {
      return m.type === o;
    }), h = o === "vertical" ? 1 : 0, l = h ? 0 : 1, c = p4(o, u, i, s), d = h ? Fa : Aa, p = h ? Aa : Fa, g = i[d.start], v = i[d.end];
    c.forEach(function(m) {
      var _ = m.total, y = m.start, b = m.end, x = m.inner, w = e[l] + _[0].pos[l] - i[p.start], E = i;
      y.forEach(function(R) {
        var C = R.elementRect.rect, P = E[d.start] - C[d.end];
        if (P > 0) {
          var N = [0, 0];
          N[h] = e[h] + E[d.start] - g - P, N[l] = w, a.push(nc(r, o, "dashed", a.length, P, N, R.className, n));
        }
        E = C;
      }), E = i, b.forEach(function(R) {
        var C = R.elementRect.rect, P = C[d.start] - E[d.end];
        if (P > 0) {
          var N = [0, 0];
          N[h] = e[h] + E[d.end] - g, N[l] = w, a.push(nc(r, o, "dashed", a.length, P, N, R.className, n));
        }
        E = C;
      }), x.forEach(function(R) {
        var C = R.elementRect.rect, P = g - C[d.start], N = C[d.end] - v, M = [0, 0], A = [0, 0];
        M[h] = e[h] - P, M[l] = w, A[h] = e[h] + v - g, A[l] = w, a.push(nc(r, o, "dashed", a.length, P, M, R.className, n)), a.push(nc(r, o, "dashed", a.length, N, A, R.className, n));
      });
    });
  }), a;
}
function g4(r, t, e, i, n) {
  var s = [];
  return ["horizontal", "vertical"].forEach(function(a) {
    var o = t.filter(function(m) {
      return m.type === a;
    }).slice(0, 1), u = a === "vertical" ? 0 : 1, h = u ? 0 : 1, l = u ? Fa : Aa, c = u ? Aa : Fa, d = i[l.start], p = i[l.end], g = i[c.start], v = i[c.end];
    o.forEach(function(m) {
      var _ = m.gap, y = m.gapRects, b = Math.max.apply(Math, Ot([g], y.map(function(E) {
        var R = E.rect;
        return R[c.start];
      }), !1)), x = Math.min.apply(Math, Ot([v], y.map(function(E) {
        var R = E.rect;
        return R[c.end];
      }), !1)), w = (b + x) / 2;
      b === x || w === (g + v) / 2 || y.forEach(function(E) {
        var R = E.rect, C = E.className, P = [e[0], e[1]];
        if (R[l.end] < d)
          P[u] += R[l.end] - d;
        else if (p < R[l.start])
          P[u] += R[l.start] - d - _;
        else
          return;
        P[h] += w - g, s.push(nc(r, u ? "vertical" : "horizontal", "gap", s.length, _, P, C, n));
      });
    });
  }), s;
}
function m4(r, t, e, i) {
  var n = t[0] - r[0], s = t[1] - r[1];
  if (Math.abs(n) < er && (n = 0), Math.abs(s) < er && (s = 0), !n)
    return i ? [0, 0] : [0, e];
  if (!s)
    return i ? [e, 0] : [0, 0];
  var a = s / n, o = r[1] - a * r[0];
  if (i) {
    var u = a * (t[0] + e) + o;
    return [e, u - t[1]];
  } else {
    var h = (t[1] + e - o) / a;
    return [h - t[0], e];
  }
}
function Gy(r, t, e, i, n) {
  var s = m4(r, t, e, i);
  if (!s)
    return {
      isOutside: !1,
      offset: [0, 0]
    };
  var a = Zi(r, t), o = Zi(s, r), u = Zi(s, t), h = o > a || u > a, l = Ln({
    datas: n,
    distX: s[0],
    distY: s[1]
  }), c = l[0], d = l[1];
  return {
    offset: [c, d],
    isOutside: h
  };
}
function Tv(r, t) {
  return r.isBound ? r.offset : t.isSnap ? Uy(t).offset : 0;
}
function _4(r, t, e, i, n) {
  var s = t[0], a = t[1], o = e[0], u = e[1], h = i[0], l = i[1], c = n[0], d = n[1], p = -c, g = -d;
  if (r && s && a) {
    p = 0, g = 0;
    var v = [];
    if (o && u ? v.push([0, d], [c, 0]) : o ? v.push([c, 0]) : u ? v.push([0, d]) : h && l ? v.push([0, d], [c, 0]) : h ? v.push([c, 0]) : l && v.push([0, d]), v.length) {
      v.sort(function(b, x) {
        return Ki(kt([s, a], b)) - Ki(kt([s, a], x));
      });
      var m = v[0];
      if (m[0] && Math.abs(s) > er)
        p = -m[0], g = a * Math.abs(s + p) / Math.abs(s) - a;
      else if (m[1] && Math.abs(a) > er) {
        var _ = a;
        g = -m[1], p = s * Math.abs(a + g) / Math.abs(_) - s;
      }
      if (r && u && o)
        if (Math.abs(p) > er && Math.abs(p) < Math.abs(c)) {
          var y = Math.abs(c) / Math.abs(p);
          p *= y, g *= y;
        } else if (Math.abs(g) > er && Math.abs(g) < Math.abs(d)) {
          var y = Math.abs(d) / Math.abs(g);
          p *= y, g *= y;
        } else
          p = yl(-c, p), g = yl(-d, g);
    }
  } else
    p = s || o ? -c : 0, g = a || u ? -d : 0;
  return [p, g];
}
function y4(r, t, e, i, n, s) {
  if (!Ol(r, "draggable"))
    return [{
      isSnap: !1,
      isBound: !1,
      offset: 0
    }, {
      isSnap: !1,
      isBound: !1,
      offset: 0
    }];
  var a = u1(s.absolutePoses, [t, e]), o = Pi(a), u = o.left, h = o.right, l = o.top, c = o.bottom, d = {
    horizontal: a.map(function(H) {
      return H[1];
    }),
    vertical: a.map(function(H) {
      return H[0];
    })
  }, p = f1(r.props.snapDirections), g = d1(p, {
    left: u,
    right: h,
    top: l,
    bottom: c,
    center: (u + h) / 2,
    middle: (l + c) / 2
  }), v = $g(r, n, g, d), m = v.vertical, _ = v.horizontal, y = n4(r, a, s), b = y.vertical, x = y.horizontal, w = m.isSnap, E = _.isSnap, R = m.isBound || b.isBound, C = _.isBound || x.isBound, P = yl(m.offset, b.offset), N = yl(_.offset, x.offset), M = _4(i, [t, e], [R, C], [w, E], [P, N]), A = M[0], k = M[1];
  return [{
    isBound: R,
    isSnap: w,
    offset: A
  }, {
    isBound: C,
    isSnap: E,
    offset: k
  }];
}
function $g(r, t, e, i) {
  i === void 0 && (i = e);
  var n = g1(jg(r), i.vertical, i.horizontal), s = n.horizontal, a = n.vertical, o = t ? {
    horizontal: {
      isSnap: !1,
      index: -1
    },
    vertical: {
      isSnap: !1,
      index: -1
    }
  } : zg(r, e.vertical, e.horizontal), u = o.horizontal, h = o.vertical, l = Tv(s[0], u), c = Tv(a[0], h), d = Math.abs(l), p = Math.abs(c);
  return {
    horizontal: {
      isBound: s[0].isBound,
      isSnap: u.isSnap,
      snapIndex: u.index,
      offset: l,
      dist: d,
      bounds: s,
      snap: u
    },
    vertical: {
      isBound: a[0].isBound,
      isSnap: h.isSnap,
      snapIndex: h.index,
      offset: c,
      dist: p,
      bounds: a,
      snap: h
    }
  };
}
function Bw(r, t, e, i, n) {
  var s = g1(t, e, i), a = s.horizontal, o = s.vertical, u = hR(r, e, i, n), h = u.horizontal, l = u.vertical, c = Tv(a[0], h), d = Tv(o[0], l), p = Math.abs(c), g = Math.abs(d);
  return {
    horizontal: {
      isBound: a[0].isBound,
      isSnap: h.isSnap,
      snapIndex: h.index,
      offset: c,
      dist: p,
      bounds: a,
      snap: h
    },
    vertical: {
      isBound: o[0].isBound,
      isSnap: l.isSnap,
      snapIndex: l.index,
      offset: d,
      dist: g,
      bounds: o,
      snap: l
    }
  };
}
function b4(r, t, e, i) {
  var n = $e(r, t) / Math.PI * 180, s = e.vertical, a = s.isBound, o = s.isSnap, u = s.dist, h = e.horizontal, l = h.isBound, c = h.isSnap, d = h.dist, p = n % 180, g = p < 3 || p > 177, v = p > 87 && p < 93;
  return d < u && (a || o && !v && (!i || !g)) ? "vertical" : l || c && !g && (!i || !v) ? "horizontal" : "";
}
function x4(r, t, e, i, n, s) {
  return e.map(function(a) {
    var o = a[0], u = a[1], h = ze(t, o), l = ze(t, u), c = i ? E4(r, h, l, n) : $g(r, n, {
      vertical: [l[0]],
      horizontal: [l[1]]
    }), d = c.horizontal, p = d.offset, g = d.isBound, v = d.isSnap, m = c.vertical, _ = m.offset, y = m.isBound, b = m.isSnap, x = kt(u, o);
    if (!_ && !p)
      return {
        isBound: y || g,
        isSnap: b || v,
        sign: x,
        offset: [0, 0]
      };
    var w = b4(h, l, c, i);
    if (!w)
      return {
        sign: x,
        isBound: !1,
        isSnap: !1,
        offset: [0, 0]
      };
    var E = w === "vertical", R = [0, 0];
    return !i && Math.abs(u[0]) === 1 && Math.abs(u[1]) === 1 && o[0] !== u[0] && o[1] !== u[1] ? R = Ln({
      datas: s,
      distX: -_,
      distY: -p
    }) : R = Gy(h, l, -(E ? _ : p), E, s).offset, R = R.map(function(C, P) {
      return C * (x[P] ? 2 / x[P] : 0);
    }), {
      sign: x,
      isBound: E ? y : g,
      isSnap: E ? b : v,
      offset: R
    };
  });
}
function Lw(r, t) {
  return r.isBound ? r.offset : t.isSnap ? t.offset : 0;
}
function E4(r, t, e, i) {
  var n = l4(r, t, e), s = n.horizontal, a = n.vertical, o = i ? {
    horizontal: {
      isSnap: !1
    },
    vertical: {
      isSnap: !1
    }
  } : t4(r, t, e), u = o.horizontal, h = o.vertical, l = Lw(s, u), c = Lw(a, h), d = Math.abs(l), p = Math.abs(c);
  return {
    horizontal: {
      isBound: s.isBound,
      isSnap: u.isSnap,
      offset: l,
      dist: d
    },
    vertical: {
      isBound: a.isBound,
      isSnap: h.isSnap,
      offset: c,
      dist: p
    }
  };
}
function w4(r, t, e, i, n) {
  var s = [-e[0], -e[1]], a = r.state, o = a.width, u = a.height, h = r.props.bounds, l = 1 / 0, c = 1 / 0;
  if (h) {
    var d = [[e[0], -e[1]], [-e[0], e[1]]], p = h.left, g = p === void 0 ? -1 / 0 : p, v = h.top, m = v === void 0 ? -1 / 0 : v, _ = h.right, y = _ === void 0 ? 1 / 0 : _, b = h.bottom, x = b === void 0 ? 1 / 0 : b;
    d.forEach(function(w) {
      var E = w[0] !== s[0], R = w[1] !== s[1], C = ze(t, w), P = $e(i, C) * 360 / Math.PI;
      if (R) {
        var N = C.slice();
        (Math.abs(P - 360) < 2 || Math.abs(P - 180) < 2) && (N[1] = i[1]);
        var M = Gy(i, N, (i[1] < C[1] ? x : m) - C[1], !1, n), A = M.offset, k = A[1], H = M.isOutside;
        isNaN(k) || (c = u + (H ? 1 : -1) * Math.abs(k));
      }
      if (E) {
        var N = C.slice();
        (Math.abs(P - 90) < 2 || Math.abs(P - 270) < 2) && (N[0] = i[0]);
        var L = Gy(i, N, (i[0] < C[0] ? y : g) - C[0], !0, n), U = L.offset[0], V = L.isOutside;
        isNaN(U) || (l = o + (V ? 1 : -1) * Math.abs(U));
      }
    });
  }
  return {
    maxWidth: l,
    maxHeight: c
  };
}
function Hy(r) {
  var t = r.state, e = t.snapOffset, i = t.containerClientRect, n = i.overflow, s = i.scrollHeight, a = i.scrollWidth, o = i.clientHeight, u = i.clientWidth, h = i.clientLeft, l = i.clientTop, c = r.props, d = c.snapGap, p = d === void 0 ? !0 : d, g = c.verticalGuidelines, v = c.horizontalGuidelines, m = c.snapThreshold, _ = m === void 0 ? 5 : m, y = c.snapGridWidth, b = y === void 0 ? 0 : y, x = c.snapGridHeight, w = x === void 0 ? 0 : x, E = c.maxSnapElementGuidelineDistance, R = E === void 0 ? 1 / 0 : E, C = Pi(Qr(r.state)), P = C.top, N = C.left, M = C.bottom, A = C.right, k = {
    top: P,
    left: N,
    bottom: M,
    right: A,
    center: (N + A) / 2,
    middle: (P + M) / 2
  }, H = I4(r), L = Ot([], H, !0);
  return p && L.push.apply(L, T4(r, k, _)), L.push.apply(L, C4(b, w, n ? a : u, n ? s : o, h, l)), L.push.apply(L, vR(v || !1, g || !1, n ? a : u, n ? s : o, h, l, e)), L = L.filter(function(U) {
    var V = U.element, K = U.elementRect, G = U.type;
    if (!V || !K)
      return !0;
    var B = K.rect;
    return pR(k, B, G, R);
  }), L;
}
function T4(r, t, e) {
  var i = r.props, n = i.maxSnapElementGuidelineDistance, s = n === void 0 ? 1 / 0 : n, a = i.maxSnapElementGapDistance, o = a === void 0 ? 1 / 0 : a, u = r.state.elementRects, h = [];
  return [["vertical", Aa, Fa], ["horizontal", Fa, Aa]].forEach(function(l) {
    var c = l[0], d = l[1], p = l[2], g = t[d.start], v = t[d.end], m = t[d.center], _ = t[p.start], y = t[p.end];
    function b(E) {
      var R = E.rect;
      return R[d.end] < g + e ? g - R[d.end] : v - e < R[d.start] ? R[d.start] - v : -1;
    }
    var x = u.filter(function(E) {
      var R = E.rect;
      return R[p.start] > y || R[p.end] < _ ? !1 : b(E) > 0;
    }).sort(function(E, R) {
      return b(E) - b(R);
    }), w = [];
    x.forEach(function(E) {
      x.forEach(function(R) {
        if (E !== R) {
          var C = E.rect, P = R.rect, N = C[p.start], M = C[p.end], A = P[p.start], k = P[p.end];
          N > k || A > M || w.push([E, R]);
        }
      });
    }), w.forEach(function(E) {
      var R = E[0], C = E[1], P = R.rect, N = C.rect, M = P[d.start], A = P[d.end], k = N[d.start], H = N[d.end], L = 0, U = 0, V = !1, K = !1, G = !1;
      if (A <= g && v <= k) {
        if (K = !0, L = (k - A - (v - g)) / 2, U = A + L + (v - g) / 2, Math.abs(U - m) > e)
          return;
      } else if (A < k && H < g + e) {
        if (V = !0, L = k - A, U = H + L, Math.abs(U - g) > e)
          return;
      } else if (A < k && v - e < M) {
        if (G = !0, L = k - A, U = M - L, Math.abs(U - v) > e)
          return;
      } else
        return;
      !L || !pR(t, N, c, s) || L > o || h.push({
        type: c,
        pos: c === "vertical" ? [U, 0] : [0, U],
        element: C.element,
        size: 0,
        className: C.className,
        isStart: V,
        isCenter: K,
        isEnd: G,
        gap: L,
        hide: !0,
        gapRects: [R, C]
      });
    });
  }), h;
}
function C4(r, t, e, i, n, s) {
  n === void 0 && (n = 0), s === void 0 && (s = 0);
  var a = [];
  if (t)
    for (var o = 0; o <= i; o += t)
      a.push({
        type: "horizontal",
        pos: [0, Yt(o - s, 0.1)],
        size: e,
        hide: !0
      });
  if (r)
    for (var o = 0; o <= e; o += r)
      a.push({
        type: "vertical",
        pos: [Yt(o - n, 0.1), 0],
        size: i,
        hide: !0
      });
  return a;
}
function pR(r, t, e, i) {
  return e === "horizontal" ? Math.abs(r.right - t.left) <= i || Math.abs(r.left - t.right) <= i || r.left <= t.right && t.left <= r.right : e === "vertical" ? Math.abs(r.bottom - t.top) <= i || Math.abs(r.top - t.bottom) <= i || r.top <= t.bottom && t.top <= r.bottom : !0;
}
function I4(r) {
  var t = r.state, e = r.props.elementGuidelines, i = e === void 0 ? [] : e;
  if (!i.length)
    return t.elementRects = [], [];
  var n = (t.elementRects || []).filter(function(d) {
    return !d.refresh;
  }), s = i.map(function(d) {
    return en(d) && "element" in d ? z(z({}, d), {
      element: Zc(d.element, !0)
    }) : {
      element: Zc(d, !0)
    };
  }).filter(function(d) {
    return d.element;
  }), a = I5(n.map(function(d) {
    return d.element;
  }), s.map(function(d) {
    return d.element;
  })), o = a.maintained, u = a.added, h = [];
  o.forEach(function(d) {
    var p = d[0], g = d[1];
    h[g] = n[p];
  }), R4(r, u.map(function(d) {
    return s[d];
  })).map(function(d, p) {
    h[u[p]] = d;
  }), t.elementRects = h;
  var l = f1(r.props.elementSnapDirections), c = [];
  return h.forEach(function(d) {
    var p = d.element, g = d.top, v = g === void 0 ? l.top : g, m = d.left, _ = m === void 0 ? l.left : m, y = d.right, b = y === void 0 ? l.right : y, x = d.bottom, w = x === void 0 ? l.bottom : x, E = d.center, R = E === void 0 ? l.center : E, C = d.middle, P = C === void 0 ? l.middle : C, N = d.className, M = d.rect, A = d1({
      top: v,
      right: b,
      left: _,
      bottom: w,
      center: R,
      middle: P
    }, M), k = A.horizontal, H = A.vertical, L = M.top, U = M.left, V = M.right - U, K = M.bottom - L, G = [V, K];
    H.forEach(function(B) {
      c.push({
        type: "vertical",
        element: p,
        pos: [Yt(B, 0.1), L],
        size: K,
        sizes: G,
        className: N,
        elementRect: d
      });
    }), k.forEach(function(B) {
      c.push({
        type: "horizontal",
        element: p,
        pos: [U, Yt(B, 0.1)],
        size: V,
        sizes: G,
        className: N,
        elementRect: d
      });
    });
  }), c;
}
function vR(r, t, e, i, n, s, a) {
  n === void 0 && (n = 0), s === void 0 && (s = 0), a === void 0 && (a = {
    left: 0,
    top: 0,
    right: 0,
    bottom: 0
  });
  var o = [], u = a.left, h = a.top, l = a.bottom, c = a.right, d = e + c - u, p = i + l - h;
  return r && r.forEach(function(g) {
    var v = en(g) ? g : {
      pos: g
    };
    o.push({
      type: "horizontal",
      pos: [u, Yt(v.pos - s + h, 0.1)],
      size: d,
      className: v.className
    });
  }), t && t.forEach(function(g) {
    var v = en(g) ? g : {
      pos: g
    };
    o.push({
      type: "vertical",
      pos: [Yt(v.pos - n + u, 0.1), h],
      size: p,
      className: v.className
    });
  }), o;
}
function R4(r, t) {
  if (!t.length)
    return [];
  var e = r.state, i = e.containerClientRect, n = e.targetClientRect, s = n.top, a = n.left, o = e.rootMatrix, u = e.is3d, h = u ? 4 : 3, l = KD(o, i, h), c = l[0], d = l[1], p = Qr(e), g = bd(p), v = g.minX, m = g.minY, _ = kt([v, m], Ku(o, [a - c, s - d], h)).map(function(x) {
    return GD(x);
  }), y = _[0], b = _[1];
  return t.map(function(x) {
    var w = x.element.getBoundingClientRect(), E = w.left - c, R = w.top - d, C = R + w.height, P = E + w.width, N = Ku(o, [E, R], h), M = N[0], A = N[1], k = Ku(o, [P, C], h), H = k[0], L = k[1];
    return z(z({}, x), {
      rect: {
        left: M + y,
        right: H + y,
        top: A + b,
        bottom: L + b,
        center: (M + H) / 2 + y,
        middle: (A + L) / 2 + b
      }
    });
  });
}
function $m(r) {
  var t = r.state;
  if (!(t.guidelines && t.guidelines.length)) {
    var e = r.state.container, i = r.props.snapContainer || e, n = t.containerClientRect, s = {
      left: 0,
      top: 0,
      bottom: 0,
      right: 0
    };
    if (e !== i) {
      var a = Zc(i, !0);
      if (a) {
        var o = ic(a), u = Rw(t, [o.left - n.left, o.top - n.top]), h = Rw(t, [o.right - n.right, o.bottom - n.bottom]);
        s.left = Yt(u[0], 1e-5), s.top = Yt(u[1], 1e-5), s.right = Yt(h[0], 1e-5), s.bottom = Yt(h[1], 1e-5);
      }
    }
    t.snapOffset = s, t.guidelines = Hy(r), t.enableSnap = !0;
  }
}
function gR(r, t, e, i, n, s) {
  var a = cu(r, t, e, s ? 4 : 3), o = ze(a, i);
  return u1(a, kt(n, o));
}
function S4(r, t, e, i, n, s) {
  var a = s.fixedDirection, o = r4(e, a, i), u = v1(r, t, e, i), h = Ot(Ot([], x4(r, t, o, i, n, s), !0), dR(r, u, s), !0), l = wv(h, 0), c = wv(h, 1);
  return {
    width: {
      isBound: l.isBound,
      offset: l.offset[0]
    },
    height: {
      isBound: c.isBound,
      offset: c.offset[1]
    }
  };
}
function P4(r, t, e, i, n, s, a, o, u) {
  var h = ze(t, a), l = $g(r, o, {
    vertical: [h[0]],
    horizontal: [h[1]]
  }), c = l.horizontal.offset, d = l.vertical.offset;
  if (d || c) {
    var p = Ln({
      datas: u,
      distX: -d,
      distY: -c
    }), g = p[0], v = p[1], m = Math.min(n || 1 / 0, e + a[0] * g), _ = Math.min(s || 1 / 0, i + a[1] * v);
    return [m - e, _ - i];
  }
  return [0, 0];
}
function mR(r, t, e, i, n, s, a, o) {
  for (var u = Qr(r.state), h = r.props.keepRatio, l = 0, c = 0, d = 0; d < 2; ++d) {
    var p = t(l, c), g = S4(r, p, n, h, a, o), v = g.width, m = g.height, _ = v.isBound, y = m.isBound, b = v.offset, x = m.offset;
    if (d === 1 && (_ || (b = 0), y || (x = 0)), d === 0 && a && !_ && !y)
      return [0, 0];
    if (h) {
      var w = Math.abs(b) * (e ? 1 / e : 1), E = Math.abs(x) * (i ? 1 / i : 1), R = _ && y ? w < E : y || !_ && w < E;
      R ? b = e * x / i : x = i * b / e;
    }
    l += b, c += x;
  }
  if (n[0] && n[1]) {
    var C = w4(r, u, n, s, o), P = C.maxWidth, N = C.maxHeight, M = P4(r, t(l, c).map(function(H) {
      return H.map(function(L) {
        return Yt(L, pD);
      });
    }), e + l, i + c, P, N, n, a, o), b = M[0], x = M[1];
    l += b, c += x;
  }
  return [l, c];
}
function N4(r, t, e) {
  if (!Ol(r, "rotatable"))
    return {
      isSnap: !1,
      rotation: e
    };
  var i = t.pos1, n = t.pos2, s = t.pos3, a = t.pos4, o = t.origin, u = e * Math.PI / 180, h = [i, n, s, a].map(function(p) {
    return kt(p, o);
  }), l = h.map(function(p) {
    return Bg(p, u);
  }), c = Ot(Ot([], f4(r, h, l, o, e), !0), u4(r, h, l, o, e), !0);
  c.sort(function(p, g) {
    return Math.abs(p - e) - Math.abs(g - e);
  });
  var d = c.length > 0;
  return {
    isSnap: d,
    rotation: d ? c[0] : e
  };
}
function O4(r, t, e, i, n, s, a) {
  if (!Ol(r, "resizable"))
    return [0, 0];
  var o = a.fixedDirection, u = a.nextAllMatrix, h = r.state, l = h.allMatrix, c = h.is3d;
  return mR(r, function(d, p) {
    return gR(u || l, t + d, e + p, o, n, c);
  }, t, e, i, n, s, a);
}
function A4(r, t, e, i, n) {
  if (!Ol(r, "scalable"))
    return [0, 0];
  var s = n.startOffsetWidth, a = n.startOffsetHeight, o = n.fixedPosition, u = n.fixedDirection, h = n.is3d, l = mR(r, function(c, d) {
    return gR(TD(n, te(t, [c / s, d / a])), s, a, u, o, h);
  }, s, a, e, o, i, n);
  return [l[0] / s, l[1] / a];
}
function F4(r, t) {
  t.absolutePoses = Qr(r.state);
}
function Dw(r) {
  var t = [];
  return r.forEach(function(e) {
    e.guidelineInfos.forEach(function(i) {
      var n = i.guideline;
      t.indexOf(n) > -1 || t.push(n);
    });
  }), t;
}
function Uw(r, t, e, i, n, s) {
  var a = g1(jg(r, s), t, e), o = a.vertical, u = a.horizontal;
  o.forEach(function(d) {
    d.isBound && i.push({
      type: "bounds",
      pos: d.pos
    });
  }), u.forEach(function(d) {
    d.isBound && n.push({
      type: "bounds",
      pos: d.pos
    });
  });
  var h = h4(r), l = h.vertical, c = h.horizontal;
  l.forEach(function(d) {
    Ps(i, function(p) {
      var g = p.type, v = p.pos;
      return g === "bounds" && v === d;
    }) >= 0 || i.push({
      type: "bounds",
      pos: d
    });
  }), c.forEach(function(d) {
    Ps(n, function(p) {
      var g = p.type, v = p.pos;
      return g === "bounds" && v === d;
    }) >= 0 || n.push({
      type: "bounds",
      pos: d
    });
  });
}
var M4 = l1("", ["resizable", "scalable"]), k4 = {
  name: "snappable",
  dragRelation: "strong",
  props: {
    snappable: [Boolean, Array],
    snapContainer: Object,
    snapDirections: [Boolean, Object],
    elementSnapDirections: [Boolean, Object],
    snapGap: Boolean,
    snapGridWidth: Number,
    snapGridHeight: Number,
    isDisplaySnapDigit: Boolean,
    isDisplayInnerSnapDigit: Boolean,
    snapDigit: Number,
    snapThreshold: Number,
    horizontalGuidelines: Array,
    verticalGuidelines: Array,
    elementGuidelines: Array,
    bounds: Object,
    innerBounds: Object,
    snapDistFormat: Function,
    maxSnapElementGuidelineDistance: Number,
    maxSnapElementGapDistance: Number
  },
  events: {
    onSnap: "snap"
  },
  css: [`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],
  render: function(r, t) {
    var e = r.state, i = e.top, n = e.left, s = e.pos1, a = e.pos2, o = e.pos3, u = e.pos4, h = e.snapRenderInfo;
    if (!h || !Ol(r, ""))
      return [];
    e.guidelines = Hy(r);
    var l = Math.min(s[0], a[0], o[0], u[0]), c = Math.min(s[1], a[1], o[1], u[1]), d = h.externalPoses || [], p = Qr(r.state), g = [], v = [], m = [], _ = [], y = [], b = Pi(p), x = b.width, w = b.height, E = b.top, R = b.left, C = b.bottom, P = b.right, N = {
      left: R,
      right: P,
      top: E,
      bottom: C,
      center: (R + P) / 2,
      middle: (E + C) / 2
    }, M = d.length > 0, A = M ? Pi(d) : {};
    if (!h.request) {
      if (h.direction && y.push(e4(r, p, h.direction)), h.snap) {
        var k = Pi(p);
        h.center && (k.middle = (k.top + k.bottom) / 2, k.center = (k.left + k.right) / 2), y.push(Sw(r, k, 1));
      }
      M && (h.center && (A.middle = (A.top + A.bottom) / 2, A.center = (A.left + A.right) / 2), y.push(Sw(r, A, 1))), y.forEach(function(V) {
        var K = V.vertical.posInfos, G = V.horizontal.posInfos;
        g.push.apply(g, K.filter(function(B) {
          var W = B.guidelineInfos;
          return W.some(function(Q) {
            var ut = Q.guideline;
            return !ut.hide;
          });
        }).map(function(B) {
          return {
            type: "snap",
            pos: B.pos
          };
        })), v.push.apply(v, G.filter(function(B) {
          var W = B.guidelineInfos;
          return W.some(function(Q) {
            var ut = Q.guideline;
            return !ut.hide;
          });
        }).map(function(B) {
          return {
            type: "snap",
            pos: B.pos
          };
        })), m.push.apply(m, Dw(K)), _.push.apply(_, Dw(G));
      });
    }
    Uw(r, [R, P], [E, C], g, v), M && Uw(r, [A.left, A.right], [A.top, A.bottom], g, v, h.externalBounds);
    var H = Ot(Ot([], m, !0), _, !0), L = H.filter(function(V) {
      return V.element && !V.gapRects;
    }), U = H.filter(function(V) {
      return V.gapRects;
    }).sort(function(V, K) {
      return V.gap - K.gap;
    });
    return _t(r, "onSnap", {
      guidelines: H.filter(function(V) {
        var K = V.element;
        return !K;
      }),
      elements: L,
      gaps: U
    }, !0), Ot(Ot(Ot(Ot(Ot(Ot([], v4(r, L, [l, c], N, t), !0), g4(r, U, [l, c], N, t), !0), kw(r, "horizontal", _, [n, i], N, t), !0), kw(r, "vertical", m, [n, i], N, t), !0), Mw(r, "horizontal", v, l, i, x, 0, t), !0), Mw(r, "vertical", g, c, n, w, 1, t), !0);
  },
  dragStart: function(r, t) {
    r.state.snapRenderInfo = {
      request: t.isRequest,
      snap: !0,
      center: !0
    }, $m(r);
  },
  drag: function(r) {
    var t = r.state;
    t.guidelines = Hy(r);
  },
  pinchStart: function(r) {
    this.unset(r);
  },
  dragEnd: function(r) {
    this.unset(r);
  },
  dragControlCondition: function(r, t) {
    if (M4(r, t) || jy(r, t))
      return !0;
    if (!t.isRequest && t.inputEvent)
      return mr(t.inputEvent.target, St("snap-control"));
  },
  dragControlStart: function(r) {
    r.state.snapRenderInfo = null, $m(r);
  },
  dragControl: function(r) {
    this.drag(r);
  },
  dragControlEnd: function(r) {
    this.unset(r);
  },
  dragGroupStart: function(r, t) {
    this.dragStart(r, t);
  },
  dragGroup: function(r) {
    this.drag(r);
  },
  dragGroupEnd: function(r) {
    this.unset(r);
  },
  dragGroupControlStart: function(r) {
    r.state.snapRenderInfo = null, $m(r);
  },
  dragGroupControl: function(r) {
    this.drag(r);
  },
  dragGroupControlEnd: function(r) {
    this.unset(r);
  },
  unset: function(r) {
    var t = r.state;
    t.enableSnap = !1, t.guidelines = [], t.snapRenderInfo = null, t.elementRects = [];
  }
};
function _R(r, t, e, i) {
  var n = r.state, s = n.renderPoses, a = n.rotation, o = n.direction, u = au(r.props, t).zoom, h = o > 0 ? 1 : -1, l = a / Math.PI * 180, c = {}, d = r.renderState;
  d.renderDirectionMap || (d.renderDirectionMap = {});
  var p = d.renderDirectionMap;
  return e.forEach(function(g) {
    var v = g.dir;
    c[v] = !0;
  }), e.map(function(g) {
    var v = g.data, m = g.classNames, _ = g.dir, y = r1[_];
    if (!y || !c[_])
      return null;
    p[_] = !0;
    var b = (Yt(l, 15) + h * HI[_] + 720) % 180, x = {};
    return Pl(v).forEach(function(w) {
      x["data-".concat(w)] = v[w];
    }), i.createElement("div", z({
      className: St.apply(void 0, Ot(["control", "direction", _, t], m, !1)),
      "data-rotation": b,
      "data-direction": _
    }, x, {
      key: "direction-".concat(_),
      style: a1.apply(void 0, Ot([a, u], y.map(function(w) {
        return s[w];
      }), !1))
    }));
  });
}
function yR(r, t, e, i) {
  var n = au(r.props, e).renderDirections, s = n === void 0 ? t : n;
  if (!s)
    return [];
  var a = s === !0 ? e1 : s;
  return _R(r, e, a.map(function(o) {
    return {
      data: {},
      classNames: [],
      dir: o
    };
  }), i);
}
function B4(r, t) {
  var e = r.renderState;
  e.renderDirectionMap || (e.renderDirectionMap = {});
  var i = r.state, n = i.renderPoses, s = i.rotation, a = i.direction, o = e.renderDirectionMap, u = r.props.zoom, h = a > 0 ? 1 : -1, l = s / Math.PI * 180;
  return Pl(o).map(function(c) {
    var d = r1[c];
    if (!d)
      return null;
    var p = (Yt(l, 15) + h * HI[c] + 720) % 180;
    return t.createElement("div", {
      className: St("around-control"),
      "data-rotation": p,
      "data-direction": c,
      key: "direction-around-".concat(c),
      style: a1.apply(void 0, Ot([s, u], d.map(function(g) {
        return n[g];
      }), !1))
    });
  });
}
function Jc(r, t, e, i, n, s) {
  for (var a = [], o = 6; o < arguments.length; o++)
    a[o - 6] = arguments[o];
  var u = $e(e, i), h = t ? Yt(u / Math.PI * 180, 15) % 180 : -1;
  return r.createElement("div", {
    key: "line-".concat(s),
    className: St.apply(void 0, Ot(["line", "direction", t ? "edge" : "", t], a, !1)),
    "data-rotation": h,
    "data-line-index": s,
    "data-direction": t,
    style: rc(e, i, n, u)
  });
}
function bR(r, t, e, i, n) {
  var s = e === !0 ? vD : e;
  return s.map(function(a, o) {
    var u = r1[a], h = u[0], l = u[1];
    if (l != null)
      return Jc(r, a, i[h], i[l], n, "".concat(t, "Edge").concat(o), t);
  }).filter(Boolean);
}
function xR(r) {
  return function(t, e) {
    var i = au(t.props, r).edge;
    return i && (i === !0 || i.length) ? Ot(Ot([], bR(e, r, i, t.state.renderPoses, t.props.zoom), !0), L4(t, r, e), !0) : ER(t, r, e);
  };
}
function ER(r, t, e) {
  return yR(r, e1, t, e);
}
function L4(r, t, e) {
  return yR(r, ["nw", "ne", "sw", "se"], t, e);
}
var Br = {
  name: "draggable",
  props: {
    draggable: Boolean,
    throttleDrag: Number,
    throttleDragRotate: Number,
    startDragRotate: Number,
    edgeDraggable: Boolean
  },
  events: {
    onDragStart: "dragStart",
    onDrag: "drag",
    onDragEnd: "dragEnd",
    onDragGroupStart: "dragGroupStart",
    onDragGroup: "dragGroup",
    onDragGroupEnd: "dragGroupEnd"
  },
  render: function(r, t) {
    var e = r.props, i = e.throttleDragRotate, n = e.zoom, s = r.state, a = s.dragInfo, o = s.beforeOrigin;
    if (!i || !a)
      return [];
    var u = a.dist;
    if (!u[0] && !u[1])
      return [];
    var h = Ki(u), l = $e(u, [0, 0]);
    return [t.createElement("div", {
      className: St("line", "horizontal", "dragline", "dashed"),
      key: "dragRotateGuideline",
      style: {
        width: "".concat(h, "px"),
        transform: "translate(".concat(o[0], "px, ").concat(o[1], "px) rotate(").concat(l, "rad) scaleY(").concat(n, ")")
      }
    })];
  },
  dragStart: function(r, t) {
    var e = t.datas, i = t.parentEvent, n = t.parentGesto, s = r.state, a = s.target, o = s.gestos;
    if (o.draggable)
      return !1;
    o.draggable = n || r.targetGesto;
    var u = rn(a);
    e.datas = {}, e.left = parseFloat(u.left || "") || 0, e.top = parseFloat(u.top || "") || 0, e.bottom = parseFloat(u.bottom || "") || 0, e.right = parseFloat(u.right || "") || 0, e.startValue = [0, 0], lu(r, t), Gg(t, "translate"), F4(r, e), e.prevDist = [0, 0], e.prevBeforeDist = [0, 0], e.isDrag = !1, e.deltaOffset = [0, 0];
    var h = Ut(r, t, z({
      set: function(c) {
        e.startValue = c;
      }
    }, Ug(t))), l = i || _t(r, "onDragStart", h);
    return l !== !1 ? (e.isDrag = !0, r.state.dragInfo = {
      startRect: r.getRect(),
      dist: [0, 0]
    }) : (o.draggable = null, e.isPinch = !1), e.isDrag ? h : !1;
  },
  drag: function(r, t) {
    if (!!t) {
      Lg(t, "translate");
      var e = t.datas, i = t.parentEvent, n = t.parentFlag, s = t.isPinch, a = t.isRequest, o = t.deltaOffset, u = t.distX, h = t.distY, l = e.isDrag, c = e.prevDist, d = e.prevBeforeDist, p = e.startValue;
      if (!!l) {
        o && (u += o[0], h += o[1]);
        var g = r.props, v = g.parentMoveable, m = i ? 0 : g.throttleDrag || 0, _ = i ? 0 : g.throttleDragRotate || 0, y = !1, b = 0;
        if (!i && _ > 0 && (u || h)) {
          var x = g.startDragRotate || 0, w = Yt(x + $e([0, 0], [u, h]) * 180 / Math.PI, _) - x, E = h * Math.abs(Math.cos((w - 90) / 180 * Math.PI)), R = u * Math.abs(Math.cos(w / 180 * Math.PI)), C = Ki([R, E]);
          b = w * Math.PI / 180, u = C * Math.cos(b), h = C * Math.sin(b);
        }
        if (!s && !i && !n && (!_ || u || h)) {
          var P = y4(r, u, h, _, a || o, e), N = P[0], M = P[1], A = N.isSnap, k = N.isBound, H = N.offset, L = M.isSnap, U = M.isBound, V = M.offset;
          y = A || L || k || U, u += H, h += V;
        }
        var K = te(VI({
          datas: e,
          distX: u,
          distY: h
        }), p), G = te(_D({
          datas: e,
          distX: u,
          distY: h
        }), p);
        !_ && !y && (sp(G, m), sp(K, m)), sp(G, Lr), sp(K, Lr);
        var B = kt(K, p), W = kt(G, p), Q = kt(W, c), ut = kt(B, d);
        e.prevDist = W, e.prevBeforeDist = B, e.passDelta = Q, e.passDist = W;
        var it = e.left + B[0], ht = e.top + B[1], F = e.right - B[0], vt = e.bottom - B[1], nt = Dg(e, "translate(".concat(G[0], "px, ").concat(G[1], "px)"), "translate(".concat(W[0], "px, ").concat(W[1], "px)"));
        if (i1(t, nt), r.state.dragInfo.dist = i ? [0, 0] : W, !(!i && !v && Q.every(function(Z) {
          return !Z;
        }) && ut.some(function(Z) {
          return !Z;
        }))) {
          var ft = r.state, rt = ft.width, j = ft.height, xt = Ut(r, t, z({
            transform: nt,
            dist: W,
            delta: Q,
            translate: G,
            beforeDist: B,
            beforeDelta: ut,
            beforeTranslate: K,
            left: it,
            top: ht,
            right: F,
            bottom: vt,
            width: rt,
            height: j,
            isPinch: s
          }, qc({
            transform: nt
          }, t)));
          return !i && _t(r, "onDrag", xt), xt;
        }
      }
    }
  },
  dragAfter: function(r, t) {
    var e = t.datas, i = e.deltaOffset;
    return i[0] || i[1] ? (e.deltaOffset = [0, 0], this.drag(r, z(z({}, t), {
      deltaOffset: i
    }))) : !1;
  },
  dragEnd: function(r, t) {
    var e = t.parentEvent, i = t.datas;
    if (r.state.dragInfo = null, !!i.isDrag) {
      i.isDrag = !1;
      var n = gi(r, t, {});
      return !e && _t(r, "onDragEnd", n), n;
    }
  },
  dragGroupStart: function(r, t) {
    var e = t.datas, i = t.clientX, n = t.clientY, s = this.dragStart(r, t);
    if (!s)
      return !1;
    var a = jm(r, this, "dragStart", [i || 0, n || 0], t, !1, "draggable"), o = z(z({}, s), {
      targets: r.props.targets,
      events: a
    }), u = _t(r, "onDragGroupStart", o);
    return e.isDrag = u !== !1, e.isDrag ? s : !1;
  },
  dragGroup: function(r, t) {
    var e = t.datas;
    if (!!e.isDrag) {
      var i = this.drag(r, t), n = t.datas.passDelta, s = jm(r, this, "drag", n, t, !1, "draggable");
      if (!!i) {
        var a = z({
          targets: r.props.targets,
          events: s
        }, i);
        return _t(r, "onDragGroup", a), a;
      }
    }
  },
  dragGroupEnd: function(r, t) {
    var e = t.isDrag, i = t.datas;
    if (!!i.isDrag) {
      this.dragEnd(r, t);
      var n = jm(r, this, "dragEnd", [0, 0], t, !1, "draggable");
      return _t(r, "onDragGroupEnd", gi(r, t, {
        targets: r.props.targets,
        events: n
      })), e;
    }
  },
  request: function(r) {
    var t = {}, e = r.getRect(), i = 0, n = 0;
    return {
      isControl: !1,
      requestStart: function() {
        return {
          datas: t
        };
      },
      request: function(s) {
        return "x" in s ? i = s.x - e.left : "deltaX" in s && (i += s.deltaX), "y" in s ? n = s.y - e.top : "deltaY" in s && (n += s.deltaY), {
          datas: t,
          distX: i,
          distY: n
        };
      },
      requestEnd: function() {
        return {
          datas: t,
          isDrag: !0
        };
      }
    };
  },
  unset: function(r) {
    r.state.gestos.draggable = null, r.state.dragInfo = null;
  }
}, Gw = l1("resizable"), zy = {
  name: "resizable",
  ableGroup: "size",
  canPinch: !0,
  props: {
    resizable: Boolean,
    throttleResize: Number,
    renderDirections: Array,
    keepRatio: Boolean,
    resizeFormat: Function,
    keepRatioFinally: Boolean,
    edge: Boolean
  },
  events: {
    onResizeStart: "resizeStart",
    onBeforeResize: "beforeResize",
    onResize: "resize",
    onResizeEnd: "resizeEnd",
    onResizeGroupStart: "resizeGroupStart",
    onBeforeResizeGroup: "beforeResizeGroup",
    onResizeGroup: "resizeGroup",
    onResizeGroupEnd: "resizeGroupEnd"
  },
  render: xR("resizable"),
  dragControlCondition: Gw,
  dragControlStart: function(r, t) {
    var e, i = t.inputEvent, n = t.isPinch, s = t.isGroup, a = t.parentDirection, o = t.parentGesto, u = t.datas, h = t.parentFixedDirection, l = t.parentEvent, c = a || (n ? [0, 0] : o1(i.target)), d = r.state, p = d.target, g = d.width, v = d.height, m = d.gestos;
    if (!c || !p || m.resizable)
      return !1;
    m.resizable = o || r.controlGesto, !n && lu(r, t), u.datas = {}, u.direction = c, u.startOffsetWidth = g, u.startOffsetHeight = v, u.prevWidth = 0, u.prevHeight = 0, u.minSize = [0, 0], u.startWidth = d.cssWidth, u.startHeight = d.cssHeight, u.maxSize = [1 / 0, 1 / 0], s || (u.minSize = [d.minOffsetWidth, d.minOffsetHeight], u.maxSize = [d.maxOffsetWidth, d.maxOffsetHeight]);
    var _ = r.props.transformOrigin || "% %";
    u.transformOrigin = _ && Ni(_) ? _.split(" ") : _, u.startOffsetMatrix = d.offsetMatrix, u.startTransformOrigin = d.transformOrigin, u.isWidth = (e = t == null ? void 0 : t.parentIsWidth) !== null && e !== void 0 ? e : !c[0] && !c[1] || c[0] || !c[1];
    function y(C) {
      u.ratio = C && isFinite(C) ? C : 0;
    }
    u.startPositions = Qr(r.state);
    function b(C) {
      u.fixedDirection = C, u.fixedPosition = ze(u.startPositions, C);
    }
    function x(C) {
      u.minSize = [Le("".concat(C[0]), 0) || 0, Le("".concat(C[1]), 0) || 0];
    }
    function w(C) {
      var P = [C[0] || 1 / 0, C[1] || 1 / 0];
      (!vy(P[0]) || isFinite(P[0])) && (P[0] = Le("".concat(P[0]), 0) || 1 / 0), (!vy(P[1]) || isFinite(P[1])) && (P[1] = Le("".concat(P[1]), 0) || 1 / 0), u.maxSize = P;
    }
    y(g / v), b(h || [-c[0], -c[1]]), u.setFixedDirection = b, u.setMin = x, u.setMax = w;
    var E = Ut(r, t, {
      direction: c,
      startRatio: u.ratio,
      set: function(C) {
        var P = C[0], N = C[1];
        u.startWidth = P, u.startHeight = N;
      },
      setMin: x,
      setMax: w,
      setRatio: y,
      setFixedDirection: b,
      setOrigin: function(C) {
        u.transformOrigin = C;
      },
      dragStart: Br.dragStart(r, new _l().dragStart([0, 0], t))
    }), R = l || _t(r, "onResizeStart", E);
    return u.startFixedDirection = u.fixedDirection, R !== !1 && (u.isResize = !0, r.state.snapRenderInfo = {
      request: t.isRequest,
      direction: c
    }), u.isResize ? E : !1;
  },
  dragControl: function(r, t) {
    var e, i = t.datas, n = t.parentFlag, s = t.isPinch, a = t.parentKeepRatio, o = t.dragClient, u = t.parentDist, h = t.isRequest, l = t.isGroup, c = t.parentEvent, d = t.resolveMatrix, p = i.isResize, g = i.transformOrigin, v = i.startWidth, m = i.startHeight, _ = i.prevWidth, y = i.prevHeight, b = i.minSize, x = i.maxSize, w = i.ratio, E = i.startOffsetWidth, R = i.startOffsetHeight, C = i.isWidth;
    if (!p)
      return;
    if (d) {
      var P = r.state.is3d, N = i.startOffsetMatrix, M = i.startTransformOrigin, A = P ? 4 : 3, k = Jb(WI(t)), H = Math.sqrt(k.length);
      A !== H && (k = Mn(k, H, A));
      var L = Td(N, k, M, A), U = cu(L, E, R, A);
      i.startPositions = U, i.nextTargetMatrix = k, i.nextAllMatrix = L;
    }
    var V = au(r.props, "resizable"), K = V.resizeFormat, G = V.throttleResize, B = G === void 0 ? n ? 0 : 1 : G, W = V.parentMoveable, Q = V.keepRatioFinally, ut = i.direction, it = ut, ht = 0, F = 0;
    !ut[0] && !ut[1] && (it = [1, 1]);
    var vt = w && (a != null ? a : V.keepRatio) || !1;
    function nt() {
      var Xt = i.fixedDirection, ir = uR(it, vt, i, t);
      ht = ir.distWidth, F = ir.distHeight;
      var _e = it[0] - Xt[0] || vt ? Math.max(E + ht, Lr) : E, oe = it[1] - Xt[1] || vt ? Math.max(R + F, Lr) : R;
      return vt && E && R && (C ? oe = _e / w : _e = oe * w), [_e, oe];
    }
    var ft = nt(), rt = ft[0], j = ft[1];
    c || (i.setFixedDirection(i.fixedDirection), _t(r, "onBeforeResize", Ut(r, t, {
      startFixedDirection: i.startFixedDirection,
      setFixedDirection: function(Xt) {
        var ir;
        return i.setFixedDirection(Xt), ir = nt(), rt = ir[0], j = ir[1], [rt, j];
      },
      boundingWidth: rt,
      boundingHeight: j,
      setSize: function(Xt) {
        rt = Xt[0], j = Xt[1];
      }
    }, !0)));
    var xt = o;
    o || (!n && s ? xt = JI(r, [0, 0]) : xt = i.fixedPosition);
    var Z = [0, 0];
    s || (Z = O4(r, rt, j, ut, xt, h, i)), u && (!u[0] && (Z[0] = 0), !u[1] && (Z[1] = 0));
    function X() {
      var Xt;
      K && (Xt = K([rt, j]), rt = Xt[0], j = Xt[1]), rt = Yt(rt, B), j = Yt(j, B);
    }
    if (vt) {
      it[0] && it[1] && Z[0] && Z[1] && (Math.abs(Z[0]) > Math.abs(Z[1]) ? Z[1] = 0 : Z[0] = 0);
      var et = !Z[0] && !Z[1];
      et && X(), it[0] && !it[1] || Z[0] && !Z[1] || et && C ? (rt += Z[0], j = rt / w) : (!it[0] && it[1] || !Z[0] && Z[1] || et && !C) && (j += Z[1], rt = j * w);
    } else
      rt += Z[0], j += Z[1], rt = Math.max(0, rt), j = Math.max(0, j);
    e = jL([rt, j], b, x, vt ? w : !1), rt = e[0], j = e[1], X(), vt && (l || Q) && (C ? j = rt / w : rt = j * w), ht = rt - E, F = j - R;
    var ot = [ht - _, F - y];
    i.prevWidth = ht, i.prevHeight = F;
    var q = SD(r, rt, j, xt, g, i);
    if (!(!W && ot.every(function(Xt) {
      return !Xt;
    }) && q.every(function(Xt) {
      return !Xt;
    }))) {
      var Gt = Br.drag(r, wd(t, r.state, q, !!s, !1, "draggable")), Bt = Gt.transform, ie = v + ht, Ve = m + F, _r = Ut(r, t, z({
        width: ie,
        height: Ve,
        offsetWidth: Math.round(rt),
        offsetHeight: Math.round(j),
        startRatio: w,
        boundingWidth: rt,
        boundingHeight: j,
        direction: ut,
        dist: [ht, F],
        delta: ot,
        isPinch: !!s,
        drag: Gt
      }, nR({
        style: {
          width: "".concat(ie, "px"),
          height: "".concat(Ve, "px")
        },
        transform: Bt
      }, Gt, t)));
      return !c && _t(r, "onResize", _r), _r;
    }
  },
  dragControlAfter: function(r, t) {
    var e = t.datas, i = e.isResize, n = e.startOffsetWidth, s = e.startOffsetHeight, a = e.prevWidth, o = e.prevHeight;
    if (!!i) {
      var u = r.state, h = u.width, l = u.height, c = h - (n + a), d = l - (s + o), p = Math.abs(c) > 3, g = Math.abs(d) > 3;
      if (p && (e.startWidth += c, e.startOffsetWidth += c, e.prevWidth += c), g && (e.startHeight += d, e.startOffsetHeight += d, e.prevHeight += d), p || g)
        return this.dragControl(r, t);
    }
  },
  dragControlEnd: function(r, t) {
    var e = t.datas, i = t.parentEvent;
    if (!!e.isResize) {
      e.isResize = !1;
      var n = gi(r, t, {});
      return !i && _t(r, "onResizeEnd", n), n;
    }
  },
  dragGroupControlCondition: Gw,
  dragGroupControlStart: function(r, t) {
    var e = t.datas, i = this.dragControlStart(r, z(z({}, t), {
      isGroup: !0
    }));
    if (!i)
      return !1;
    var n = Oa(r, "resizable", t);
    function s(g, v) {
      var m = e.fixedDirection, _ = e.fixedPosition, y = v.datas.startPositions || Qr(g.state), b = ze(y, m), x = Tr(ml(-r.rotation / 180 * Math.PI, 3), [b[0] - _[0], b[1] - _[1], 1], 3), w = x[0], E = x[1];
      return v.datas.originalX = w, v.datas.originalY = E, v;
    }
    var a = e.startOffsetWidth, o = e.startOffsetHeight;
    function u() {
      var g = e.minSize;
      n.forEach(function(v) {
        var m = v.datas, _ = m.minSize, y = m.startOffsetWidth, b = m.startOffsetHeight, x = a * (y ? _[0] / y : 0), w = o * (b ? _[1] / b : 0);
        g[0] = Math.max(g[0], x), g[1] = Math.max(g[1], w);
      });
    }
    function h() {
      var g = e.maxSize;
      n.forEach(function(v) {
        var m = v.datas, _ = m.maxSize, y = m.startOffsetWidth, b = m.startOffsetHeight, x = a * (y ? _[0] / y : 0), w = o * (b ? _[1] / b : 0);
        g[0] = Math.min(g[0], x), g[1] = Math.min(g[1], w);
      });
    }
    var l = Ts(r, this, "dragControlStart", t, function(g, v) {
      return s(g, v);
    });
    u(), h();
    var c = function(g) {
      i.setFixedDirection(g), l.forEach(function(v, m) {
        v.setFixedDirection(g), s(v.moveable, n[m]);
      });
    };
    e.setFixedDirection = c;
    var d = z(z({}, i), {
      targets: r.props.targets,
      events: l.map(function(g) {
        return z(z({}, g), {
          setMin: function(v) {
            g.setMin(v), u();
          },
          setMax: function(v) {
            g.setMax(v), h();
          }
        });
      }),
      setFixedDirection: c,
      setMin: function(g) {
        i.setMin(g), u();
      },
      setMax: function(g) {
        i.setMax(g), h();
      }
    }), p = _t(r, "onResizeGroupStart", d);
    return e.isResize = p !== !1, e.isResize ? i : !1;
  },
  dragGroupControl: function(r, t) {
    var e = t.datas;
    if (!!e.isResize) {
      var i = au(r.props, "resizable");
      h1(r, "onBeforeResize", function(p) {
        _t(r, "onBeforeResizeGroup", Ut(r, t, z(z({}, p), {
          targets: i.targets
        }), !0));
      });
      var n = this.dragControl(r, z(z({}, t), {
        isGroup: !0
      }));
      if (!!n) {
        var s = n.boundingWidth, a = n.boundingHeight, o = n.dist, u = i.keepRatio, h = [s / (s - o[0]), a / (a - o[1])], l = e.fixedPosition, c = Ts(r, this, "dragControl", t, function(p, g) {
          var v = Tr(ml(r.rotation / 180 * Math.PI, 3), [g.datas.originalX * h[0], g.datas.originalY * h[1], 1], 3), m = v[0], _ = v[1];
          return z(z({}, g), {
            parentDist: null,
            parentScale: h,
            dragClient: te(l, [m, _]),
            parentKeepRatio: u
          });
        }), d = z({
          targets: i.targets,
          events: c
        }, n);
        return _t(r, "onResizeGroup", d), d;
      }
    }
  },
  dragGroupControlEnd: function(r, t) {
    var e = t.isDrag, i = t.datas;
    if (!!i.isResize) {
      this.dragControlEnd(r, t);
      var n = Ts(r, this, "dragControlEnd", t), s = gi(r, t, {
        targets: r.props.targets,
        events: n
      });
      return _t(r, "onResizeGroupEnd", s), e;
    }
  },
  request: function(r) {
    var t = {}, e = 0, i = 0, n = r.getRect();
    return {
      isControl: !0,
      requestStart: function(s) {
        var a;
        return {
          datas: t,
          parentDirection: s.direction || [1, 1],
          parentIsWidth: (a = s == null ? void 0 : s.horizontal) !== null && a !== void 0 ? a : !0
        };
      },
      request: function(s) {
        return "offsetWidth" in s ? e = s.offsetWidth - n.offsetWidth : "deltaWidth" in s && (e += s.deltaWidth), "offsetHeight" in s ? i = s.offsetHeight - n.offsetHeight : "deltaHeight" in s && (i += s.deltaHeight), {
          datas: t,
          parentDist: [e, i],
          parentKeepRatio: s.keepRatio
        };
      },
      requestEnd: function() {
        return {
          datas: t,
          isDrag: !0
        };
      }
    };
  },
  unset: function(r) {
    r.state.gestos.resizable = null;
  }
};
function Vm(r, t, e, i, n) {
  var s = r.props.groupable, a = r.state, o = a.is3d ? 4 : 3, u = t.origin, h = vr(
    r.state.rootMatrix,
    kt([u[0], u[1]], s ? [0, 0] : [a.left, a.top]),
    o
  ), l = te([n.left, n.top], h);
  t.startAbsoluteOrigin = l, t.prevDeg = $e(l, [e, i]) / Math.PI * 180, t.defaultDeg = t.prevDeg, t.prevSnapDeg = 0, t.loop = 0, t.startDist = Zi(l, [e, i]);
}
function Hp(r, t, e) {
  var i = e.defaultDeg, n = e.prevDeg, s = n % 360, a = Math.floor(n / 360);
  s < 0 && (s += 360), s > r && s > 270 && r < 90 ? ++a : s < r && s < 90 && r > 270 && --a;
  var o = t * (a * 360 + r - i);
  return e.prevDeg = i + o, o;
}
function Xm(r, t, e, i) {
  return Hp($e(i.startAbsoluteOrigin, [r, t]) / Math.PI * 180, e, i);
}
function Wm(r, t, e, i, n, s) {
  var a = r.props.throttleRotate, o = a === void 0 ? 0 : a, u = e.prevSnapDeg, h = 0, l = !1;
  if (s) {
    var c = N4(r, t, i);
    l = c.isSnap, h = n + c.rotation;
  }
  l || (h = Yt(n + i, o));
  var d = h - n;
  return e.prevSnapDeg = d, [d - u, d, h];
}
function D4(r, t, e) {
  var i = t[0], n = t[1], s = t[2], a = t[3];
  if (r !== "none") {
    var o = (r || "top").split("-"), u = o[0], h = o[1], l = [i, n];
    u === "left" ? l = [s, i] : u === "right" ? l = [n, a] : u === "bottom" && (l = [a, s]);
    var c = [(l[0][0] + l[1][0]) / 2, (l[0][1] + l[1][1]) / 2], d = iR(l, e);
    if (h) {
      var p = h === "top" || h === "left", g = u === "bottom" || u === "left";
      c = l[p && !g || !p && g ? 0 : 1];
    }
    return [c, d];
  }
}
function jy(r, t) {
  if (t.isRequest)
    return t.requestAble === "rotatable";
  var e = t.inputEvent.target;
  if (mr(e, St("rotation-control")) || mr(e, St("around-control")) || mr(e, St("control")) && mr(e, St("rotatable")))
    return !0;
  var i = r.props.rotationTarget;
  return i ? c1(i, !0).some(function(n) {
    return n ? e === n || e.contains(n) : !1;
  }) : !1;
}
var U4 = e1.map(function(r) {
  var t = "", e = "", i = "center", n = "center";
  return r.indexOf("n") > -1 && (t = "top: -20px;", n = "bottom"), r.indexOf("s") > -1 && (t = "top: 0px;", n = "top"), r.indexOf("w") > -1 && (e = "left: -20px;", i = "right"), r.indexOf("e") > -1 && (e = "left: 0px;", i = "left"), '.around-control[data-direction*="'.concat(r, `"] {
        `).concat(e).concat(t, `
        transform-origin: `).concat(i, " ").concat(n, `;
    }`);
}).join(`
`), G4 = `.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
.rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(U4, `
`), H4 = {
  name: "rotatable",
  canPinch: !0,
  props: {
    rotatable: Boolean,
    rotationPosition: String,
    throttleRotate: Number,
    renderDirections: Object,
    rotationTarget: Object,
    rotateAroundControls: Boolean,
    edge: Boolean,
    resolveAblesWithRotatable: Object
  },
  events: {
    onRotateStart: "rotateStart",
    onBeforeRotate: "beforeRotate",
    onRotate: "rotate",
    onRotateEnd: "rotateEnd",
    onRotateGroupStart: "rotateGroupStart",
    onBeforeRotateGroup: "beforeRotateGroup",
    onRotateGroup: "rotateGroup",
    onRotateGroupEnd: "rotateGroupEnd"
  },
  css: [G4],
  render: function(r, t) {
    var e = au(r.props, "rotatable"), i = e.rotatable, n = e.rotationPosition, s = e.zoom, a = e.renderDirections, o = e.rotateAroundControls, u = e.resolveAblesWithRotatable, h = r.state, l = h.renderPoses, c = h.direction;
    if (!i)
      return null;
    var d = D4(n, l, c), p = [];
    if (d) {
      var g = d[0], v = d[1];
      p.push(t.createElement("div", {
        key: "rotation",
        className: St("rotation"),
        style: {
          transform: "translate(-50%) translate(".concat(g[0], "px, ").concat(g[1], "px) rotate(").concat(v, "rad)")
        }
      }, t.createElement("div", {
        className: St("line rotation-line"),
        style: {
          transform: "scaleX(".concat(s, ")")
        }
      }), t.createElement("div", {
        className: St("control rotation-control"),
        style: {
          transform: "translate(0.5px) scale(".concat(s, ")")
        }
      })));
    }
    if (a) {
      var m = Pl(u || {}), _ = {};
      m.forEach(function(b) {
        u[b].forEach(function(x) {
          _[x] = b;
        });
      });
      var y = [];
      wr(a) && (y = a.map(function(b) {
        var x = _[b];
        return {
          data: x ? {
            resolve: x
          } : {},
          classNames: x ? ["move"] : [],
          dir: b
        };
      })), p.push.apply(p, _R(r, "rotatable", y, t));
    }
    return o && p.push.apply(p, B4(r, t)), p;
  },
  dragControlCondition: jy,
  dragControlStart: function(r, t) {
    var e, i, n = t.datas, s = t.clientX, a = t.clientY, o = t.parentRotate, u = t.parentFlag, h = t.isPinch, l = t.isRequest, c = r.state, d = c.target, p = c.left, g = c.top, v = c.direction, m = c.beforeDirection, _ = c.targetTransform, y = c.moveableClientRect, b = c.offsetMatrix, x = c.targetMatrix, w = c.allMatrix, E = c.width, R = c.height;
    if (!l && !d)
      return !1;
    var C = r.getRect();
    n.rect = C, n.transform = _, n.left = p, n.top = g;
    var P = function(it) {
      n.fixedDirection = it, n.fixedPosition = ZI(r, it), B && B.setFixedDirection(it);
    }, N = s, M = a;
    if (l || h || u) {
      var A = o || 0;
      n.beforeInfo = {
        origin: C.beforeOrigin,
        prevDeg: A,
        defaultDeg: A,
        prevSnapDeg: 0,
        startDist: 0
      }, n.afterInfo = z(z({}, n.beforeInfo), {
        origin: C.origin
      }), n.absoluteInfo = z(z({}, n.beforeInfo), {
        origin: C.origin,
        startValue: A
      });
    } else {
      var k = (i = t.inputEvent) === null || i === void 0 ? void 0 : i.target;
      if (k) {
        var H = k.getAttribute("data-direction") || "", L = gD[H];
        if (L) {
          n.isControl = !0, n.isAroundControl = mr(k, St("around-control")), n.controlDirection = L;
          var U = k.getAttribute("data-resolve");
          U && (n.resolveAble = U);
          var V = UD(c.rootMatrix, c.renderPoses, y);
          e = ze(V, L), N = e[0], M = e[1];
        }
      }
      n.beforeInfo = {
        origin: C.beforeOrigin
      }, n.afterInfo = {
        origin: C.origin
      }, n.absoluteInfo = {
        origin: C.origin,
        startValue: C.rotation
      };
      var K = P;
      P = function(it) {
        var ht = c.is3d ? 4 : 3, F = ze([[0, 0], [E, 0], [0, R], [E, R]], it), vt = te(PI(x, ht), F), nt = vt[0], ft = vt[1], rt = Tr(b, su([nt, ft], ht)), j = Tr(w, su([F[0], F[1]], ht));
        K(it), n.beforeInfo.origin = rt, n.afterInfo.origin = j, n.absoluteInfo.origin = j, Vm(r, n.beforeInfo, N, M, y), Vm(r, n.afterInfo, N, M, y), Vm(r, n.absoluteInfo, N, M, y);
      };
    }
    n.startClientX = N, n.startClientY = M, n.direction = v, n.beforeDirection = m, n.startValue = 0, n.datas = {}, Gg(t, "rotate");
    var G = !1, B = !1;
    if (n.isControl && n.resolveAble) {
      var W = n.resolveAble;
      W === "resizable" && (B = zy.dragControlStart(r, z(z({}, new _l("resizable").dragStart([0, 0], t)), {
        parentDirection: n.controlDirection,
        parentFixedDirection: n.fixedDirection
      })));
    }
    B || (G = Br.dragStart(r, new _l().dragStart([0, 0], t))), P(ID(r));
    var Q = Ut(r, t, z(z({
      set: function(it) {
        n.startValue = it * Math.PI / 180;
      },
      setFixedDirection: P
    }, Ug(t)), {
      dragStart: G,
      resizeStart: B
    })), ut = _t(r, "onRotateStart", Q);
    return n.isRotate = ut !== !1, c.snapRenderInfo = {
      request: t.isRequest
    }, n.isRotate ? Q : !1;
  },
  dragControl: function(r, t) {
    var e, i, n, s = t.datas, a = t.distX, o = t.distY, u = t.parentRotate, h = t.parentFlag, l = t.isPinch, c = t.groupDelta, d = s.beforeDirection, p = s.beforeInfo, g = s.afterInfo, v = s.absoluteInfo, m = s.isRotate, _ = s.startValue, y = s.rect, b = s.startClientX, x = s.startClientY;
    if (!!m) {
      Lg(t, "rotate");
      var w = mD(t), E = d * w, R = r.props.parentMoveable, C = 0, P, N, M = 0, A, k, H = 0, L, U, V = 180 / Math.PI * _, K = v.startValue, G = !1, B = b + a, W = x + o;
      if (!h && "parentDist" in t) {
        var Q = t.parentDist;
        P = Q, A = Q, L = Q;
      } else
        l || h ? (P = Hp(u, d, p), A = Hp(u, E, g), L = Hp(u, E, v)) : (P = Xm(B, W, d, p), A = Xm(B, W, E, g), L = Xm(B, W, E, v), G = !0);
      if (N = V + P, k = V + A, U = K + L, _t(r, "onBeforeRotate", Ut(r, t, {
        beforeRotation: N,
        rotation: k,
        absoluteRotation: U,
        setRotation: function(xt) {
          A = xt - V, P = A, L = A;
        }
      }, !0)), e = Wm(r, y, p, P, V, G), C = e[0], P = e[1], N = e[2], i = Wm(r, y, g, A, V, G), M = i[0], A = i[1], k = i[2], n = Wm(r, y, v, L, K, G), H = n[0], L = n[1], U = n[2], !(!H && !M && !C && !R)) {
        var ut = Dg(s, "rotate(".concat(k, "deg)"), "rotate(".concat(A, "deg)")), it = RD(r, A, s), ht = kt(te(c || [0, 0], it), s.prevInverseDist || [0, 0]);
        s.prevInverseDist = it, s.requestValue = null;
        var F = YI(r, ut, ht, l, t), vt = F, nt = Zi([B, W], v.startAbsoluteOrigin) - v.startDist, ft = void 0;
        if (s.resolveAble === "resizable") {
          var rt = zy.dragControl(r, z(z({}, wd(t, r.state, [t.deltaX, t.deltaY], !!l, !1, "resizable")), {
            resolveMatrix: !0,
            parentDistance: nt
          }));
          rt && (ft = rt, vt = nR(vt, rt, t));
        }
        var j = Ut(r, t, z(z({
          delta: M,
          dist: A,
          rotate: k,
          rotation: k,
          beforeDist: P,
          beforeDelta: C,
          beforeRotate: N,
          beforeRotation: N,
          absoluteDist: L,
          absoluteDelta: H,
          absoluteRotate: U,
          absoluteRotation: U,
          isPinch: !!l,
          resize: ft
        }, F), vt));
        return _t(r, "onRotate", j), j;
      }
    }
  },
  dragControlAfter: function(r, t) {
    t.datas.requestValue;
  },
  dragControlEnd: function(r, t) {
    var e = t.datas;
    if (!!e.isRotate) {
      e.isRotate = !1;
      var i = gi(r, t, {});
      return _t(r, "onRotateEnd", i), i;
    }
  },
  dragGroupControlCondition: jy,
  dragGroupControlStart: function(r, t) {
    var e = t.datas, i = r.state, n = i.left, s = i.top, a = i.beforeOrigin, o = this.dragControlStart(r, t);
    if (!o)
      return !1;
    o.set(e.beforeDirection * r.rotation);
    var u = Ts(r, this, "dragControlStart", t, function(c, d) {
      var p = c.state, g = p.left, v = p.top, m = p.beforeOrigin, _ = te(kt([g, v], [n, s]), kt(m, a));
      return d.datas.startGroupClient = _, d.datas.groupClient = _, z(z({}, d), {
        parentRotate: 0
      });
    }), h = z(z({}, o), {
      targets: r.props.targets,
      events: u
    }), l = _t(r, "onRotateGroupStart", h);
    return e.isRotate = l !== !1, e.isRotate ? o : !1;
  },
  dragGroupControl: function(r, t) {
    var e = t.datas;
    if (!!e.isRotate) {
      h1(r, "onBeforeRotate", function(h) {
        _t(r, "onBeforeRotateGroup", Ut(r, t, z(z({}, h), {
          targets: r.props.targets
        }), !0));
      });
      var i = this.dragControl(r, t);
      if (!!i) {
        var n = e.beforeDirection, s = i.beforeDist, a = s / 180 * Math.PI, o = Ts(r, this, "dragControl", t, function(h, l) {
          var c = l.datas.startGroupClient, d = l.datas.groupClient, p = d[0], g = d[1], v = Bg(c, a * n), m = v[0], _ = v[1], y = [m - p, _ - g];
          return l.datas.groupClient = [m, _], z(z({}, l), {
            parentRotate: s,
            groupDelta: y
          });
        });
        r.rotation = n * i.beforeRotation;
        var u = z({
          targets: r.props.targets,
          events: o,
          set: function(h) {
            r.rotation = h;
          },
          setGroupRotation: function(h) {
            r.rotation = h;
          }
        }, i);
        return _t(r, "onRotateGroup", u), u;
      }
    }
  },
  dragGroupControlEnd: function(r, t) {
    var e = t.isDrag, i = t.datas;
    if (!!i.isRotate) {
      this.dragControlEnd(r, t);
      var n = Ts(r, this, "dragControlEnd", t), s = gi(r, t, {
        targets: r.props.targets,
        events: n
      });
      return _t(r, "onRotateGroupEnd", s), e;
    }
  },
  request: function(r) {
    var t = {}, e = 0, i = r.getRotation();
    return {
      isControl: !0,
      requestStart: function() {
        return {
          datas: t
        };
      },
      request: function(n) {
        return "deltaRotate" in n ? e += n.deltaRotate : "rotate" in n && (e = n.rotate - i), {
          datas: t,
          parentDist: e
        };
      },
      requestEnd: function() {
        return {
          datas: t,
          isDrag: !0
        };
      }
    };
  }
}, Hw = l1("scalable"), z4 = {
  name: "scalable",
  ableGroup: "size",
  canPinch: !0,
  props: {
    scalable: Boolean,
    throttleScale: Number,
    renderDirections: String,
    keepRatio: Boolean,
    edge: Boolean
  },
  events: {
    onScaleStart: "scaleStart",
    onBeforeScale: "beforeScale",
    onScale: "scale",
    onScaleEnd: "scaleEnd",
    onScaleGroupStart: "scaleGroupStart",
    onBeforeScaleGroup: "beforeScaleGroup",
    onScaleGroup: "scaleGroup",
    onScaleGroupEnd: "scaleGroupEnd"
  },
  render: xR("scalable"),
  dragControlCondition: Hw,
  dragControlStart: function(r, t) {
    var e = t.datas, i = t.isPinch, n = t.inputEvent, s = t.parentDirection, a = s || (i ? [0, 0] : o1(n.target)), o = r.state, u = o.width, h = o.height, l = o.targetTransform, c = o.target, d = o.pos1, p = o.pos2, g = o.pos4;
    if (!a || !c)
      return !1;
    i || lu(r, t), e.datas = {}, e.transform = l, e.prevDist = [1, 1], e.direction = a, e.startOffsetWidth = u, e.startOffsetHeight = h, e.startValue = [1, 1];
    var v = Zi(d, p), m = Zi(p, g), _ = !a[0] && !a[1] || a[0] || !a[1];
    e.scaleWidth = v, e.scaleHeight = m, e.scaleXRatio = v / u, e.scaleYRatio = m / h, Gg(t, "scale"), e.isWidth = _;
    function y(E) {
      e.ratio = E && isFinite(E) ? E : 0;
    }
    e.startPositions = Qr(r.state);
    function b(E) {
      e.fixedDirection = E, e.fixedPosition = ze(e.startPositions, E);
    }
    e.setFixedDirection = b, y(Zi(d, p) / Zi(p, g)), b([-a[0], -a[1]]);
    var x = Ut(r, t, z(z({
      direction: a,
      set: function(E) {
        e.startValue = E;
      },
      setRatio: y,
      setFixedDirection: b
    }, Ug(t)), {
      dragStart: Br.dragStart(r, new _l().dragStart([0, 0], t))
    })), w = _t(r, "onScaleStart", x);
    return e.startFixedDirection = e.fixedDirection, w !== !1 && (e.isScale = !0, r.state.snapRenderInfo = {
      request: t.isRequest,
      direction: a
    }), e.isScale ? x : !1;
  },
  dragControl: function(r, t) {
    Lg(t, "scale");
    var e = t.datas, i = t.parentKeepRatio, n = t.parentFlag, s = t.isPinch, a = t.dragClient, o = t.isRequest, u = e.prevDist, h = e.direction, l = e.startOffsetWidth, c = e.startOffsetHeight, d = e.isScale, p = e.startValue, g = e.isWidth, v = e.ratio;
    if (!d)
      return !1;
    var m = r.props, _ = m.throttleScale, y = m.parentMoveable, b = h;
    !h[0] && !h[1] && (b = [1, 1]);
    var x = v && (i != null ? i : m.keepRatio) || !1, w = r.state;
    function E() {
      var W = uR(b, x, e, t), Q = W.distWidth, ut = W.distHeight, it = (l + Q) / l, ht = (c + ut) / c;
      return it = b[0] || x ? it * p[0] : p[0], ht = b[1] || x ? ht * p[1] : p[1], it === 0 && (it = (u[0] > 0 ? 1 : -1) * up), ht === 0 && (ht = (u[1] > 0 ? 1 : -1) * up), [it, ht];
    }
    var R = E();
    if (!s && r.props.groupable) {
      var C = w.snapRenderInfo || {}, P = C.direction;
      wr(P) && (P[0] || P[1]) && (w.snapRenderInfo = {
        direction: h,
        request: t.isRequest
      });
    }
    _t(r, "onBeforeScale", Ut(r, t, {
      scale: R,
      setFixedDirection: function(W) {
        return e.setFixedDirection(W), R = E(), R;
      },
      startFixedDirection: e.startFixedDirection,
      setScale: function(W) {
        R = W;
      }
    }, !0));
    var N = [R[0] / p[0], R[1] / p[1]], M = a, A = [0, 0];
    if (a || (!n && s ? M = JI(r, [0, 0]) : M = e.fixedPosition), s || (A = A4(r, N, h, o, e)), x) {
      b[0] && b[1] && A[0] && A[1] && (Math.abs(A[0] * l) > Math.abs(A[1] * c) ? A[1] = 0 : A[0] = 0);
      var k = !A[0] && !A[1];
      if (k && (g ? N[0] = Yt(N[0] * p[0], _) / p[0] : N[1] = Yt(N[1] * p[1], _) / p[1]), b[0] && !b[1] || A[0] && !A[1] || k && g) {
        N[0] += A[0];
        var H = l * N[0] * p[0] / v;
        N[1] = H / c / p[1];
      } else if (!b[0] && b[1] || !A[0] && A[1] || k && !g) {
        N[1] += A[1];
        var L = c * N[1] * p[1] * v;
        N[0] = L / l / p[0];
      }
    } else
      N[0] += A[0], N[1] += A[1], A[0] || (N[0] = Yt(N[0] * p[0], _) / p[0]), A[1] || (N[1] = Yt(N[1] * p[1], _) / p[1]);
    N[0] === 0 && (N[0] = (u[0] > 0 ? 1 : -1) * up), N[1] === 0 && (N[1] = (u[1] > 0 ? 1 : -1) * up);
    var U = [N[0] / u[0], N[1] / u[1]];
    R = PD(N, p);
    var V = CD(r, N, e.fixedDirection, M, e), K = kt(V, e.prevInverseDist || [0, 0]);
    if (e.prevDist = N, e.prevInverseDist = V, R[0] === u[0] && R[1] === u[1] && K.every(function(W) {
      return !W;
    }) && !y)
      return !1;
    var G = Dg(e, "scale(".concat(R.join(", "), ")"), "scale(".concat(N.join(", "), ")")), B = Ut(r, t, z({
      offsetWidth: l,
      offsetHeight: c,
      direction: h,
      scale: R,
      dist: N,
      delta: U,
      isPinch: !!s
    }, YI(r, G, K, s, t)));
    return _t(r, "onScale", B), B;
  },
  dragControlEnd: function(r, t) {
    var e = t.datas, i = t.isDrag;
    return e.isScale ? (e.isScale = !1, _t(r, "onScaleEnd", gi(r, t, {})), i) : !1;
  },
  dragGroupControlCondition: Hw,
  dragGroupControlStart: function(r, t) {
    var e = t.datas, i = this.dragControlStart(r, t);
    if (!i)
      return !1;
    var n = Oa(r, "resizable", t);
    function s(l, c) {
      var d = e.fixedDirection, p = e.fixedPosition, g = c.datas.startPositions || Qr(l.state), v = ze(g, d), m = Tr(ml(-r.rotation / 180 * Math.PI, 3), [v[0] - p[0], v[1] - p[1], 1], 3), _ = m[0], y = m[1];
      return c.datas.originalX = _, c.datas.originalY = y, c;
    }
    e.moveableScale = r.scale;
    var a = Ts(r, this, "dragControlStart", t, function(l, c) {
      return s(l, c);
    }), o = function(l) {
      i.setFixedDirection(l), a.forEach(function(c, d) {
        c.setFixedDirection(l), s(c.moveable, n[d]);
      });
    };
    e.setFixedDirection = o;
    var u = z(z({}, i), {
      targets: r.props.targets,
      events: a,
      setFixedDirection: o
    }), h = _t(r, "onScaleGroupStart", u);
    return e.isScale = h !== !1, e.isScale ? u : !1;
  },
  dragGroupControl: function(r, t) {
    var e = t.datas;
    if (!!e.isScale) {
      h1(r, "onBeforeScale", function(c) {
        _t(r, "onBeforeScaleGroup", Ut(r, t, z(z({}, c), {
          targets: r.props.targets
        }), !0));
      });
      var i = this.dragControl(r, t);
      if (!!i) {
        var n = e.moveableScale;
        r.scale = [i.scale[0] * n[0], i.scale[1] * n[1]];
        var s = r.props.keepRatio, a = i.dist, o = i.scale, u = e.fixedPosition, h = Ts(r, this, "dragControl", t, function(c, d) {
          var p = Tr(ml(r.rotation / 180 * Math.PI, 3), [d.datas.originalX * a[0], d.datas.originalY * a[1], 1], 3), g = p[0], v = p[1];
          return z(z({}, d), {
            parentDist: null,
            parentScale: o,
            parentKeepRatio: s,
            dragClient: te(u, [g, v])
          });
        }), l = z({
          targets: r.props.targets,
          events: h
        }, i);
        return _t(r, "onScaleGroup", l), l;
      }
    }
  },
  dragGroupControlEnd: function(r, t) {
    var e = t.isDrag, i = t.datas;
    if (!!i.isScale) {
      this.dragControlEnd(r, t);
      var n = Ts(r, this, "dragControlEnd", t), s = gi(r, t, {
        targets: r.props.targets,
        events: n
      });
      return _t(r, "onScaleGroupEnd", s), e;
    }
  },
  request: function() {
    var r = {}, t = 0, e = 0;
    return {
      isControl: !0,
      requestStart: function(i) {
        return {
          datas: r,
          parentDirection: i.direction || [1, 1]
        };
      },
      request: function(i) {
        return t += i.deltaWidth, e += i.deltaHeight, {
          datas: r,
          parentDist: [t, e],
          parentKeepRatio: i.keepRatio
        };
      },
      requestEnd: function() {
        return {
          datas: r,
          isDrag: !0
        };
      }
    };
  }
};
function ks(r, t) {
  return r.map(function(e, i) {
    return qa(e, t[i], 1, 2);
  });
}
function zw(r, t, e) {
  var i = $e(r, t), n = $e(r, e), s = n - i;
  return s >= 0 ? s : s + 2 * Math.PI;
}
function j4(r, t) {
  var e = zw(r[0], r[1], r[2]), i = zw(t[0], t[1], t[2]), n = Math.PI;
  return !(e >= n && i <= n || e <= n && i >= n);
}
var $4 = {
  name: "warpable",
  ableGroup: "size",
  props: {
    warpable: Boolean,
    renderDirections: Array,
    edge: Boolean
  },
  events: {
    onWarpStart: "warpStart",
    onWarp: "warp",
    onWarpEnd: "warpEnd"
  },
  render: function(r, t) {
    var e = r.props, i = e.resizable, n = e.scalable, s = e.warpable, a = e.zoom;
    if (i || n || !s)
      return [];
    var o = r.state, u = o.pos1, h = o.pos2, l = o.pos3, c = o.pos4, d = ks(u, h), p = ks(h, u), g = ks(u, l), v = ks(l, u), m = ks(l, c), _ = ks(c, l), y = ks(h, c), b = ks(c, h);
    return Ot([t.createElement("div", {
      className: St("line"),
      key: "middeLine1",
      style: rc(d, m, a)
    }), t.createElement("div", {
      className: St("line"),
      key: "middeLine2",
      style: rc(p, _, a)
    }), t.createElement("div", {
      className: St("line"),
      key: "middeLine3",
      style: rc(g, y, a)
    }), t.createElement("div", {
      className: St("line"),
      key: "middeLine4",
      style: rc(v, b, a)
    })], ER(r, "warpable", t), !0);
  },
  dragControlCondition: function(r, t) {
    if (t.isRequest)
      return !1;
    var e = t.inputEvent.target;
    return mr(e, St("direction")) && mr(e, St("warpable"));
  },
  dragControlStart: function(r, t) {
    var e = t.datas, i = t.inputEvent, n = r.props.target, s = i.target, a = o1(s);
    if (!a || !n)
      return !1;
    var o = r.state, u = o.transformOrigin, h = o.is3d, l = o.targetTransform, c = o.targetMatrix, d = o.width, p = o.height, g = o.left, v = o.top;
    e.datas = {}, e.targetTransform = l, e.warpTargetMatrix = h ? c : Mn(c, 3, 4), e.targetInverseMatrix = SI(Fn(e.warpTargetMatrix, 4), 3, 4), e.direction = a, e.left = g, e.top = v, e.poses = [[0, 0], [d, 0], [0, p], [d, p]].map(function(y) {
      return kt(y, u);
    }), e.nextPoses = e.poses.map(function(y) {
      var b = y[0], x = y[1];
      return Tr(e.warpTargetMatrix, [b, x, 0, 1], 4);
    }), e.startValue = De(4), e.prevMatrix = De(4), e.absolutePoses = Qr(o), e.posIndexes = XI(a), lu(r, t), Gg(t, "matrix3d"), o.snapRenderInfo = {
      request: t.isRequest,
      direction: a
    };
    var m = Ut(r, t, z({
      set: function(y) {
        e.startValue = y;
      }
    }, Ug(t))), _ = _t(r, "onWarpStart", m);
    return _ !== !1 && (e.isWarp = !0), e.isWarp;
  },
  dragControl: function(r, t) {
    var e = t.datas, i = t.isRequest, n = t.distX, s = t.distY, a = e.targetInverseMatrix, o = e.prevMatrix, u = e.isWarp, h = e.startValue, l = e.poses, c = e.posIndexes, d = e.absolutePoses;
    if (!u)
      return !1;
    if (Lg(t, "matrix3d"), Ol(r, "warpable")) {
      var p = c.map(function(P) {
        return d[P];
      });
      p.length > 1 && p.push([(p[0][0] + p[1][0]) / 2, (p[0][1] + p[1][1]) / 2]);
      var g = $g(r, i, {
        horizontal: p.map(function(P) {
          return P[1] + s;
        }),
        vertical: p.map(function(P) {
          return P[0] + n;
        })
      }), v = g.horizontal, m = g.vertical;
      s -= v.offset, n -= m.offset;
    }
    var _ = Ln({
      datas: e,
      distX: n,
      distY: s
    }, !0), y = e.nextPoses.slice();
    if (c.forEach(function(P) {
      y[P] = te(y[P], _);
    }), !dD.every(function(P) {
      return j4(P.map(function(N) {
        return l[N];
      }), P.map(function(N) {
        return y[N];
      }));
    }))
      return !1;
    var b = Zb(l[0], l[2], l[1], l[3], y[0], y[2], y[1], y[3]);
    if (!b.length)
      return !1;
    var x = we(a, b, 4), w = $I(e, x, !0), E = we(Fn(o, 4), w, 4);
    e.prevMatrix = w;
    var R = we(h, w, 4), C = Dg(e, "matrix3d(".concat(R.join(", "), ")"), "matrix3d(".concat(w.join(", "), ")"));
    return i1(t, C), _t(r, "onWarp", Ut(r, t, {
      delta: E,
      matrix: R,
      dist: w,
      multiply: we,
      transform: C
    })), !0;
  },
  dragControlEnd: function(r, t) {
    var e = t.datas, i = t.isDrag;
    return e.isWarp ? (e.isWarp = !1, _t(r, "onWarpEnd", gi(r, t, {})), i) : !1;
  }
}, V4 = /* @__PURE__ */ St("area-pieces"), fp = /* @__PURE__ */ St("area-piece"), wR = /* @__PURE__ */ St("avoid");
function Ym(r) {
  var t = r.areaElement;
  if (!!t) {
    var e = r.state, i = e.width, n = e.height;
    WL(t, wR), t.style.cssText += "left: 0px; top: 0px; width: ".concat(i, "px; height: ").concat(n, "px");
  }
}
function jw(r) {
  return r.createElement("div", {
    key: "area_pieces",
    className: V4
  }, r.createElement("div", {
    className: fp
  }), r.createElement("div", {
    className: fp
  }), r.createElement("div", {
    className: fp
  }), r.createElement("div", {
    className: fp
  }));
}
var TR = {
  name: "dragArea",
  props: {
    dragArea: Boolean,
    passDragArea: Boolean
  },
  events: {
    onClick: "click",
    onClickGroup: "clickGroup"
  },
  render: function(r, t) {
    var e = r.props, i = e.target, n = e.dragArea, s = e.groupable, a = e.passDragArea, o = r.state, u = o.width, h = o.height, l = o.renderPoses, c = a ? St("area", "pass") : St("area");
    if (s)
      return [t.createElement("div", {
        key: "area",
        ref: Pn(r, "areaElement"),
        className: c
      }), jw(t)];
    if (!i || !n)
      return [];
    var d = Zb([0, 0], [u, 0], [0, h], [u, h], l[0], l[1], l[2], l[3]), p = d.length ? Hg(d, !0) : "none";
    return [t.createElement("div", {
      key: "area",
      ref: Pn(r, "areaElement"),
      className: c,
      style: {
        top: "0px",
        left: "0px",
        width: "".concat(u, "px"),
        height: "".concat(h, "px"),
        transformOrigin: "0 0",
        transform: p
      }
    }), jw(t)];
  },
  dragStart: function(r, t) {
    var e = t.datas, i = t.clientX, n = t.clientY, s = t.inputEvent;
    if (!s)
      return !1;
    e.isDragArea = !1;
    var a = r.areaElement, o = r.state, u = o.moveableClientRect, h = o.renderPoses, l = o.rootMatrix, c = o.is3d, d = u.left, p = u.top, g = Pi(h), v = g.left, m = g.top, _ = g.width, y = g.height, b = c ? 4 : 3, x = Ku(l, [i - d, n - p], b), w = x[0], E = x[1];
    w -= v, E -= m;
    var R = [{
      left: v,
      top: m,
      width: _,
      height: E - 10
    }, {
      left: v,
      top: m,
      width: w - 10,
      height: y
    }, {
      left: v,
      top: m + E + 10,
      width: _,
      height: y - E - 10
    }, {
      left: v + w + 10,
      top: m,
      width: _ - w - 10,
      height: y
    }], C = [].slice.call(a.nextElementSibling.children);
    R.forEach(function(P, N) {
      C[N].style.cssText = "left: ".concat(P.left, "px;top: ").concat(P.top, "px; width: ").concat(P.width, "px; height: ").concat(P.height, "px;");
    }), XL(a, wR), o.disableNativeEvent = !0;
  },
  drag: function(r, t) {
    var e = t.datas, i = t.inputEvent;
    if (this.enableNativeEvent(r), !i)
      return !1;
    e.isDragArea || (e.isDragArea = !0, Ym(r));
  },
  dragEnd: function(r, t) {
    this.enableNativeEvent(r);
    var e = t.inputEvent, i = t.datas;
    if (!e)
      return !1;
    i.isDragArea || Ym(r);
  },
  dragGroupStart: function(r, t) {
    return this.dragStart(r, t);
  },
  dragGroup: function(r, t) {
    return this.drag(r, t);
  },
  dragGroupEnd: function(r, t) {
    return this.dragEnd(r, t);
  },
  unset: function(r) {
    Ym(r), r.state.disableNativeEvent = !1;
  },
  enableNativeEvent: function(r) {
    var t = r.state;
    t.disableNativeEvent && gI(function() {
      t.disableNativeEvent = !1;
    });
  }
}, X4 = Ed("origin", {
  render: function(r, t) {
    var e = r.props.zoom, i = r.state, n = i.beforeOrigin, s = i.rotation;
    return [t.createElement("div", {
      className: St("control", "origin"),
      style: a1(s, e, n),
      key: "beforeOrigin"
    })];
  }
});
function W4(r) {
  var t = r.scrollContainer;
  return [t.scrollLeft, t.scrollTop];
}
var Y4 = {
  name: "scrollable",
  canPinch: !0,
  props: {
    scrollable: Boolean,
    scrollContainer: Object,
    scrollThreshold: Number,
    getScrollPosition: Function
  },
  events: {
    onScroll: "scroll",
    onScrollGroup: "scrollGroup"
  },
  dragRelation: "strong",
  dragStart: function(r, t) {
    var e = r.props, i = e.scrollContainer, n = i === void 0 ? r.getContainer() : i, s = new j5(), a = Zc(n, !0);
    t.datas.dragScroll = s;
    var o = t.isControl ? "controlGesto" : "targetGesto", u = t.targets;
    s.on("scroll", function(h) {
      var l = h.container, c = h.direction, d = Ut(r, t, {
        scrollContainer: l,
        direction: c
      }), p = u ? "onScrollGroup" : "onScroll";
      u && (d.targets = u), _t(r, p, d);
    }).on("move", function(h) {
      var l = h.offsetX, c = h.offsetY;
      r[o].scrollBy(l, c, t.inputEvent, !1);
    }), s.dragStart(t, {
      container: a
    });
  },
  checkScroll: function(r, t) {
    var e = t.datas.dragScroll;
    if (!!e) {
      var i = r.props, n = i.scrollContainer, s = n === void 0 ? r.getContainer() : n, a = i.scrollThreshold, o = a === void 0 ? 0 : a, u = i.getScrollPosition, h = u === void 0 ? W4 : u;
      return e.drag(t, {
        container: s,
        threshold: o,
        getScrollPosition: function(l) {
          return h({
            scrollContainer: l.container,
            direction: l.direction
          });
        }
      }), !0;
    }
  },
  drag: function(r, t) {
    return this.checkScroll(r, t);
  },
  dragEnd: function(r, t) {
    t.datas.dragScroll.dragEnd(), t.datas.dragScroll = null;
  },
  dragControlStart: function(r, t) {
    return this.dragStart(r, z(z({}, t), {
      isControl: !0
    }));
  },
  dragControl: function(r, t) {
    return this.drag(r, t);
  },
  dragControlEnd: function(r, t) {
    return this.dragEnd(r, t);
  },
  dragGroupStart: function(r, t) {
    return this.dragStart(r, z(z({}, t), {
      targets: r.props.targets
    }));
  },
  dragGroup: function(r, t) {
    return this.drag(r, z(z({}, t), {
      targets: r.props.targets
    }));
  },
  dragGroupEnd: function(r, t) {
    return this.dragEnd(r, z(z({}, t), {
      targets: r.props.targets
    }));
  },
  dragGroupControlStart: function(r, t) {
    return this.dragStart(r, z(z({}, t), {
      targets: r.props.targets,
      isControl: !0
    }));
  },
  dragGroupContro: function(r, t) {
    return this.drag(r, z(z({}, t), {
      targets: r.props.targets
    }));
  },
  dragGroupControEnd: function(r, t) {
    return this.dragEnd(r, z(z({}, t), {
      targets: r.props.targets
    }));
  }
}, CR = {
  name: "",
  props: {
    target: Object,
    dragTarget: Object,
    container: Object,
    portalContainer: Object,
    rootContainer: Object,
    useResizeObserver: Boolean,
    zoom: Number,
    transformOrigin: Array,
    edge: Object,
    ables: Array,
    className: String,
    pinchThreshold: Number,
    pinchOutside: Boolean,
    triggerAblesSimultaneously: Boolean,
    checkInput: Boolean,
    cspNonce: String,
    translateZ: Number,
    hideDefaultLines: Boolean,
    props: Object,
    flushSync: Function,
    stopPropagation: Boolean,
    preventClickEventOnDrag: Boolean,
    preventClickDefault: Boolean
  },
  events: {}
}, q4 = Ed("padding", {
  render: function(r, t) {
    var e = r.props;
    if (e.dragArea)
      return [];
    var i = e.padding || {}, n = i.left, s = n === void 0 ? 0 : n, a = i.top, o = a === void 0 ? 0 : a, u = i.right, h = u === void 0 ? 0 : u, l = i.bottom, c = l === void 0 ? 0 : l, d = r.state, p = d.renderPoses, g = d.pos1, v = d.pos2, m = d.pos3, _ = d.pos4, y = [g, v, m, _], b = [];
    return s > 0 && b.push([0, 2]), o > 0 && b.push([0, 1]), h > 0 && b.push([1, 3]), c > 0 && b.push([2, 3]), b.map(function(x, w) {
      var E = x[0], R = x[1], C = y[E], P = y[R], N = p[E], M = p[R], A = Zb([0, 0], [100, 0], [0, 100], [100, 100], C, P, N, M);
      if (!!A.length)
        return t.createElement("div", {
          key: "padding".concat(w),
          className: St("padding"),
          style: {
            transform: Hg(A, !0)
          }
        });
    });
  }
}), $w = ["nw", "ne", "se", "sw"];
function dp(r, t) {
  var e = r[0] + r[1], i = e > t ? t / e : 1;
  return r[0] *= i, r[1] = t - r[1] * i, r;
}
var Z4 = [1, 2, 5, 6], J4 = [0, 3, 4, 7], ro = [1, -1, -1, 1], io = [1, 1, -1, -1];
function _1(r, t, e, i, n, s, a, o, u) {
  s === void 0 && (s = 0), a === void 0 && (a = 0), o === void 0 && (o = i), u === void 0 && (u = n);
  var h = [], l = !1, c = r.map(function(d, p) {
    var g = t[p], v = g.horizontal, m = g.vertical;
    if (m && !l && (l = !0, h.push("/")), l) {
      var _ = Math.max(0, m === 1 ? d[1] - a : u - d[1]);
      return h.push(Yi(_, n, e)), _;
    } else {
      var _ = Math.max(0, v === 1 ? d[0] - s : o - d[0]);
      return h.push(Yi(_, i, e)), _;
    }
  });
  return {
    styles: h,
    raws: c
  };
}
function IR(r) {
  for (var t = [0, 0], e = [0, 0], i = r.length, n = 0; n < i; ++n) {
    var s = r[n];
    !s.sub || (s.horizontal && (t[1] === 0 && (t[0] = n), t[1] = n - t[0] + 1, e[0] = n + 1), s.vertical && (e[1] === 0 && (e[0] = n), e[1] = n - e[0] + 1));
  }
  return {
    horizontalRange: t,
    verticalRange: e
  };
}
function RR(r, t, e, i, n, s) {
  var a, o, u, h;
  s === void 0 && (s = [0, 0]);
  var l = r.indexOf("/"), c = (l > -1 ? r.slice(0, l) : r).length, d = r.slice(0, c), p = r.slice(c + 1), g = d[0], v = g === void 0 ? "0px" : g, m = d[1], _ = m === void 0 ? v : m, y = d[2], b = y === void 0 ? v : y, x = d[3], w = x === void 0 ? _ : x, E = p[0], R = E === void 0 ? v : E, C = p[1], P = C === void 0 ? R : C, N = p[2], M = N === void 0 ? R : N, A = p[3], k = A === void 0 ? P : A, H = [v, _, b, w].map(function(B) {
    return Le(B, t);
  }), L = [R, P, M, k].map(function(B) {
    return Le(B, e);
  }), U = H.slice(), V = L.slice();
  a = dp([U[0], U[1]], t), U[0] = a[0], U[1] = a[1], o = dp([U[3], U[2]], t), U[3] = o[0], U[2] = o[1], u = dp([V[0], V[3]], e), V[0] = u[0], V[3] = u[1], h = dp([V[1], V[2]], e), V[1] = h[0], V[2] = h[1];
  var K = U.slice(0, Math.max(s[0], d.length)), G = V.slice(0, Math.max(s[1], p.length));
  return Ot(Ot([], K.map(function(B, W) {
    var Q = $w[W];
    return {
      horizontal: ro[W],
      vertical: 0,
      pos: [i + B, n + (io[W] === -1 ? e : 0)],
      sub: !0,
      raw: H[W],
      direction: Q
    };
  }), !0), G.map(function(B, W) {
    var Q = $w[W];
    return {
      horizontal: 0,
      vertical: io[W],
      pos: [i + (ro[W] === -1 ? t : 0), n + B],
      sub: !0,
      raw: L[W],
      direction: Q
    };
  }), !0);
}
function SR(r, t, e, i, n) {
  n === void 0 && (n = t.length);
  var s = IR(r.slice(i)), a = s.horizontalRange, o = s.verticalRange, u = e - i, h = 0;
  if (u === 0)
    h = n;
  else if (u > 0 && u < a[1])
    h = a[1] - u;
  else if (u >= o[0])
    h = o[0] + o[1] - u;
  else
    return;
  r.splice(e, h), t.splice(e, h);
}
function PR(r, t, e, i, n, s, a, o, u, h, l) {
  h === void 0 && (h = 0), l === void 0 && (l = 0);
  var c = IR(r.slice(e)), d = c.horizontalRange, p = c.verticalRange;
  if (i > -1)
    for (var g = ro[i] === 1 ? s - h : o - s, v = d[1]; v <= i; ++v) {
      var m = io[v] === 1 ? l : u, _ = 0;
      if (i === v ? _ = s : v === 0 ? _ = h + g : ro[v] === -1 && (_ = o - (t[e][0] - h)), r.splice(e + v, 0, {
        horizontal: ro[v],
        vertical: 0,
        pos: [_, m]
      }), t.splice(e + v, 0, [_, m]), v === 0)
        break;
    }
  else if (n > -1) {
    var y = io[n] === 1 ? a - l : u - a;
    if (d[1] === 0 && p[1] === 0) {
      var b = [h + y, l];
      r.push({
        horizontal: ro[0],
        vertical: 0,
        pos: b
      }), t.push(b);
    }
    for (var x = p[0], v = p[1]; v <= n; ++v) {
      var _ = ro[v] === 1 ? h : o, m = 0;
      if (n === v ? m = a : v === 0 ? m = l + y : io[v] === 1 ? m = t[e + x][1] : io[v] === -1 && (m = u - (t[e + x][1] - l)), r.push({
        horizontal: 0,
        vertical: io[v],
        pos: [_, m]
      }), t.push([_, m]), v === 0)
        break;
    }
  }
}
function NR(r, t) {
  t === void 0 && (t = r.map(function(n) {
    return n.raw;
  }));
  var e = r.map(function(n, s) {
    return n.horizontal ? t[s] : null;
  }).filter(function(n) {
    return n != null;
  }), i = r.map(function(n, s) {
    return n.vertical ? t[s] : null;
  }).filter(function(n) {
    return n != null;
  });
  return {
    horizontals: e,
    verticals: i
  };
}
var K4 = [[0, -1, "n"], [1, 0, "e"]], Q4 = [[-1, -1, "nw"], [0, -1, "n"], [1, -1, "ne"], [1, 0, "e"], [1, 1, "se"], [0, 1, "s"], [-1, 1, "sw"], [-1, 0, "w"]];
function y1(r, t, e) {
  var i = r.props.clipRelative, n = r.state, s = n.width, a = n.height, o = t, u = o.type, h = o.poses, l = u === "rect", c = u === "circle";
  if (u === "polygon")
    return e.map(function(E) {
      return "".concat(Yi(E[0], s, i), " ").concat(Yi(E[1], a, i));
    });
  if (l || u === "inset") {
    var d = e[1][1], p = e[3][0], g = e[7][0], v = e[5][1];
    if (l)
      return [d, p, v, g].map(function(E) {
        return "".concat(E, "px");
      });
    var m = [d, s - p, a - v, g].map(function(E, R) {
      return Yi(E, R % 2 ? s : a, i);
    });
    if (e.length > 8) {
      var _ = kt(e[4], e[0]), y = _[0], b = _[1];
      m.push.apply(m, Ot(["round"], _1(e.slice(8), h.slice(8), i, y, b, g, d, p, v).styles, !1));
    }
    return m;
  } else if (c || u === "ellipse") {
    var x = e[0], w = Yi(Math.abs(e[1][1] - x[1]), c ? Math.sqrt((s * s + a * a) / 2) : a, i), m = c ? [w] : [Yi(Math.abs(e[2][0] - x[0]), s, i), w];
    return m.push("at", Yi(x[0], s, i), Yi(x[1], a, i)), m;
  }
}
function Cv(r, t, e, i) {
  var n = [i, (i + t) / 2, t], s = [r, (r + e) / 2, e];
  return Q4.map(function(a) {
    var o = a[0], u = a[1], h = a[2], l = n[o + 1], c = s[u + 1];
    return {
      vertical: Math.abs(u),
      horizontal: Math.abs(o),
      direction: h,
      pos: [l, c]
    };
  });
}
function OR(r) {
  var t = [1 / 0, -1 / 0], e = [1 / 0, -1 / 0];
  return r.forEach(function(i) {
    var n = i.pos;
    t[0] = Math.min(t[0], n[0]), t[1] = Math.max(t[1], n[0]), e[0] = Math.min(e[0], n[1]), e[1] = Math.max(e[1], n[1]);
  }), [Math.abs(t[1] - t[0]), Math.abs(e[1] - e[0])];
}
function tU(r, t, e, i, n) {
  var s = r[t], a = s.direction, o = s.sub, u = r.map(function() {
    return [0, 0];
  }), h = a ? a.split("") : [];
  if (i && t < 8) {
    var l = h.filter(function(k) {
      return k === "w" || k === "e";
    }), c = h.filter(function(k) {
      return k === "n" || k === "s";
    }), d = l[0], p = c[0];
    u[t] = e;
    var g = OR(r), v = g[0], m = g[1], _ = v && m ? v / m : 0;
    if (_ && n) {
      var y = (t + 4) % 8, b = r[y].pos, x = [0, 0];
      a.indexOf("w") > -1 ? x[0] = -1 : a.indexOf("e") > -1 && (x[0] = 1), a.indexOf("n") > -1 ? x[1] = -1 : a.indexOf("s") > -1 && (x[1] = 1);
      var w = oR([v, m], e, _, x, !0), E = v + w[0], R = m + w[1], C = b[1], P = b[1], N = b[0], M = b[0];
      x[0] === -1 ? N = M - E : x[0] === 1 ? M = N + E : (N = N - E / 2, M = M + E / 2), x[1] === -1 ? C = P - R : (x[1] === 1 || (C = P - R / 2), P = C + R);
      var A = Cv(C, M, P, N);
      r.forEach(function(k, H) {
        u[H][0] = A[H].pos[0] - k.pos[0], u[H][1] = A[H].pos[1] - k.pos[1];
      });
    } else
      r.forEach(function(k, H) {
        var L = k.direction;
        !L || (L.indexOf(d) > -1 && (u[H][0] = e[0]), L.indexOf(p) > -1 && (u[H][1] = e[1]));
      }), d && (u[1][0] = e[0] / 2, u[5][0] = e[0] / 2), p && (u[3][1] = e[1] / 2, u[7][1] = e[1] / 2);
  } else
    a && !o ? h.forEach(function(k) {
      var H = k === "n" || k === "s";
      r.forEach(function(L, U) {
        var V = L.direction, K = L.horizontal, G = L.vertical;
        !V || V.indexOf(k) === -1 || (u[U] = [H || !K ? 0 : e[0], !H || !G ? 0 : e[1]]);
      });
    }) : u[t] = e;
  return u;
}
function Vw(r, t, e, i, n) {
  var s, a, o, u, h, l, c, d = n;
  if (!d) {
    var p = rn(r), g = p.clipPath;
    d = g !== "none" ? g : p.clip;
  }
  if (!((!d || d === "none" || d === "auto") && (d = i, !d))) {
    var v = vI(d), m = v.prefix, _ = m === void 0 ? d : m, y = v.value, b = y === void 0 ? "" : y, x = _ === "circle", w = " ";
    if (_ === "polygon") {
      var E = oo(b || "0% 0%, 100% 0%, 100% 100%, 0% 100%");
      w = ",";
      var R = E.map(function(q) {
        var Gt = q.split(" "), Bt = Gt[0], ie = Gt[1];
        return {
          vertical: 1,
          horizontal: 1,
          pos: [Le(Bt, t), Le(ie, e)]
        };
      });
      return {
        type: _,
        clipText: d,
        poses: R,
        splitter: w
      };
    } else if (x || _ === "ellipse") {
      var C = "", P = "", N = 0, M = 0, E = Pa(b);
      if (x) {
        var A = "";
        s = E[0], A = s === void 0 ? "50%" : s, a = E[2], C = a === void 0 ? "50%" : a, o = E[3], P = o === void 0 ? "50%" : o, N = Le(A, Math.sqrt((t * t + e * e) / 2)), M = N;
      } else {
        var k = "", H = "";
        u = E[0], k = u === void 0 ? "50%" : u, h = E[1], H = h === void 0 ? "50%" : h, l = E[3], C = l === void 0 ? "50%" : l, c = E[4], P = c === void 0 ? "50%" : c, N = Le(k, t), M = Le(H, e);
      }
      var L = [Le(C, t), Le(P, e)], R = Ot([{
        vertical: 1,
        horizontal: 1,
        pos: L,
        direction: "nesw"
      }], K4.slice(0, x ? 1 : 2).map(function(Bt) {
        return {
          vertical: Math.abs(Bt[1]),
          horizontal: Bt[0],
          direction: Bt[2],
          sub: !0,
          pos: [L[0] + Bt[0] * N, L[1] + Bt[1] * M]
        };
      }), !0);
      return {
        type: _,
        clipText: d,
        radiusX: N,
        radiusY: M,
        left: L[0] - N,
        top: L[1] - M,
        poses: R,
        splitter: w
      };
    } else if (_ === "inset") {
      var E = Pa(b || "0 0 0 0"), U = E.indexOf("round"), V = (U > -1 ? E.slice(0, U) : E).length, K = E.slice(V + 1), G = E.slice(0, V), B = G[0], W = G[1], Q = W === void 0 ? B : W, ut = G[2], it = ut === void 0 ? B : ut, ht = G[3], F = ht === void 0 ? Q : ht, vt = [B, it].map(function(Bt) {
        return Le(Bt, e);
      }), nt = vt[0], ft = vt[1], rt = [F, Q].map(function(Bt) {
        return Le(Bt, t);
      }), j = rt[0], xt = rt[1], Z = t - xt, X = e - ft, et = RR(K, Z - j, X - nt, j, nt), R = Ot(Ot([], Cv(nt, Z, X, j), !0), et, !0);
      return {
        type: "inset",
        clipText: d,
        poses: R,
        top: nt,
        left: j,
        right: Z,
        bottom: X,
        radius: K,
        splitter: w
      };
    } else if (_ === "rect") {
      var E = oo(b || "0px, ".concat(t, "px, ").concat(e, "px, 0px"));
      w = ",";
      var ot = E.map(function(Xt) {
        var ir = md(Xt).value;
        return ir;
      }), nt = ot[0], xt = ot[1], ft = ot[2], j = ot[3], R = Cv(nt, xt, ft, j);
      return {
        type: "rect",
        clipText: d,
        poses: R,
        top: nt,
        right: xt,
        bottom: ft,
        left: j,
        values: E,
        splitter: w
      };
    }
  }
}
function eU(r, t) {
  var e = jI(r, t), i = e[0], n = e[1], s = t.datas, a = s.clipPath, o = s.clipIndex, u = a, h = u.type, l = u.poses, c = u.splitter, d = l.map(function(_) {
    return _.pos;
  });
  if (h === "polygon")
    d.splice(o, 0, [i, n]);
  else if (h === "inset") {
    var p = Z4.indexOf(o), g = J4.indexOf(o), v = l.length;
    if (PR(l, d, 8, p, g, i, n, d[4][0], d[4][1], d[0][0], d[0][1]), v === l.length)
      return;
  } else
    return;
  var m = y1(r, a, d);
  _t(r, "onClip", Ut(r, t, {
    clipEventType: "added",
    clipType: h,
    poses: d,
    clipStyles: m,
    clipStyle: "".concat(h, "(").concat(m.join(c), ")"),
    distX: 0,
    distY: 0
  }));
}
function rU(r, t) {
  var e = t.datas, i = e.clipPath, n = e.clipIndex, s = i, a = s.type, o = s.poses, u = s.splitter, h = o.map(function(d) {
    return d.pos;
  }), l = h.length;
  if (a === "polygon")
    o.splice(n, 1), h.splice(n, 1);
  else if (a === "inset") {
    if (n < 8 || (SR(o, h, n, 8, l), l === o.length))
      return;
  } else
    return;
  var c = y1(r, i, h);
  _t(r, "onClip", Ut(r, t, {
    clipEventType: "removed",
    clipType: a,
    poses: h,
    clipStyles: c,
    clipStyle: "".concat(a, "(").concat(c.join(u), ")"),
    distX: 0,
    distY: 0
  }));
}
var iU = {
  name: "clippable",
  props: {
    clippable: Boolean,
    defaultClipPath: String,
    customClipPath: String,
    keepRatio: Boolean,
    clipRelative: Boolean,
    clipArea: Boolean,
    dragWithClip: Boolean,
    clipTargetBounds: Boolean,
    clipVerticalGuidelines: Array,
    clipHorizontalGuidelines: Array,
    clipSnapThreshold: Boolean
  },
  events: {
    onClipStart: "clipStart",
    onClip: "clip",
    onClipEnd: "clipEnd"
  },
  css: [`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`, `:host {
    --bounds-color: #d66;
}`, `.guideline {
    pointer-events: none;
    z-index: 2;
}`, `.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],
  render: function(r, t) {
    var e = r.props, i = e.customClipPath, n = e.defaultClipPath, s = e.clipArea, a = e.zoom, o = r.state, u = o.target, h = o.width, l = o.height, c = o.allMatrix, d = o.is3d, p = o.left, g = o.top, v = o.pos1, m = o.pos2, _ = o.pos3, y = o.pos4, b = o.clipPathState, x = o.snapBoundInfos, w = o.rotation;
    if (!u)
      return [];
    var E = Vw(u, h, l, n || "inset", b || i);
    if (!E)
      return [];
    var R = d ? 4 : 3, C = E.type, P = E.poses, N = P.map(function(X) {
      var et = vr(c, X.pos, R);
      return [et[0] - p, et[1] - g];
    }), M = [], A = [], k = C === "rect", H = C === "inset", L = C === "polygon";
    if (k || H || L) {
      var U = H ? N.slice(0, 8) : N;
      A = U.map(function(X, et) {
        var ot = et === 0 ? U[U.length - 1] : U[et - 1], q = $e(ot, X), Gt = eR(ot, X);
        return t.createElement("div", {
          key: "clipLine".concat(et),
          className: St("line", "clip-line", "snap-control"),
          "data-clip-index": et,
          style: {
            width: "".concat(Gt, "px"),
            transform: "translate(".concat(ot[0], "px, ").concat(ot[1], "px) rotate(").concat(q, "rad) scaleY(").concat(a, ")")
          }
        });
      });
    }
    if (M = N.map(function(X, et) {
      return t.createElement("div", {
        key: "clipControl".concat(et),
        className: St("control", "clip-control", "snap-control"),
        "data-clip-index": et,
        style: {
          transform: "translate(".concat(X[0], "px, ").concat(X[1], "px) rotate(").concat(w, "rad) scale(").concat(a, ")")
        }
      });
    }), H && M.push.apply(M, N.slice(8).map(function(X, et) {
      return t.createElement("div", {
        key: "clipRadiusControl".concat(et),
        className: St("control", "clip-control", "clip-radius", "snap-control"),
        "data-clip-index": 8 + et,
        style: {
          transform: "translate(".concat(X[0], "px, ").concat(X[1], "px) rotate(").concat(w, "rad) scale(").concat(a, ")")
        }
      });
    })), C === "circle" || C === "ellipse") {
      var V = E.left, K = E.top, G = E.radiusX, B = E.radiusY, W = kt(vr(c, [V, K], R), vr(c, [0, 0], R)), Q = W[0], ut = W[1], it = "none";
      if (!s) {
        for (var ht = Math.max(10, G / 5, B / 5), F = [], vt = 0; vt <= ht; ++vt) {
          var nt = Math.PI * 2 / ht * vt;
          F.push([G + (G - a) * Math.cos(nt), B + (B - a) * Math.sin(nt)]);
        }
        F.push([G, -2]), F.push([-2, -2]), F.push([-2, B * 2 + 2]), F.push([G * 2 + 2, B * 2 + 2]), F.push([G * 2 + 2, -2]), F.push([G, -2]), it = "polygon(".concat(F.map(function(X) {
          return "".concat(X[0], "px ").concat(X[1], "px");
        }).join(", "), ")");
      }
      M.push(t.createElement("div", {
        key: "clipEllipse",
        className: St("clip-ellipse", "snap-control"),
        style: {
          width: "".concat(G * 2, "px"),
          height: "".concat(B * 2, "px"),
          clipPath: it,
          transform: "translate(".concat(-p + Q, "px, ").concat(-g + ut, "px) ").concat(Hg(c))
        }
      }));
    }
    if (s) {
      var ft = Pi(Ot([v, m, _, y], N, !0)), rt = ft.width, j = ft.height, xt = ft.left, Z = ft.top;
      if (L || k || H) {
        var F = H ? N.slice(0, 8) : N;
        M.push(t.createElement("div", {
          key: "clipArea",
          className: St("clip-area", "snap-control"),
          style: {
            width: "".concat(rt, "px"),
            height: "".concat(j, "px"),
            transform: "translate(".concat(xt, "px, ").concat(Z, "px)"),
            clipPath: "polygon(".concat(F.map(function(et) {
              return "".concat(et[0] - xt, "px ").concat(et[1] - Z, "px");
            }).join(", "), ")")
          }
        }));
      }
    }
    return x && ["vertical", "horizontal"].forEach(function(X) {
      var et = x[X], ot = X === "horizontal";
      et.isSnap && A.push.apply(A, et.snap.posInfos.map(function(q, Gt) {
        var Bt = q.pos, ie = kt(vr(c, ot ? [0, Bt] : [Bt, 0], R), [p, g]), Ve = kt(vr(c, ot ? [h, Bt] : [Bt, l], R), [p, g]);
        return Jc(t, "", ie, Ve, a, "clip".concat(X, "snap").concat(Gt), "guideline");
      })), et.isBound && A.push.apply(A, et.bounds.map(function(q, Gt) {
        var Bt = q.pos, ie = kt(vr(c, ot ? [0, Bt] : [Bt, 0], R), [p, g]), Ve = kt(vr(c, ot ? [h, Bt] : [Bt, l], R), [p, g]);
        return Jc(t, "", ie, Ve, a, "clip".concat(X, "bounds").concat(Gt), "guideline", "bounds", "bold");
      }));
    }), Ot(Ot([], M, !0), A, !0);
  },
  dragControlCondition: function(r, t) {
    return t.inputEvent && (t.inputEvent.target.getAttribute("class") || "").indexOf("clip") > -1;
  },
  dragStart: function(r, t) {
    var e = r.props, i = e.dragWithClip, n = i === void 0 ? !0 : i;
    return n ? !1 : this.dragControlStart(r, t);
  },
  drag: function(r, t) {
    return this.dragControl(r, z(z({}, t), {
      isDragTarget: !0
    }));
  },
  dragEnd: function(r, t) {
    return this.dragControlEnd(r, t);
  },
  dragControlStart: function(r, t) {
    var e = r.state, i = r.props, n = i.defaultClipPath, s = i.customClipPath, a = e.target, o = e.width, u = e.height, h = t.inputEvent ? t.inputEvent.target : null, l = h && h.getAttribute("class") || "", c = t.datas, d = Vw(a, o, u, n || "inset", s);
    if (!d)
      return !1;
    var p = d.clipText, g = d.type, v = d.poses, m = _t(r, "onClipStart", Ut(r, t, {
      clipType: g,
      clipStyle: p,
      poses: v.map(function(_) {
        return _.pos;
      })
    }));
    return m === !1 ? (c.isClipStart = !1, !1) : (c.isControl = l && l.indexOf("clip-control") > -1, c.isLine = l.indexOf("clip-line") > -1, c.isArea = l.indexOf("clip-area") > -1 || l.indexOf("clip-ellipse") > -1, c.clipIndex = h ? parseInt(h.getAttribute("data-clip-index"), 10) : -1, c.clipPath = d, c.isClipStart = !0, e.clipPathState = p, lu(r, t), !0);
  },
  dragControl: function(r, t) {
    var e, i = t.datas, n = t.originalDatas, s = t.isDragTarget;
    if (!i.isClipStart)
      return !1;
    var a = i, o = a.isControl, u = a.isLine, h = a.isArea, l = a.clipIndex, c = a.clipPath;
    if (!c)
      return !1;
    var d = au(r.props, "clippable"), p = d.keepRatio, g = 0, v = 0, m = n.draggable, _ = Ln(t);
    s && m ? (e = m.prevBeforeDist, g = e[0], v = e[1]) : (g = _[0], v = _[1]);
    var y = [g, v], b = r.state, x = b.width, w = b.height, E = !h && !o && !u, R = c.type, C = c.poses, P = c.splitter, N = C.map(function(O) {
      return O.pos;
    });
    E && (g = -g, v = -v);
    var M = !o || C[l].direction === "nesw", A = R === "inset" || R === "rect", k = C.map(function() {
      return [0, 0];
    });
    if (o && !M) {
      var H = C[l], L = H.horizontal, U = H.vertical, V = [g * Math.abs(L), v * Math.abs(U)];
      k = tU(C, l, V, A, p);
    } else
      M && (k = N.map(function() {
        return [g, v];
      }));
    var K = N.map(function(O, D) {
      return te(O, k[D]);
    }), G = Ot([], K, !0);
    b.snapBoundInfos = null;
    var B = c.type === "circle", W = c.type === "ellipse";
    if (B || W) {
      var Q = Pi(K), ut = Math.abs(Q.bottom - Q.top), it = Math.abs(W ? Q.right - Q.left : ut), ht = K[0][1] + ut, F = K[0][0] - it, vt = K[0][0] + it;
      B && (G.push([vt, Q.bottom]), k.push([1, 0])), G.push([Q.left, ht]), k.push([0, 1]), G.push([F, Q.bottom]), k.push([1, 0]);
    }
    var nt = vR((d.clipHorizontalGuidelines || []).map(function(O) {
      return Le("".concat(O), w);
    }), (d.clipVerticalGuidelines || []).map(function(O) {
      return Le("".concat(O), x);
    }), x, w), ft = [], rt = [];
    if (B || W)
      ft = [G[4][0], G[2][0]], rt = [G[1][1], G[3][1]];
    else if (A) {
      var j = [G[0], G[2], G[4], G[6]], xt = [k[0], k[2], k[4], k[6]];
      ft = j.filter(function(O, D) {
        return xt[D][0];
      }).map(function(O) {
        return O[0];
      }), rt = j.filter(function(O, D) {
        return xt[D][1];
      }).map(function(O) {
        return O[1];
      });
    } else
      ft = G.filter(function(O, D) {
        return k[D][0];
      }).map(function(O) {
        return O[0];
      }), rt = G.filter(function(O, D) {
        return k[D][1];
      }).map(function(O) {
        return O[1];
      });
    var Z = [0, 0], X = Bw(nt, d.clipTargetBounds && {
      left: 0,
      top: 0,
      right: x,
      bottom: w
    }, ft, rt, 5), et = X.horizontal, ot = X.vertical, q = et.offset, Gt = ot.offset;
    if (et.isBound && (Z[1] += q), ot.isBound && (Z[0] += Gt), (W || B) && k[0][0] === 0 && k[0][1] === 0) {
      var Q = Pi(K), Bt = Q.bottom - Q.top, ie = W ? Q.right - Q.left : Bt, Ve = ot.isBound ? Math.abs(Gt) : ot.snapIndex === 0 ? -Gt : Gt, _r = et.isBound ? Math.abs(q) : et.snapIndex === 0 ? -q : q;
      ie -= Ve, Bt -= _r, B && (Bt = lR(ot, et) > 0 ? Bt : ie, ie = Bt);
      var Xt = G[0];
      G[1][1] = Xt[1] - Bt, G[2][0] = Xt[0] + ie, G[3][1] = Xt[1] + Bt, G[4][0] = Xt[0] - ie;
    } else if (A && p && o) {
      var ir = OR(C), _e = ir[0], oe = ir[1], ne = _e && oe ? _e / oe : 0, Vt = C[l], cr = Vt.direction || "", Al = G[1][1], ht = G[5][1], F = G[7][0], vt = G[3][0];
      q <= Gt ? q = Gt / ne : Gt = q * ne, cr.indexOf("w") > -1 ? F -= Gt : cr.indexOf("e") > -1 ? vt -= Gt : (F += Gt / 2, vt -= Gt / 2), cr.indexOf("n") > -1 ? Al -= q : cr.indexOf("s") > -1 ? ht -= q : (Al += q / 2, ht -= q / 2);
      var Jg = Cv(Al, vt, ht, F);
      G.forEach(function(J, st) {
        var at;
        at = Jg[st].pos, J[0] = at[0], J[1] = at[1];
      });
    } else
      G.forEach(function(O, D) {
        var $ = k[D];
        $[0] && (O[0] -= Gt), $[1] && (O[1] -= q);
      });
    var Rd = y1(r, c, K), Fl = "".concat(R, "(").concat(Rd.join(P), ")");
    if (b.clipPathState = Fl, B || W)
      ft = [G[4][0], G[2][0]], rt = [G[1][1], G[3][1]];
    else if (A) {
      var j = [G[0], G[2], G[4], G[6]];
      ft = j.map(function(D) {
        return D[0];
      }), rt = j.map(function(D) {
        return D[1];
      });
    } else
      ft = G.map(function(O) {
        return O[0];
      }), rt = G.map(function(O) {
        return O[1];
      });
    if (b.snapBoundInfos = Bw(nt, d.clipTargetBounds && {
      left: 0,
      top: 0,
      right: x,
      bottom: w
    }, ft, rt, 1), m) {
      var Sd = b.is3d, Pd = b.allMatrix, Nd = Sd ? 4 : 3, Ml = Z;
      s && (Ml = [y[0] + Z[0] - _[0], y[1] + Z[1] - _[1]]), m.deltaOffset = we(Pd, [Ml[0], Ml[1], 0, 0], Nd);
    }
    return _t(r, "onClip", Ut(r, t, {
      clipEventType: "changed",
      clipType: R,
      poses: K,
      clipStyle: Fl,
      clipStyles: Rd,
      distX: g,
      distY: v
    })), !0;
  },
  dragControlEnd: function(r, t) {
    this.unset(r);
    var e = t.isDrag, i = t.datas, n = t.isDouble, s = i.isLine, a = i.isClipStart, o = i.isControl;
    return a ? (_t(r, "onClipEnd", gi(r, t, {})), n && (o ? rU(r, t) : s && eU(r, t)), n || e) : !1;
  },
  unset: function(r) {
    r.state.clipPathState = "", r.state.snapBoundInfos = null;
  }
}, nU = {
  name: "originDraggable",
  props: {
    originDraggable: Boolean,
    originRelative: Boolean
  },
  events: {
    onDragOriginStart: "dragOriginStart",
    onDragOrigin: "dragOrigin",
    onDragOriginEnd: "dragOriginEnd"
  },
  css: [`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],
  dragControlCondition: function(r, t) {
    return t.isRequest ? t.requestAble === "originDraggable" : mr(t.inputEvent.target, St("origin"));
  },
  dragControlStart: function(r, t) {
    var e = t.datas;
    lu(r, t);
    var i = Ut(r, t, {
      dragStart: Br.dragStart(r, new _l().dragStart([0, 0], t))
    }), n = _t(r, "onDragOriginStart", i);
    return e.startOrigin = r.state.transformOrigin, e.startTargetOrigin = r.state.targetOrigin, e.prevOrigin = [0, 0], e.isDragOrigin = !0, n === !1 ? (e.isDragOrigin = !1, !1) : i;
  },
  dragControl: function(r, t) {
    var e = t.datas, i = t.isPinch, n = t.isRequest;
    if (!e.isDragOrigin)
      return !1;
    var s = Ln(t), a = s[0], o = s[1], u = r.state, h = u.width, l = u.height, c = u.offsetMatrix, d = u.targetMatrix, p = u.is3d, g = r.props.originRelative, v = g === void 0 ? !0 : g, m = p ? 4 : 3, _ = [a, o];
    if (n) {
      var y = t.distOrigin;
      (y[0] || y[1]) && (_ = y);
    }
    var b = te(e.startOrigin, _), x = te(e.startTargetOrigin, _), w = kt(_, e.prevOrigin), E = Td(c, d, b, m), R = r.getRect(), C = Pi(cu(E, h, l, m)), P = [R.left - C.left, R.top - C.top];
    e.prevOrigin = _;
    var N = [Yi(x[0], h, v), Yi(x[1], l, v)].join(" "), M = Ut(r, t, {
      width: h,
      height: l,
      origin: b,
      dist: _,
      delta: w,
      transformOrigin: N,
      drag: Br.drag(r, wd(t, r.state, P, !!i, !1))
    });
    return _t(r, "onDragOrigin", M), M;
  },
  dragControlEnd: function(r, t) {
    var e = t.datas;
    return e.isDragOrigin ? (_t(r, "onDragOriginEnd", gi(r, t, {})), !0) : !1;
  },
  dragGroupControlCondition: function(r, t) {
    return this.dragControlCondition(r, t);
  },
  dragGroupControlStart: function(r, t) {
    var e = this.dragControlStart(r, t);
    return !!e;
  },
  dragGroupControl: function(r, t) {
    var e = this.dragControl(r, t);
    return e ? (r.transformOrigin = e.transformOrigin, !0) : !1;
  },
  request: function(r) {
    var t = {}, e = r.getRect(), i = 0, n = 0, s = e.transformOrigin, a = [0, 0];
    return {
      isControl: !0,
      requestStart: function() {
        return {
          datas: t
        };
      },
      request: function(o) {
        return "deltaOrigin" in o ? (a[0] += o.deltaOrigin[0], a[1] += o.deltaOrigin[1]) : "origin" in o ? (a[0] = o.origin[0] - s[0], a[1] = o.origin[1] - s[1]) : ("x" in o ? i = o.x - e.left : "deltaX" in o && (i += o.deltaX), "y" in o ? n = o.y - e.top : "deltaY" in o && (n += o.deltaY)), {
          datas: t,
          distX: i,
          distY: n,
          distOrigin: a
        };
      },
      requestEnd: function() {
        return {
          datas: t,
          isDrag: !0
        };
      }
    };
  }
};
function sU(r, t, e, i, n, s, a) {
  var o = NR(r), u = o.horizontals, h = o.verticals, l = u.length, c = h.length, d = -1, p = -1;
  e === 0 ? l === 0 ? d = 0 : l === 1 && (d = 1) : e === 3 && (l <= 2 ? d = 2 : l <= 3 && (d = 3)), e === 2 ? c === 0 ? p = 0 : c < 4 && (p = 3) : e === 1 && (c <= 1 ? p = 1 : c <= 2 && (p = 2)), PR(r, t, 0, d, p, i, n, s, a);
}
function Xw(r, t, e, i, n) {
  i === void 0 && (i = [0, 0]);
  var s, a = [];
  if (n)
    s = n;
  else {
    var o = rn(r);
    s = o && o.borderRadius || "";
  }
  return !s || !n && s === "0px" ? a = [] : a = Pa(s), RR(a, t, e, 0, 0, i);
}
function Ww(r, t, e, i, n, s) {
  var a = r.state, o = a.width, u = a.height, h = _1(s, n, r.props.roundRelative, o, u), l = h.raws, c = h.styles, d = NR(n, l), p = d.horizontals, g = d.verticals, v = c.join(" ");
  a.borderRadiusState = v, _t(r, "onRound", Ut(r, t, {
    horizontals: p,
    verticals: g,
    borderRadius: v,
    width: o,
    height: u,
    delta: i,
    dist: e
  }));
}
var aU = {
  name: "roundable",
  props: {
    roundable: Boolean,
    roundRelative: Boolean,
    minRoundControls: Array,
    maxRoundControls: Array,
    roundClickable: Boolean
  },
  events: {
    onRoundStart: "roundStart",
    onRound: "round",
    onRoundEnd: "roundEnd"
  },
  css: [`.control.border-radius {
    background: #d66;
    cursor: pointer;
}`, `:host[data-able-roundable] .line.direction {
    cursor: pointer;
}`],
  render: function(r, t) {
    var e = r.state, i = e.target, n = e.width, s = e.height, a = e.allMatrix, o = e.is3d, u = e.left, h = e.top, l = e.borderRadiusState, c = r.props, d = c.minRoundControls, p = d === void 0 ? [0, 0] : d, g = c.maxRoundControls, v = g === void 0 ? [4, 4] : g, m = c.zoom;
    if (!i)
      return null;
    var _ = o ? 4 : 3, y = Xw(i, n, s, p, l);
    if (!y)
      return null;
    var b = 0, x = 0;
    return y.map(function(w, E) {
      x += Math.abs(w.horizontal), b += Math.abs(w.vertical);
      var R = kt(vr(a, w.pos, _), [u, h]), C = w.vertical ? b <= v[1] : x <= v[0];
      return t.createElement("div", {
        key: "borderRadiusControl".concat(E),
        className: St("control", "border-radius"),
        "data-radius-index": E,
        style: {
          display: C ? "block" : "none",
          transform: "translate(".concat(R[0], "px, ").concat(R[1], "px) scale(").concat(m, ")")
        }
      });
    });
  },
  dragControlCondition: function(r, t) {
    if (!t.inputEvent || t.isRequest)
      return !1;
    var e = t.inputEvent.target.getAttribute("class") || "";
    return e.indexOf("border-radius") > -1 || e.indexOf("moveable-line") > -1 && e.indexOf("moveable-direction") > -1;
  },
  dragControlStart: function(r, t) {
    var e = t.inputEvent, i = t.datas, n = e.target, s = n.getAttribute("class") || "", a = s.indexOf("border-radius") > -1, o = s.indexOf("moveable-line") > -1 && s.indexOf("moveable-direction") > -1, u = a ? parseInt(n.getAttribute("data-radius-index"), 10) : -1, h = o ? parseInt(n.getAttribute("data-line-index"), 10) : -1;
    if (!a && !o)
      return !1;
    var l = _t(r, "onRoundStart", Ut(r, t, {}));
    if (l === !1)
      return !1;
    i.lineIndex = h, i.controlIndex = u, i.isControl = a, i.isLine = o, lu(r, t);
    var c = r.props, d = c.roundRelative, p = c.minRoundControls, g = p === void 0 ? [0, 0] : p, v = r.state, m = v.target, _ = v.width, y = v.height;
    i.isRound = !0, i.prevDist = [0, 0];
    var b = Xw(m, _, y, g) || [];
    return i.controlPoses = b, v.borderRadiusState = _1(b.map(function(x) {
      return x.pos;
    }), b, d, _, y).styles.join(" "), !0;
  },
  dragControl: function(r, t) {
    var e = t.datas;
    if (!e.isRound || !e.isControl || !e.controlPoses.length)
      return !1;
    var i = e.controlIndex, n = e.controlPoses, s = Ln(t), a = s[0], o = s[1], u = [a, o], h = kt(u, e.prevDist), l = r.props.maxRoundControls, c = l === void 0 ? [4, 4] : l, d = r.state, p = d.width, g = d.height, v = n[i], m = v.vertical, _ = v.horizontal, y = n.map(function(x) {
      var w = x.horizontal, E = x.vertical, R = [w * _ * u[0], E * m * u[1]];
      if (w) {
        if (c[0] === 1)
          return R;
        if (c[0] < 4 && w !== _)
          return R;
      } else {
        if (c[1] === 0)
          return R[1] = E * _ * u[0] / p * g, R;
        if (m) {
          if (c[1] === 1)
            return R;
          if (c[1] < 4 && E !== m)
            return R;
        }
      }
      return [0, 0];
    });
    y[i] = u;
    var b = n.map(function(x, w) {
      return te(x.pos, y[w]);
    });
    return e.prevDist = [a, o], Ww(r, t, u, h, n, b), !0;
  },
  dragControlEnd: function(r, t) {
    var e = r.state;
    e.borderRadiusState = "";
    var i = t.datas, n = t.isDouble;
    if (!i.isRound)
      return !1;
    var s = e.width, a = e.height, o = i.isControl, u = i.controlIndex, h = i.isLine, l = i.lineIndex, c = i.controlPoses, d = c.map(function(b) {
      return b.pos;
    }), p = d.length, g = r.props.roundClickable, v = g === void 0 ? !0 : g;
    if (n && v) {
      if (o)
        SR(c, d, u, 0);
      else if (h) {
        var m = jI(r, t), _ = m[0], y = m[1];
        sU(c, d, l, _, y, s, a);
      }
      p !== c.length && Ww(r, t, [0, 0], [0, 0], c, d);
    }
    return _t(r, "onRoundEnd", gi(r, t, {})), e.borderRadiusState = "", !0;
  },
  unset: function(r) {
    r.state.borderRadiusState = "";
  }
};
function oU(r, t) {
  var e = t ? 4 : 3, i = De(e), n = "matrix".concat(t ? "3d" : "", "(").concat(i.join(","), ")");
  return r === n || r === "matrix(1,0,0,1,0,0)";
}
var AR = {
  isPinch: !0,
  name: "beforeRenderable",
  props: {},
  events: {
    onBeforeRenderStart: "beforeRenderStart",
    onBeforeRender: "beforeRender",
    onBeforeRenderEnd: "beforeRenderEnd",
    onBeforeRenderGroupStart: "beforeRenderGroupStart",
    onBeforeRenderGroup: "beforeRenderGroup",
    onBeforeRenderGroupEnd: "beforeRenderGroupEnd"
  },
  dragRelation: "weak",
  setTransform: function(r, t) {
    var e = r.state, i = e.is3d, n = e.target, s = e.targetMatrix, a = n == null ? void 0 : n.style.transform, o = i ? "matrix3d(".concat(s.join(","), ")") : "matrix(".concat(NI(s, !0), ")"), u = !a || a === "none" ? o : a;
    t.datas.startTransforms = oU(u, i) ? [] : Pa(u);
  },
  resetStyle: function(r) {
    var t = r.datas;
    t.nextStyle = {}, t.nextTransforms = r.datas.startTransforms, t.nextTransformAppendedIndexes = [];
  },
  fillDragStartParams: function(r, t) {
    return Ut(r, t, {
      setTransform: function(e) {
        t.datas.startTransforms = wr(e) ? e : Pa(e);
      },
      isPinch: !!t.isPinch
    });
  },
  fillDragParams: function(r, t) {
    return Ut(r, t, {
      isPinch: !!t.isPinch
    });
  },
  dragStart: function(r, t) {
    this.setTransform(r, t), _t(r, "onBeforeRenderStart", this.fillDragStartParams(r, t));
  },
  drag: function(r, t) {
    this.resetStyle(t);
    var e = t.datas;
    e.nextStyle = {}, _t(r, "onBeforeRender", Ut(r, t, {
      isPinch: !!t.isPinch
    }));
  },
  dragEnd: function(r, t) {
    _t(r, "onBeforeRenderEnd", Ut(r, t, {
      isPinch: !!t.isPinch,
      isDrag: t.isDrag
    }));
  },
  dragGroupStart: function(r, t) {
    var e = this;
    this.dragStart(r, t);
    var i = Oa(r, "beforeRenderable", t), n = r.moveables, s = i.map(function(a, o) {
      var u = n[o];
      return e.setTransform(u, a), e.fillDragStartParams(u, a);
    });
    _t(r, "onBeforeRenderGroupStart", Ut(r, t, {
      isPinch: !!t.isPinch,
      targets: r.props.targets,
      setTransform: function() {
      },
      events: s
    }));
  },
  dragGroup: function(r, t) {
    var e = this;
    this.drag(r, t);
    var i = Oa(r, "beforeRenderable", t), n = r.moveables, s = i.map(function(a, o) {
      var u = n[o];
      e.resetStyle(a);
      var h = t.datas;
      return h.nextStyle = {}, e.fillDragParams(u, a);
    });
    _t(r, "onBeforeRenderGroup", Ut(r, t, {
      isPinch: !!t.isPinch,
      targets: r.props.targets,
      events: s
    }));
  },
  dragGroupEnd: function(r, t) {
    this.dragEnd(r, t), _t(r, "onBeforeRenderGroupEnd", Ut(r, t, {
      isPinch: !!t.isPinch,
      isDrag: t.isDrag,
      targets: r.props.targets
    }));
  },
  dragControlStart: function(r, t) {
    return this.dragStart(r, t);
  },
  dragControl: function(r, t) {
    return this.drag(r, t);
  },
  dragControlEnd: function(r, t) {
    return this.dragEnd(r, t);
  },
  dragGroupControlStart: function(r, t) {
    return this.dragGroupStart(r, t);
  },
  dragGroupControl: function(r, t) {
    return this.dragGroup(r, t);
  },
  dragGroupControlEnd: function(r, t) {
    return this.dragGroupEnd(r, t);
  }
}, FR = {
  name: "renderable",
  props: {},
  events: {
    onRenderStart: "renderStart",
    onRender: "render",
    onRenderEnd: "renderEnd",
    onRenderGroupStart: "renderGroupStart",
    onRenderGroup: "renderGroup",
    onRenderGroupEnd: "renderGroupEnd"
  },
  dragRelation: "weak",
  dragStart: function(r, t) {
    _t(r, "onRenderStart", Ut(r, t, {
      isPinch: !!t.isPinch
    }));
  },
  drag: function(r, t) {
    _t(r, "onRender", this.fillDragParams(r, t));
  },
  dragAfter: function(r, t) {
    if (t.resultCount)
      return this.drag(r, t);
  },
  dragEnd: function(r, t) {
    _t(r, "onRenderEnd", this.fillDragEndParams(r, t));
  },
  dragGroupStart: function(r, t) {
    _t(r, "onRenderGroupStart", Ut(r, t, {
      isPinch: !!t.isPinch,
      targets: r.props.targets
    }));
  },
  dragGroup: function(r, t) {
    var e = this, i = Oa(r, "beforeRenderable", t), n = r.moveables, s = i.map(function(a, o) {
      var u = n[o];
      return e.fillDragParams(u, a);
    });
    _t(r, "onRenderGroup", Ut(r, t, z(z({
      isPinch: !!t.isPinch,
      targets: r.props.targets,
      transform: Tw(t)
    }, qc(Cw(t))), {
      events: s
    })));
  },
  dragGroupEnd: function(r, t) {
    var e = this, i = Oa(r, "beforeRenderable", t), n = r.moveables, s = i.map(function(a, o) {
      var u = n[o];
      return e.fillDragEndParams(u, a);
    });
    _t(r, "onRenderGroupEnd", Ut(r, t, {
      isPinch: !!t.isPinch,
      isDrag: t.isDrag,
      targets: r.props.targets,
      events: s
    }));
  },
  dragControlStart: function(r, t) {
    return this.dragStart(r, t);
  },
  dragControl: function(r, t) {
    return this.drag(r, t);
  },
  dragControlAfter: function(r, t) {
    return this.dragAfter(r, t);
  },
  dragControlEnd: function(r, t) {
    return this.dragEnd(r, t);
  },
  dragGroupControlStart: function(r, t) {
    return this.dragGroupStart(r, t);
  },
  dragGroupControl: function(r, t) {
    return this.dragGroup(r, t);
  },
  dragGroupControlEnd: function(r, t) {
    return this.dragGroupEnd(r, t);
  },
  fillDragParams: function(r, t) {
    return Ut(r, t, z({
      isPinch: !!t.isPinch,
      transform: Tw(t)
    }, qc(Cw(t))));
  },
  fillDragEndParams: function(r, t) {
    return Ut(r, t, {
      isPinch: !!t.isPinch,
      isDrag: t.isDrag
    });
  }
};
function xc(r, t, e, i, n, s, a) {
  var o = n === "Start", u = r.state.target, h = s.isRequest;
  if (!u || o && i.indexOf("Control") > -1 && !h && r.areaElement === s.inputEvent.target)
    return !1;
  var l = "".concat(e).concat(i).concat(n), c = "".concat(e).concat(i, "Condition"), d = n === "End", p = n === "After", g = o && (!r.targetGesto || !r.controlGesto || !r.targetGesto.isFlag() || !r.controlGesto.isFlag());
  g && r.updateRect(n, !0, !1), n === "" && !h && aR(r.state, s);
  var v = Ot([], r[t], !0);
  if (h) {
    var m = s.requestAble;
    v.some(function(A) {
      return A.name === m;
    }) || v.push.apply(v, r.props.ables.filter(function(A) {
      return A.name === m;
    }));
  }
  if (!v.length || v.every(function(A) {
    return A.dragRelation;
  }))
    return !1;
  var _ = Ot(Ot([AR], v, !0), [FR], !1).filter(function(A) {
    return A[l];
  }), y = s.datas;
  g && _.forEach(function(A) {
    A.unset && A.unset(r);
  });
  var b = s.inputEvent, x;
  d && b && (x = document.elementFromPoint(s.clientX, s.clientY) || b.target);
  var w = 0, E = !1, R = function() {
    var A;
    E = !0, (A = s.stop) === null || A === void 0 || A.call(s);
  }, C = _.filter(function(A) {
    var k = A.name, H = y[k] || (y[k] = {});
    if (o && (H.isEventStart = !A[c] || A[c](r, s)), H.isEventStart) {
      var L = A[l](r, z(z({}, s), {
        stop: R,
        resultCount: w,
        datas: H,
        originalDatas: y,
        inputTarget: x
      }));
      return r._emitter.off(), o && L === !1 && (H.isEventStart = !1), w += L ? 1 : 0, L;
    }
    return !1;
  }), P = C.length, N = !1;
  if (o && (E || _.length && !P) && (N = E || _.filter(function(A) {
    var k = A.name, H = y[k];
    return H.isEventStart ? A.dragRelation !== "strong" : !1;
  }).length), (d || N) && (r.state.gestos = {}, r.moveables && r.moveables.forEach(function(A) {
    A.state.gestos = {};
  })), g && N && _.forEach(function(A) {
    A.unset && A.unset(r);
  }), o && !N && !h && P && (s == null || s.preventDefault()), r.isUnmounted || N)
    return !1;
  if (!o && P && !a || d) {
    var M = r.props.flushSync || KI;
    M(function() {
      r.updateRect(d ? n : "", !0, !1), r.forceUpdate();
    });
  }
  return !o && !d && !p && P && !a && xc(r, t, e, i, n + "After", s), !0;
}
function MR(r, t, e) {
  var i = r.controlBox.getElement(), n = [], s = r.props.dragTarget;
  n.push(i), (!r.props.dragArea || s) && n.push(t);
  var a = function(o) {
    var u = o.inputEvent.target, h = r.areaElement;
    return s && (u === s || s.contains(u)) || u === h || !r.isMoveableElement(u) && !r.controlBox.getElement().contains(u) || mr(u, "moveable-area") || mr(u, "moveable-padding");
  };
  return b1(r, n, "targetAbles", e, {
    dragStart: a,
    pinchStart: a
  });
}
function b1(r, t, e, i, n) {
  n === void 0 && (n = {});
  var s = e === "targetAbles", a = r.props, o = a.pinchOutside, u = a.pinchThreshold, h = a.preventClickEventOnDrag, l = a.preventClickDefault, c = a.checkInput, d = {
    preventDefault: !0,
    preventRightClick: !0,
    preventWheelClick: !0,
    container: window,
    pinchThreshold: u,
    pinchOutside: o,
    preventClickEventOnDrag: s ? h : !1,
    preventClickEventOnDragStart: s ? l : !1,
    preventClickEventByCondition: s ? null : function(v) {
      return r.controlBox.getElement().contains(v.target);
    },
    checkInput: s ? c : !1
  }, p = new Z5(t, d), g = i === "Control";
  return ["drag", "pinch"].forEach(function(v) {
    ["Start", "", "End"].forEach(function(m) {
      p.on("".concat(v).concat(m), function(_) {
        var y, b = _.eventType;
        if (n[b] && !n[b](_)) {
          _.stop();
          return;
        }
        var x = xc(r, e, v, i, m, _);
        x ? (r.props.stopPropagation || m === "Start" && g) && ((y = _ == null ? void 0 : _.inputEvent) === null || y === void 0 || y.stopPropagation()) : _.stop();
      });
    });
  }), p;
}
var uU = /* @__PURE__ */ function() {
  function r(e, i, n) {
    var s = this;
    this.target = e, this.moveable = i, this.eventName = n, this.ables = [], this._onEvent = function(a) {
      var o = s.eventName, u = s.moveable;
      u.state.disableNativeEvent || s.ables.forEach(function(h) {
        h[o](u, {
          inputEvent: a
        });
      });
    }, e.addEventListener(n.toLowerCase(), this._onEvent);
  }
  var t = r.prototype;
  return t.setAbles = function(e) {
    this.ables = e;
  }, t.destroy = function() {
    this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent), this.target = null, this.moveable = null;
  }, r;
}();
function hU(r) {
  if (r && r.getRootNode) {
    var t = r.getRootNode();
    if (t.nodeType === 11)
      return t;
  }
}
function Yw(r, t, e) {
  for (var i = r, n = [], s = !e && r === t || r === document.body, a = s, o = !1, u = 3, h, l, c, d = !1, p = bv(t, t, !0).offsetParent; i && !a; ) {
    a = s;
    var g = getComputedStyle(i), v = g.position, m = QI(i, g), _ = _5(ND(m)), y = v === "fixed", b = {
      hasTransform: !1,
      fixedContainer: null
    };
    y && (d = !0, b = kD(i), p = b.fixedContainer);
    var x = _.length;
    !o && x === 16 && (o = !0, u = 4, Ly(n), c && (c = Mn(c, 3, 4))), o && x === 9 && (_ = Mn(_, 3, 4));
    var w = FD(i, r, g), E = w.tagName, R = w.hasOffset, C = w.isSVG, P = w.origin, N = w.targetOrigin, M = w.offset, A = M[0], k = M[1];
    E === "svg" && c && (n.push({
      type: "target",
      target: i,
      matrix: BD(i, u)
    }), n.push({
      type: "offset",
      target: i,
      matrix: De(u)
    }));
    var H = void 0, L = !1, U = !1;
    if (y)
      H = b.fixedContainer, L = !0;
    else {
      var V = bv(i, t);
      if (H = V.offsetParent, L = V.isEnd, U = V.isStatic, lD) {
        var K = V.parentSlotElement;
        if (K) {
          for (var G = H, B = 0, W = 0; G && hU(G); )
            B += G.offsetLeft, W += G.offsetTop, G = G.offsetParent;
          A -= B, k -= W;
        }
      }
    }
    UI && !cD && R && !C && U && (v === "relative" || v === "static") && (A -= H.offsetLeft, k -= H.offsetTop, s = s || L);
    var Q = 0, ut = 0, it = 0, ht = 0;
    if (y)
      R && b.hasTransform && (it = H.clientLeft, ht = H.clientTop);
    else if (R && p !== H && (Q = H.clientLeft, ut = H.clientTop), R && H === document.body) {
      var F = tR(i, !1, g);
      A += F[0], k += F[1];
    }
    if (n.push({
      type: "target",
      target: i,
      matrix: n1(_, u, P)
    }), R) {
      var vt = i === r, nt = vt ? 0 : i.scrollLeft, ft = vt ? 0 : i.scrollTop;
      n.push({
        type: "offset",
        target: i,
        matrix: Yc([A - nt + Q - it, k - ft + ut - ht], u)
      });
    } else
      n.push({
        type: "offset",
        target: i,
        origin: P
      });
    if (c || (c = _), h || (h = P), l || (l = N), a || y)
      break;
    i = H, s = L, (!e || i === document.body) && (a = s);
  }
  return c || (c = De(u)), h || (h = [0, 0]), l || (l = [0, 0]), {
    offsetContainer: p,
    matrixes: n,
    targetMatrix: c,
    transformOrigin: h,
    targetOrigin: l,
    is3d: o,
    hasFixed: d
  };
}
function lU(r, t, e, i) {
  var n;
  e === void 0 && (e = t);
  var s = Yw(r, t), a = s.matrixes, o = s.is3d, u = s.targetMatrix, h = s.transformOrigin, l = s.targetOrigin, c = s.offsetContainer, d = s.hasFixed, p = Yw(c, e, !0), g = p.matrixes, v = p.is3d, m = p.offsetContainer, _ = i || v || o, y = _ ? 4 : 3, b = r.tagName.toLowerCase() !== "svg" && "ownerSVGElement" in r, x = u, w = De(y), E = De(y), R = De(y), C = De(y), P = a.length;
  g.reverse(), a.reverse(), !o && _ && (x = Mn(x, 3, 4), Ly(a)), !v && _ && Ly(g), g.forEach(function(L) {
    E = we(E, L.matrix, y);
  });
  var N = e || document.body, M = ((n = g[0]) === null || n === void 0 ? void 0 : n.target) || bv(N, N, !0).offsetParent, A = g.slice(1).reduce(function(L, U) {
    return we(L, U.matrix, y);
  }, De(y));
  a.forEach(function(L, U) {
    if (P - 2 === U && (R = w.slice()), P - 1 === U && (C = w.slice()), !L.matrix) {
      var V = a[U + 1], K = DD(L, V, M, y, we(A, w, y));
      L.matrix = Yc(K, y);
    }
    w = we(w, L.matrix, y);
  });
  var k = !b && o;
  x || (x = De(k ? 4 : 3));
  var H = Hg(b && x.length === 16 ? Mn(x, 4, 3) : x, k);
  return E = SI(E, y, y), {
    hasFixed: d,
    rootMatrix: E,
    beforeMatrix: R,
    offsetMatrix: C,
    allMatrix: w,
    targetMatrix: x,
    targetTransform: H,
    transformOrigin: h,
    targetOrigin: l,
    is3d: _,
    offsetContainer: c,
    offsetRootContainer: m
  };
}
function cU(r, t, e, i) {
  e === void 0 && (e = t);
  var n = 0, s = 0, a = 0, o = {}, u = rR(r);
  if (r && (n = u.offsetWidth, s = u.offsetHeight), r) {
    var h = lU(r, t, e, i), l = xv(h.allMatrix, h.transformOrigin, n, s);
    o = z(z({}, h), l);
    var c = xv(h.allMatrix, [50, 50], 100, 100);
    a = iR([c.pos1, c.pos2], c.direction);
  }
  var d = i ? 4 : 3;
  return z(z(z({
    width: n,
    height: s,
    rotation: a
  }, u), {
    rootMatrix: De(d),
    beforeMatrix: De(d),
    offsetMatrix: De(d),
    allMatrix: De(d),
    targetMatrix: De(d),
    targetTransform: "",
    transformOrigin: [0, 0],
    targetOrigin: [0, 0],
    is3d: !!i,
    left: 0,
    top: 0,
    right: 0,
    bottom: 0,
    origin: [0, 0],
    pos1: [0, 0],
    pos2: [0, 0],
    pos3: [0, 0],
    pos4: [0, 0],
    direction: 1,
    hasFixed: !1,
    offsetContainer: null,
    offsetRootContainer: null
  }), o);
}
function $y(r, t, e, i, n) {
  var s = 1, a = [0, 0], o = hp(), u = hp(), h = hp(), l = hp(), c = cU(t, e, n, !0);
  if (t) {
    var d = c.is3d ? 4 : 3, p = xv(c.offsetMatrix, te(c.transformOrigin, PI(c.targetMatrix, d)), c.width, c.height);
    s = p.direction, a = te(p.origin, [p.left - c.left, p.top - c.top]), o = ic(t);
    var g = bv(i, i, !0).offsetParent || c.offsetRootContainer;
    h = ic(g, !0), l = ic(c.offsetRootContainer), r && (u = ic(r));
  }
  return z({
    targetClientRect: o,
    containerClientRect: h,
    moveableClientRect: u,
    rootContainerClientRect: l,
    beforeDirection: s,
    beforeOrigin: a,
    originalBeforeOrigin: a,
    target: t
  }, c);
}
var bl = /* @__PURE__ */ function(r) {
  xd(t, r);
  function t() {
    var i = r !== null && r.apply(this, arguments) || this;
    return i.state = z({
      container: null,
      gestos: {},
      renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]],
      disableNativeEvent: !1
    }, $y(null)), i.renderState = {}, i.enabledAbles = [], i.targetAbles = [], i.controlAbles = [], i.rotation = 0, i.scale = [1, 1], i.isUnmounted = !1, i.events = {
      mouseEnter: null,
      mouseLeave: null
    }, i._emitter = new Qb(), i._prevTarget = null, i._prevDragArea = !1, i._isPropTargetChanged = !1, i._observer = null, i._observerId = 0, i.checkUpdateRect = function() {
      if (!i.isDragging()) {
        var n = i.props.parentMoveable;
        if (n) {
          n.checkUpdateRect();
          return;
        }
        zL(i._observerId), i._observerId = gI(function() {
          i.isDragging() || i.updateRect();
        });
      }
    }, i._onPreventClick = function(n) {
      n.stopPropagation(), n.preventDefault();
    }, i;
  }
  var e = t.prototype;
  return e.render = function() {
    var i = this.props, n = this.state, s = i.parentPosition, a = i.className, o = i.target, u = i.zoom, h = i.cspNonce, l = i.translateZ, c = i.cssStyled, d = i.portalContainer;
    this.checkUpdate(), this.updateRenderPoses();
    var p = s || [0, 0], g = p[0], v = p[1], m = n.left, _ = n.top, y = n.target, b = n.direction, x = n.hasFixed, w = i.targets, E = (w && w.length || o) && y, R = this.isDragging(), C = {};
    return this.getEnabledAbles().forEach(function(P) {
      C["data-able-".concat(P.name.toLowerCase())] = !0;
    }), Si(c, z({
      cspNonce: h,
      ref: Pn(this, "controlBox"),
      className: "".concat(St("control-box", b === -1 ? "reverse" : "", R ? "dragging" : ""), " ").concat(a)
    }, C, {
      onClick: this._onPreventClick,
      portalContainer: d,
      style: {
        position: x ? "fixed" : "absolute",
        display: E ? "block" : "none",
        transform: "translate3d(".concat(m - g, "px, ").concat(_ - v, "px, ").concat(l, ")"),
        "--zoom": u,
        "--zoompx": "".concat(u, "px")
      }
    }), this.renderAbles(), this._renderLines());
  }, e.componentDidMount = function() {
    this.isUnmounted = !1, this.controlBox.getElement();
    var i = this.props, n = i.parentMoveable, s = i.container, a = i.wrapperMoveable;
    this._updateTargets(), this._updateNativeEvents(), this._updateEvents(), !s && !n && !a && this.updateRect("", !1, !0), this.updateCheckInput(), this._updateObserver(this.props);
  }, e.componentDidUpdate = function(i) {
    this._updateNativeEvents(), this._updateEvents(), this._updateTargets(), this.updateCheckInput(), this._updateObserver(i);
  }, e.componentWillUnmount = function() {
    this.isUnmounted = !0, this._emitter.off(), Gu(this, "targetGesto"), Gu(this, "controlGesto");
    var i = this.events;
    for (var n in i) {
      var s = i[n];
      s && s.destroy();
    }
  }, e.getAble = function(i) {
    var n = this.props.ables || [];
    return Na(n, function(s) {
      return s.name === i;
    });
  }, e.getContainer = function() {
    var i = this.props, n = i.parentMoveable, s = i.wrapperMoveable, a = i.container;
    return a || s && s.getContainer() || n && n.getContainer() || this.controlBox.getElement().parentElement;
  }, e.isMoveableElement = function(i) {
    var n;
    return i && (((n = i.getAttribute) === null || n === void 0 ? void 0 : n.call(i, "class")) || "").indexOf(t1) > -1;
  }, e.dragStart = function(i) {
    var n = this.targetGesto;
    return n && !n.isFlag() && n.triggerDragStart(i), this;
  }, e.hitTest = function(i) {
    var n = this.state, s = n.target, a = n.pos1, o = n.pos2, u = n.pos3, h = n.pos4, l = n.targetClientRect;
    if (!s)
      return 0;
    var c;
    if (i instanceof Element) {
      var d = i.getBoundingClientRect();
      c = {
        left: d.left,
        top: d.top,
        width: d.width,
        height: d.height
      };
    } else
      c = z({
        width: 0,
        height: 0
      }, i);
    var p = c.left, g = c.top, v = c.width, m = c.height, _ = bw([a, o, h, u], l), y = A5(_, [[p, g], [p + v, g], [p + v, g + m], [p, g + m]]), b = MI(_);
    return !y || !b ? 0 : Math.min(100, y / b * 100);
  }, e.isInside = function(i, n) {
    var s = this.state, a = s.target, o = s.pos1, u = s.pos2, h = s.pos3, l = s.pos4, c = s.targetClientRect;
    return a ? Iy([i, n], bw([o, u, l, h], c)) : !1;
  }, e.updateRect = function(i, n, s) {
    s === void 0 && (s = !0);
    var a = this.props, o = a.parentMoveable, u = this.state, h = u.target || this.props.target, l = this.getContainer(), c = o ? o.props.rootContainer : a.rootContainer;
    this.updateState($y(this.controlBox && this.controlBox.getElement(), h, l, l, c || l), o ? !1 : s);
  }, e.isDragging = function() {
    return (this.targetGesto ? this.targetGesto.isFlag() : !1) || (this.controlGesto ? this.controlGesto.isFlag() : !1);
  }, e.updateTarget = function(i) {
    this.updateRect(i, !0);
  }, e.getRect = function() {
    var i = this.state, n = Qr(this.state), s = n[0], a = n[1], o = n[2], u = n[3], h = Pi(n), l = i.width, c = i.height, d = h.width, p = h.height, g = h.left, v = h.top, m = [i.left, i.top], _ = te(m, i.origin), y = te(m, i.beforeOrigin), b = i.transformOrigin;
    return {
      width: d,
      height: p,
      left: g,
      top: v,
      pos1: s,
      pos2: a,
      pos3: o,
      pos4: u,
      offsetWidth: l,
      offsetHeight: c,
      beforeOrigin: y,
      origin: _,
      transformOrigin: b,
      rotation: this.getRotation()
    };
  }, e.getManager = function() {
    return this;
  }, e.getRotation = function() {
    var i = this.state, n = i.pos1, s = i.pos2, a = i.direction;
    return WD(n, s, a);
  }, e.request = function(i, n, s) {
    n === void 0 && (n = {});
    var a = this.props, o = a.ables, u = a.groupable, h = o.filter(function(m) {
      return m.name === i;
    })[0];
    if (this.isDragging() || !h || !h.request)
      return {
        request: function() {
          return this;
        },
        requestEnd: function() {
          return this;
        }
      };
    var l = this, c = h.request(this), d = s || n.isInstant, p = c.isControl ? "controlAbles" : "targetAbles", g = "".concat(u ? "Group" : "").concat(c.isControl ? "Control" : ""), v = {
      request: function(m) {
        return xc(l, p, "drag", g, "", z(z({}, c.request(m)), {
          requestAble: i,
          isRequest: !0
        }), d), this;
      },
      requestEnd: function() {
        return xc(l, p, "drag", g, "End", z(z({}, c.requestEnd()), {
          requestAble: i,
          isRequest: !0
        }), d), this;
      }
    };
    return xc(l, p, "drag", g, "Start", z(z({}, c.requestStart(n)), {
      requestAble: i,
      isRequest: !0
    }), d), d ? v.request(n).requestEnd() : v;
  }, e.destroy = function() {
    this.componentWillUnmount();
  }, e.updateRenderPoses = function() {
    var i = this.state, n = this.props, s = i.originalBeforeOrigin, a = i.transformOrigin, o = i.allMatrix, u = i.is3d, h = i.pos1, l = i.pos2, c = i.pos3, d = i.pos4, p = i.left, g = i.top, v = n.padding || {}, m = v.left, _ = m === void 0 ? 0 : m, y = v.top, b = y === void 0 ? 0 : y, x = v.bottom, w = x === void 0 ? 0 : x, E = v.right, R = E === void 0 ? 0 : E, C = u ? 4 : 3, P = n.groupable ? s : te(s, [p, g]);
    i.renderPoses = [te(h, cp(o, [-_, -b], a, P, C)), te(l, cp(o, [R, -b], a, P, C)), te(c, cp(o, [-_, w], a, P, C)), te(d, cp(o, [R, w], a, P, C))];
  }, e.checkUpdate = function() {
    this._isPropTargetChanged = !1;
    var i = this.props, n = i.target, s = i.container, a = i.parentMoveable, o = this.state, u = o.target, h = o.container;
    if (!(!u && !n)) {
      this.updateAbles();
      var l = !Dy(u, n), c = l || !Dy(h, s);
      if (!!c) {
        var d = s || this.controlBox;
        d && this.unsetAbles(), this.updateState({
          target: n,
          container: s
        }), !a && d && this.updateRect("End", !1, !1), this._isPropTargetChanged = l;
      }
    }
  }, e.waitToChangeTarget = function() {
    return new Promise(function() {
    });
  }, e.triggerEvent = function(i, n) {
    this._emitter.trigger(i, n);
    var s = this.props[i];
    return s && s(n);
  }, e.useCSS = function(i, n) {
    var s = this.props.customStyledMap, a = i + n;
    return s[a] || (s[a] = DI(i, n)), s[a];
  }, e.updateSelectors = function() {
  }, e.unsetAbles = function() {
    var i = this;
    this.targetAbles.forEach(function(n) {
      n.unset && n.unset(i);
    });
  }, e.updateAbles = function(i, n) {
    i === void 0 && (i = this.props.ables), n === void 0 && (n = "");
    var s = this.props, a = s.triggerAblesSimultaneously, o = i.filter(function(p) {
      return p && (p.always && s[p.name] !== !1 || s[p.name]);
    }), u = "drag".concat(n, "Start"), h = "pinch".concat(n, "Start"), l = "drag".concat(n, "ControlStart"), c = lp(o, [u, h], a), d = lp(o, [l], a);
    this.enabledAbles = o, this.targetAbles = c, this.controlAbles = d;
  }, e.updateState = function(i, n) {
    if (n) {
      if (this.isUnmounted)
        return;
      this.setState(i);
    } else {
      var s = this.state;
      for (var a in i)
        s[a] = i[a];
    }
  }, e.getEnabledAbles = function() {
    var i = this.props, n = i.ables;
    return n.filter(function(s) {
      return s && i[s.name];
    });
  }, e.renderAbles = function() {
    var i = this, n = this.props, s = n.triggerAblesSimultaneously, a = {
      createElement: Si
    };
    return this.renderState = {}, jD(sR(lp(this.getEnabledAbles(), ["render"], s).map(function(o) {
      var u = o.render;
      return u(i, a) || [];
    })).filter(function(o) {
      return o;
    }), function(o) {
      var u = o.key;
      return u;
    }).map(function(o) {
      return o[0];
    });
  }, e.updateCheckInput = function() {
    this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);
  }, e._updateObserver = function(i) {
    var n, s = this.props, a = s.target;
    if (!window.ResizeObserver || !a || !s.useResizeObserver) {
      (n = this._observer) === null || n === void 0 || n.disconnect();
      return;
    }
    if (!(i.target === a && this._observer)) {
      var o = new ResizeObserver(this.checkUpdateRect);
      o.observe(a, {
        box: "border-box"
      }), this._observer = o;
    }
  }, e._updateEvents = function() {
    var i = this.controlBox.getElement(), n = this.targetAbles.length, s = this.controlAbles.length, a = this.props, o = a.dragTarget || a.target, u = !n && this.targetGesto || this._isTargetChanged(!0);
    u && (Gu(this, "targetGesto"), this.updateState({
      gesto: null
    })), s || Gu(this, "controlGesto"), o && n && !this.targetGesto && (this.targetGesto = MR(this, o, "")), !this.controlGesto && s && (this.controlGesto = b1(this, i, "controlAbles", "Control"));
  }, e._updateTargets = function() {
    var i = this.props;
    this._prevTarget = i.dragTarget || i.target, this._prevDragArea = i.dragArea;
  }, e._renderLines = function() {
    var i = this.props, n = i, s = n.zoom, a = n.hideDefaultLines, o = n.hideChildMoveableDefaultLines, u = n.parentMoveable;
    if (a || u && o)
      return [];
    var h = this.state.renderPoses, l = {
      createElement: Si
    };
    return [[0, 1], [1, 3], [3, 2], [2, 0]].map(function(c, d) {
      var p = c[0], g = c[1];
      return Jc(l, "", h[p], h[g], s, "render-line-".concat(d));
    });
  }, e._isTargetChanged = function(i) {
    var n = this.props, s = n.dragTarget || n.target, a = this._prevTarget, o = this._prevDragArea, u = n.dragArea, h = !u && a !== s, l = (i || u) && o !== u;
    return h || l;
  }, e._updateNativeEvents = function() {
    var i = this, n = this.props, s = n.dragArea ? this.areaElement : this.state.target, a = this.events, o = Pl(a);
    if (this._isTargetChanged())
      for (var u in a) {
        var h = a[u];
        h && h.destroy(), a[u] = null;
      }
    if (!!s) {
      var l = this.enabledAbles;
      o.forEach(function(c) {
        var d = lp(l, [c]), p = d.length > 0, g = a[c];
        if (!p) {
          g && (g.destroy(), a[c] = null);
          return;
        }
        g || (g = new uU(s, i, c), a[c] = g), g.setAbles(d);
      });
    }
  }, t.defaultProps = {
    target: null,
    dragTarget: null,
    container: null,
    rootContainer: null,
    origin: !0,
    parentMoveable: null,
    wrapperMoveable: null,
    parentPosition: null,
    portalContainer: null,
    useResizeObserver: !1,
    ables: [],
    pinchThreshold: 20,
    dragArea: !1,
    passDragArea: !1,
    transformOrigin: "",
    className: "",
    zoom: 1,
    triggerAblesSimultaneously: !1,
    padding: {},
    pinchOutside: !0,
    checkInput: !1,
    groupable: !1,
    hideDefaultLines: !1,
    cspNonce: "",
    translateZ: 0,
    cssStyled: null,
    customStyledMap: {},
    props: {},
    stopPropagation: !1,
    preventClickDefault: !1,
    preventClickEventOnDrag: !0,
    flushSync: KI
  }, t;
}(Wb), x1 = {
  name: "groupable",
  props: {
    defaultGroupRotate: Number,
    defaultGroupOrigin: String,
    groupable: Boolean,
    targetGroups: Object,
    hideChildMoveableDefaultLines: Boolean
  },
  events: {},
  render: function(r, t) {
    var e = r.props.targets || [];
    r.moveables = [];
    var i = r.state, n = i.left, s = i.top, a = [n, s], o = r.props, u = o.zoom || 1, h = r.renderGroupRects;
    return Ot(Ot([], e.map(function(l, c) {
      return t.createElement(bl, {
        key: "moveable" + c,
        ref: lI(r, "moveables", c),
        target: l,
        origin: !1,
        cssStyled: o.cssStyled,
        customStyledMap: o.customStyledMap,
        useResizeObserver: o.useResizeObserver,
        hideChildMoveableDefaultLines: o.hideChildMoveableDefaultLines,
        parentMoveable: r,
        parentPosition: a,
        zoom: u
      });
    }), !0), sR(h.map(function(l, c) {
      var d = l.pos1, p = l.pos2, g = l.pos3, v = l.pos4, m = [d, p, g, v];
      return [[0, 1], [1, 3], [3, 2], [2, 0]].map(function(_, y) {
        var b = _[0], x = _[1];
        return Jc(t, "", kt(m[b], a), kt(m[x], a), u, "group-rect-".concat(c, "-").concat(y));
      });
    })), !0);
  }
}, fU = Ed("clickable", {
  props: {
    clickable: Boolean
  },
  events: {
    onClick: "click",
    onClickGroup: "clickGroup"
  },
  always: !0,
  dragRelation: "weak",
  dragStart: function() {
  },
  dragControlStart: function() {
  },
  dragGroupStart: function(r, t) {
    t.datas.inputTarget = t.inputEvent && t.inputEvent.target;
  },
  dragEnd: function(r, t) {
    var e = r.props.target, i = t.inputEvent, n = t.inputTarget, s = r.isMoveableElement(n), a = !s && r.controlBox.getElement().contains(n);
    if (!(!i || !n || t.isDrag || r.isMoveableElement(n) || a)) {
      var o = e.contains(n);
      _t(r, "onClick", Ut(r, t, {
        isDouble: t.isDouble,
        inputTarget: n,
        isTarget: e === n,
        moveableTarget: r.props.target,
        containsTarget: o
      }));
    }
  },
  dragGroupEnd: function(r, t) {
    var e = t.inputEvent, i = t.inputTarget;
    if (!(!e || !i || t.isDrag || r.isMoveableElement(i) || t.datas.inputTarget === i)) {
      var n = r.props.targets, s = n.indexOf(i), a = s > -1, o = !1;
      s === -1 && (s = Ps(n, function(u) {
        return u.contains(i);
      }), o = s > -1), _t(r, "onClickGroup", Ut(r, t, {
        isDouble: t.isDouble,
        targets: n,
        inputTarget: i,
        targetIndex: s,
        isTarget: a,
        containsTarget: o,
        moveableTarget: n[s]
      }));
    }
  },
  dragControlEnd: function(r, t) {
    this.dragEnd(r, t);
  },
  dragGroupControlEnd: function(r, t) {
    this.dragEnd(r, t);
  }
});
function Eu(r) {
  var t = r.originalDatas.draggable;
  return t || (r.originalDatas.draggable = {}, t = r.originalDatas.draggable), z(z({}, r), {
    datas: t
  });
}
var dU = Ed("edgeDraggable", {
  css: [`.edge.edgeDraggable.line {
    cursor: move;
}`],
  render: function(r, t) {
    var e = r.props, i = e.edgeDraggable;
    return i ? bR(t, "edgeDraggable", i, r.state.renderPoses, e.zoom) : [];
  },
  dragControlCondition: function(r, t) {
    if (!r.props.edgeDraggable || !t.inputEvent)
      return !1;
    var e = t.inputEvent.target;
    return mr(e, St("direction")) && mr(e, St("edge")) && mr(e, St("edgeDraggable"));
  },
  dragControlStart: function(r, t) {
    return r.state.snapRenderInfo = {
      request: t.isRequest,
      snap: !0,
      center: !0
    }, Br.dragStart(r, Eu(t));
  },
  dragControl: function(r, t) {
    return Br.drag(r, Eu(t));
  },
  dragControlEnd: function(r, t) {
    return Br.dragEnd(r, Eu(t));
  },
  dragGroupControlCondition: function(r, t) {
    if (!r.props.edgeDraggable || !t.inputEvent)
      return !1;
    var e = t.inputEvent.target;
    return mr(e, St("direction")) && mr(e, St("line"));
  },
  dragGroupControlStart: function(r, t) {
    return Br.dragGroupStart(r, Eu(t));
  },
  dragGroupControl: function(r, t) {
    return Br.dragGroup(r, Eu(t));
  },
  dragGroupControlEnd: function(r, t) {
    return Br.dragGroupEnd(r, Eu(t));
  },
  unset: function(r) {
    return Br.unset(r);
  }
}), kR = {
  name: "individualGroupable",
  props: {
    individualGroupable: Boolean
  },
  events: {}
}, E1 = [AR, CR, k4, YD, Br, dU, zy, z4, $4, H4, Y4, q4, X4, nU, iU, aU, x1, kR, fU, TR, FR], pU = /* @__PURE__ */ E1.reduce(function(r, t) {
  return z(z({}, r), "events" in t ? t.events : {});
}, {}), vU = /* @__PURE__ */ E1.reduce(function(r, t) {
  return z(z({}, r), t.props);
}, {}), gU = /* @__PURE__ */ $D(pU), mU = Object.keys(gU), _U = Object.keys(vU);
function qw(r, t) {
  var e = r[0], i = r[1], n = r[2];
  return (e * t[0] + i * t[1] + n) / Math.sqrt(e * e + i * i);
}
function pp(r, t) {
  var e = r[0], i = r[1];
  return -e * t[0] - i * t[1];
}
function Zw(r, t) {
  return Math.max.apply(Math, r.map(function(e) {
    var i = e[0], n = e[1], s = e[2], a = e[3];
    return Math.max(i[t], n[t], s[t], a[t]);
  }));
}
function Jw(r, t) {
  return Math.min.apply(Math, r.map(function(e) {
    var i = e[0], n = e[1], s = e[2], a = e[3];
    return Math.min(i[t], n[t], s[t], a[t]);
  }));
}
function yU(r, t) {
  var e, i = [0, 0], n = [0, 0], s = [0, 0], a = [0, 0], o = 0, u = 0;
  if (!r.length)
    return {
      pos1: i,
      pos2: n,
      pos3: s,
      pos4: a,
      minX: 0,
      minY: 0,
      width: o,
      height: u,
      rotation: t
    };
  var h = Yt(t, Lr);
  if (h % 90) {
    var l = h / 180 * Math.PI, c = Math.tan(l), d = -1 / c, p = [My, ww], g = [[0, 0], [0, 0]], v = [My, ww], m = [[0, 0], [0, 0]];
    r.forEach(function(V) {
      V.forEach(function(K) {
        var G = qw([-c, 1, 0], K), B = qw([-d, 1, 0], K);
        p[0] > G && (g[0] = K, p[0] = G), p[1] < G && (g[1] = K, p[1] = G), v[0] > B && (m[0] = K, v[0] = B), v[1] < B && (m[1] = K, v[1] = B);
      });
    });
    var _ = g[0], y = g[1], b = m[0], x = m[1], w = [-c, 1, pp([-c, 1], _)], E = [-c, 1, pp([-c, 1], y)], R = [-d, 1, pp([-d, 1], b)], C = [-d, 1, pp([-d, 1], x)];
    e = [[w, R], [w, C], [E, R], [E, C]].map(function(V) {
      var K = V[0], G = V[1];
      return Kb(K, G)[0];
    }), i = e[0], n = e[1], s = e[2], a = e[3], o = v[1] - v[0], u = p[1] - p[0];
  } else {
    var P = Jw(r, 0), N = Jw(r, 1), M = Zw(r, 0), A = Zw(r, 1);
    if (i = [P, N], n = [M, N], s = [P, A], a = [M, A], o = M - P, u = A - N, h % 180) {
      var k = [s, i, a, n];
      i = k[0], n = k[1], s = k[2], a = k[3], o = A - N, u = M - P;
    }
  }
  if (h % 360 > 180) {
    var k = [a, s, n, i];
    i = k[0], n = k[1], s = k[2], a = k[3];
  }
  var H = bd([i, n, s, a]), L = H.minX, U = H.minY;
  return {
    pos1: i,
    pos2: n,
    pos3: s,
    pos4: a,
    width: o,
    height: u,
    minX: L,
    minY: U,
    rotation: t
  };
}
function BR(r, t) {
  var e = t.map(function(i) {
    if (wr(i)) {
      var n = BR(r, i), s = n.length;
      return s > 1 ? n : s === 1 ? n[0] : null;
    } else {
      var a = Na(r, function(o) {
        var u = o.manager;
        return u.props.target === i;
      });
      return a ? (a.finded = !0, a.manager) : null;
    }
  }).filter(Boolean);
  return e.length === 1 && wr(e[0]) ? e[0] : e;
}
var bU = /* @__PURE__ */ function(r) {
  xd(t, r);
  function t() {
    var i = r !== null && r.apply(this, arguments) || this;
    return i.differ = new FI(), i.moveables = [], i.transformOrigin = "50% 50%", i.renderGroupRects = [], i;
  }
  var e = t.prototype;
  return e.checkUpdate = function() {
    this._isPropTargetChanged = !1, this.updateAbles();
  }, e.updateRect = function(i, n, s) {
    if (s === void 0 && (s = !0), !this.controlBox)
      return;
    this.moveables.forEach(function(G) {
      G.updateRect(i, !1, !1);
    });
    var a = this.state, o = this.props, u = this.moveables, h = a.target || o.target, l = u.map(function(G) {
      return {
        finded: !1,
        manager: G
      };
    }), c = BR(l, this.props.targetGroups || []);
    c.push.apply(c, l.filter(function(G) {
      var B = G.finded;
      return !B;
    }).map(function(G) {
      var B = G.manager;
      return B;
    }));
    var d = [], p = !n || i !== "" && o.updateGroup;
    function g(G, B, W) {
      var Q = G.map(function(ft) {
        if (wr(ft)) {
          var rt = g(ft, B), j = [rt.pos1, rt.pos2, rt.pos3, rt.pos4];
          return d.push(rt), {
            poses: j,
            rotation: rt.rotation
          };
        } else
          return {
            poses: Qr(ft.state),
            rotation: ft.getRotation()
          };
      }), ut = Q.map(function(ft) {
        var rt = ft.rotation;
        return rt;
      }), it = 0, ht = ut[0], F = ut.every(function(ft) {
        return Math.abs(ht - ft) < 0.1;
      });
      p ? it = F ? ht : o.defaultGroupRotate || 0 : it = !W && F ? ht : B;
      var vt = Q.map(function(ft) {
        var rt = ft.poses;
        return rt;
      }), nt = yU(vt, it);
      return nt;
    }
    var v = g(c, this.rotation, !0);
    p && (this.rotation = v.rotation, this.transformOrigin = o.defaultGroupOrigin || "50% 50%", this.scale = [1, 1]), this.renderGroupRects = d;
    var m = this.rotation, _ = this.scale, y = v.width, b = v.height, x = v.minX, w = v.minY, E = "rotate(".concat(m, "deg) scale(").concat(_[0] >= 0 ? 1 : -1, ", ").concat(_[1] >= 0 ? 1 : -1, ")");
    h.style.cssText += "left:0px;top:0px; transform-origin: ".concat(this.transformOrigin, "; width:").concat(y, "px; height:").concat(b, "px;") + "transform:".concat(E), a.width = y, a.height = b;
    var R = this.getContainer(), C = $y(this.controlBox.getElement(), h, this.controlBox.getElement(), this.getContainer(), this.props.rootContainer || R), P = [C.left, C.top], N = Qr(C), M = N[0], A = N[1], k = N[2], H = N[3], L = bd([M, A, k, H]), U = [L.minX, L.minY];
    C.pos1 = kt(M, U), C.pos2 = kt(A, U), C.pos3 = kt(k, U), C.pos4 = kt(H, U), C.left = x - C.left + U[0], C.top = w - C.top + U[1], C.origin = kt(te(P, C.origin), U), C.beforeOrigin = kt(te(P, C.beforeOrigin), U), C.originalBeforeOrigin = te(P, C.originalBeforeOrigin);
    var V = C.targetClientRect, K = _[0] * _[1] > 0 ? 1 : -1;
    V.top += C.top - a.top, V.left += C.left - a.left, h.style.transform = "translate(".concat(-U[0], "px, ").concat(-U[1], "px) ").concat(E), this.updateState(z(z({}, C), {
      direction: K,
      beforeDirection: K
    }), s);
  }, e.getRect = function() {
    return z(z({}, r.prototype.getRect.call(this)), {
      children: this.moveables.map(function(i) {
        return i.getRect();
      })
    });
  }, e.triggerEvent = function(i, n, s) {
    if (s || i.indexOf("Group") > -1)
      return r.prototype.triggerEvent.call(this, i, n);
    this._emitter.trigger(i, n);
  }, e.updateAbles = function() {
    r.prototype.updateAbles.call(this, Ot(Ot([], this.props.ables, !0), [x1], !1), "Group");
  }, e._updateTargets = function() {
    r.prototype._updateTargets.call(this), this._prevTarget = this.props.dragTarget || this.areaElement;
  }, e._updateEvents = function() {
    var i = this.state, n = this.props, s = this._prevTarget, a = n.dragTarget || this.areaElement;
    s !== a && (Gu(this, "targetGesto"), Gu(this, "controlGesto"), i.target = null), i.target || (i.target = this.areaElement, this.controlBox.getElement().style.display = "block"), i.target && (this.targetGesto || (this.targetGesto = MR(this, a, "Group")), this.controlGesto || (this.controlGesto = b1(this, this.controlBox.getElement(), "controlAbles", "GroupControl")));
    var o = !Dy(i.container, n.container);
    o && (i.container = n.container);
    var u = this.differ.update(n.targets), h = u.added, l = u.changed, c = u.removed, d = h.length || c.length;
    (o || d || l.length) && this.updateRect(), this._isPropTargetChanged = !!d;
  }, e._updateObserver = function() {
  }, t.defaultProps = z(z({}, bl.defaultProps), {
    transformOrigin: ["50%", "50%"],
    groupable: !0,
    dragArea: !0,
    keepRatio: !0,
    targets: [],
    defaultGroupRotate: 0,
    defaultGroupOrigin: "50% 50%"
  }), t;
}(bl), xU = /* @__PURE__ */ function(r) {
  xd(t, r);
  function t() {
    var i = r !== null && r.apply(this, arguments) || this;
    return i.moveables = [], i;
  }
  var e = t.prototype;
  return e.render = function() {
    var i = this, n = this.props, s = n.cspNonce, a = n.cssStyled, o = n.targets;
    return Si(a, {
      cspNonce: s,
      ref: Pn(this, "controlBox"),
      className: St("control-box")
    }, o.map(function(u, h) {
      return Si(bl, z({
        key: "moveable" + h,
        ref: lI(i, "moveables", h)
      }, i.props, {
        target: u,
        wrapperMoveable: i
      }));
    }));
  }, e.componentDidUpdate = function() {
  }, e.updateRect = function(i, n, s) {
    s === void 0 && (s = !0), this.moveables.forEach(function(a) {
      a.updateRect(i, n, s);
    });
  }, e.getRect = function() {
    return z(z({}, r.prototype.getRect.call(this)), {
      children: this.moveables.map(function(i) {
        return i.getRect();
      })
    });
  }, e.request = function() {
    return {
      request: function() {
        return this;
      },
      requestEnd: function() {
        return this;
      }
    };
  }, e.dragStart = function() {
    return this;
  }, e.hitTest = function() {
    return 0;
  }, e.isInside = function() {
    return !1;
  }, e.isDragging = function() {
    return !1;
  }, e.updateRenderPoses = function() {
  }, e.checkUpdate = function() {
  }, e.triggerEvent = function() {
  }, e.updateAbles = function() {
  }, e._updateEvents = function() {
  }, e._updateObserver = function() {
  }, t;
}(bl);
function LR(r, t) {
  var e = [];
  return r.forEach(function(i) {
    if (!!i) {
      if (Ni(i)) {
        t[i] && e.push.apply(e, t[i]);
        return;
      }
      wr(i) ? e.push.apply(e, LR(i, t)) : e.push(i);
    }
  }), e;
}
function DR(r, t) {
  var e = [];
  return r.forEach(function(i) {
    if (!!i) {
      if (Ni(i)) {
        t[i] && e.push.apply(e, t[i]);
        return;
      }
      wr(i) ? e.push(DR(i, t)) : e.push(i);
    }
  }), e;
}
function UR(r, t) {
  return r.length !== t.length || r.some(function(e, i) {
    var n = t[i];
    return !e && !n ? !1 : e != n ? wr(e) && wr(n) ? UR(e, n) : !0 : !1;
  });
}
var EU = /* @__PURE__ */ function(r) {
  xd(t, r);
  function t() {
    var i = r !== null && r.apply(this, arguments) || this;
    return i.refTargets = [], i.selectorMap = {}, i._differ = new FI(), i._elementTargets = [], i._onChangetarget = null, i;
  }
  var e = t.prototype;
  return t.makeStyled = function() {
    var i = {}, n = this.getTotalAbles();
    n.forEach(function(a) {
      var o = a.css;
      !o || o.forEach(function(u) {
        i[u] = !0;
      });
    });
    var s = Pl(i).join(`
`);
    this.defaultStyled = DI("div", TL(t1, fD + s));
  }, t.getTotalAbles = function() {
    return Ot([CR, x1, kR, TR], this.defaultAbles, !0);
  }, e.render = function() {
    var i = this.constructor;
    i.defaultStyled || i.makeStyled();
    var n = this.props, s = n.ables, a = n.props, o = aD(n, ["ables", "props"]), u = this._updateRefs(!0), h = LR(u, this.selectorMap), l = h.length > 1, c = i.getTotalAbles(), d = Ot(Ot([], c, !0), s || [], !0), p = z(z(z({}, o), a || {}), {
      ables: d,
      cssStyled: i.defaultStyled,
      customStyledMap: i.customStyledMap
    });
    if (this._elementTargets = h, l) {
      if (o.individualGroupable)
        return Si(xU, z({
          key: "individual-group",
          ref: Pn(this, "moveable")
        }, p, {
          target: null,
          targets: h
        }));
      var g = DR(u, this.selectorMap);
      return Si(bU, z({
        key: "group",
        ref: Pn(this, "moveable")
      }, p, {
        target: null,
        targets: h,
        targetGroups: g
      }));
    } else
      return Si(bl, z({
        key: "single",
        ref: Pn(this, "moveable")
      }, p, {
        target: h[0]
      }));
  }, e.componentDidMount = function() {
    this._updateRefs();
  }, e.componentDidUpdate = function() {
    var i = this._differ.update(this._elementTargets), n = i.added, s = i.removed, a = n.length || s.length;
    a && this._onChangetarget && this._onChangetarget(), this._updateRefs();
  }, e.componentWillUnmount = function() {
    this.selectorMap = {}, this.refTargets = [];
  }, e.updateSelectors = function() {
    this.selectorMap = {}, this.refTargets = [], this.forceUpdate();
  }, e.waitToChangeTarget = function() {
    var i = this, n;
    return this._onChangetarget = function() {
      i._onChangetarget = null, n();
    }, new Promise(function(s) {
      n = s;
    });
  }, e.getManager = function() {
    return this.moveable;
  }, e._updateRefs = function(i) {
    var n = this.refTargets, s = c1(this.props.target || this.props.targets), a = typeof document < "u", o = UR(n, s), u = this.selectorMap, h = {};
    return this.refTargets.forEach(function l(c) {
      if (Ni(c)) {
        var d = u[c];
        d ? h[c] = u[c] : a && (o = !0, h[c] = [].slice.call(document.querySelectorAll(c)));
      } else
        wr(c) && c.forEach(l);
    }), this.refTargets = s, this.selectorMap = h, !i && o && this.forceUpdate(), s;
  }, t.defaultAbles = [], t.customStyledMap = {}, t.defaultStyled = null, oD([CL(zI)], t.prototype, "moveable", void 0), t;
}(Wb), wU = /* @__PURE__ */ function(r) {
  xd(t, r);
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  return t.defaultAbles = E1, t;
}(EU), TU = wU;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Vy = function(r, t) {
  return Vy = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, i) {
    e.__proto__ = i;
  } || function(e, i) {
    for (var n in i)
      i.hasOwnProperty(n) && (e[n] = i[n]);
  }, Vy(r, t);
};
function w1(r, t) {
  Vy(r, t);
  function e() {
    this.constructor = r;
  }
  r.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Kc = function() {
  return Kc = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, Kc.apply(this, arguments);
};
function CU(r, t, e, i) {
  var n = arguments.length, s = n < 3 ? t : i === null ? i = Object.getOwnPropertyDescriptor(t, e) : i, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
    s = Reflect.decorate(r, t, e, i);
  else
    for (var o = r.length - 1; o >= 0; o--)
      (a = r[o]) && (s = (n < 3 ? a(s) : n > 3 ? a(t, e, s) : a(t, e)) || s);
  return n > 3 && s && Object.defineProperty(t, e, s), s;
}
var IU = /* @__PURE__ */ function(r) {
  w1(t, r);
  function t(i) {
    var n = r.call(this, i) || this;
    return n.state = {}, n.state = n.props, n;
  }
  var e = t.prototype;
  return e.render = function() {
    return a5(Si(TU, Kc({
      ref: Pn(this, "moveable")
    }, this.state)), this.state.parentElement);
  }, t;
}(Xb), RU = _U, SU = zI, PU = mU;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Xy = function() {
  return Xy = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var s in e)
        Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]);
    }
    return t;
  }, Xy.apply(this, arguments);
};
function NU() {
  for (var r = 0, t = 0, e = arguments.length; t < e; t++)
    r += arguments[t].length;
  for (var i = Array(r), n = 0, t = 0; t < e; t++)
    for (var s = arguments[t], a = 0, o = s.length; a < o; a++, n++)
      i[n] = s[a];
  return i;
}
var OU = /* @__PURE__ */ function() {
  function r() {
    this._events = {};
  }
  var t = r.prototype;
  return t.on = function(e, i) {
    if (en(e))
      for (var n in e)
        this.on(n, e[n]);
    else
      this._addEvent(e, i, {});
    return this;
  }, t.off = function(e, i) {
    if (!e)
      this._events = {};
    else if (en(e))
      for (var n in e)
        this.off(n);
    else if (!i)
      this._events[e] = [];
    else {
      var s = this._events[e];
      if (s) {
        var a = Ps(s, function(o) {
          return o.listener === i;
        });
        a > -1 && s.splice(a, 1);
      }
    }
    return this;
  }, t.once = function(e, i) {
    var n = this;
    return i && this._addEvent(e, i, {
      once: !0
    }), new Promise(function(s) {
      n._addEvent(e, s, {
        once: !0
      });
    });
  }, t.emit = function(e, i) {
    var n = this;
    i === void 0 && (i = {});
    var s = this._events[e];
    if (!e || !s)
      return !0;
    var a = !1;
    return i.eventType = e, i.stop = function() {
      a = !0;
    }, i.currentTarget = this, NU(s).forEach(function(o) {
      o.listener(i), o.once && n.off(e, o.listener);
    }), !a;
  }, t.trigger = function(e, i) {
    return i === void 0 && (i = {}), this.emit(e, i);
  }, t._addEvent = function(e, i, n) {
    var s = this._events;
    s[e] = s[e] || [];
    var a = s[e];
    a.push(Xy({
      listener: i
    }, n));
  }, r;
}(), AU = OU, FU = /* @__PURE__ */ function(r) {
  w1(t, r);
  function t(i, n) {
    n === void 0 && (n = {});
    var s = r.call(this) || this;
    s.tempElement = document.createElement("div");
    var a = Kc({}, n), o = {};
    PU.forEach(function(h) {
      o[HL("on ".concat(h))] = function(l) {
        return s.trigger(h, l);
      };
    }), _w(Si(IU, Kc({
      ref: Pn(s, "innerMoveable"),
      parentElement: i
    }, a, o)), s.tempElement);
    var u = a.target;
    return wr(u) && u.length > 1 && s.updateRect(), s;
  }
  var e = t.prototype;
  return e.setState = function(i, n) {
    this.innerMoveable.setState(i, n);
  }, e.forceUpdate = function(i) {
    this.innerMoveable.forceUpdate(i);
  }, e.dragStart = function(i) {
    var n = this.innerMoveable;
    n.$_timer && this.forceUpdate(), this.getMoveable().dragStart(i);
  }, e.destroy = function() {
    _w(null, this.tempElement), this.off(), this.tempElement = null, this.innerMoveable = null;
  }, e.getMoveable = function() {
    return this.innerMoveable.moveable;
  }, t = CU([fw(SU, function(i, n) {
    i[n] || (i[n] = function() {
      for (var s = [], a = 0; a < arguments.length; a++)
        s[a] = arguments[a];
      var o = this.getMoveable();
      if (!(!o || !o[n]))
        return o[n].apply(o, s);
    });
  }), fw(RU, function(i, n) {
    Object.defineProperty(i, n, {
      get: function() {
        return this.getMoveable().props[n];
      },
      set: function(s) {
        var a;
        this.setState((a = {}, a[n] = s, a));
      },
      enumerable: !0,
      configurable: !0
    });
  })], t), t;
}(AU), MU = /* @__PURE__ */ function(r) {
  w1(t, r);
  function t() {
    return r !== null && r.apply(this, arguments) || this;
  }
  return t;
}(FU), T1 = (r, t, e) => {
  if (!t.has(r))
    throw TypeError("Cannot " + e);
}, Ge = (r, t, e) => (T1(r, t, "read from private field"), e ? e.call(r) : t.get(r)), Os = (r, t, e) => {
  if (t.has(r))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(r) : t.set(r, e);
}, Ds = (r, t, e, i) => (T1(r, t, "write to private field"), i ? i.call(r, e) : t.set(r, e), e), kU = (r, t, e, i) => ({
  set _(n) {
    Ds(r, t, n, e);
  },
  get _() {
    return Ge(r, t, i);
  }
}), Kw = (r, t, e) => (T1(r, t, "access private method"), e), Wn, Ec, wc, Tc, Cc, Iv, Hu, zu, zp, Wy;
const dt = class {
  constructor(r, t = !1) {
    this.bg_col = r, this.isLay = t, Os(this, zp), this.hArg = {}, this.id_tag = "", this.hDesignArg = {
      rotation: 0,
      pivot_x: 0,
      pivot_y: 0,
      left: 0,
      center: 0,
      right: 0,
      s_right: 0,
      top: 0,
      middle: 0,
      bottom: 0,
      s_bottom: 0,
      width: 0,
      height: 0
    }, this.fncLay = () => {
    }, this.mov = void 0, this.div = void 0, this.lx = 0, this.ly = 0, this.rect = Pt.EMPTY, this.pivot = new Ee(0, 0), this.scale = new Ee(1, 1), this.rotation = 0, this.oldFn = () => "", this.rotatable = !0;
  }
  static init(r, t, e, i, n, s, a) {
    r.view.insertAdjacentHTML("beforebegin", `<div id="${Ge(dt, Cc)}" style="width: ${Y.stageW * dt.sys.cvsScale}px; height: ${Y.stageH * t.cvsScale}px; background: rgba(0,0,0,0); position: absolute; touch-action: none; user-select: none; display: none;"></div>`), Ds(dt, Wn, document.getElementById(Ge(dt, Cc))), dt.divHint.classList.add("sn_design_hint"), r.view.parentElement.appendChild(dt.divHint), dt.sys = t, Ds(dt, Ec, e), dt.prpPrs = i, Ds(dt, wc, n), Ds(dt, Tc, s), dt.hPages = a, Wu(`
.sn_design_cast {
	position: absolute; touch-action: none; user-select: none;
	opacity: 0.6; border-radius: 8px;
}

.sn_design_cast.drag_border {
	line-height: 1.8;
	border: dashed 5px #333;
}

.sn_design_hint {
	position: absolute;
	left: 0;
	top: 0;
	padding: 5px;
	border-radius: 5px;
	background: #333;
	z-index: 10;
	color: #fff;
	font-weight: bold;
	font-size: 12px;
	display: none;
}
`);
  }
  static setHint(r, t, e, i) {
    dt.divHint.innerHTML = r;
    const n = window.getComputedStyle(dt.divHint), s = parseFloat(n.width), a = parseFloat(n.height);
    dt.divHint.style.cssText = `display: block; left: ${Math.max(10, i.lx + t - s)}px;
		top: ${Math.max(10, i.ly + e - a - 10)}px;`;
  }
  static cvsResizeDesign() {
    const r = Ge(dt, Wn).style;
    r.width = `${Y.stageW * dt.sys.cvsScale}px`, r.height = `${Y.stageH * dt.sys.cvsScale}px`;
  }
  destroy() {
    var r;
    this.div = void 0, (r = this.mov) == null || r.destroy(), this.mov = void 0;
  }
  gethArg() {
    return this.hArg;
  }
  sethArg(r) {
    var e, i;
    if (!this.includeDesignArg(r))
      return;
    this.id_tag || (this.id_tag = (e = r[":id_tag"]) != null ? e : ""), this.hArg = r;
    const t = (i = r[":id_dc"]) != null ? i : this.id_tag;
    Ge(dt, Hu)[t] = this;
  }
  includeDesignArg(r) {
    for (const t in r)
      if (t in this.hDesignArg)
        return !0;
    return !1;
  }
  getRect() {
    return Pt.EMPTY;
  }
  cnvPosArg(r, t) {
    return {};
  }
  cnvSizeArg(r, t) {
    return {};
  }
  setPos(r, t) {
  }
  setSize(r, t) {
  }
  setOther(r) {
  }
  adopt(r) {
    this.child = r, r.parent = this;
  }
  static enterMode() {
    dt.leaveMode(), Ge(dt, Wn).style.display = "inline", Ds(dt, Iv, 0), Ds(dt, Hu, {});
  }
  static allHide() {
    Ge(dt, zu).forEach((r) => r.visible = !1);
  }
  set visible(r) {
    !this.div || !this.mov || (this.div.style.display = r ? "inline" : "none", this.mov.updateTarget());
  }
  static leaveMode() {
    Ge(dt, Wn).textContent = "", Ge(dt, Wn).style.display = "none", Ge(dt, zu).forEach((r) => r.destroy()), Ds(dt, zu, []);
  }
  cvsResize() {
    var r;
    Kw(this, zp, Wy).call(this), (r = this.mov) == null || r.updateTarget();
  }
  onDragStart() {
  }
  make() {
    var o, u;
    const r = (o = this.hArg[":id_dc"]) != null ? o : this.id_tag;
    Ge(dt, Hu)[r] = this;
    const t = this.div = document.createElement("div");
    t.id = Ge(dt, Cc) + "_" + ++kU(dt, Iv)._, t.classList.add("sn_design_cast"), t.dataset.id_dc = r, t.style.backgroundColor = `${this.bg_col}`, t.style.display = "none", this.rect = this.getRect(), Kw(this, zp, Wy).call(this), (this.parent && (u = document.querySelector(
      `[data-id_dc="${this.parent.id_tag}"]`
    )) != null ? u : Ge(dt, Wn)).appendChild(t);
    const e = {
      aPos: [0, 0],
      roDeg: 0,
      trOrg: "",
      origin: [0, 0]
    }, i = () => {
      e.aPos = [NaN, NaN], e.roDeg = this.rotation;
      const h = this.pivot.x * dt.sys.cvsScale, l = this.pivot.y * dt.sys.cvsScale;
      e.trOrg = `${h}px ${l}px`, e.origin = [h, l], Object.assign(this.mov, {
        verticalGuidelines: [],
        horizontalGuidelines: []
      });
    }, n = (h) => {
      dt.sys.send2Dbg("_changeCast", {
        ...h,
        ":id_tag": this.id_tag
      }), dt.divHint.style.display = "none";
    }, s = () => {
      const [h, l] = e.aPos;
      if (isNaN(h)) {
        dt.divHint.style.display = "none";
        return;
      }
      const c = jt(this.rect.x += h / dt.sys.cvsScale + this.pivot.x), d = jt(this.rect.y += l / dt.sys.cvsScale + this.pivot.y);
      this.setPos(c, d);
      const p = vi(this.rect.width), g = vi(this.rect.height);
      this.setSize(p, g), n({
        ...this.cnvPosArg(c, d),
        ...this.cnvSizeArg(p, g)
      });
    };
    let a;
    this.mov = new MU(document.body, {
      target: t,
      draggable: !0,
      resizable: !0,
      rotatable: this.rotatable,
      originDraggable: this.rotatable,
      snappable: !0
    }).on("dragStart", (h) => {
      var c;
      i(), this.onDragStart();
      const l = (c = this.child) == null ? void 0 : c.mov;
      l && (a = l.target, l.isInside(h.clientX, h.clientY) && (l.target = void 0));
    }).on("drag", (h) => {
      e.aPos = h.beforeTranslate, this.procDragHint(h, h.left, h.top);
    }).on("dragEnd", () => {
      var h, l;
      s(), (h = this.child) != null && h.mov && (this.child.mov.target = a), (l = this.parent) != null && l.mov && (this.parent.mov.target = this.parent.div);
    }).on("resizeStart", i).on("resize", (h) => {
      t.style.width = `${h.width}px`, t.style.height = `${h.height}px`, e.aPos = h.drag.beforeTranslate, this.rect.width = h.width / dt.sys.cvsScale, this.rect.height = h.height / dt.sys.cvsScale, this.procResizeHint(h, h.drag.left, h.drag.top);
    }).on("resizeEnd", s).on("rotateStart", (h) => {
      i(), h.set(e.roDeg);
    }).on("rotate", (h) => {
      e.roDeg = h.beforeRotate, dt.setHint(jt(e.roDeg) + "\u5EA6", h.drag.left, h.drag.top, this);
    }).on("rotateEnd", () => {
      this.rotation = e.roDeg, this.setOther({}), n({ rotation: jt(e.roDeg) });
    }).on("dragOriginStart", () => i).on("dragOrigin", (h) => {
      e.trOrg = h.transformOrigin, e.origin = h.origin;
    }).on("dragOriginEnd", () => {
      const [h, l] = e.origin;
      e.trOrg = `${h}px ${l}px`;
      const c = this.pivot.x = h / dt.sys.cvsScale, d = this.pivot.y = l / dt.sys.cvsScale;
      this.setOther({});
      const p = jt(this.rect.x + c), g = jt(this.rect.y + d);
      this.setPos(p, g), n({
        ...this.cnvPosArg(p, g),
        pivot_x: jt(c),
        pivot_y: jt(d)
      });
    }).on("render", () => {
      const { aPos: h, roDeg: l, trOrg: c } = e;
      t.style.transformOrigin = c, t.style.transform = `translate(${h[0]}px, ${h[1]}px) rotate(${l}deg)`;
    }), Ge(dt, zu).push(this), t.addEventListener("dragenter", () => t.classList.add("drag_border")), t.addEventListener("dragover", (h) => {
      h.stopPropagation(), h.preventDefault(), h.dataTransfer && (h.dataTransfer.dropEffect = "copy");
    }), t.addEventListener("dragleave", () => t.classList.remove("drag_border")), t.addEventListener("drop", (h) => {
      h.stopPropagation(), h.preventDefault(), t.classList.remove("drag_border");
      const l = h.dataTransfer;
      if (!l || l.files.length === 0)
        return;
      const c = l.files[0], d = {
        ":id_tag": this.id_tag,
        fn: vc(c.name),
        ext: qm(c.name),
        url: "",
        buf: new ArrayBuffer(0),
        old_fn: this.oldFn(),
        old_url: Ge(dt, Tc).searchPath(this.oldFn(), hr.EXT_SPRITE)
      };
      c.arrayBuffer().then((p) => {
        d.buf = p;
        try {
          d.url = Ge(dt, Ec).cnvPath4Dbg(
            Ge(dt, Tc).searchPath(c.name, hr.EXT_SPRITE)
          );
        } catch {
        }
        dt.sys.send2Dbg("_dropFile", d);
      }).catch((p) => console.error("drop2dc %o", p));
    }), t.addEventListener("dblclick", (h) => {
      h.preventDefault(), dt.sys.send2Dbg("_focusScript", this.hArg);
    });
  }
  procDragHint(r, t, e) {
    const [i, n] = r.beforeTranslate;
    dt.setHint(
      `(${jt(this.rect.x + i / dt.sys.cvsScale)}, ${jt(this.rect.y + n / dt.sys.cvsScale)})`,
      t,
      e,
      this
    );
  }
  procResizeHint(r, t, e) {
    dt.setHint(
      `(${jt(r.drag.left)}, ${jt(r.drag.top)})<br/>${jt(this.rect.width)} x ${jt(this.rect.height)}`,
      t,
      e,
      this
    );
  }
  static replaceToken(r) {
    var h, l, c, d, p, g, v, m, _, y, b;
    const e = r[":id_tag"], i = Ge(dt, Hu)[e];
    if (!document.querySelector(`div[data-id_dc='${e}']`) || !i)
      return;
    const s = r[":token"];
    Ge(dt, Ec).replace(r[":idx_tkn"], s);
    const [a, o] = Sp(s);
    i.child && (i.child.hArg[":token"] = i.hArg[":token"]), Ge(dt, wc).go(o);
    const u = Ge(dt, wc).hPrm;
    if ("pivot_x" in u || "pivot_y" in u) {
      const x = Number(dt.prpPrs.getValAmpersand((h = u.pivot_x.val) != null ? h : "0")), w = Number(dt.prpPrs.getValAmpersand((l = u.pivot_y.val) != null ? l : "0"));
      (isNaN(x) || isNaN(w)) && $t.myTrace(`pivot_x\u304Bpivot_y\u304C\u6570\u5024\u3067\u306F\u3042\u308A\u307E\u305B\u3093
(fn:${r[":path"].slice(13)} ln:${r[":ln"]})
${s}`, "F"), i.pivot.set(x, w);
    }
    if ("left" in u || "top" in u || "x" in u || "y" in u) {
      const x = jt(dt.prpPrs.getValAmpersand((d = (c = u.left.val) != null ? c : u.x.val) != null ? d : "0")), w = jt(dt.prpPrs.getValAmpersand((g = (p = u.top.val) != null ? p : u.y.val) != null ? g : "0"));
      (isNaN(x) || isNaN(w)) && $t.myTrace(`width\u304Bheight\u304C\u6570\u5024\u3067\u306F\u3042\u308A\u307E\u305B\u3093
(fn:${r[":path"].slice(13)} ln:${r[":ln"]})
${s}`, "F"), i.rect.x = x - i.pivot.x, i.rect.y = w - i.pivot.y, i.setPos(x, w);
    }
    if ("width" in u || "height" in u) {
      const x = jt(dt.prpPrs.getValAmpersand((v = u.width.val) != null ? v : "0")), w = jt(dt.prpPrs.getValAmpersand((m = u.height.val) != null ? m : "0"));
      (isNaN(x) || isNaN(w)) && $t.myTrace(`width\u304Bheight\u304C\u6570\u5024\u3067\u306F\u3042\u308A\u307E\u305B\u3093
(fn:${r[":path"].slice(13)} ln:${r[":ln"]})
${s}`, "F"), i.rect.width = x, i.rect.height = w, i.setSize(x, w);
    }
    if ("scale_x" in u || "scale_y" in u) {
      const x = Number(dt.prpPrs.getValAmpersand((_ = u.scale_x.val) != null ? _ : "0")), w = Number(dt.prpPrs.getValAmpersand((y = u.scale_y.val) != null ? y : "0"));
      (isNaN(x) || isNaN(w)) && $t.myTrace(`scale_x\u304Bscale_y\u304C\u6570\u5024\u3067\u306F\u3042\u308A\u307E\u305B\u3093
(fn:${r[":path"].slice(13)} ln:${r[":ln"]})
${s}`, "F"), i.scale.set(x, w);
    }
    if ("rotation" in u) {
      const x = Number(dt.prpPrs.getValAmpersand((b = u.rotation.val) != null ? b : "0"));
      isNaN(x) && $t.myTrace(`rotation\u304C\u6570\u5024\u3067\u306F\u3042\u308A\u307E\u305B\u3093
(fn:${r[":path"].slice(13)} ln:${r[":ln"]})
${s}`, "F"), i.rotation = x;
    }
    i.setOther(u), i.cvsResize();
  }
};
let Jt = dt;
Wn = /* @__PURE__ */ new WeakMap();
Ec = /* @__PURE__ */ new WeakMap();
wc = /* @__PURE__ */ new WeakMap();
Tc = /* @__PURE__ */ new WeakMap();
Cc = /* @__PURE__ */ new WeakMap();
Iv = /* @__PURE__ */ new WeakMap();
Hu = /* @__PURE__ */ new WeakMap();
zu = /* @__PURE__ */ new WeakMap();
zp = /* @__PURE__ */ new WeakSet();
Wy = function() {
  this.fncLay(), this.div && Object.assign(this.div.style, {
    left: `${this.lx + this.rect.x * dt.sys.cvsScale}px`,
    top: `${this.ly + this.rect.y * dt.sys.cvsScale}px`,
    width: `${this.rect.width * dt.sys.cvsScale}px`,
    height: `${this.rect.height * dt.sys.cvsScale}px`,
    transformOrigin: `${this.pivot.x * dt.sys.cvsScale}px ${this.pivot.y * dt.sys.cvsScale}px`,
    transform: `scale(${this.scale.x}, ${this.scale.y}) rotate(${this.rotation}deg)`
  });
};
Os(Jt, Wn, void 0);
Os(Jt, Ec, void 0);
Os(Jt, wc, void 0);
Os(Jt, Tc, void 0);
Jt.divHint = document.createElement("div");
Os(Jt, Cc, "DesignMode");
Os(Jt, Iv, 0);
Os(Jt, Hu, {});
Os(Jt, zu, []);
var Zs;
class BU extends Jt {
  constructor(e, i) {
    super("#29e", !0);
    I(this, Zs, void 0);
    this.spLay = e, this.gl = i, this.oldFn = () => {
      var n;
      return (n = this.hArg.fn) != null ? n : "";
    };
  }
  setSp(e) {
    T(this, Zs, e);
  }
  getRect() {
    var e, i, n, s;
    return new Pt(this.spLay.x, this.spLay.y, (i = (e = f(this, Zs)) == null ? void 0 : e.width) != null ? i : 0, (s = (n = f(this, Zs)) == null ? void 0 : n.height) != null ? s : 0);
  }
  cnvPosArg(e, i) {
    return { left: e, top: i };
  }
  cnvSizeArg(e, i) {
    return { width: e, height: i };
  }
  setPos(e, i) {
    this.spLay.x = e, this.spLay.y = i;
  }
  setSize(e, i) {
    f(this, Zs).width = e, f(this, Zs).height = i;
  }
  setOther(e) {
    var i;
    if ("fn" in e) {
      const n = Jt.prpPrs.getValAmpersand((i = e.fn.val) != null ? i : "");
      this.gl.lay({ fn: n });
    }
    this.spLay.pivot.copyFrom(this.pivot), this.spLay.scale.copyFrom(this.scale), this.spLay.angle = this.rotation;
  }
}
Zs = new WeakMap();
class LU extends Jt {
  constructor(t, e) {
    super("#29e", !0), this.spLay = t, this.ts = e, this.hDesignArg = {
      rotation: 0,
      pivot_x: 0,
      pivot_y: 0,
      left: 0,
      center: 0,
      right: 0,
      s_right: 0,
      top: 0,
      middle: 0,
      bottom: 0,
      s_bottom: 0,
      width: 0,
      height: 0,
      pl: 0,
      pr: 0,
      pt: 0,
      pb: 0
    };
  }
  getRect() {
    const t = this.ts.infTL;
    return new Pt(this.spLay.x, this.spLay.y, t.$width, t.$height);
  }
  cnvPosArg(t, e) {
    return { left: t, top: e };
  }
  cnvSizeArg(t, e) {
    return { width: t, height: e };
  }
  setPos(t, e) {
    this.spLay.position.set(t, e), this.ts.lay(this.cnvPosArg(t, e));
  }
  setSize(t, e) {
    this.ts.lay(this.cnvSizeArg(t, e));
  }
  setOther(t) {
    var e;
    (e = this.child) == null || e.setOther(t), this.spLay.pivot.copyFrom(this.pivot), this.spLay.scale.copyFrom(this.scale), this.spLay.angle = this.rotation;
  }
}
var bf, Yy;
class DU extends Jt {
  constructor(e) {
    super("#9e2");
    I(this, bf);
    this.ts = e, this.rotatable = !1;
  }
  getRect() {
    const e = this.ts.infTL;
    return new Pt(
      e.pad_left,
      e.pad_top,
      e.$width - e.pad_left - e.pad_right,
      e.$height - e.pad_top - e.pad_bottom
    );
  }
  cnvPosArg(e, i) {
    return { pl: e, pt: i };
  }
  cnvSizeArg(e, i) {
    const n = this.ts.infTL;
    return {
      pr: n.$width - n.pad_left - e,
      pb: n.$height - n.pad_top - i
    };
  }
  setPos(e, i) {
    this.ts.lay(this.cnvPosArg(e, i));
  }
  setSize(e, i) {
    this.ts.lay({ ...this.cnvSizeArg(e, i), ":redraw": !0 });
  }
  setOther(e) {
    var n, s, a, o, u, h, l, c;
    const i = this.ts.infTL;
    if (("pl" in e || "pt" in e) && (this.setPos(
      this.rect.x = parseFloat(Jt.prpPrs.getValAmpersand(
        (s = (n = e.pl) == null ? void 0 : n.val) != null ? s : `${i.pad_left}`
      )),
      this.rect.y = parseFloat(Jt.prpPrs.getValAmpersand(
        (o = (a = e.pt) == null ? void 0 : a.val) != null ? o : `${i.pad_top}`
      ))
    ), this.cvsResize()), "pr" in e || "pb" in e) {
      this.ts.lay({
        pr: parseFloat(Jt.prpPrs.getValAmpersand(
          (h = (u = e.pr) == null ? void 0 : u.val) != null ? h : `${i.pad_right}`
        )),
        pb: parseFloat(Jt.prpPrs.getValAmpersand(
          (c = (l = e.pb) == null ? void 0 : l.val) != null ? c : `${i.pad_bottom}`
        ))
      });
      const d = this.getRect();
      this.setSize(
        this.rect.width = d.width,
        this.rect.height = d.height
      ), this.cvsResize();
    }
  }
  procDragHint(e, i, n) {
    const [s, a] = e.beforeTranslate;
    S(this, bf, Yy).call(this, i, n, s, a);
  }
  procResizeHint(e, i, n) {
    const [s, a] = e.drag.beforeTranslate;
    S(this, bf, Yy).call(this, i, n, s, a);
  }
}
bf = new WeakSet(), Yy = function(e, i, n, s) {
  const a = this.rect.x, o = this.rect.y, u = this.rect.width, h = this.rect.height, l = this.ts.infTL, c = jt(a + n / Jt.sys.cvsScale), d = jt(o + s / Jt.sys.cvsScale), p = jt(l.$width - c - u), g = jt(l.$height - d - h), v = (m) => "&nbsp;".repeat(m);
  Jt.setHint(
    v(5 + 5 + 1) + `\u4E0A\u5E45=${d}<br/>
			\u5DE6\u5E45=${c + v(1 + 3 + 5 + 1)}\u53F3\u5E45=${p}<br/>` + v(5) + `\u5185\u5074 ${jt(u)} x ${jt(h)}<br/>` + v(5 + 5) + `\u4E0B\u5E45=${g}`,
    e,
    i,
    this
  );
};
class GR extends Jt {
  constructor(t, e) {
    super("#e92"), this.btn = t, this.hArg = e, this.pivot.x = tt(e, "pivot_x", this.pivot.x), this.pivot.y = tt(e, "pivot_y", this.pivot.y), this.scale.x = tt(e, "scale_x", this.scale.x), this.scale.y = tt(e, "scale_y", this.scale.y), this.rotation = tt(e, "rotation", this.rotation), this.sethArg(e);
  }
  sethArg(t) {
    var i;
    super.sethArg(t);
    const e = (i = this.hArg.layer) != null ? i : "";
    this.fncLay = !this.parent && !this.child && e ? () => {
      const n = Jt.hPages[e].fore;
      this.lx = n.x * Jt.sys.cvsScale, this.ly = n.y * Jt.sys.cvsScale;
    } : () => {
    };
  }
  cnvPosArg(t, e) {
    return { left: t, top: e };
  }
  cnvSizeArg(t, e) {
    return { width: t, height: e };
  }
  setPos(t, e) {
    this.btn.x = t, this.btn.y = e;
  }
  setOther(t) {
    this.btn.pivot.copyFrom(this.pivot), this.btn.scale.copyFrom(this.scale), this.btn.angle = this.rotation;
  }
  onDragStart() {
    const t = this.btn.parent.children.filter((e) => e !== this.btn);
    Object.assign(this.mov, {
      verticalGuidelines: t.map((e) => this.lx + e.x * Jt.sys.cvsScale),
      horizontalGuidelines: t.map((e) => this.ly + e.y * Jt.sys.cvsScale)
    });
  }
}
class UU extends GR {
  constructor(t, e, i) {
    super(t, e), this.txt = i, this.oldFn = () => {
      var n;
      return (n = this.hArg.b_pic) != null ? n : "";
    }, pt(e, "design", !0) || (this.setPos = () => {
    }, this.setSize = () => {
    });
  }
  getRect() {
    return new Pt(this.btn.x, this.btn.y, this.txt.width, this.txt.height);
  }
  setSize(t, e) {
    this.txt.width = t, this.txt.height = e;
  }
  setOther(t) {
    var e;
    if (super.setOther(t), "b_pic" in t) {
      const i = Jt.prpPrs.getValAmpersand((e = t.b_pic.val) != null ? e : "");
      this.btn.update_b_pic(i, this.txt);
    }
  }
}
var Jn;
class GU extends GR {
  constructor(e, i) {
    super(e, i);
    I(this, Jn, void 0);
    this.oldFn = () => {
      var n;
      return (n = this.hArg.pic) != null ? n : "";
    };
  }
  setSp(e) {
    T(this, Jn, e);
  }
  getRect() {
    return new Pt(this.btn.x, this.btn.y, f(this, Jn).width, f(this, Jn).height);
  }
  setSize(e, i) {
    f(this, Jn).width = e, f(this, Jn).height = i;
  }
  setOther(e) {
    var i;
    if (super.setOther(e), "pic" in e) {
      const n = Jt.prpPrs.getValAmpersand((i = e.pic.val) != null ? i : "");
      this.btn.update_pic(n, f(this, Jn));
    }
  }
}
Jn = new WeakMap();
var C1 = (r, t, e) => {
  if (!t.has(r))
    throw TypeError("Cannot " + e);
}, yt = (r, t, e) => (C1(r, t, "read from private field"), e ? e.call(r) : t.get(r)), Re = (r, t, e) => {
  if (t.has(r))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(r) : t.set(r, e);
}, ye = (r, t, e, i) => (C1(r, t, "write to private field"), i ? i.call(r, e) : t.set(r, e), e), xl = (r, t, e) => (C1(r, t, "access private method"), e), I1, no, Vs, Qu, ju, Yn, Vg, El, Rv, Sv, Vn, Us, Za, Ja, jp, $p, Pv, Xg, R1, S1, HR, Wg, P1, N1, zR, sc, on, ac, $u, Nv;
const Et = class extends Rr {
  constructor() {
    super(), Re(this, Vn, new BU(this.spLay, this)), Re(this, Us, ""), Re(this, Za, ""), Re(this, Ja, ""), this.lay = (r) => this.laySub(r, (t) => {
      t && yt(Et, Vs).resume();
    }), Re(this, jp, 0), Re(this, $p, 0), Re(this, sc, void 0), Re(this, on, void 0), Re(this, ac, () => {
    }), this.record = () => ({
      ...super.record(),
      sBkFn: yt(this, Za),
      sBkFace: yt(this, Ja),
      idc_hArg: yt(this, Vn).gethArg()
    }), this.dump = () => super.dump() + `, "pic":"${yt(this, Us)}"`, Y.isDbg && (this.setSp = (r) => yt(this, Vn).setSp(r), this.cvsResize = () => {
      super.cvsResize(), yt(this, Vn).cvsResize();
    });
  }
  static init(r, t, e, i, n, s) {
    ye(Et, Vs, r), ye(Et, Qu, t), ye(Et, ju, e), ye(Et, Yn, i), ye(Et, Vg, s);
    const a = () => {
      const o = yt(Et, El) * yt(Et, Rv);
      for (const u in Et.hFn2VElm)
        Et.hFn2VElm[u].volume = o;
    };
    n.setNoticeChgVolume(
      (o) => {
        ye(Et, El, o), a();
      },
      (o) => {
        ye(Et, Rv, o), a();
      }
    ), yt(Et, Yn).crypto && ye(Et, Pv, xl(Et, S1, HR));
  }
  static setEvtMng(r) {
    ye(Et, Sv, r);
  }
  static destroy() {
    yt(Et, I1).clear(), ye(Et, no, {}), Et.hFn2ResAniSpr = {}, Et.hFn2VElm = {};
  }
  setSp(r) {
  }
  laySub(r, t) {
    const { fn: e, face: i = "" } = r;
    if (yt(this, Vn).sethArg(r), !e)
      return super.lay(r), this.spLay.children.length > 0 && this.setPos(r), ye(this, Za, ""), ye(this, Us, ye(this, Ja, i)), t(!1), !1;
    const n = "fn" in r, s = "face" in r;
    return this.clearLay({ filter: "true" }), n && ye(this, Za, e), s && ye(this, Ja, i), super.lay(r), r.dx = 0, r.dy = 0, Et.csv2Sprites(
      ye(this, Us, e + (i ? "," + i : "")),
      this.spLay,
      (a) => {
        ("width" in r || "height" in r) && (a.width = tt(r, "width", 0), a.height = tt(r, "height", 0)), ye(this, jp, a.width), ye(this, $p, a.height), Rr.setXY(a, r, this.spLay, !0), this.setSp(a);
      },
      (a) => {
        Rr.setBlendmode(this.spLay, r), t(a);
      }
    );
  }
  get width() {
    return yt(this, jp);
  }
  get height() {
    return yt(this, $p);
  }
  static csv2Sprites(r, t, e, i = () => {
  }) {
    let n = !1;
    if (r.slice(0, 5) === "data:") {
      const u = () => {
        const h = qe.from(r);
        t == null || t.addChild(h), e(h), i(n);
      };
      return r in Zr ? u() : (n = !0, new fi().add(r, r).load(u)), n;
    }
    const s = [], a = new fi();
    r.split(",").forEach((u, h) => {
      if (!u)
        throw "face\u5C5E\u6027\u306B\u7A7A\u8981\u7D20\u304C\u542B\u307E\u308C\u307E\u3059";
      const l = yt(Et, no)[u] || {
        fn: u,
        dx: 0,
        dy: 0,
        blendmode: bt.NORMAL
      }, c = h === 0 ? e : (g) => {
        g.x = l.dx, g.y = l.dy, g.blendMode = l.blendmode;
      };
      if (s.push({ fn: l.fn, fnc: c }), l.fn in Et.hFn2ResAniSpr || l.fn in Zr || l.fn in fi.shared.resources)
        return;
      n = !0;
      const d = yt(Et, Qu).searchPath(l.fn, hr.EXT_SPRITE), p = yt(this, Yn).crypto ? { xhrType: d.slice(-5) === ".json" ? Lt.XHR_RESPONSE_TYPE.TEXT : Lt.XHR_RESPONSE_TYPE.BUFFER } : {};
      a.add({ ...p, name: l.fn, url: d });
    });
    const o = (u) => {
      var h;
      for (const l of s) {
        const c = xl(h = Et, N1, zR).call(h, l.fn, u);
        c.name = l.fn, t == null || t.addChild(c), l.fnc(c);
      }
      i(n);
    };
    return n ? a.use((u, h) => {
      yt(this, Yn).dec(u.extension, u.data).then((l) => {
        var c;
        return yt(c = Et, Pv).call(c, l, u, () => h == null ? void 0 : h());
      }).catch((l) => yt(this, Vs).errScript(`Graphic \u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059 fn:${u.name} ${l}`, !1));
    }).load((u, h) => o(h)) : o({}), n;
  }
  static wv(r) {
    const { fn: t } = r;
    if (!t)
      throw "fn\u306F\u5FC5\u9808\u3067\u3059";
    const e = Et.hFn2VElm[t];
    if (!e || e.loop)
      return !1;
    if (e.ended)
      return delete Et.hFn2VElm[t], !1;
    const i = () => {
      e.removeEventListener("ended", i), delete Et.hFn2VElm[t], yt(this, Vs).resume();
    };
    return e.addEventListener("ended", i, { once: !0, passive: !0 }), yt(Et, Sv).waitEvent(
      () => {
        e.pause(), i();
      },
      pt(r, "canskip", !0),
      pt(r, "global", !1)
    );
  }
  renderStart() {
    ye(this, sc, Ji.create({
      width: Y.stageW,
      height: Y.stageH
    })), ye(this, on, new qe(yt(this, sc))), yt(this, on).visible = !1, this.spLay.addChildAt(yt(this, on), 0), yt(this, on).position.set(-this.spLay.x, -this.spLay.y);
    let r = () => {
      const t = this.spLay.alpha;
      this.spLay.alpha = 1, this.spLay.children.forEach((e) => e.visible = !0), yt(this, on).visible = !1, yt(Et, ju).renderer.render(this.spLay, { renderTexture: yt(this, sc) }), this.spLay.alpha = t, this.spLay.children.forEach((e) => e.visible = !1);
    };
    if (!this.containMovement) {
      let t = r;
      r = () => {
        r = () => {
        }, t();
      };
    }
    ye(this, ac, () => {
      r(), yt(this, on).visible = !0;
    }), yt(Et, ju).ticker.add(yt(this, ac));
  }
  renderEnd() {
    yt(Et, ju).ticker.remove(yt(this, ac)), this.spLay.removeChild(yt(this, on)), this.spLay.children.forEach((r) => r.visible = !0), yt(this, on).destroy(!0);
  }
  static loadPic2Img(r, t, e) {
    const i = yt(this, Nv)[r];
    if (i) {
      t.src = i;
      return;
    }
    const n = yt(this, $u)[r];
    if (n) {
      n.push(t);
      return;
    }
    yt(this, $u)[r] = [t];
    const s = yt(Et, Qu).searchPath(r, hr.EXT_SPRITE), a = new fi().add({ name: r, url: s, xhrType: Lt.XHR_RESPONSE_TYPE.BUFFER });
    yt(Et, Yn).crypto && a.use((o, u) => {
      yt(Et, Yn).dec(o.extension, o.data).then((h) => {
        if (o.extension !== "bin") {
          u == null || u();
          return;
        }
        o.data = h, h instanceof HTMLImageElement && (o.type = Lt.TYPE.IMAGE), u == null || u();
      }).catch((h) => yt(Et, Vs).errScript(`GrpLayer loadPic \u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059 fn:${o.name} ${h}`, !1));
    }), a.load((o, u) => {
      for (const h in u) {
        const l = yt(this, Nv)[h] = u[h].data.src;
        yt(this, $u)[h].forEach((c) => {
          c.src = l, e && (c.onload = () => e(c));
        }), delete yt(this, $u)[h];
      }
    });
  }
  setPos(r) {
    Rr.setXY(
      this.spLay.children.length === 0 ? this.spLay : this.spLay.children[0],
      r,
      this.spLay,
      !0
    );
  }
  static add_face(r) {
    const { name: t } = r;
    if (!t)
      throw "name\u306F\u5FC5\u9808\u3067\u3059";
    if (t in yt(Et, no))
      throw "\u4E00\u3064\u306Ename\uFF08" + t + "\uFF09\u306B\u5BFE\u3057\u3066\u540C\u3058\u753B\u50CF\u3092\u8907\u6570\u5272\u308A\u5F53\u3066\u3089\u308C\u307E\u305B\u3093";
    const { fn: e = t } = r;
    return yt(Et, no)[t] = {
      fn: e,
      dx: tt(r, "dx", 0),
      dy: tt(r, "dy", 0),
      blendmode: Rr.getBlendmodeNum(r.blendmode || "")
    }, !1;
  }
  static clearFace2Name() {
    ye(Et, no, {});
  }
  get containMovement() {
    if (yt(this, Us) === "")
      return !1;
    const r = this.spLay.children;
    return yt(this, Us).split(",").some(
      (t, e) => r[e] instanceof fC || Et.hFn2VElm[t]
    );
  }
  clearLay(r) {
    super.clearLay(r);
    for (const t of this.spLay.removeChildren())
      t.destroy();
    ye(this, Za, ""), ye(this, Ja, ""), ye(this, Us, "");
  }
  playback(r, t) {
    if (super.playback(r, t), r.sBkFn === "" && r.sBkFace === "") {
      ye(this, Za, r.sBkFn), ye(this, Ja, r.sBkFace), yt(this, Vn).sethArg(r.idc_hArg);
      return;
    }
    t.push(new Promise((e) => this.laySub(
      { fn: r.sBkFn, face: r.sBkFace, left: r.x, top: r.y, alpha: r.alpha, blendmode: Rr.getNum2Blendmode(r.blendMode), rotation: r.rotation, scale_x: r.scale_x, scale_y: r.scale_y },
      (i) => {
        this.spLay.position.set(r.x, r.y), e();
      }
    )));
  }
  makeDesignCast(r) {
    !this.spLay.visible || r(yt(this, Vn));
  }
  cvsResize() {
    super.cvsResize();
  }
  showDesignCast() {
    yt(this, Vn).visible = !0;
  }
};
let re = Et;
I1 = /* @__PURE__ */ new WeakMap();
no = /* @__PURE__ */ new WeakMap();
Vs = /* @__PURE__ */ new WeakMap();
Qu = /* @__PURE__ */ new WeakMap();
ju = /* @__PURE__ */ new WeakMap();
Yn = /* @__PURE__ */ new WeakMap();
Vg = /* @__PURE__ */ new WeakMap();
El = /* @__PURE__ */ new WeakMap();
Rv = /* @__PURE__ */ new WeakMap();
Sv = /* @__PURE__ */ new WeakMap();
Vn = /* @__PURE__ */ new WeakMap();
Us = /* @__PURE__ */ new WeakMap();
Za = /* @__PURE__ */ new WeakMap();
Ja = /* @__PURE__ */ new WeakMap();
jp = /* @__PURE__ */ new WeakMap();
$p = /* @__PURE__ */ new WeakMap();
Pv = /* @__PURE__ */ new WeakMap();
Xg = /* @__PURE__ */ new WeakSet();
R1 = function(r) {
  const t = /([^\d]+)\d+\.(\w+)/.exec(r[0]);
  if (!t)
    return;
  const e = t[1].length, i = -t[2].length - 1;
  r.sort(
    (n, s) => jt(n.slice(e, i)) > jt(s.slice(e, i)) ? 1 : -1
  );
};
S1 = /* @__PURE__ */ new WeakSet();
HR = function(r, t, e) {
  var o;
  var i;
  if (t.data = r, t.extension === "bin" && (r instanceof HTMLImageElement ? (t.texture = It.fromLoader(r, t.url, t.name), t.type = Lt.TYPE.IMAGE, URL.revokeObjectURL(r.src)) : r instanceof HTMLVideoElement && (r.volume = yt(Et, El), Et.hFn2VElm[t.name] = xl(i = Et, Wg, P1).call(i, r), t.type = Lt.TYPE.VIDEO, URL.revokeObjectURL(r.src))), t.extension !== "json") {
    e();
    return;
  }
  if (typeof r != "string") {
    e();
    return;
  }
  const n = t.data = JSON.parse(r);
  if (t.type = Lt.TYPE.JSON, !((o = n.meta) != null && o.image)) {
    e();
    return;
  }
  const s = vc(n.meta.image), a = yt(Et, Qu).searchPath(s, hr.EXT_SPRITE);
  new fi().use((u, h) => {
    yt(this, Yn).dec(u.extension, u.data).then((l) => {
      u.data = l, l instanceof HTMLImageElement && (u.type = Lt.TYPE.IMAGE, URL.revokeObjectURL(l.src)), h == null || h();
    }).catch((l) => yt(this, Vs).errScript(`Graphic \u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059 dec2res4Cripto fn:${u.name} ${l}`, !1));
  }).add({ name: s, url: a, xhrType: Lt.XHR_RESPONSE_TYPE.BUFFER }).load((u, h) => {
    var l;
    for (const c in u.resources) {
      const d = It.from(u.resources[c].data).baseTexture, p = Object.values(n.frames);
      xl(l = Et, Xg, R1).call(l, p), Et.hFn2ResAniSpr[t.name] = {
        aTex: p.map((g) => new It(
          d,
          new Pt(
            g.frame.x,
            g.frame.y,
            g.frame.w,
            g.frame.h
          )
        )),
        meta: n.meta
      };
    }
    e();
  });
};
Wg = /* @__PURE__ */ new WeakSet();
P1 = function(r) {
  return yt(Et, Vg).getVal("const.sn.needClick2Play") && ($t.trace_beforeNew(`[lay\u7CFB] ${$t.strPos()}\u672A\u30AF\u30EA\u30C3\u30AF\u72B6\u614B\u3067\u52D5\u753B\u3092\u81EA\u52D5\u518D\u751F\u3057\u307E\u3059\u3002\u97F3\u58F0\u306F\u30DF\u30E5\u30FC\u30C8\u3055\u308C\u307E\u3059`, "W"), r.muted = !0), r.setAttribute("playsinline", ""), r;
};
N1 = /* @__PURE__ */ new WeakSet();
zR = function(r, t) {
  var i;
  const e = Et.hFn2ResAniSpr[r];
  if (e) {
    const n = new fC(e.aTex);
    return n.animationSpeed = (i = e.meta.animationSpeed) != null ? i : 1, n.play(), n;
  }
  return r in Zr ? qe.from(r) : r in Et.hFn2VElm ? qe.from(Et.hFn2VElm[r]) : r in t ? new qe(t[r].texture) : new qe();
};
sc = /* @__PURE__ */ new WeakMap();
on = /* @__PURE__ */ new WeakMap();
ac = /* @__PURE__ */ new WeakMap();
$u = /* @__PURE__ */ new WeakMap();
Nv = /* @__PURE__ */ new WeakMap();
Re(re, Xg);
Re(re, S1);
Re(re, Wg);
Re(re, N1);
Re(re, I1, new gl());
Re(re, no, {});
Re(re, Vs, void 0);
Re(re, Qu, void 0);
Re(re, ju, void 0);
Re(re, Yn, void 0);
Re(re, Vg, void 0);
Re(re, El, 1);
Re(re, Rv, 1);
Re(re, Sv, void 0);
re.hFn2ResAniSpr = {};
Re(re, Pv, (r, t, e) => {
  var i, n;
  switch (t.type) {
    case Lt.TYPE.JSON:
      const s = t.spritesheet._frameKeys;
      xl(i = Et, Xg, R1).call(i, s), Et.hFn2ResAniSpr[t.name] = {
        aTex: s.map((o) => It.from(o)),
        meta: t.data.meta
      };
      break;
    case Lt.TYPE.VIDEO:
      const a = t.data;
      a.volume = yt(Et, El), Et.hFn2VElm[t.name] = xl(n = Et, Wg, P1).call(n, a);
  }
  e();
});
re.hFn2VElm = {};
Re(re, $u, {});
Re(re, Nv, {});
var gh, xf, mo, ae, fn, Kn, o0, ni, Js, wt, Qn, si, ai, mh, Vp, Di, dn, Ef, _h, u0, jR, _o, yh, ts, yo, bo, xo, bh, es, wf, qy, rs, Tf, is, pn, xh, Cf, Zy, Ks, Eo, If, Jy, bi;
const At = class extends ge {
  constructor(e, i, n) {
    super();
    I(this, mh);
    I(this, u0);
    I(this, wf);
    I(this, Cf);
    I(this, If);
    I(this, ae, document.createElement("span"));
    I(this, fn, new ge());
    I(this, Kn, new di());
    I(this, ni, new LU(this.spLay, this));
    I(this, Js, new DU(this));
    I(this, wt, {
      fontsize: 24,
      $width: 0,
      $height: 0,
      pad_left: 0,
      pad_right: 0,
      pad_top: 0,
      pad_bottom: 0
    });
    I(this, Qn, !1);
    I(this, si, 0);
    I(this, ai, 0);
    I(this, Di, 0);
    I(this, dn, !1);
    I(this, Ef, 0);
    I(this, _h, 0);
    I(this, _o, void 0);
    I(this, yh, []);
    I(this, ts, []);
    I(this, yo, 0);
    I(this, es, () => !1);
    I(this, xh, 0);
    I(this, Ks, "Quadratic.Out");
    I(this, Eo, "Quadratic.Out");
    I(this, bi, void 0);
    this.spLay = e, this.canFocus = i, this.sys = n, f(this, ae).classList.add("sn_tx"), f(this, ae).style.position = "absolute", f(At, xf).view.parentElement.appendChild(f(this, ae)), this.addChild(f(this, fn)), this.addChild(f(this, Kn)), f(this, Kn).name = "grpDbgMasume", f(this, ni).adopt(f(this, Js));
  }
  static init(e, i) {
    T(At, gh, e), T(At, xf, i), T(At, bo, /[、。，．）］｝〉」』】〕”〟ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ！？!?‼⁉・ーゝゞヽヾ々]/), T(At, xo, /[［（｛〈「『【〔“〝]/), T(At, bh, /[─‥…]/);
  }
  static setEvtMng(e) {
    T(At, mo, e);
  }
  static destroy() {
    T(At, rs, /* @__PURE__ */ Object.create(null)), T(At, is, /* @__PURE__ */ Object.create(null)), T(At, pn, new ge());
  }
  lay(e) {
    var n, s, a, o, u, h, l, c;
    const i = f(this, ae).style;
    if ("style" in e)
      if (e.style) {
        const d = document.createElement("span");
        d.style.cssText = e.style;
        const p = d.style.length;
        for (let g = 0; g < p; ++g) {
          const v = d.style[g];
          if (v in f(At, o0)) {
            $t.myTrace(`${v}\u306F\u6307\u5B9A\u3067\u304D\u307E\u305B\u3093`, "W");
            continue;
          }
          i[v] = d.style[v];
        }
        !d.style.opacity && "alpha" in e && (i.opacity = String(this.spLay.alpha));
      } else
        f(this, ae).style.cssText = "";
    else
      "alpha" in e && (i.opacity = String(this.spLay.alpha));
    if ("width" in e && (i.width = ((n = e.width) != null ? n : "0") + "px"), "height" in e && (i.height = ((s = e.height) != null ? s : "0") + "px"), "pl" in e && (i.paddingLeft = ((a = e.pl) != null ? a : "0") + "px"), "pr" in e && (i.paddingRight = ((o = e.pr) != null ? o : "0") + "px"), "pt" in e && (i.paddingTop = ((u = e.pt) != null ? u : "0") + "px"), "pb" in e && (i.paddingBottom = ((h = e.pb) != null ? h : "0") + "px"), "kinsoku_sol" in e && T(At, bo, new RegExp(`[${e.kinsoku_sol}]`)), "kinsoku_eol" in e && T(At, xo, new RegExp(`[${e.kinsoku_eol}]`)), "kinsoku_dns" in e && T(At, bh, new RegExp(`[${e.kinsoku_dns}]`)), S(this, mh, Vp).call(this), f(this, ni).sethArg(e), T(this, Di, this.spLay.position.x), i.transformOrigin = `${this.spLay.pivot.x}px ${this.spLay.pivot.y}px`, this.cvsResize(), i.display = this.spLay.visible ? "inline" : "none", i.textShadow = (c = (l = e.filter) != null ? l : i.textShadow) != null ? c : "", T(this, Qn, pt(e, "break_fixed", f(this, Qn))), T(this, si, tt(e, "break_fixed_left", f(this, si))), T(this, ai, tt(e, "break_fixed_top", f(this, ai))), ":redraw" in e && f(this, yo) > 0) {
      const d = [
        f(this, ae).innerHTML.replaceAll(/(animation-delay: )\d+ms/g, "$10ms"),
        `<span class='sn_ch' data-add='{"ch_in_style":"default"}'>\u3000</span>`
      ];
      S(this, If, Jy).call(this), this.goTxt(d);
    }
  }
  cvsResize() {
    const e = f(this, ae).style, i = this.sys.cvsScale;
    e.left = `${this.sys.ofsLeft4elm + f(this, Di) * i}px`, e.top = `${this.sys.ofsTop4elm + this.spLay.position.y * i}px`, e.transform = `rotate(${this.spLay.angle}deg) scale(${this.spLay.scale.x * i}, ${this.spLay.scale.y * i})`, f(this, ni).cvsResize(), f(this, Js).cvsResize();
  }
  get tategaki() {
    return f(this, dn);
  }
  get infTL() {
    return f(this, wt);
  }
  get getWidth() {
    return f(this, wt).$width;
  }
  get getHeight() {
    return f(this, wt).$height;
  }
  setSize(e, i) {
    f(this, wt).$width = e, f(this, wt).$height = i, f(this, ae).style.width = f(this, wt).$width + "px", f(this, ae).style.height = f(this, wt).$height + "px";
  }
  goTxt(e) {
    var y, b, x, w, E, R, C, P, N, M, A;
    f(At, pn).visible = !1;
    const i = f(this, ts).length;
    i === 0 ? (f(At, gh).oCfg.debug.masume && (Y.debugLog && console.log(`\u{1F34C} masume ${this.name} v:${this.visible} l:${this.x} t:${this.y} a:${this.alpha} pl:${f(this, wt).pad_left} pr:${f(this, wt).pad_right} pt:${f(this, wt).pad_top} pb:${f(this, wt).pad_bottom} w:${f(this, wt).$width} h:${f(this, wt).$height}`), f(this, Kn).clear().beginFill(3407616, 0.2).lineStyle(1, 3407616, 1).drawRect(-f(this, wt).pad_left, -f(this, wt).pad_top, f(this, wt).$width, f(this, wt).$height).endFill().beginFill(13311, 0.2).lineStyle(2, 13311, 1).drawRect(
      0,
      0,
      f(this, wt).$width - f(this, wt).pad_left - f(this, wt).pad_right,
      f(this, wt).$height - f(this, wt).pad_top - f(this, wt).pad_bottom
    ).endFill()), f(this, ae).innerHTML = [...e].join("").replaceAll(/[\n\t]/g, "")) : f(this, ae).insertAdjacentHTML("beforeend", e.slice(f(this, yo)).join("").replaceAll(/[\n\t]/g, "")), T(this, yo, e.length);
    const n = this.sys.cvsScale, s = f(this, ae).getBoundingClientRect(), a = s.left + f(this, wt).pad_left, o = s.top + f(this, wt).pad_top;
    let u;
    if (n === 1)
      u = (k, H) => new Pt(
        k.left - a,
        k.top - o,
        k.width,
        k.height + ("gjqy".includes(H) ? f(this, xh) : 0)
      );
    else {
      const k = this.sys.ofsPadLeft_Dom2PIXI + s.left * (1 - n), H = this.sys.ofsPadTop_Dom2PIXI + s.top * (1 - n);
      u = (L, U) => new Pt(
        (L.left - k) / n - a,
        (L.top - H) / n - o,
        L.width / n,
        (L.height + ("gjqy".includes(U) ? f(this, xh) : 0)) / n
      );
    }
    let h = 0, l = 2, c = !1;
    do {
      const k = T(this, ts, S(this, Cf, Zy).call(this, f(this, ae), u));
      if (h = k.length, !c && (h < 2 || i === h))
        break;
      c = !0;
      let H = -1 / 0;
      for (; l < h; ++l) {
        const L = k[l];
        if (L.elm.tagName === "RT")
          continue;
        const U = this.tategaki ? L.rect.y : L.rect.x;
        if (H <= U || ((b = (y = L.elm.previousElementSibling) == null ? void 0 : y.children[0]) == null ? void 0 : b.tagName) === "BR") {
          H = U;
          continue;
        }
        let V = l - 1;
        for (; k[V].elm.tagName === "RT"; )
          --V;
        const K = k[V].ch;
        H = -1 / 0;
        const G = l;
        if (f(At, bh).test(K) && K === L.ch)
          l = V;
        else {
          if (f(At, xo).test(K))
            l = V;
          else if (f(At, bo).test(L.ch))
            for (l = V + 1; l > 0 && f(At, bo).test(k[--l].ch); )
              ;
          else {
            ++l;
            continue;
          }
          for (l = V + 1; l > 0 && f(At, xo).test(k[--l].ch); )
            ;
        }
        const B = k[l].elm.parentElement, W = document.createElement("br");
        if (B.classList.contains("sn_tx"))
          B.insertBefore(W, k[l].elm);
        else {
          const Q = B.parentElement;
          Q.classList.contains("sn_ch") ? Q.parentElement.insertBefore(W, Q) : Q.insertBefore(W, B);
        }
        l += 2, l < G && (l = G), h = -1;
        break;
      }
    } while (h < 0);
    const d = Y.debugLog ? (k, H) => console.log(`\u{1F34C} masume ch:${k.ch} x:${H.x} y:${H.y} w:${H.width} h:${H.height}`) : () => {
    }, p = f(At, gh).oCfg.debug.masume ? (k, H) => {
      d(k, H), f(this, Kn).beginFill(6737151, 0.5).lineStyle(2, 16724736, 1).drawRect(H.x, H.y, H.width, H.height).endFill();
    } : () => {
    }, g = ws.ease(f(this, Ks));
    for (let k = i; k < h; ++k) {
      const H = f(this, ts)[k], L = H.rect, U = JSON.parse((x = H.elm.dataset.arg) != null ? x : '{"delay": 0}'), V = JSON.parse((w = H.elm.dataset.add) != null ? w : "{}"), K = f(At, rs)[V.ch_in_style];
      if (p(H, L), H.elm.dataset.cmd === "grp") {
        const G = new ge();
        f(this, fn).addChild(G), re.csv2Sprites(U.pic, G, (B) => {
          S(this, wf, qy).call(this, G, U, V, L, g, K != null ? K : {}), G.parent || G.removeChild(B);
        });
      }
      if (H.elm.dataset.lnk) {
        const G = H.elm.parentElement.closest("[data-arg]"), B = JSON.parse((E = G.dataset.arg) != null ? E : "{}");
        B.key = `lnk=[${k}] ` + this.name;
        const W = new qe();
        S(this, wf, qy).call(this, W, B, V, L, g, K != null ? K : {});
        const Q = (R = B.style) != null ? R : "", ut = Q + ((C = B.style_hover) != null ? C : ""), it = Q + ((P = B.style_clicked) != null ? P : ""), ht = (N = B.r_style) != null ? N : "", F = ht + ((M = B.r_style_hover) != null ? M : ""), vt = ht + ((A = B.r_style_clicked) != null ? A : ""), nt = G.querySelectorAll("rt");
        nt.forEach((j) => j.dataset.st_r_bk = j.style.cssText);
        const ft = G.style.cssText, rt = (j, xt) => {
          G.style.cssText = ft + j, nt.forEach((Z) => Z.style.cssText = Z.dataset.st_r_bk + xt);
        };
        f(At, mo).button(
          B,
          W,
          () => rt(Q, ht),
          () => this.canFocus() ? (rt(ut, F), !0) : !1,
          () => rt(it, vt)
        ), f(this, fn).addChild(W);
      }
    }
    const v = f(this, ae).querySelectorAll("span.sn_ch");
    if (T(this, es, () => (T(this, es, () => !1), v.forEach((k) => k.className = k.className.replace(/ go_ch_in_[^\s"]+/g, "")), f(At, pn).position.set(
      f(this, si),
      f(this, ai)
    ), f(At, pn).visible = !0, f(At, mo).noticeCompTxt(), !0)), v.length === 0) {
      f(this, es).call(this);
      return;
    }
    v.forEach((k) => k.className = k.className.replace(/sn_ch_in_([^\s"]+)/g, "go_ch_in_$1"));
    let _;
    for (let k = h - 1; k >= 0; --k) {
      const H = f(this, ts)[k];
      if (H.elm.tagName !== "SPAN")
        continue;
      const L = H.rect;
      if (T(this, si, L.x + (f(this, dn) ? 0 : L.width)), T(this, ai, L.y + (f(this, dn) ? L.height : 0)), k !== h) {
        const U = f(this, ts)[h - 1].rect;
        f(this, dn) ? f(this, ai) < U.y + U.height && T(this, ai, U.y + U.height) : f(this, si) < U.x + U.width && T(this, si, U.x + U.width);
      }
      _ = H.elm;
      break;
    }
    if (!_ || i === h) {
      f(this, es).call(this);
      return;
    }
    _.addEventListener("animationend", f(this, es), { once: !0, passive: !0 });
  }
  skipChIn() {
    let e = f(this, es).call(this);
    return f(this, yh).forEach((i) => {
      i.tw && (i.tw.stop().end(), e = !0);
    }), T(this, yh, []), e;
  }
  static initChStyle() {
    T(At, rs, /* @__PURE__ */ Object.create(null)), T(At, is, /* @__PURE__ */ Object.create(null));
  }
  static getChInStyle(e) {
    return f(At, rs)[e];
  }
  static ch_in_style(e) {
    var a, o, u;
    const { name: i } = e;
    if (!i)
      throw "name\u306F\u5FC5\u9808\u3067\u3059";
    if (f(At, Tf).test(i))
      throw `name\u3010${i}\u3011\u306B\u4F7F\u3048\u306A\u3044\u6587\u5B57\u304C\u542B\u307E\u308C\u307E\u3059`;
    if (i in f(At, rs))
      throw `name\u3010${i}\u3011\u306F\u3059\u3067\u306B\u3042\u308A\u307E\u3059`;
    const n = String((a = e.x) != null ? a : "=0"), s = String((o = e.y) != null ? o : "=0");
    return f(At, rs)[i] = {
      wait: tt(e, "wait", 500),
      alpha: tt(e, "alpha", 0),
      x: n,
      y: s,
      nx: parseFloat(n.charAt(0) === "=" ? n.slice(1) : n),
      ny: parseFloat(s.charAt(0) === "=" ? s.slice(1) : s),
      scale_x: tt(e, "scale_x", 1),
      scale_y: tt(e, "scale_y", 1),
      rotate: tt(e, "rotate", 0),
      join: pt(e, "join", !0),
      ease: (u = e.ease) != null ? u : "ease-out"
    };
  }
  static getChOutStyle(e) {
    return f(At, is)[e];
  }
  static ch_out_style(e) {
    var a, o, u;
    const { name: i } = e;
    if (!i)
      throw "name\u306F\u5FC5\u9808\u3067\u3059";
    if (f(At, Tf).test(i))
      throw `name\u3010${i}\u3011\u306B\u4F7F\u3048\u306A\u3044\u6587\u5B57\u304C\u542B\u307E\u308C\u307E\u3059`;
    if (i in f(At, is))
      throw `name\u3010${i}\u3011\u306F\u3059\u3067\u306B\u3042\u308A\u307E\u3059`;
    const n = String((a = e.x) != null ? a : "=0"), s = String((o = e.y) != null ? o : "=0");
    return f(At, is)[i] = {
      wait: tt(e, "wait", 500),
      alpha: tt(e, "alpha", 0),
      x: n,
      y: s,
      nx: parseFloat(n.charAt(0) === "=" ? n.slice(1) : n),
      ny: parseFloat(s.charAt(0) === "=" ? s.slice(1) : s),
      scale_x: tt(e, "scale_x", 1),
      scale_y: tt(e, "scale_y", 1),
      rotate: tt(e, "rotate", 0),
      join: pt(e, "join", !1),
      ease: (u = e.ease) != null ? u : "ease-out"
    };
  }
  dispBreak(e) {
    const i = f(At, pn);
    i.visible = !1, this.addChild(i), re.csv2Sprites(e, i, (n) => {
      i.parent || i.removeChild(n);
    });
  }
  static delBreak() {
    const e = f(At, pn);
    e.parent && (e.parent.removeChild(e), e.removeChildren()), T(At, pn, new ge());
  }
  reNew() {
    var i;
    S(this, If, Jy).call(this);
    const e = new At(this.spLay, () => this.canFocus(), this.sys);
    return T(e, wt, f(this, wt)), f(e, ae).style.cssText = f(this, ae).style.cssText, T(e, Di, f(this, Di)), e.name = this.name, S(i = e, mh, Vp).call(i), f(e, ni).sethArg(f(this, ni).gethArg()), T(e, _o, f(this, _o)), T(e, Ks, f(this, Ks)), T(e, Eo, f(this, Eo)), T(e, Qn, f(this, Qn)), T(e, si, f(this, si)), T(e, ai, f(this, ai)), this.destroy(), e;
  }
  record() {
    return {
      infTL: f(this, wt),
      cssText: f(this, ae).style.cssText,
      left: f(this, Di),
      idc_hArg: f(this, ni).gethArg(),
      ch_filter: f(this, _o),
      fi_easing: f(this, Ks),
      fo_easing: f(this, Eo),
      break_fixed: f(this, Qn),
      break_fixed_left: f(this, si),
      break_fixed_top: f(this, ai)
    };
  }
  playback(e) {
    var i, n, s;
    T(this, wt, e.infTL), this.position.set(f(this, wt).pad_left, f(this, wt).pad_top), f(this, ae).style.cssText = e.cssText, T(this, Di, e.left), S(this, mh, Vp).call(this), f(this, ni).sethArg(e.idc_hArg), T(this, _o, e.ch_filter), T(this, Ks, e.fi_easing), T(this, Eo, e.fo_easing), T(this, Qn, (i = e.break_fixed) != null ? i : !1), T(this, si, (n = e.break_fixed_left) != null ? n : 0), T(this, ai, (s = e.break_fixed_top) != null ? s : 0);
  }
  snapshot(e, i) {
    S(this, u0, jR).call(this, (n) => {
      T(this, bi, new qe(n)), f(this, dn) && (f(this, bi).x += Y.stageW - (f(this, Di) + f(this, wt).$width)), f(this, bi).y -= f(this, _h), f(this, bi).texture.frame = new Pt(0, 0, f(this, wt).$width - f(this, Di), f(this, wt).$height), f(this, fn).addChild(f(this, bi)), e.render(f(this, bi), void 0, !1), i();
    }, !1);
  }
  snapshot_end() {
    f(this, bi) && (f(this, fn).removeChild(f(this, bi)), T(this, bi, void 0));
  }
  makeDesignCast(e) {
    e(f(this, ni));
    const i = f(this, ni).gethArg();
    f(this, Js).sethArg({ ...i, ":id_dc": i[":id_tag"] + "_pad" }), e(f(this, Js));
  }
  showDesignCast() {
    f(this, ni).visible = !0, f(this, Js).visible = !0;
  }
  dump() {
    const e = [], i = f(this, ae).style, n = i.length;
    for (let s = 0; s < n; ++s) {
      const a = i[s];
      e.push(`"${a}":"${i[a].replace(/(["\\])/g, "\\$1")}"`);
    }
    return `"txt":"${f(this, ae).textContent.replace(/(["\\])/g, "\\$1")}", "style":{${e.join(",")}}`;
  }
  destroy() {
    At.delBreak(), f(this, ae).parentElement.removeChild(f(this, ae)), this.removeChild(f(this, fn)), this.removeChild(f(this, Kn)), super.destroy();
  }
};
let Be = At;
gh = new WeakMap(), xf = new WeakMap(), mo = new WeakMap(), ae = new WeakMap(), fn = new WeakMap(), Kn = new WeakMap(), o0 = new WeakMap(), ni = new WeakMap(), Js = new WeakMap(), wt = new WeakMap(), Qn = new WeakMap(), si = new WeakMap(), ai = new WeakMap(), mh = new WeakSet(), Vp = function() {
  var s;
  const e = f(this, ae).style, i = parseFloat(e.fontSize || "0");
  f(this, wt).fontsize = i, f(this, wt).pad_left = parseFloat(e.paddingLeft || "0"), f(this, wt).pad_right = parseFloat(e.paddingRight || "0"), f(this, wt).pad_top = parseFloat(e.paddingTop || "0"), f(this, wt).pad_bottom = parseFloat(e.paddingBottom || "0"), f(this, wt).$width = parseFloat(e.width || "0"), f(this, wt).$height = parseFloat(e.height || "0"), this.position.set(f(this, wt).pad_left, f(this, wt).pad_top), T(this, dn, e.writingMode === "vertical-rl"), T(this, Ef, 0), T(this, _h, 0);
  const n = (s = e.lineHeight) != null ? s : "0";
  T(this, xh, f(this, dn) ? 0 : (n.slice(-2) === "px" ? parseFloat(n) : i * parseFloat(n) - i) / 2);
}, Di = new WeakMap(), dn = new WeakMap(), Ef = new WeakMap(), _h = new WeakMap(), u0 = new WeakSet(), jR = function(e, i = !0) {
  const n = {
    escape: (m) => m.replace(/([.*+?^${}()|\[\]\/\\])/g, "\\$1"),
    mimeType: (m) => {
      const _ = h(m).toLowerCase();
      return s()[_] || "";
    },
    dataAsUrl: p,
    isDataUrl: l,
    resolveUrl: c,
    getAndEncode: d,
    asArray: (m) => {
      const _ = [], y = m.length;
      for (let b = 0; b < y; ++b)
        _.push(m[b]);
      return _;
    }
  };
  function s() {
    const m = "application/font-woff", _ = "image/jpeg";
    return {
      woff: m,
      woff2: m,
      ttf: "application/font-truetype",
      eot: "application/vnd.ms-fontobject",
      png: "image/png",
      jpg: _,
      jpeg: _,
      gif: "image/gif",
      tiff: "image/tiff",
      svg: "image/svg+xml"
    };
  }
  const a = g(), o = v();
  function u(m) {
    return o.resolveAll().then((_) => {
      const y = document.createElement("style");
      return m.appendChild(y), y.appendChild(document.createTextNode(_)), m;
    });
  }
  function h(m) {
    var y;
    const _ = /\.([^\.\/]*?)$/g.exec(m);
    return (y = _ == null ? void 0 : _[1]) != null ? y : "";
  }
  function l(m) {
    return m.search(/^(data:)/) !== -1;
  }
  function c(m, _) {
    const y = document.implementation.createHTMLDocument(), b = y.createElement("base");
    y.head.appendChild(b);
    const x = y.createElement("a");
    return y.body.appendChild(x), b.href = _, x.href = m, x.href;
  }
  function d(m) {
    let _ = 3e4;
    return new Promise(function(y) {
      const b = new XMLHttpRequest();
      b.onreadystatechange = x, b.ontimeout = w, b.responseType = "blob", b.timeout = _, b.open("GET", m, !0), b.send();
      function x() {
        if (b.readyState !== 4)
          return;
        if (b.status !== 200) {
          E("cannot fetch resource: " + m + ", status: " + b.status);
          return;
        }
        const R = new FileReader();
        R.onloadend = function() {
          const C = R.result.toString().split(/,/)[1];
          y(C);
        }, R.readAsDataURL(b.response);
      }
      function w() {
        E("timeout of " + _ + "ms occured while fetching resource: " + m);
      }
      function E(R) {
        console.error(R), y("");
      }
    });
  }
  function p(m, _) {
    return "data:" + _ + ";base64," + m;
  }
  function g() {
    const m = /url\(['"]?([^'"]+?)['"]?\)/g;
    return {
      inlineAll: x,
      shouldProcess: _
    };
    function _(w) {
      return w.search(m) !== -1;
    }
    function y(w) {
      const E = [];
      let R;
      for (; R = m.exec(w); )
        E.push(R[1]);
      return E.filter(function(C) {
        return !n.isDataUrl(C);
      });
    }
    function b(w, E, R, C) {
      return Promise.resolve(E).then((N) => R ? n.resolveUrl(N, R) : N).then(C || n.getAndEncode).then((N) => n.dataAsUrl(N, n.mimeType(E))).then((N) => w.replace(P(E), "$1" + N + "$3"));
      function P(N) {
        return new RegExp(`(url\\(['"]?)(` + n.escape(N) + `)(['"]?\\))`, "g");
      }
    }
    function x(w, E, R) {
      if (C())
        return Promise.resolve(w);
      return Promise.resolve(w).then(y).then((P) => {
        let N = Promise.resolve(w);
        for (const M of P)
          N = N.then((A) => b(A, M, E, R));
        return N;
      });
      function C() {
        return !_(w);
      }
    }
  }
  function v() {
    return {
      resolveAll: m,
      impl: { readAll: _ }
    };
    function m() {
      return _().then((y) => Promise.allSettled(
        y.map((b) => b.resolve())
      )).then((y) => y.join(`
`));
    }
    function _() {
      return Promise.resolve(n.asArray(document.styleSheets)).then(b).then(y).then((w) => w.map(x));
      function y(w) {
        return w.filter((E) => E.type === CSSRule.FONT_FACE_RULE).filter((E) => a.shouldProcess(E.style.getPropertyValue("src")));
      }
      function b(w) {
        const E = [];
        for (const R of w)
          try {
            if (R.href)
              continue;
            n.asArray(R.cssRules || []).forEach(E.push.bind(E));
          } catch (C) {
            console.error("Error while reading CSS rules from " + R.href, C.toString());
          }
        return E;
      }
      function x(w) {
        return {
          resolve: function() {
            const R = (w.parentStyleSheet || {}).href;
            return a.inlineAll(w.cssText, R);
          },
          src: function() {
            return w.style.getPropertyValue("src");
          }
        };
      }
    }
  }
  Promise.resolve(f(this, ae)).then((m) => {
    const _ = m.cloneNode(!0);
    return _.style.padding = "0px", _.style.paddingRight = f(this, Ef) + "px", _.style.paddingTop = f(this, _h) + "px", _.style.left = "0px", _.style.top = "0px", _.style.width = f(this, wt).$width - f(this, wt).pad_left - f(this, wt).pad_right + "px", _.style.height = f(this, wt).$height - f(this, wt).pad_top - f(this, wt).pad_bottom + "px", f(this, ae).hidden = i, _;
  }).then(u).then((m) => {
    m.setAttribute("xmlns", "http://www.w3.org/1999/xhtml");
    const _ = new Image();
    return _.src = `data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="${f(this, wt).$width}px" height="${f(this, wt).$height}px"><foreignObject x="0" y="0" width="100%" height="100%">${new XMLSerializer().serializeToString(m).replaceAll("#", "%23").replaceAll(`
`, "%0A")}</foreignObject></svg>`, new Promise((y) => _.onload = () => y(_));
  }).then((m) => new Promise((_) => setTimeout(() => _(m), 100))).then((m) => {
    const _ = document.createElement("canvas");
    _.width = f(this, wt).$width, _.height = f(this, wt).$height, _.getContext("2d").drawImage(m, 0, 0), _.toBlob((y) => {
      if (!y)
        return;
      const b = URL.createObjectURL(y);
      It.from(b).once("update", (x) => {
        e(x), URL.revokeObjectURL(b);
      });
    });
  }).catch((m) => $t.myTrace(`goTxt() = ${m}`));
}, _o = new WeakMap(), yh = new WeakMap(), ts = new WeakMap(), yo = new WeakMap(), bo = new WeakMap(), xo = new WeakMap(), bh = new WeakMap(), es = new WeakMap(), wf = new WeakSet(), qy = function(e, i, n, s, a, o) {
  var h, l, c;
  e.alpha = 0, i.x && (s.x = i.x.charAt(0) === "=" ? s.x + parseInt(i.x.slice(1)) : parseInt(i.x)), i.y && (s.y = i.y.charAt(0) === "=" ? s.y + parseInt(i.y.slice(1)) : parseInt(i.y)), i.width && (s.width = parseInt(i.width)), i.height && (s.height = parseInt(i.height)), i.wait && (o.wait = parseInt(i.wait)), e.width = s.width, e.height = s.height, o.x ? e.position.set(
    o.x.charAt(0) === "=" ? s.x + e.width * o.nx : o.nx,
    o.y.charAt(0) === "=" ? s.y + e.height * o.ny : o.ny
  ) : e.position.set(s.x, s.y);
  const u = {
    sp: e,
    tw: new Ta(e).to({ alpha: 1, x: s.x, y: s.y, width: s.width, height: s.height, angle: 0 }, (h = o.wait) != null ? h : 0).easing(a).delay(((l = n.wait) != null ? l : 0) + ((c = i.delay) != null ? c : 0)).onComplete(() => {
      u.tw = void 0;
    }).start()
  };
  f(this, yh).push(u);
}, rs = new WeakMap(), Tf = new WeakMap(), is = new WeakMap(), pn = new WeakMap(), xh = new WeakMap(), Cf = new WeakSet(), Zy = function(e, i) {
  const n = [];
  if (e.nodeType !== e.TEXT_NODE)
    return Array.from(e.childNodes).map((u) => S(this, Cf, Zy).call(this, u, i)).flat();
  const s = e.ownerDocument.createRange();
  s.selectNodeContents(e);
  let a = 0;
  const o = s.endOffset;
  for (; a < o; ) {
    s.setStart(e, a), s.setEnd(e, ++a);
    const u = s.toString();
    n.push({
      ch: u,
      rect: i(s.getBoundingClientRect(), u),
      elm: s.startContainer.parentElement
    });
  }
  return s.detach(), n;
}, Ks = new WeakMap(), Eo = new WeakMap(), If = new WeakSet(), Jy = function() {
  var a;
  f(this, Kn).clear(), T(this, ts, []), T(this, yo, 0), this.skipChIn();
  const e = f(this, ae).cloneNode(!0);
  e.textContent = "";
  const i = f(this, ae);
  i.parentElement.insertBefore(e, i);
  let n = 0;
  i.querySelectorAll("span.sn_ch").forEach((o) => {
    var l, c, d, p, g, v;
    const u = JSON.parse(
      (v = (g = (c = o == null ? void 0 : o.dataset.add) != null ? c : (l = o == null ? void 0 : o.children[0]) == null ? void 0 : l.getAttribute("data-add")) != null ? g : (p = (d = o == null ? void 0 : o.children[0]) == null ? void 0 : d.children[0]) == null ? void 0 : p.getAttribute("data-add")) != null ? v : "{}"
    );
    if (!u.ch_out_style)
      return;
    const h = f(At, is)[u.ch_out_style];
    if (!!h) {
      if (h.wait === 0) {
        o.style.display = "none";
        return;
      }
      n += h.wait, h.join || (o.style.animationDelay = "0ms"), o.classList.add(`go_ch_out_${u.ch_out_style}`);
    }
  });
  const s = () => {
    i.parentElement.removeChild(i), f(this, fn).removeChildren().forEach((o) => {
      o instanceof ge && f(At, mo).unButton(o), o.destroy();
    });
  };
  n === 0 ? (f(this, ae).textContent = "", s()) : (a = i.lastElementChild) == null || a.addEventListener("animationend", s, { once: !0, passive: !0 }), T(this, ae, e);
}, bi = new WeakMap(), I(Be, gh, void 0), I(Be, xf, void 0), I(Be, mo, void 0), I(Be, o0, {
  "background-color": 0,
  "border-bottom-width": 0,
  "border-left-width": 0,
  "border-right-width": 0,
  "border-top-width": 0,
  "margin-bottom": 0,
  "margin-left": 0,
  "margin-right": 0,
  "margin-top": 0
}), I(Be, bo, void 0), I(Be, xo, void 0), I(Be, bh, void 0), I(Be, rs, /* @__PURE__ */ Object.create(null)), I(Be, Tf, /[\s\.,]/), I(Be, is, /* @__PURE__ */ Object.create(null)), I(Be, pn, new ge());
var O1 = (r, t, e) => {
  if (!t.has(r))
    throw TypeError("Cannot " + e);
}, Ke = (r, t, e) => (O1(r, t, "read from private field"), e ? e.call(r) : t.get(r)), hn = (r, t, e) => {
  if (t.has(r))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(r) : t.set(r, e);
}, En = (r, t, e, i) => (O1(r, t, "write to private field"), i ? i.call(r, e) : t.set(r, e), e), vp = (r, t, e) => (O1(r, t, "access private method"), e), Ov, Yg, un, Hs, Ic, Rc, Xp, Ky, Sc, Pc, Wp, Qy;
const Vu = class extends ge {
  constructor(r, t, e, i) {
    var p, g, v;
    var n;
    super(), this.hArg = r, this.evtMng = t, this.resolve = e, this.canFocus = i, hn(this, Xp), hn(this, Wp), this.getBtnBounds = () => Ke(this, un), hn(this, un, new Pt()), hn(this, Hs, void 0), hn(this, Ic, void 0), hn(this, Rc, void 0), this.normal = () => {
    }, hn(this, Sc, () => !1), hn(this, Pc, () => {
    }), Y.isDbg && (this.makeDesignCast = (m) => m(Ke(this, Hs)), this.cvsResize = () => Ke(this, Hs).cvsResize());
    let s = {
      x: this.x = vi((p = r.left) != null ? p : 0),
      y: this.y = vi((g = r.top) != null ? g : 0),
      rotation: this.angle = tt(r, "rotation", this.angle),
      pivot_x: this.pivot.x = tt(r, "pivot_x", this.pivot.x),
      pivot_y: this.pivot.y = tt(r, "pivot_y", this.pivot.y),
      scale_x: this.scale.x = tt(r, "scale_x", this.scale.x),
      scale_y: this.scale.y = tt(r, "scale_y", this.scale.y),
      width: 0,
      height: 0
    };
    this.getBtnBounds = () => (Ke(this, un).x = s.x, Ke(this, un).y = s.y, Ke(this, un));
    const a = s.enabled = pt(r, "enabled", !0);
    if (a && t.button(this.hArg, this, () => this.normal(), () => Ke(this, Sc).call(this), () => Ke(this, Pc).call(this)), r.pic) {
      s.type = "pic", En(this, Hs, new GU(this, r)), re.csv2Sprites(
        r.pic,
        this,
        (m) => {
          vp(this, Wp, Qy).call(this, m, s), Ke(this, un).width = m.width * s.scale_x, Ke(this, un).height = m.height * s.scale_y;
        },
        (m) => e
      );
      return;
    }
    if (!r.text)
      throw "text\u307E\u305F\u306Fpic\u5C5E\u6027\u306F\u5FC5\u9808\u3067\u3059";
    const o = tt(r, "height", 30), u = new iu({
      align: "center",
      dropShadow: !0,
      dropShadowAlpha: 0.7,
      dropShadowColor: "white",
      dropShadowBlur: 7,
      dropShadowDistance: 0,
      fill: "black",
      fontFamily: Vu.fontFamily,
      fontSize: o,
      padding: 5
    });
    if (r.style)
      try {
        const m = JSON.parse(r.style);
        for (const _ in m)
          u[_] = m[_];
      } catch (m) {
        throw new Error(_p(r, "style", m.message));
      }
    const h = new Nb((v = r.text) != null ? v : "", u);
    h.alpha = tt(r, "alpha", h.alpha), h.width = tt(r, "width", 100), h.height = r.height = o, this.setText = (m) => h.text = m, s.type = "text", s = { ...s, ...u }, s.alpha = h.alpha, s.text = h.text, s.width = h.width, s.height = h.height, En(this, Hs, new UU(this, r, h));
    let l = !1;
    if (r.b_pic && (s.b_pic = r.b_pic, l = re.csv2Sprites(
      r.b_pic,
      this,
      (m) => {
        vp(this, Xp, Ky).call(this, m, h), s.width = this.width, s.height = this.height;
      },
      (m) => {
        Rr.setBlendmode(this, r), m && e();
      }
    )), h.name = JSON.stringify(s), this.addChild(h), Ke(this, un).width = h.width, Ke(this, un).height = h.height, s.width = this.width, s.height = this.height, r.b_pic || Rr.setBlendmode(this, r), Ke(n = Vu, Ov).call(n, this, h), !a) {
      l || e();
      return;
    }
    const c = u.clone();
    if (r.style_hover)
      try {
        const m = JSON.parse(r.style_hover);
        for (const _ in m)
          c[_] = m[_];
      } catch (m) {
        throw new Error(_p(r, "style_hover", m.message));
      }
    else
      c.fill = "white";
    const d = c.clone();
    if (r.style_clicked)
      try {
        const m = JSON.parse(r.style_clicked);
        for (const _ in m)
          d[_] = m[_];
      } catch (m) {
        throw new Error(_p(r, "style_clicked", m.message));
      }
    else
      d.dropShadow = !1;
    this.normal = () => h.style = u, En(this, Sc, () => i() ? (h.style = c, !0) : !1), En(this, Pc, () => h.style = d), l || e();
  }
  static init(r) {
    !r.oCfg.debug.masume || (En(Vu, Ov, (t, e) => t.addChild(
      new di().beginFill(8926088, 0.2).lineStyle(1, 8926088, 1).drawRect(e.x, e.y, e.width, e.height).endFill()
    )), En(Vu, Yg, (t, e, i, n) => t.addChild(
      new di().beginFill(8926088, 0.2).lineStyle(1, 8926088, 1).drawRect(e.x, e.y, i, n).endFill()
    )));
  }
  setText(r) {
  }
  destroy(r) {
    this.evtMng.unButton(this), super.destroy();
  }
  makeDesignCast(r) {
  }
  showDesignCast() {
    Ke(this, Hs).visible = !0;
  }
  cvsResize() {
  }
  update_b_pic(r, t) {
    var i;
    const e = JSON.parse((i = t.name) != null ? i : "{}");
    Ke(this, Ic) && this.removeChild(Ke(this, Ic)), this.hArg.b_pic = e.b_pic = r, t.name = JSON.stringify(e), r && re.csv2Sprites(
      r,
      this,
      (n) => vp(this, Xp, Ky).call(this, n, t),
      () => Rr.setBlendmode(this, this.hArg)
    );
  }
  update_pic(r, t) {
    var i;
    const e = JSON.parse((i = t.name) != null ? i : "{}");
    Ke(this, Rc) && this.removeChild(Ke(this, Rc)), this.hArg.pic = e.pic = r, t.name = JSON.stringify(e), r && re.csv2Sprites(
      r,
      this,
      (n) => vp(this, Wp, Qy).call(this, n, e),
      () => Rr.setBlendmode(this, this.hArg)
    );
  }
};
let Cs = Vu;
Ov = /* @__PURE__ */ new WeakMap();
Yg = /* @__PURE__ */ new WeakMap();
un = /* @__PURE__ */ new WeakMap();
Hs = /* @__PURE__ */ new WeakMap();
Ic = /* @__PURE__ */ new WeakMap();
Rc = /* @__PURE__ */ new WeakMap();
Xp = /* @__PURE__ */ new WeakSet();
Ky = function(r, t) {
  En(this, Ic, r), this.setChildIndex(r, 0), r.alpha = t.alpha, r.setTransform(
    t.x,
    t.y,
    1,
    1,
    t.rotation,
    0,
    0,
    (r.width - t.width) / 2,
    (r.height - t.height) / 2
  ), r.name = t.name;
};
Sc = /* @__PURE__ */ new WeakMap();
Pc = /* @__PURE__ */ new WeakMap();
Wp = /* @__PURE__ */ new WeakSet();
Qy = function(r, t) {
  var e;
  En(this, Rc, r), t.alpha = r.alpha = tt(this.hArg, "alpha", r.alpha), Ke(this, Hs).setSp(r);
  const i = r.width / 3, n = r.height, s = r.texture.baseTexture, a = new It(s, new Pt(0, 0, i, n)), o = new It(s, new Pt(i, 0, i, n)), u = new It(s, new Pt(i * 2, 0, i, n)), h = () => r.texture = a;
  h(), this.normal = h, En(this, Sc, () => this.canFocus() ? (r.texture = u, !0) : !1), En(this, Pc, () => r.texture = o), "width" in this.hArg ? (t.width = vi(this.hArg.width), this.scale.x *= t.width / i) : t.width = i, "height" in this.hArg ? (t.height = vi(this.hArg.height), this.scale.y *= t.height / i) : t.height = i, r.name = JSON.stringify(t), Ke(e = Vu, Yg).call(e, this, r, i, n);
};
Cs.fontFamily = "'Hiragino Sans', 'Hiragino Kaku Gothic ProN', '\u6E38\u30B4\u30B7\u30C3\u30AF Medium', meiryo, sans-serif";
hn(Cs, Ov, (r, t) => {
});
hn(Cs, Yg, (r, t, e, i) => {
});
var Eh, Ui, wh, Rf, Sf, tb, Pf, eb, Nf, wo, Of, ns, To, h0, $R, vn, oi, xi, he, Gi, Kt, Th, Hi, l0, Nr, Co, oc, Qs, Io, Ro, uc, So, Af, rb, Ff, ib, ta, ea, Po, Ch, Ih, ss, Or, c0, VR, zr, Rh, Sh, Yp, as, Ka, gn, Ei, ui, hi, Mf, nb, Ph, qp, kf, sb, ra;
const Mt = class extends Rr {
  constructor() {
    super();
    I(this, Co);
    I(this, Ro);
    I(this, Af);
    I(this, Ff);
    I(this, c0);
    I(this, Sh);
    I(this, as);
    I(this, Mf);
    I(this, Ph);
    I(this, kf);
    I(this, vn, void 0);
    I(this, oi, void 0);
    I(this, xi, void 0);
    I(this, he, void 0);
    I(this, Gi, void 0);
    I(this, Kt, void 0);
    I(this, Th, void 0);
    I(this, Hi, void 0);
    I(this, Nr, void 0);
    I(this, Qs, void 0);
    I(this, Io, void 0);
    I(this, So, void 0);
    I(this, ta, void 0);
    I(this, ea, void 0);
    I(this, Po, void 0);
    I(this, Ch, void 0);
    I(this, ss, void 0);
    I(this, Or, void 0);
    I(this, zr, void 0);
    I(this, Rh, void 0);
    I(this, gn, void 0);
    I(this, Ei, void 0);
    I(this, ui, void 0);
    I(this, hi, void 0);
    I(this, ra, void 0);
    T(this, vn, 0), T(this, oi, 0), T(this, xi, !1), T(this, he, void 0), T(this, Gi, ""), T(this, Kt, new Be(this.spLay, () => this.canFocus(), f(Mt, Of))), T(this, Th, new wa()), T(this, Hi, document.createElement("span")), T(this, Nr, new ge()), T(this, Qs, ""), T(this, Io, !0), T(this, So, ""), T(this, ta, ""), T(this, ea, (i) => ""), T(this, Po, ""), T(this, Ch, new RegExp("[\u3000]")), this.isCur = !1, T(this, ss, () => ""), T(this, Or, ""), T(this, zr, !1), T(this, Rh, (i, n) => {
      var l, c, d, p, g, v, m, _, y, b, x;
      f(Mt, Eh).oCfg.debug.putCh && console.log(`\u{1F58A} \u6587\u5B57\u8868\u793A text:\`${i}\` ruby:\`${n}\` name:\`${this.name_}\``);
      const s = n.split("\uFF5C");
      let a = "";
      const [o, ...u] = s, h = u.join("\uFF5C");
      switch (s.length) {
        case 1:
          if (T(this, zr, !0), i === `
`) {
            f(this, Ei) ? (T(this, Ei, !1), a = "<ruby>\u3000<rt>\u3000</rt></ruby><br/>") : a = "<br/>";
            break;
          }
          f(this, Ei) && (T(this, Ei, !1), n === "" && (n = "\u3000")), a = S(this, Sh, Yp).call(this, i, n, f(this, Or));
          break;
        default:
          switch (o) {
            case "start":
            case "left":
            case "center":
            case "right":
            case "justify":
            case "121":
            case "even":
            case "1ruby":
              T(this, Ei, !1), T(this, zr, !0), a = S(this, Sh, Yp).call(this, i, h, o);
              break;
            case "gotxt":
              S(this, Ph, qp).call(this), this.isCur && f(l = Mt, wh).call(l, f(this, ui).join("").replace(/^<ruby>　<rt>　<\/rt><\/ruby>(<br\/>)+/, "").replace(/style='(anim\S+ \S+?;\s*)+/g, "style='").replace(/( style=''| data-(add|arg|cmd)='.+?'|\n+|\t+)/g, "").replace(/class='sn_ch .+?'/g, "class='sn_ch'").replaceAll("class='offrec'", "style='display: none;'").replaceAll("`", "\\`")), f(this, zr) ? (f(this, Kt).goTxt(f(this, ui)), T(this, zr, !1), T(this, gn, 0)) : this.isCur && f(Mt, wo).noticeCompTxt();
              return;
            case "add":
              {
                const w = JSON.parse(h), { style: E = "", wait: R = null } = w, { cl: C, sty: P } = S(this, as, Ka).call(this, !0, R);
                f(this, ui).push(`<span${C} style='${P} display: inline; ${E}'>`), delete w.style, S(this, Mf, nb).call(this, w);
              }
              return;
            case "add_close":
              f(this, ui).push("</span>"), S(this, Ph, qp).call(this);
              return;
            case "grp":
              T(this, zr, !0);
              {
                const w = JSON.parse(h);
                if ((c = w.id) != null || (w.id = f(this, ui).length), w.id === "break") {
                  f(this, Kt).dispBreak(w.pic);
                  return;
                }
                T(this, Ei, !1), w.delay = f(this, gn), (d = w.r) != null || (w.r = ""), (p = w.style) != null || (w.style = ""), (g = w.r_style) != null || (w.r_style = "");
                const { cl: E, sty: R, lnk: C } = S(this, as, Ka).call(this, !0, w.wait);
                a = `<span${E} style='${R} ${w.style}'><ruby><span data-cmd='grp' data-arg='${JSON.stringify(w)}'${C} style='${R} display: inline;'>\u3000</span><rt${C}${this.mkStyle_r_align(
                  "\u3000",
                  w.r,
                  f(this, Or),
                  f(this, Hi).style.cssText + ((m = (v = f(this, hi).at(-1)) == null ? void 0 : v.o.r_style) != null ? m : "") + w.r_style
                )}>${w.r}</rt></ruby></span>`;
              }
              break;
            case "tcy":
              T(this, Ei, !1), T(this, zr, !0);
              {
                f(Mt, Ui).doRecLog() && T(this, ra, f(this, ra) + (i + (n ? `\u300A${n}\u300B` : "")));
                const { t: w, r: E = "", wait: R = null, style: C = "", r_style: P = "" } = JSON.parse(h), N = Y.isSafari ? E.replaceAll(/[A-Za-z0-9]/g, (H) => String.fromCharCode(H.charCodeAt(0) + 65248)) : E, { cl: M, sty: A, lnk: k } = S(this, as, Ka).call(this, !0, R);
                a = `<span${M} style='${A}${f(this, ea).call(this, w)} ${C}'><ruby><span${k} style='${A} display: inline;
text-combine-upright: all;
-webkit-text-combine: horizontal;'>${w}</span><rt${k}${this.mkStyle_r_align(
                  w,
                  N,
                  f(this, Or),
                  f(this, Hi).style.cssText + ((y = (_ = f(this, hi).at(-1)) == null ? void 0 : _.o.r_style) != null ? y : "") + P
                )}>${N}</rt></ruby></span>`;
              }
              break;
            case "del":
              Be.delBreak();
              return;
            case "span":
              T(this, zr, !0), S(this, kf, sb).call(this, JSON.parse(h));
              return;
            case "link":
              T(this, zr, !0);
              {
                const w = JSON.parse(h);
                w[":link"] = " data-lnk='@'";
                const { cl: E, sty: R, curpos: C } = S(this, as, Ka).call(this, !1, w.wait);
                f(this, ui).push(`<span${E} style='${R} display: inline; ${(b = w.style) != null ? b : ""}' ${C} data-arg='${h}'>`), delete w.style, S(this, kf, sb).call(this, w);
              }
              return;
            case "endlink":
              T(this, zr, !0), f(this, ui).push("</span>"), S(this, Ph, qp).call(this);
              return;
            default:
              T(this, zr, !0), a = S(this, Sh, Yp).call(this, i, n, f(this, Or));
          }
          break;
      }
      f(this, ui).push(f(x = Mt, Ih).call(x, a));
    }), T(this, gn, 0), T(this, Ei, !0), T(this, ui, []), T(this, hi, []), this.click = () => !this.spLay.interactiveChildren || !this.spLay.visible ? !1 : f(this, Kt).skipChIn(), T(this, ra, ""), this.addButton = (i) => new Promise((n) => {
      i.key = `btn=[${f(this, Nr).children.length}] ` + this.name_, i[":id_tag"] = i.key.slice(0, -7), pt(i, "hint_tate", f(this, Kt).tategaki);
      const s = new Cs(i, f(Mt, wo), () => n(), () => this.canFocus());
      s.name = JSON.stringify(i).replaceAll('"', "'"), f(this, Nr).addChild(s);
    }), this.record = () => ({
      ...super.record(),
      enabled: this.enabled,
      r_cssText: f(this, Hi).style.cssText,
      r_align: f(this, Or),
      b_do: f(this, he) === void 0 ? void 0 : f(this, he) instanceof qe ? "Sprite" : "Graphics",
      b_pic: f(this, Gi),
      b_color: f(this, vn),
      b_alpha: f(this, oi),
      b_alpha_isfixed: f(this, xi),
      ffs: f(this, ta),
      txs: f(this, Kt).record(),
      strNoFFS: f(this, Po),
      btns: f(this, Nr).children.map((i) => i.name)
    }), this.spLay.addChild(f(this, Kt)), f(this, Th).init(f(this, Rh)), this.spLay.addChild(f(this, Nr)), f(this, Nr).name = "cntBtn";
    const e = 16;
    this.lay({ style: `width: ${Y.stageW}px; height: ${Y.stageH}px; font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', '\u6E38\u30B4\u30B7\u30C3\u30AF Medium', meiryo, sans-serif; color: white; font-size: 24px; line-height: 1.5; padding: ${e}px;`, in_style: "default", out_style: "default", back_clear: "true" });
  }
  static init(e, i, n, s, a, o) {
    var h, l;
    T(Mt, Eh, e), Be.init(e, o), T(Mt, Ui, n), T(Mt, wh, s), T(Mt, Rf, a), n.setDoRecProc(Mt.chgDoRec), i.autowc = (c) => {
      var d;
      return S(d = Mt, h0, $R).call(d, c);
    }, i.autowc({ enabled: !1, text: "", time: 0 }), i.ch_in_style = (c) => {
      var d;
      return S(d = Mt, Sf, tb).call(d, c);
    }, i.ch_out_style = (c) => {
      var d;
      return S(d = Mt, Pf, eb).call(d, c);
    }, Be.initChStyle(), bS();
    let u = "";
    e.matchPath(".+", hr.EXT_FONT).forEach((c) => {
      for (const d in c)
        u += `
@font-face {
	font-family: '${c[d]}';
	src: url('${f(this, Eh).searchPath(c[d], hr.EXT_FONT)}');
}
`;
    }), u += `
.sn_tx {
	pointer-events: none;
	user-select: none;
	-webkit-touch-callout: none;
	box-sizing: border-box;
}
.sn_ch {
	position: relative;
	display: inline-block;
}
`, Wu(u), S(h = Mt, Sf, tb).call(h, {
      name: "default",
      wait: 500,
      alpha: 0,
      x: "=0.3",
      y: "=0",
      scale_x: 1,
      scale_y: 1,
      rotate: 0,
      join: !0,
      ease: "ease-out"
    }), S(l = Mt, Pf, eb).call(l, {
      name: "default",
      wait: 0,
      alpha: 0,
      x: "=0",
      y: "=0",
      scale_x: 1,
      scale_y: 1,
      rotate: 0,
      join: !1,
      ease: "ease-out"
    });
  }
  static setEvtMng(e, i, n) {
    T(Mt, Nf, e), T(Mt, wo, i), T(Mt, Of, n), Be.setEvtMng(i);
  }
  destroy() {
    f(this, he) && (this.spLay.removeChild(f(this, he)).destroy(), T(this, he, void 0)), this.clearText(), f(this, Kt).destroy();
  }
  static destroy() {
    T(Mt, ns, !1), T(Mt, To, {}), T(Mt, Ih, (e) => e);
  }
  set name(e) {
    this.name_ = e, f(this, Kt).name = e;
  }
  get name() {
    return this.name_;
  }
  cvsResize() {
    f(this, Kt).cvsResize();
  }
  cvsResizeChildren() {
    f(this, Nr).children.forEach((e) => e.cvsResize());
  }
  lay(e) {
    var i;
    if (super.lay(e), Rr.setXY(this.spLay, e, this.spLay), e[":id_tag"] = this.name_.slice(0, -7), wa.setting(e), S(this, Ff, ib).call(this, e), f(this, Kt).lay(e), "r_align" in e && T(this, Or, (i = e.r_align) != null ? i : ""), T(this, ss, Y.isSafari ? f(this, Kt).tategaki ? (n, s) => `text-align: start; height: ${s}em; padding-top: ${n}; padding-bottom: ${n};` : (n, s) => `text-align: start; width: ${s}em; padding-left: ${n}; padding-right: ${n};` : f(this, Kt).tategaki ? (n) => `text-align: justify; text-align-last: justify; padding-top: ${n}; padding-bottom: ${n};` : (n) => `text-align: justify; text-align-last: justify; padding-left: ${n}; padding-right: ${n};`), Y.isFirefox && (this.mkStyle_r_align = S(this, c0, VR)), "r_style" in e)
      if (e.r_style) {
        const n = document.createElement("span");
        n.style.cssText = e.r_style;
        const s = n.style.length, a = f(this, Hi).style;
        for (let o = 0; o < s; ++o) {
          const u = n.style[o];
          if (u in f(Mt, l0)) {
            $t.myTrace(`${u}\u306F\u6307\u5B9A\u3067\u304D\u307E\u305B\u3093`, "W");
            continue;
          }
          a[u] = n.style[u];
        }
      } else
        f(this, Hi).style.cssText = "";
    return "alpha" in e && f(this, Nr).children.forEach((n) => n.alpha = this.spLay.alpha), S(this, Co, oc).call(this, e), S(this, Ro, uc).call(this, e), S(this, Af, rb).call(this, e, (n) => {
      n && f(Mt, Nf).resume();
    });
  }
  get width() {
    return f(this, Kt).getWidth;
  }
  get height() {
    return f(this, Kt).getHeight;
  }
  chgBackAlpha(e) {
    const i = f(this, xi) ? f(this, oi) : e * f(this, oi);
    f(this, he) instanceof di && (f(this, he) && (this.spLay.removeChild(f(this, he)), f(this, he).destroy()), this.spLay.addChildAt(
      T(this, he, new di()).beginFill(f(this, vn)).lineStyle(void 0).drawRect(0, 0, f(this, Kt).getWidth, f(this, Kt).getHeight).endFill(),
      0
    ), f(this, he).name = "back(color)"), f(this, he) && (f(this, he).visible = i > 0, f(this, he).alpha = i);
  }
  static chgDoRec(e) {
    T(Mt, Ih, e ? (i) => i : (i) => `<span class='offrec'>${i}</span>`);
  }
  mkStyle_r_align(e, i, n, s = "") {
    if (!n)
      return ` style='${s}'`;
    const a = e.length * 2;
    if (a - i.length < 0)
      return ` style='text-align: ${n}; ${s}'`;
    let o = "";
    switch (n) {
      case "justify":
        o = f(this, ss).call(this, "0", a);
        break;
      case "121":
        o = f(this, ss).call(this, `calc(${(a - i.length) / (i.length * 2)}em)`, a);
        break;
      case "even":
        o = f(this, ss).call(this, `calc(${(a - i.length) / (i.length + 1)}em)`, a);
        break;
      case "1ruby":
        o = f(this, ss).call(this, "1em", a);
        break;
      default:
        o = `text-align: ${n};`;
    }
    return ` style='${o} ${s}'`;
  }
  tagCh(e) {
    f(this, Th).putTxt(e);
  }
  clearText() {
    var e;
    this.spLay.addChild(T(this, Kt, f(this, Kt).reNew())), T(this, gn, 0), T(this, Ei, !0), T(this, ui, []), T(this, ra, ""), f(e = Mt, wh).call(e, "", !0);
  }
  get pageText() {
    return f(this, ra).replace("\u300A\u3000\u300B", "");
  }
  get enabled() {
    return this.spLay.interactiveChildren;
  }
  set enabled(e) {
    this.spLay.interactiveChildren = e;
  }
  canFocus() {
    var e, i;
    return ((e = this.spLay.interactiveChildren) != null ? e : !1) && this.spLay.visible && f(i = Mt, Rf).call(i, this);
  }
  clearLay(e) {
    super.clearLay(e), this.clearText(), f(this, Nr).removeChildren().forEach((i) => i.destroy());
  }
  playback(e, i) {
    super.playback(e, i), this.enabled = e.enabled, f(this, Hi).style.cssText = e.r_cssText, T(this, Or, e.r_align), this.cvsResize(), S(this, Ff, ib).call(this, e), f(this, Kt).playback(e.txs), T(this, oi, e.b_alpha), T(this, xi, e.b_alpha_isfixed), i.push(new Promise((s) => {
      const a = e.b_do ? e.b_do === "Sprite" ? { b_pic: e.b_pic } : { b_color: e.b_color } : { b_pic: "" };
      a.b_alpha = e.b_alpha, a.b_alpha_isfixed = e.b_alpha_isfixed, S(this, Af, rb).call(this, a, (o) => {
        o && s();
      }) || s();
    }));
    const n = e.btns;
    i = i.concat(n.map((s) => this.addButton(JSON.parse(s.replaceAll("'", '"')))));
  }
  snapshot(e, i) {
    e.render(this.spLay, { clear: !1 }), f(this, Kt).snapshot(e, i);
  }
  snapshot_end() {
    f(this, Kt).snapshot_end();
  }
  makeDesignCast(e) {
    !this.spLay.visible || f(this, Kt).makeDesignCast(e);
  }
  makeDesignCastChildren(e) {
    !this.spLay.visible || f(this, Nr).children.forEach((i) => i.makeDesignCast(e));
  }
  showDesignCast() {
    f(this, Kt).showDesignCast();
  }
  showDesignCastChildren() {
    f(this, Nr).children.forEach((e) => e.showDesignCast());
  }
  dump() {
    return f(this, Rh).call(this, "", "gotxt\uFF5C"), super.dump() + `, "enabled":"${this.enabled}", ${f(this, Kt).dump()}, "b_pic":"${f(this, Gi)}", "b_color":"${f(this, vn)}", "b_alpha":${f(this, oi)}, "b_alpha_isfixed":"${f(this, xi)}", "width":${f(this, Kt).getWidth}, "height":${f(this, Kt).getHeight}, "pixi_obj":[${this.spLay.children.map((e) => `{"class":"${e instanceof qe ? "Sprite" : e instanceof di ? "Graphics" : e instanceof ge ? "Container" : "?"}", "name":"${e.name}", "alpha":${e.alpha}, "x":${e.x}, "y":${e.y}, "visible":"${e.visible}"}`).join(",")}], "button":[${f(this, Nr).children.map((e) => {
      var i;
      return (i = e.children[0].name) != null ? i : "{}";
    }).join(",")}]`;
  }
};
let Ie = Mt;
Eh = new WeakMap(), Ui = new WeakMap(), wh = new WeakMap(), Rf = new WeakMap(), Sf = new WeakSet(), tb = function(e) {
  const i = Be.ch_in_style(e), n = i.x.charAt(0) === "=" ? `${i.nx * 100}%` : `${i.nx}px`, s = i.y.charAt(0) === "=" ? `${i.ny * 100}%` : `${i.ny}px`, { name: a } = e;
  return Wu(`
.sn_ch_in_${a} {
	position: relative;
	display: inline-block;
}
.go_ch_in_${a} {
	opacity: ${i.alpha};
	position: relative;
	display: inline-block;
	animation: sn_ch_in_${a} ${i.wait}ms ${i.ease} 0s both;
}
@keyframes sn_ch_in_${a} {
	from {transform: rotate(${i.rotate}deg) scale(${i.scale_x}, ${i.scale_y}) translate(${n}, ${s});}
	to {opacity: 1; transform: none;}
}
`), !1;
}, Pf = new WeakSet(), eb = function(e) {
  const i = Be.ch_out_style(e), n = i.x.charAt(0) === "=" ? `${i.nx * 100}%` : `${i.nx}px`, s = i.y.charAt(0) === "=" ? `${i.ny * 100}%` : `${i.ny}px`, { name: a } = e;
  return Wu(`
.go_ch_out_${a} {
	position: relative;
	display: inline-block;
	animation: go_ch_out_${a} ${i.wait}ms ${i.ease} 0s both;
}
@keyframes go_ch_out_${a} {
	to {
		opacity: ${i.alpha};
		transform: rotate(${i.rotate}deg) scale(${i.scale_x}, ${i.scale_y}) translate(${n}, ${s});
	}
`), !1;
}, Nf = new WeakMap(), wo = new WeakMap(), Of = new WeakMap(), ns = new WeakMap(), To = new WeakMap(), h0 = new WeakSet(), $R = function(e) {
  T(Mt, ns, pt(e, "enabled", f(Mt, ns))), f(Mt, Ui).setVal_Nochk("save", "const.sn.autowc.enabled", f(Mt, ns));
  const { text: i } = e;
  if ("text" in e != "time" in e)
    throw "[autowc] text\u3068time\u306F\u540C\u6642\u6307\u5B9A\u5FC5\u9808\u3067\u3059";
  if (f(Mt, Ui).setVal_Nochk("save", "const.sn.autowc.text", i), !i)
    return f(Mt, Ui).setVal_Nochk("save", "const.sn.autowc.time", ""), !1;
  const n = i.length;
  if (f(Mt, ns) && n === 0)
    throw '[autowc] enabled === false \u304B\u3064 text === "" \u306F\u8A31\u3055\u308C\u307E\u305B\u3093';
  const s = String(e.time).split(",");
  if (s.length !== n)
    throw "[autowc] text\u6587\u5B57\u6570\u3068time\u306B\u8A18\u8FF0\u3055\u308C\u305F\u5F85\u3061\u6642\u9593\uFF08\u30B3\u30F3\u30DE\u533A\u5207\u308A\uFF09\u306F\u540C\u6570\u306B\u3057\u3066\u4E0B\u3055\u3044";
  return T(Mt, To, {}), s.forEach((a, o) => f(Mt, To)[i[o]] = vi(a)), f(Mt, Ui).setVal_Nochk("save", "const.sn.autowc.time", e.time), !1;
}, vn = new WeakMap(), oi = new WeakMap(), xi = new WeakMap(), he = new WeakMap(), Gi = new WeakMap(), Kt = new WeakMap(), Th = new WeakMap(), Hi = new WeakMap(), l0 = new WeakMap(), Nr = new WeakMap(), Co = new WeakSet(), oc = function(e) {
  const { in_style: i } = e;
  if (!i)
    return;
  const n = Be.getChInStyle(i);
  if (!n)
    throw `\u5B58\u5728\u3057\u306A\u3044in_style\u3010${i}\u3011\u3067\u3059`;
  T(this, Qs, i), T(this, Io, n.join);
}, Qs = new WeakMap(), Io = new WeakMap(), Ro = new WeakSet(), uc = function(e) {
  const { out_style: i } = e;
  if (!i)
    return;
  if (!Be.getChOutStyle(i))
    throw `\u5B58\u5728\u3057\u306A\u3044out_style\u3010${i}\u3011\u3067\u3059`;
  T(this, So, i);
}, So = new WeakMap(), Af = new WeakSet(), rb = function(e, i) {
  if ("back_clear" in e)
    return pt(e, "back_clear", !1) && (T(this, vn, 0), T(this, oi, 0), T(this, xi, !1), T(this, Gi, "")), i(!1), !1;
  T(this, oi, tt(e, "b_alpha", f(this, oi))), T(this, xi, pt(e, "b_alpha_isfixed", f(this, xi)));
  const n = (f(this, xi) ? 1 : Number(f(Mt, Ui).getVal("sys:TextLayer.Back.Alpha"))) * f(this, oi);
  if (e.b_pic) {
    if (f(this, Gi) !== e.b_pic)
      return T(this, Gi, e.b_pic), f(this, he) && (this.spLay.removeChild(f(this, he)), f(this, he).destroy()), re.csv2Sprites(f(this, Gi), this.spLay, (s) => {
        T(this, he, s), s.name = "back(pic)", s.visible = n > 0, s.alpha = n, f(this, Kt).setSize(s.width, s.height), this.spLay.setChildIndex(s, 0), i(!0);
      });
  } else
    "b_color" in e && (T(this, vn, yT(e, "b_color", 0)), f(this, he) && (this.spLay.removeChild(f(this, he)), f(this, he).destroy()), T(this, Gi, ""), this.spLay.addChildAt(
      T(this, he, new di()).beginFill(f(this, vn)).lineStyle(void 0).drawRect(0, 0, f(this, Kt).getWidth, f(this, Kt).getHeight).endFill(),
      0
    ), f(this, he).name = "back(color)");
  return f(this, he) && (f(this, he).visible = n > 0, f(this, he).alpha = n), i(!1), !1;
}, Ff = new WeakSet(), ib = function(e) {
  var i, n;
  "noffs" in e && (T(this, Po, (i = e.noffs) != null ? i : ""), T(this, Ch, new RegExp(`[\u3000${f(this, Po)}]`))), "ffs" in e && ((n = f(this, ta)) != null || T(this, ta, ""), T(this, ea, f(this, ta) === "" ? () => "" : (s) => f(this, Ch).test(s) ? "" : ` font-feature-settings: ${f(this, ta)};`));
}, ta = new WeakMap(), ea = new WeakMap(), Po = new WeakMap(), Ch = new WeakMap(), Ih = new WeakMap(), ss = new WeakMap(), Or = new WeakMap(), c0 = new WeakSet(), VR = function(e, i, n, s = "") {
  if (!n)
    return ` style='${s}'`;
  const a = e.length * 2;
  if (a - i.length < 0)
    return ` style='text-align: ${n}; ${s}'`;
  let o = "";
  switch (n) {
    case "left":
      o = "ruby-align: start;";
      break;
    case "center":
      o = "ruby-align: center;";
      break;
    case "right":
      o = "ruby-align: start;";
      break;
    case "justify":
      o = "ruby-align: space-between;";
      break;
    case "121":
      o = "ruby-align: space-around;";
      break;
    case "even":
      const u = (a - i.length) / (i.length + 1);
      o = "ruby-align: space-between; " + (f(this, Kt).tategaki ? `padding-top: ${u}em; padding-bottom: ${u}em;` : `padding-left: ${u}em; padding-right: ${u}em;`);
      break;
    case "1ruby":
      o = "ruby-align: space-between; " + (f(this, Kt).tategaki ? "padding-top: 1em; padding-bottom: 1em;" : "padding-left: 1em; padding-right: 1em;");
      break;
    default:
      o = `text-align: ${n};`;
  }
  return ` style='${o} ${s}'`;
}, zr = new WeakMap(), Rh = new WeakMap(), Sh = new WeakSet(), Yp = function(e, i, n) {
  var h, l;
  const s = e === " " ? "&nbsp;" : e;
  f(Mt, Ui).doRecLog() && T(this, ra, f(this, ra) + (s + (i ? `\u300A${i}\u300B` : "")));
  const { cl: a, sty: o, lnk: u } = S(this, as, Ka).call(this, !0, null, e);
  return i ? `<span${a} style='${o} ${f(this, ea).call(this, e)}'><ruby>${Array.from(e).map((c, d) => `<span${a}${u} style='${d > 0 ? S(this, as, Ka).call(this, !0, null, e).sty : o} display: inline;'>${c === " " ? "&nbsp;" : c}</span>`).join("")}<rt${u}${this.mkStyle_r_align(
    e,
    i,
    n,
    f(this, Hi).style.cssText + ((l = (h = f(this, hi).at(-1)) == null ? void 0 : h.o.r_style) != null ? l : "")
  )}>${i}</rt></ruby></span>` : `<span${a} style='${o} ${f(this, ea).call(this, e)}'${u}>${s}</span>`;
}, as = new WeakSet(), Ka = function(e, i, n = `
`) {
  var o, u, h, l, c, d, p;
  const s = f(this, Io) ? (h = i != null ? i : (o = f(this, hi).at(0)) == null ? void 0 : o.o.wait) != null ? h : f(Mt, ns) ? (u = f(Mt, To)[n.charAt(0)]) != null ? u : 0 : Nc.msecChWait : 0;
  f(Mt, wo).isSkippingByKeyDown() ? T(this, gn, 0) : e && f(this, Io) && T(this, gn, f(this, gn) + Number(s));
  const a = `data-add='{"ch_in_style":"${f(this, Qs)}", "ch_out_style":"${f(this, So)}"}'`;
  return {
    cl: ` class='sn_ch${s > 0 ? ` sn_ch_in_${f(this, Qs)}` : ""}'`,
    sty: `animation-delay: ${f(this, gn)}ms;${(c = (l = f(this, hi).at(-1)) == null ? void 0 : l.o.style) != null ? c : ""}`,
    lnk: ((p = (d = f(this, hi).at(0)) == null ? void 0 : d.o[":link"]) != null ? p : "") + " " + a,
    curpos: a
  };
}, gn = new WeakMap(), Ei = new WeakMap(), ui = new WeakMap(), hi = new WeakMap(), Mf = new WeakSet(), nb = function(e) {
  f(this, hi).push({
    o: e,
    r_align: f(this, Or),
    ch_in_style: f(this, Qs),
    ch_out_style: f(this, So)
  }), "r_align" in e && T(this, Or, e.r_align), S(this, Co, oc).call(this, e), S(this, Ro, uc).call(this, e);
}, Ph = new WeakSet(), qp = function() {
  const e = f(this, hi).pop();
  !e || (T(this, Or, e.r_align), S(this, Co, oc).call(this, { in_style: e.ch_in_style }), S(this, Ro, uc).call(this, { out_style: e.ch_out_style }));
}, kf = new WeakSet(), sb = function(e) {
  const i = f(this, hi).at(-1);
  if (!i) {
    S(this, Mf, nb).call(this, e);
    return;
  }
  i.o = { ...i.o, ...e }, !e.style && !e.r_style && (i.o.style = "", i.o.r_style = ""), "r_align" in e && T(this, Or, e.r_align), S(this, Co, oc).call(this, e), S(this, Ro, uc).call(this, e);
}, ra = new WeakMap(), I(Ie, Sf), I(Ie, Pf), I(Ie, h0), I(Ie, Eh, void 0), I(Ie, Ui, void 0), I(Ie, wh, void 0), I(Ie, Rf, void 0), I(Ie, Nf, void 0), I(Ie, wo, void 0), I(Ie, Of, void 0), I(Ie, ns, !1), I(Ie, To, {}), I(Ie, l0, {
  "text-align": 0,
  "text-align-last": 0,
  height: 0,
  width: 0,
  "padding-left": 0,
  "padding-right": 0,
  "padding-top": 0,
  "padding-bottom": 0
}), I(Ie, Ih, (e) => e);
var Nh, os, f0, XR, Oh, Ah, Zp, d0, WR, p0, YR, Bf, v0, qR, g0, ZR;
class HU {
  constructor(t, e, i, n, s, a, o) {
    I(this, f0);
    I(this, Ah);
    I(this, d0);
    I(this, p0);
    I(this, v0);
    I(this, g0);
    I(this, Nh, void 0);
    I(this, os, /* @__PURE__ */ Object.create(null));
    I(this, Oh, {});
    I(this, Bf, 1);
    this.cfg = t, this.appPixi = i, this.val = n, this.main = s, this.sys = a, this.hTwInf = o, e.add_frame = (u) => S(this, f0, XR).call(this, u), e.let_frame = (u) => S(this, d0, WR).call(this, u), e.set_frame = (u) => S(this, p0, YR).call(this, u), e.frame = (u) => S(this, v0, qR).call(this, u), e.tsy_frame = (u) => S(this, g0, ZR).call(this, u);
  }
  setEvtMng(t) {
    T(this, Nh, t);
  }
  destroy() {
    for (const t in f(this, os)) {
      const e = f(this, os)[t];
      e.parentElement.removeChild(e);
    }
    T(this, os, /* @__PURE__ */ Object.create(null));
  }
  getFrmDisabled(t) {
    return f(this, Oh)[t];
  }
  cvsResize() {
    for (const t in f(this, os)) {
      const e = f(this, os)[t], i = "const.sn.frm." + t, n = Number(this.val.getVal(i + ".x")), s = Number(this.val.getVal(i + ".y")), a = Number(this.val.getVal(i + ".width")), o = Number(this.val.getVal(i + ".height"));
      e.style.left = `${this.sys.ofsLeft4elm + n * this.sys.cvsScale}px`, e.style.top = `${this.sys.ofsTop4elm + s * this.sys.cvsScale}px`, e.width = String(a * this.sys.cvsScale), e.height = String(o * this.sys.cvsScale);
    }
  }
}
Nh = new WeakMap(), os = new WeakMap(), f0 = new WeakSet(), XR = function(t) {
  const { id: e, src: i, alpha: n = 1, scale_x: s = 1, scale_y: a = 1, rotate: o = 0 } = t;
  if (!e)
    throw "id\u306F\u5FC5\u9808\u3067\u3059";
  if (!i)
    throw "src\u306F\u5FC5\u9808\u3067\u3059";
  const u = "const.sn.frm." + e;
  if (this.val.getVal(`tmp:${u}`))
    throw `frame\u3010${e}\u3011\u306F\u3059\u3067\u306B\u3042\u308A\u307E\u3059`;
  const h = pt(t, "visible", !0), l = t.b_color ? ` background-color: ${t.b_color};` : "", c = S(this, Ah, Zp).call(this, t);
  this.appPixi.view.insertAdjacentHTML("beforebegin", `<iframe id="${e}" sandbox="allow-scripts allow-same-origin" style="opacity: ${n}; position: absolute; left:${this.sys.ofsLeft4elm + c.x * this.sys.cvsScale}px; top: ${this.sys.ofsTop4elm + c.y * this.sys.cvsScale}px; z-index: 1; ${l} border: 0px; overflow: hidden; display: ${h ? "inline" : "none"}; transform: scale(${s}, ${a}) rotate(${o}deg);" width="${c.width * this.sys.cvsScale}" height="${c.height * this.sys.cvsScale}"></iframe>`);
  const d = this.cfg.searchPath(i, hr.EXT_HTML), p = new fi().add({ name: i, url: d, xhrType: Lt.XHR_RESPONSE_TYPE.TEXT });
  return this.sys.crypto && p.use((g, v) => {
    try {
      g.data = this.sys.decStr(g.extension, g.data);
    } catch (m) {
      this.main.errScript(`[add_frame]Html \u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059 src:${g.name} ${m}`, !1);
    }
    v == null || v();
  }), p.load((g, v) => {
    var _;
    const m = document.getElementById(e);
    f(this, os)[e] = m, f(this, Oh)[e] = !1, m.srcdoc = String((_ = v[i]) == null ? void 0 : _.data).replace("sn_repRes();", "").replace(
      /\s(?:src|href)=(["'])(\S+)\1/g,
      (y, b, x) => x.slice(0, 3) === "../" ? this.sys.cur + x.slice(4) : y.replace(b, b + d.slice(0, d.lastIndexOf("/") + 1))
    ), m.onload = () => {
      var b;
      this.val.setVal_Nochk("tmp", u, !0), this.val.setVal_Nochk("tmp", u + ".alpha", n), this.val.setVal_Nochk("tmp", u + ".x", c.x), this.val.setVal_Nochk("tmp", u + ".y", c.y), this.val.setVal_Nochk("tmp", u + ".scale_x", s), this.val.setVal_Nochk("tmp", u + ".scale_y", a), this.val.setVal_Nochk("tmp", u + ".rotate", o), this.val.setVal_Nochk("tmp", u + ".width", c.width), this.val.setVal_Nochk("tmp", u + ".height", c.height), this.val.setVal_Nochk("tmp", u + ".visible", h);
      const y = m.contentWindow;
      f(this, Nh).resvFlameEvent(y), (b = y.sn_repRes) == null || b.call(y, (x) => {
        var w;
        return re.loadPic2Img((w = x.dataset.src) != null ? w : "", x);
      }), this.main.resume();
    };
  }), !0;
}, Oh = new WeakMap(), Ah = new WeakSet(), Zp = function(t) {
  const e = { ...t }, i = this.sys.resolution;
  return new DOMRect(
    tt(e, "x", 0) * i,
    tt(e, "y", 0) * i,
    tt(e, "width", Y.stageW) * i,
    tt(e, "height", Y.stageH) * i
  );
}, d0 = new WeakSet(), WR = function(t) {
  const { id: e, var_name: i } = t;
  if (!e)
    throw "id\u306F\u5FC5\u9808\u3067\u3059";
  const n = document.getElementById(e);
  if (!n)
    throw `id\u3010${e}\u3011\u306F\u30D5\u30EC\u30FC\u30E0\u3067\u306F\u3042\u308A\u307E\u305B\u3093`;
  const s = "const.sn.frm." + e;
  if (!this.val.getVal(`tmp:${s}`))
    throw `frame\u3010${e}\u3011\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u3066\u3044\u307E\u305B\u3093`;
  if (!i)
    throw "var_name\u306F\u5FC5\u9808\u3067\u3059";
  const a = n.contentWindow;
  if (!a.hasOwnProperty(i))
    throw `frame\u3010${e}\u3011\u306B\u5909\u6570/\u95A2\u6570\u3010${i}\u3011\u304C\u3042\u308A\u307E\u305B\u3093\u3002\u5909\u6570\u306F var\u4ED8\u304D\u306B\u3057\u3066\u4E0B\u3055\u3044`;
  const o = a[i];
  return this.val.setVal_Nochk(
    "tmp",
    s + "." + i,
    pt(t, "function", !1) ? o() : o
  ), !1;
}, p0 = new WeakSet(), YR = function(t) {
  const { id: e, var_name: i, text: n } = t;
  if (!e)
    throw "id\u306F\u5FC5\u9808\u3067\u3059";
  const s = document.getElementById(e);
  if (!s)
    throw `id\u3010${e}\u3011\u306F\u30D5\u30EC\u30FC\u30E0\u3067\u306F\u3042\u308A\u307E\u305B\u3093`;
  const a = "const.sn.frm." + e;
  if (!this.val.getVal(`tmp:${a}`))
    throw `frame\u3010${e}\u3011\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u3066\u3044\u307E\u305B\u3093`;
  if (!i)
    throw "var_name\u306F\u5FC5\u9808\u3067\u3059";
  if (!n)
    throw "text\u306F\u5FC5\u9808\u3067\u3059";
  this.val.setVal_Nochk("tmp", a + "." + i, n);
  const o = s.contentWindow;
  return o[i] = n, !1;
}, Bf = new WeakMap(), v0 = new WeakSet(), qR = function(t) {
  const { id: e } = t;
  if (!e)
    throw "id\u306F\u5FC5\u9808\u3067\u3059";
  const i = document.getElementById(e);
  if (!i)
    throw `id\u3010${e}\u3011\u306F\u30D5\u30EC\u30FC\u30E0\u3067\u306F\u3042\u308A\u307E\u305B\u3093`;
  const n = "const.sn.frm." + e;
  if (!this.val.getVal("tmp:" + n))
    throw `frame\u3010${e}\u3011\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u3066\u3044\u307E\u305B\u3093`;
  const s = i.style;
  if (pt(t, "float", !1) ? s.zIndex = `${++sr(this, Bf)._}` : "index" in t ? s.zIndex = `${tt(t, "index", 0)}` : t.dive && (s.zIndex = `-${++sr(this, Bf)._}`), "alpha" in t) {
    const o = s.opacity = String(t.alpha);
    this.val.setVal_Nochk("tmp", n + ".alpha", o);
  }
  const a = S(this, Ah, Zp).call(this, t);
  if (("x" in t || "y" in t) && (s.left = `${this.sys.ofsLeft4elm + a.x * this.sys.cvsScale}px`, s.top = `${this.sys.ofsTop4elm + a.y * this.sys.cvsScale}px`, this.val.setVal_Nochk("tmp", n + ".x", a.x), this.val.setVal_Nochk("tmp", n + ".y", a.y)), "scale_x" in t || "scale_y" in t || "rotate" in t) {
    const o = tt(t, "scale_x", 1), u = tt(t, "scale_y", 1), h = tt(t, "rotate", 0);
    s.transform = `scale(${o}, ${u}) rotate(${h}deg)`, this.val.setVal_Nochk("tmp", n + ".scale_x", o), this.val.setVal_Nochk("tmp", n + ".scale_y", u), this.val.setVal_Nochk("tmp", n + ".rotate", h);
  }
  if ("width" in t && (i.width = String(a.width * this.sys.cvsScale), this.val.setVal_Nochk("tmp", n + ".width", a.width)), "height" in t && (i.height = String(a.height * this.sys.cvsScale), this.val.setVal_Nochk("tmp", n + ".height", a.height)), "visible" in t) {
    const o = pt(t, "visible", !0);
    s.display = o ? "inline" : "none", this.val.setVal_Nochk("tmp", n + ".visible", o);
  }
  if ("b_color" in t && (s.backgroundColor = t.b_color), "disabled" in t) {
    const o = f(this, Oh)[e] = pt(t, "disabled", !0);
    i.contentDocument.body.querySelectorAll("input,select").forEach((h) => h.disabled = o);
  }
  return !1;
}, g0 = new WeakSet(), ZR = function(t) {
  var m;
  const { id: e } = t;
  if (!e)
    throw "id\u306F\u5FC5\u9808\u3067\u3059";
  const i = document.getElementById(e);
  if (!i)
    throw `id\u3010${e}\u3011\u306F\u30D5\u30EC\u30FC\u30E0\u3067\u306F\u3042\u308A\u307E\u305B\u3093`;
  const n = "const.sn.frm." + e;
  if (!this.val.getVal(`tmp:${n}`, 0))
    throw `frame\u3010${e}\u3011\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u3066\u3044\u307E\u305B\u3093`;
  const s = {};
  "alpha" in t && (s.a = i.style.opacity), ("x" in t || "y" in t || "scale_x" in t || "scale_y" in t || "rotate" in t) && (s.x = Number(this.val.getVal(`tmp:${n}.x`)), s.y = Number(this.val.getVal(`tmp:${n}.y`)), s.sx = Number(this.val.getVal(`tmp:${n}.scale_x`)), s.sy = Number(this.val.getVal(`tmp:${n}.scale_y`)), s.r = Number(this.val.getVal(`tmp:${n}.rotate`))), "width" in t && (s.w = this.val.getVal(`tmp:${n}.width`)), "height" in t && (s.h = this.val.getVal(`tmp:${n}.height`));
  const a = mT(t, s), o = {}, u = tt(t, "repeat", 1);
  let h = () => {
  };
  "alpha" in t && (o.a = tt(a, "alpha", 0), h = () => {
    i.style.opacity = s.a, this.val.setVal_Nochk("tmp", "alpha", s.a);
  });
  let l = () => {
  };
  const c = S(this, Ah, Zp).call(this, a);
  ("x" in t || "y" in t || "scale_x" in t || "scale_y" in t || "rotate" in t) && (o.x = c.x, o.y = c.y, o.sx = tt(a, "scale_x", 1), o.sy = tt(a, "scale_y", 1), o.r = tt(a, "rotate", 0), l = () => {
    i.style.left = this.sys.ofsLeft4elm + s.x * this.sys.cvsScale + "px", i.style.top = this.sys.ofsTop4elm + s.y * this.sys.cvsScale + "px", i.style.transform = `scale(${s.sx}, ${s.sy}) rotate(${s.r}deg)`, this.val.setVal_Nochk("tmp", n + ".x", s.x), this.val.setVal_Nochk("tmp", n + ".y", s.y), this.val.setVal_Nochk("tmp", n + ".scale_x", s.sx), this.val.setVal_Nochk("tmp", n + ".scale_y", s.sy), this.val.setVal_Nochk("tmp", n + ".rotate", s.r);
  });
  let d = () => {
  };
  "width" in t && (o.w = c.width, d = () => {
    i.width = s.w * this.sys.cvsScale + "px", this.val.setVal_Nochk("tmp", n + ".width", s.w);
  });
  let p = () => {
  };
  "height" in t && (o.h = c.height, p = () => {
    i.height = s.h * this.sys.cvsScale + "px", this.val.setVal_Nochk("tmp", n + ".height", s.h);
  }), this.appPixi.stage.interactive = !1;
  const g = `frm
${t.id}`, v = new Ta(s).to(o, tt(t, "time", NaN) * (Boolean(this.val.getVal("tmp:sn.skip.enabled") || f(this, Nh).isSkippingByKeyDown()) ? 0 : 1)).delay(tt(t, "delay", 0)).easing(ws.ease(t.ease)).repeat(u === 0 ? 1 / 0 : u - 1).yoyo(pt(t, "yoyo", !1)).onUpdate(() => {
    h(), l(), d(), p();
  }).onComplete(() => {
    var y, b;
    this.appPixi.stage.interactive = !0;
    const _ = this.hTwInf[g];
    !_ || (delete this.hTwInf[g], (y = _.tw) == null || y.stop(), _.resume && this.main.resume(), (b = _.onEnd) == null || b.call(_));
  });
  if ("chain" in t) {
    const _ = this.hTwInf[(m = t.chain) != null ? m : ""];
    if (!_ || !_.tw)
      throw `${t.chain}\u306F\u5B58\u5728\u3057\u306A\u3044\u30FB\u307E\u305F\u306F\u7D42\u4E86\u3057\u305F\u30C8\u30A5\u30A4\u30FC\u30F3\u3067\u3059`;
    delete _.onEnd, _.tw.chain(v);
  } else
    v.start();
  return this.hTwInf[g] = { tw: v, resume: !1 }, !1;
};
var zi, Qt, Ce, ia, No, Oo, Fh, Mh, kh, Ao, Lf, ab, us, mn, m0, JR, Ar, _0, KR, y0, QR, b0, t2, Ht, ji, $i, Bh, x0, e2, Lh, Jp, E0, r2, Df, Dh, Uf, na, sa, _n, We, aa, w0, i2, Ye, Fr, ri, T0, n2, C0, s2, I0, a2, Fo, hc, R0, o2, jr, S0, u2, P0, h2, N0, l2, O0, c2, A0, f2, oa, Uh, Kp, $r, F0, d2, Gh, M0, p2, yn, ua, ha, Nu, Vi, Xi, k0, v2, B0, g2, L0, m2, D0, _2, U0, y2, G0, b2, H0, x2, z0, E2, j0, w2, $0, T2, V0, C2, X0, I2, W0, R2, Y0, S2, q0, P2;
const so = class {
  constructor(t, e, i, n, s, a, o, u, h, l) {
    I(this, Lf);
    I(this, m0);
    I(this, _0);
    I(this, y0);
    I(this, b0);
    I(this, x0);
    I(this, Lh);
    I(this, E0);
    I(this, w0);
    I(this, Fr);
    I(this, T0);
    I(this, C0);
    I(this, I0);
    I(this, Fo);
    I(this, R0);
    I(this, S0);
    I(this, P0);
    I(this, N0);
    I(this, O0);
    I(this, A0);
    I(this, Uh);
    I(this, F0);
    I(this, M0);
    I(this, ha);
    I(this, k0);
    I(this, B0);
    I(this, L0);
    I(this, D0);
    I(this, U0);
    I(this, G0);
    I(this, H0);
    I(this, z0);
    I(this, j0);
    I(this, $0);
    I(this, V0);
    I(this, X0);
    I(this, W0);
    I(this, Y0);
    I(this, q0);
    I(this, zi, void 0);
    I(this, Qt, void 0);
    I(this, Ce, void 0);
    I(this, ia, void 0);
    I(this, No, void 0);
    I(this, Oo, void 0);
    I(this, Fh, void 0);
    I(this, Mh, void 0);
    I(this, kh, void 0);
    I(this, Ao, void 0);
    I(this, us, void 0);
    I(this, mn, void 0);
    I(this, Ar, void 0);
    I(this, Ht, void 0);
    I(this, ji, void 0);
    I(this, $i, void 0);
    I(this, Bh, void 0);
    I(this, Df, void 0);
    I(this, Dh, void 0);
    I(this, Uf, void 0);
    I(this, na, void 0);
    I(this, sa, void 0);
    I(this, _n, void 0);
    I(this, We, void 0);
    I(this, aa, void 0);
    I(this, Ye, void 0);
    I(this, jr, void 0);
    I(this, $r, void 0);
    I(this, Gh, void 0);
    I(this, yn, void 0);
    I(this, ua, void 0);
    I(this, Vi, void 0);
    I(this, Xi, void 0);
    this.cfg = t, this.hTag = e, this.appPixi = i, this.val = n, this.main = s, this.scrItr = a, this.sys = o, this.sndMng = u, this.alzTagArg = h, this.prpPrs = l, T(this, Qt, new ge()), T(this, Ce, new ge()), T(this, Oo, new gl()), T(this, Fh, () => cL()), T(this, Mh, {
      attach: (v) => (Jt.leaveMode(), !1),
      continue: (v) => (Jt.leaveMode(), !1),
      disconnect: (v) => (Jt.leaveMode(), !1),
      _enterDesign: (v) => (Jt.enterMode(), f(this, ji).forEach((m) => {
        const _ = f(this, Ht)[m].fore;
        _.makeDesignCastChildren((y) => y.make()), _.makeDesignCast((y) => y.make());
      }), S(this, Lf, ab).call(this, f(this, $i)), !1),
      _replaceToken: (v, m) => (Jt.replaceToken(m), !1),
      _selectNode: (v, m) => (S(this, Lf, ab).call(this, m.node), !1)
    }), T(this, kh, ""), T(this, Ao, ""), this.getFrmDisabled = (v) => f(this, ia).getFrmDisabled(v), T(this, us, void 0), T(this, Ar, (v, m = this.currentTxtlayForeNeedErr, _ = !0) => m.tagCh("\uFF5C\u3000\u300A" + v + "\u300B")), this.goTxt = () => {
    }, this.breakLine = () => {
    }, this.breakPage = () => {
    }, T(this, Ht, {}), T(this, ji, []), T(this, $i, ""), T(this, Bh, ""), T(this, Df, `
precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform sampler2D rule;
uniform float vague;
uniform float tick;

uniform vec4 inputPixel;
uniform highp vec4 outputFrame;
vec2 getUV(vec2 coord) {
	return coord * inputPixel.xy / outputFrame.zw;
}

void main(void) {
	vec4 fg = texture2D(uSampler, vTextureCoord);
	vec4 ru = texture2D(rule, getUV(vTextureCoord));

	float v = ru.r - tick;
	if (abs(v) < vague) {
		float f_a = fg.a *(0.5 +v /vague *0.5);

		gl_FragColor.rgb = fg.rgb *f_a;
		gl_FragColor.a = f_a;
	}
	else {
		gl_FragColor = (v >= 0.0)? fg : vec4(0);
	}
}`), T(this, Dh, {
      rule: It.EMPTY,
      vague: 0,
      tick: 0
    }), T(this, Uf, new Nn(void 0, f(this, Df), f(this, Dh))), T(this, na, Ji.create({
      width: Y.stageW,
      height: Y.stageH
    })), T(this, sa, new qe(f(this, na))), T(this, _n, Ji.create({
      width: Y.stageW,
      height: Y.stageH
    })), T(this, We, new qe(f(this, _n))), T(this, aa, []), T(this, Ye, { tw: void 0, resume: !1 }), T(this, jr, {}), T(this, $r, (v) => {
      throw f(this, ua).call(this), 0;
    }), T(this, Gh, (v) => {
      throw f(this, ua).call(this), 0;
    }), T(this, ua, () => {
      throw "\u6587\u5B57\u30EC\u30A4\u30E4\u30FC\u304C\u3042\u308A\u307E\u305B\u3093\u3002\u6587\u5B57\u8868\u793A\u3084\u64CD\u4F5C\u3059\u308B\u524D\u306B\u3001[add_lay layer=\uFF08\u30EC\u30A4\u30E4\u540D\uFF09 class=txt]\u3067\u6587\u5B57\u30EC\u30A4\u30E4\u3092\u8FFD\u52A0\u3057\u3066\u4E0B\u3055\u3044";
    }), T(this, Vi, { text: "" }), T(this, Xi, []);
    const c = () => {
      o.cvsResize(), this.cvsResizeDesign(), f(this, Ao) ? f(this, ji).forEach(
        (v) => f(this, Ht)[v].fore.cvsResizeChildren()
      ) : f(this, ji).forEach(
        (v) => f(this, Ht)[v].fore.cvsResize()
      ), f(this, ia).cvsResize(), f(this, mn).cvsResize();
    };
    if (Y.isMobile)
      f(this, Oo).add(globalThis, "orientationchange", c, { passive: !0 });
    else {
      let v;
      f(this, Oo).add(globalThis, "resize", () => {
        v || (v = setTimeout(() => {
          v = void 0, c();
        }, 1e3 / 60 * 10));
      }, { passive: !0 });
    }
    o.cvsResize(), Ie.init(t, e, n, (v) => this.recText(v), (v) => f(this, Ht)[v.layname].fore === v, i), re.init(s, t, i, o, u, n), Cs.init(t), T(this, ia, new HU(this.cfg, this.hTag, this.appPixi, this.val, s, this.sys, f(this, jr))), o.hFactoryCls.grp = () => new re(), o.hFactoryCls.txt = () => new Ie(), e.loadplugin = (v) => S(this, y0, QR).call(this, v), e.snapshot = (v) => S(this, _0, KR).call(this, v), e.add_lay = (v) => S(this, b0, t2).call(this, v), e.clear_lay = (v) => S(this, E0, r2).call(this, v), e.finish_trans = () => S(this, Fo, hc).call(this), e.lay = (v) => S(this, x0, e2).call(this, v), e.trans = (v) => S(this, w0, i2).call(this, v), e.wt = (v) => S(this, I0, a2).call(this, v), e.quake = (v) => S(this, R0, o2).call(this, v), e.stop_quake = (v) => e.finish_trans(v), e.wq = (v) => e.wt(v), e.pause_tsy = (v) => S(this, O0, c2).call(this, v), e.resume_tsy = (v) => S(this, A0, f2).call(this, v), e.stop_tsy = (v) => S(this, N0, l2).call(this, v), e.tsy = (v) => S(this, S0, u2).call(this, v), e.wait_tsy = (v) => S(this, P0, h2).call(this, v), e.ch = (v) => S(this, Uh, Kp).call(this, v), e.clear_text = (v) => S(this, k0, v2).call(this, v), e.current = (v) => f(this, Gh).call(this, v), e.endlink = (v) => S(this, B0, g2).call(this, v), e.er = (v) => S(this, L0, m2).call(this, v), e.graph = (v) => S(this, D0, _2).call(this, v), e.link = (v) => S(this, U0, y2).call(this, v), e.r = (v) => S(this, G0, b2).call(this, v), e.rec_ch = (v) => S(this, z0, E2).call(this, v), e.rec_r = () => S(this, H0, x2).call(this), e.reset_rec = (v) => S(this, j0, w2).call(this, v), e.ruby2 = (v) => S(this, $0, T2).call(this, v), e.span = (v) => S(this, V0, C2).call(this, v), e.tcy = (v) => S(this, X0, I2).call(this, v), e.add_face = (v) => re.add_face(v), e.wv = (v) => re.wv(v), e.dump_lay = (v) => S(this, W0, R2).call(this, v), e.enable_event = (v) => S(this, Y0, S2).call(this, v), e.button = (v) => S(this, q0, P2).call(this, v), t.existsBreakline && (this.breakLine = () => f(this, Ar).call(this, 'grp\uFF5C{"id":"break","pic":"breakline"}')), t.existsBreakpage && (this.breakPage = () => f(this, Ar).call(this, 'grp\uFF5C{"id":"break","pic":"breakpage"}')), T(this, No, Cb(String(t.oCfg.init.bg_color)));
    const d = new di();
    d.beginFill(f(this, No), 1).lineStyle(0, f(this, No)).drawRect(0, 0, Y.stageW, Y.stageH).endFill(), f(this, Qt).addChild(d.clone()), f(this, Ce).addChild(d), f(this, Ce).visible = !1, T(this, zi, this.appPixi.stage), f(this, zi).addChild(f(this, Ce)), f(this, zi).addChild(f(this, Qt)), f(this, zi).addChild(f(this, sa)), f(this, zi).addChild(f(this, We)), this.appPixi.ticker.add(f(this, Fh));
    const p = (v, m) => {
      S(this, m0, JR).call(this, Number(m));
    };
    p("", n.getVal("sys:TextLayer.Back.Alpha", 1)), n.defValTrg("sys:TextLayer.Back.Alpha", p);
    const g = (v, m) => Cs.fontFamily = m;
    g("", n.getVal("tmp:sn.button.fontFamily", Cs.fontFamily)), n.defValTrg("tmp:sn.button.fontFamily", g), n.defTmp("const.sn.log.json", () => JSON.stringify(
      f(this, Vi).text ? [...f(this, Xi), f(this, Vi)] : f(this, Xi)
    )), n.defTmp("const.sn.last_page_text", () => {
      var v, m;
      return (m = (v = this.currentTxtlayFore) == null ? void 0 : v.pageText) != null ? m : "";
    }), Y.isDbg && (Jt.init(this.appPixi, o, a, l, h, this.cfg, f(this, Ht)), this.cvsResizeDesign = () => Jt.cvsResizeDesign(), o.addHook((v, m) => {
      var _, y;
      !((y = (_ = f(this, Mh))[v]) != null && y.call(_, v, m)) || delete f(this, Mh)[v];
    }));
  }
  cvsResizeDesign() {
  }
  cover(t, e = 0) {
    f(this, us) && (f(this, zi).removeChild(f(this, us)), f(this, us).destroy(), T(this, us, void 0)), t && f(this, zi).addChild(
      T(this, us, new di()).beginFill(e).lineStyle(0, e).drawRect(0, 0, Y.stageW, Y.stageH).endFill()
    );
  }
  setEvtMng(t) {
    T(this, mn, t), f(this, ia).setEvtMng(t), re.setEvtMng(t);
  }
  before_destroy() {
    for (const t in f(this, Ht))
      f(this, Ht)[t].destroy();
  }
  destroy() {
    f(this, Oo).clear(), re.destroy(), wa.destroy(), Be.destroy(), Ie.destroy(), f(this, ia).destroy(), this.stopAllTw(), this.appPixi.ticker.remove(f(this, Fh)), T(so, oa, 10);
  }
  stopAllTw() {
    T(this, jr, {}), lL();
  }
  clearBreak() {
    !this.currentTxtlayFore || (this.clearBreak = () => f(this, Ar).call(this, "del\uFF5Cbreak"), this.clearBreak());
  }
  clickTxtLay() {
    return this.currentTxtlayFore ? S(this, Fr, ri).call(this).some((t) => {
      const e = f(this, Ht)[t].fore;
      return e instanceof Ie && e.click();
    }) : !1;
  }
  static get msecChWait() {
    return f(so, oa);
  }
  static set msecChWait(t) {
    T(so, oa, t);
  }
  setNormalChWait() {
    T(so, oa, this.scrItr.normalWait);
  }
  get currentTxtlayForeNeedErr() {
    return f(this, ua).call(this), this.currentTxtlayFore;
  }
  get currentTxtlayFore() {
    if (!!f(this, yn))
      return f(this, yn).fore;
  }
  recText(t, e = !1) {
    const i = f(this, Vi);
    if (e) {
      i.text && (i.text = String(i.text).replaceAll("</span><span class='sn_ch'>", ""), f(this, Xi).push(i) > this.cfg.oCfg.log.max_len && T(this, Xi, f(this, Xi).slice(-this.cfg.oCfg.log.max_len))), T(this, Vi, { text: "" });
      return;
    }
    i.text = t.replace(/\\`/, "`"), this.val.setVal_Nochk(
      "save",
      "const.sn.sLog",
      String(this.val.getVal("const.sn.log.json"))
    );
  }
  record() {
    const t = {};
    return f(this, ji).forEach((e) => {
      const i = f(this, Ht)[e];
      t[e] = {
        cls: i.cls,
        fore: i.fore.record(),
        back: i.back.record()
      };
    }), t;
  }
  playback(t, e) {
    var a, o;
    T(this, Xi, JSON.parse(String(this.val.getVal("save:const.sn.sLog")))), T(this, Vi, { text: "" });
    const i = [], n = [];
    for (const u in t) {
      const h = t[u];
      n.push({ layer: u, idx: h.fore.idx });
      const l = (o = (a = f(this, Ht))[u]) != null ? o : a[u] = new yc(u, h.cls, f(this, Qt), f(this, Ce), {}, this.sys, this.val, { isWait: !1 });
      l.fore.playback(h.fore, i), l.back.playback(h.back, i);
    }
    const s = f(this, Qt).children.length;
    Promise.allSettled(i).then(() => {
      n.sort(function(u, h) {
        return u.idx < h.idx ? -1 : u.idx > h.idx ? 1 : 0;
      }), n.forEach((u) => {
        const h = f(this, Ht)[u.layer];
        if (!h)
          return;
        const l = s > u.idx ? u.idx : s - 1;
        f(this, Qt).setChildIndex(h.fore.spLay, l), f(this, Ce).setChildIndex(h.back.spLay, l);
      }), e();
    }).catch((u) => console.error("fn:LayerMng.ts playback e:%o", u));
  }
};
let Nc = so;
zi = new WeakMap(), Qt = new WeakMap(), Ce = new WeakMap(), ia = new WeakMap(), No = new WeakMap(), Oo = new WeakMap(), Fh = new WeakMap(), Mh = new WeakMap(), kh = new WeakMap(), Ao = new WeakMap(), Lf = new WeakSet(), ab = function(t) {
  [sr(this, kh)._, this.Ao = ""] = t.split("/");
  const e = f(this, Ht)[f(this, kh)];
  !e || (Jt.allHide(), f(this, Ao) ? e.fore.showDesignCastChildren() : e.fore.showDesignCast());
}, us = new WeakMap(), mn = new WeakMap(), m0 = new WeakSet(), JR = function(t) {
  S(this, Fr, ri).call(this).forEach((e) => {
    const i = f(this, Ht)[e];
    i.fore instanceof Ie && (i.fore.chgBackAlpha(t), i.back.chgBackAlpha(t));
  });
}, Ar = new WeakMap(), _0 = new WeakSet(), KR = function(t) {
  const e = t.fn ? t.fn.slice(0, 10) === "userdata:/" ? t.fn : `downloads:/${t.fn + Mc("-", "_", "", "_")}.png` : `downloads:/snapshot${Mc("-", "_", "", "_")}.png`, i = this.cfg.searchPath(e);
  if (this.sys.canCapturePage(i))
    return !1;
  const n = qm(i), s = yT(t, "b_color", f(this, No)), a = qT({
    width: tt(t, "width", Y.stageW),
    height: tt(t, "height", Y.stageH),
    backgroundAlpha: s > 16777216 && n === "png" ? 0 : 1,
    antialias: pt(t, "smoothing", !1),
    preserveDrawingBuffer: !0,
    backgroundColor: s & 16777215,
    autoDensity: !0
  }), o = [], u = t.page !== "back" ? "fore" : "back";
  return f(this, Ye).tw ? o.push(new Promise((h) => {
    f(this, Ce).visible = !0, f(this, aa).forEach((l) => a.render(l, { clear: !1 })), f(this, Ce).visible = !1, f(this, sa).visible = !0, f(this, Qt).filters = f(this, We).filters, f(this, Qt).visible = !0, a.render(f(this, Qt), { clear: !1 }), f(this, Qt).visible = !1, f(this, Qt).filters = [], h();
  })) : S(this, Fr, ri).call(this, t.layer).forEach((h) => o.push(new Promise(
    (l) => f(this, Ht)[h][u].snapshot(a, () => l())
  ))), Promise.allSettled(o).then(async () => {
    const h = Ji.create({ width: a.width, height: a.height, transform: !0 });
    a.render(f(this, zi), { renderTexture: h }), await this.sys.savePic(
      i,
      a.plugins.extract.base64(qe.from(h))
    ), f(this, Ye).tw || S(this, Fr, ri).call(this, t.layer).forEach((l) => f(this, Ht)[l][u].snapshot_end()), a.destroy(!0);
  }), !1;
}, y0 = new WeakSet(), QR = function(t) {
  const { fn: e } = t;
  if (!e)
    throw "fn\u306F\u5FC5\u9808\u3067\u3059";
  const i = pt(t, "join", !0);
  switch (qm(e)) {
    case "css":
      (async () => {
        const n = await fetch(e);
        if (!n.ok)
          throw new Error("Network response was not ok.");
        Wu(await n.text()), i && this.main.resume();
      })();
      break;
    default:
      throw "\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u306A\u3044\u62E1\u5F35\u5B50\u3067\u3059";
  }
  return i;
}, b0 = new WeakSet(), t2 = function(t) {
  const { layer: e, class: i } = t;
  if (!e)
    throw "layer\u306F\u5FC5\u9808\u3067\u3059";
  if (e.includes(","))
    throw "layer\u540D\u306B\u300C,\u300D\u306F\u4F7F\u3048\u307E\u305B\u3093";
  if (e in f(this, Ht))
    throw `layer\u3010${e}\u3011\u306F\u3059\u3067\u306B\u3042\u308A\u307E\u3059`;
  if (!i)
    throw "cls\u306F\u5FC5\u9808\u3067\u3059";
  const n = { isWait: !1 };
  switch (f(this, Ht)[e] = new yc(e, i, f(this, Qt), f(this, Ce), t, this.sys, this.val, n), f(this, ji).push(e), i) {
    case "txt":
      f(this, $i) || (T(this, ua, () => {
      }), T(this, $r, S(this, F0, d2)), T(this, Gh, S(this, M0, p2)), this.hTag.current({ layer: e }), this.goTxt = () => {
        this.val.getVal("sn.skip.enabled") ? T(so, oa, 0) : this.setNormalChWait(), S(this, Fr, ri).call(this).forEach((s) => {
          const a = f(this, Ht)[s].fore;
          a instanceof Ie && f(this, Ar).call(this, "gotxt\uFF5C", a, !1);
        });
      }), this.val.setVal_Nochk(
        "save",
        "const.sn.layer." + (e != null ? e : f(this, $i)) + ".enabled",
        !0
      );
      break;
    case "grp":
      if (f(this, Bh))
        break;
      T(this, Bh, e);
      break;
  }
  return this.scrItr.recodeDesign(t), n.isWait;
}, Ht = new WeakMap(), ji = new WeakMap(), $i = new WeakMap(), Bh = new WeakMap(), x0 = new WeakSet(), e2 = function(t) {
  const e = S(this, ha, Nu).call(this, t), i = f(this, Ht)[e], n = i.back.spLay, s = i.fore.spLay;
  if (pt(t, "float", !1))
    f(this, Ce).setChildIndex(n, f(this, Ce).children.length - 1), f(this, Qt).setChildIndex(s, f(this, Qt).children.length - 1), S(this, Lh, Jp).call(this);
  else if (t.index)
    tt(t, "index", 0) && (f(this, Ce).setChildIndex(n, t.index), f(this, Qt).setChildIndex(s, t.index), S(this, Lh, Jp).call(this));
  else if (t.dive) {
    const { dive: a } = t;
    let o = 0;
    if (e === a)
      throw "[lay] \u5C5E\u6027 layer\u3068dive\u304C\u540C\u3058\u3010" + a + "\u3011\u3067\u3059";
    const u = f(this, Ht)[a];
    if (!u)
      throw "[lay] \u5C5E\u6027 dive\u3010" + a + "\u3011\u304C\u4E0D\u6B63\u3067\u3059\u3002\u30EC\u30A4\u30E4\u30FC\u304C\u3042\u308A\u307E\u305B\u3093";
    const h = u.back, l = u.fore, c = f(this, Ce).getChildIndex(h.spLay), d = f(this, Qt).getChildIndex(l.spLay);
    o = c < d ? c : d, o > f(this, Ce).getChildIndex(n) && --o, f(this, Qt).setChildIndex(s, o), f(this, Ce).setChildIndex(n, o), S(this, Lh, Jp).call(this);
  }
  return t[":id_tag"] = i.fore.name.slice(0, -7), this.scrItr.recodeDesign(t), i.lay(t);
}, Lh = new WeakSet(), Jp = function() {
  T(this, ji, S(this, C0, s2).call(this));
}, E0 = new WeakSet(), r2 = function(t) {
  return S(this, T0, n2).call(this, t, (e) => {
    const i = f(this, Ht)[S(this, ha, Nu).call(this, { layer: e })];
    t.page === "both" ? (i.fore.clearLay(t), i.back.clearLay(t)) : i.getPage(t).clearLay(t);
  }), !1;
}, Df = new WeakMap(), Dh = new WeakMap(), Uf = new WeakMap(), na = new WeakMap(), sa = new WeakMap(), _n = new WeakMap(), We = new WeakMap(), aa = new WeakMap(), w0 = new WeakSet(), i2 = function(t) {
  S(this, Fo, hc).call(this);
  const e = ws.ease(t.ease);
  T(this, aa, []);
  const i = {}, n = [];
  S(this, Fr, ri).call(this, t.layer).forEach((p) => {
    i[p] = !0, n.push(f(this, Ht)[p].fore);
  });
  const s = [];
  S(this, Fr, ri).call(this).forEach((p) => {
    const g = f(this, Ht)[p][i[p] ? "back" : "fore"];
    f(this, aa).push(g.spLay), s.push(g);
  }), f(this, na).resize(Y.stageW, Y.stageH), this.appPixi.renderer.render(f(this, Ce), { renderTexture: f(this, na) });
  let a = () => {
    f(this, Ce).visible = !0, f(this, aa).forEach((p) => {
      this.appPixi.renderer.render(p, { renderTexture: f(this, na), clear: !1 });
    }), f(this, Ce).visible = !1;
  };
  if (!s.some((p) => p.containMovement)) {
    let p = a;
    a = () => {
      a = () => {
      }, p();
    };
  }
  f(this, _n).resize(Y.stageW, Y.stageH), this.appPixi.renderer.render(f(this, Qt), { renderTexture: f(this, _n) });
  let o = () => {
    f(this, Qt).visible = !0, this.appPixi.renderer.render(f(this, Qt), { renderTexture: f(this, _n) }), f(this, Qt).visible = !1;
  };
  if (!n.some((p) => p.containMovement)) {
    let p = o;
    o = () => {
      o = () => {
      }, p();
    };
  }
  const u = () => {
    a(), f(this, sa).visible = !0, o(), f(this, We).visible = !0;
  };
  f(this, We).alpha = 1;
  const h = () => {
    var g;
    this.appPixi.ticker && this.appPixi.ticker.remove(u), [sr(this, Qt)._, sr(this, Ce)._] = [f(this, Ce), f(this, Qt)];
    const p = [];
    for (const v in f(this, Ht)) {
      const m = f(this, Ht)[v];
      if (i[v]) {
        m.transPage(p);
        continue;
      }
      const _ = f(this, Qt).getChildIndex(m.back.spLay);
      f(this, Qt).removeChild(m.back.spLay), f(this, Ce).removeChild(m.fore.spLay), f(this, Qt).addChildAt(m.fore.spLay, _), f(this, Ce).addChildAt(m.back.spLay, _);
    }
    Promise.allSettled(p), f(this, Qt).visible = !0, f(this, Ce).visible = !1, f(this, sa).visible = !1, f(this, We).visible = !1, (g = f(this, Ye).tw) == null || g.stop(), f(this, Ye).resume && this.main.resume(), T(this, Ye, { tw: void 0, resume: !1 });
  };
  T(this, Ye, { tw: void 0, resume: !1 });
  const l = tt(t, "time", 0);
  if (l === 0 || f(this, mn).isSkippingByKeyDown())
    return h(), !1;
  const c = "glsl" in t;
  if (!c && !("rule" in t))
    return f(this, We).filters = [], f(this, Ye).tw = new Ta(f(this, We)).to({ alpha: 0 }, l).delay(tt(t, "delay", 0)).easing(e).onComplete(h).start(), this.appPixi.ticker.add(u), !1;
  const d = c ? new Nn(void 0, t.glsl, f(this, Dh)) : f(this, Uf);
  if (d.uniforms.vague = tt(t, "vague", 0.04), d.uniforms.tick = 0, f(this, Ye).tw = new Ta(d.uniforms).to({ tick: 1 }, l).delay(tt(t, "delay", 0)).easing(e).onComplete(h), f(this, We).filters = [d], c)
    return f(this, Ye).tw.start(), this.appPixi.ticker.add(u), !1;
  if (!t.rule)
    throw "rule\u304C\u6307\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093";
  return re.csv2Sprites(t.rule, void 0, (p) => {
    var g;
    d.uniforms.rule = p.texture, p.destroy(), (g = f(this, Ye).tw) == null || g.start(), this.appPixi.ticker.add(u);
  }), !1;
}, Ye = new WeakMap(), Fr = new WeakSet(), ri = function(t = "") {
  return t ? t.split(",") : f(this, ji);
}, T0 = new WeakSet(), n2 = function(t, e) {
  const i = S(this, Fr, ri).call(this, t.layer);
  return i.forEach((n) => {
    if (!n)
      return;
    const s = f(this, Ht)[n];
    if (!s)
      throw "\u5B58\u5728\u3057\u306A\u3044layer\u3010" + n + "\u3011\u3067\u3059";
    e(n, s);
  }), i;
}, C0 = new WeakSet(), s2 = function(t = "") {
  return S(this, Fr, ri).call(this, t).sort((e, i) => {
    const n = f(this, Qt).getChildIndex(f(this, Ht)[e].fore.spLay), s = f(this, Qt).getChildIndex(f(this, Ht)[i].fore.spLay);
    return n < s ? -1 : n > s ? 1 : 0;
  });
}, I0 = new WeakSet(), a2 = function(t) {
  return f(this, Ye).tw ? (f(this, Ye).resume = !0, f(this, mn).waitLimitedEvent(t, () => S(this, Fo, hc).call(this))) : !1;
}, Fo = new WeakSet(), hc = function() {
  var t;
  return (t = f(this, Ye).tw) == null || t.end(), !1;
}, R0 = new WeakSet(), o2 = function(t) {
  S(this, Fo, hc).call(this);
  const e = tt(t, "time", NaN);
  if (e === 0 || this.val.getVal("tmp:sn.skip.enabled") || f(this, mn).isSkippingByKeyDown())
    return !1;
  const i = [];
  S(this, Fr, ri).call(this, t.layer).forEach((c) => {
    i.push(f(this, Ht)[c].fore.spLay);
  }), f(this, _n).resize(Y.stageW, Y.stageH);
  const n = () => {
    f(this, Qt).visible = !0, i.forEach(
      (c) => this.appPixi.renderer.render(c, { renderTexture: f(this, _n), clear: !1 })
    ), f(this, Qt).visible = !1;
  };
  f(this, We).visible = !0, f(this, We).alpha = 1;
  const s = vi(tt(t, "hmax", 10)), a = vi(tt(t, "vmax", 10)), o = s === 0 ? () => {
  } : () => f(this, We).x = Math.round(Math.random() * s * 2) - s, u = a === 0 ? () => {
  } : () => f(this, We).y = Math.round(Math.random() * a * 2) - a;
  f(this, We).filters = [];
  const h = tt(t, "repeat", 1), l = new Ta(f(this, We)).to({ x: 0, y: 0 }, e).delay(tt(t, "delay", 0)).easing(ws.ease(t.ease)).onUpdate(() => {
    o(), u();
  }).repeat(h === 0 ? 1 / 0 : h - 1).yoyo(pt(t, "yoyo", !1)).onComplete(() => {
    var c, d;
    (c = this.appPixi.ticker) == null || c.remove(n), f(this, Qt).visible = !0, f(this, We).visible = !1, f(this, We).x = 0, f(this, We).y = 0, (d = f(this, Ye).tw) == null || d.stop(), f(this, Ye).resume && this.main.resume(), T(this, Ye, { tw: void 0, resume: !1 });
  }).start();
  return T(this, Ye, { tw: l, resume: !1 }), this.appPixi.ticker.add(n), !1;
}, jr = new WeakMap(), S0 = new WeakSet(), u2 = function(t) {
  var d, p;
  if (!t.layer)
    throw "layer\u306F\u5FC5\u9808\u3067\u3059";
  const e = S(this, ha, Nu).call(this, t);
  let i = f(this, Ht)[e].fore, n = () => {
  };
  const s = f(this, mn).isSkippingByKeyDown();
  !s && "render" in t && (i.renderStart(), n = () => i.renderEnd());
  const a = mT(t, i), o = tt(t, "repeat", 1), u = (d = t.name) != null ? d : t.layer, h = new Ta(i).to(a, tt(t, "time", NaN) * (Boolean(this.val.getVal("tmp:sn.skip.enabled") || s) ? 0 : 1)).delay(tt(t, "delay", 0)).easing(ws.ease(t.ease)).repeat(o === 0 ? 1 / 0 : o - 1).yoyo(pt(t, "yoyo", !1)).onComplete(() => {
    var v, m;
    const g = f(this, jr)[u];
    !g || (n(), delete f(this, jr)[u], (v = g.tw) == null || v.stop(), g.resume && this.main.resume(), (m = g.onEnd) == null || m.call(g));
  });
  if ("chain" in t) {
    const g = f(this, jr)[(p = t.chain) != null ? p : ""];
    if (!(g != null && g.tw))
      throw `${t.chain}\u306F\u5B58\u5728\u3057\u306A\u3044\u30FB\u307E\u305F\u306F\u7D42\u4E86\u3057\u305F\u30C8\u30A5\u30A4\u30FC\u30F3\u3067\u3059`;
    delete g.onEnd, g.tw.chain(h);
  } else
    h.start();
  const l = pt(t, "arrive", !1), c = pt(t, "backlay", !1);
  return f(this, jr)[u] = { tw: h, resume: !1, onEnd: () => {
    if (l && Object.assign(i, a), c) {
      const g = f(this, Ht)[e].back.spLay;
      for (const v in gT)
        g[v] = i[v];
    }
  } }, !1;
}, P0 = new WeakSet(), h2 = function(t) {
  var n;
  const e = "id" in t ? `frm
${t.id}` : (n = t.name) != null ? n : t.layer;
  if (!e)
    throw "\u30C8\u30A5\u30A4\u30FC\u30F3\u304C\u6307\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093";
  const i = f(this, jr)[e];
  return i != null && i.tw ? i.resume = f(this, mn).waitEvent(
    () => {
      var s;
      return (s = i.tw) == null ? void 0 : s.end();
    },
    pt(t, "canskip", !0),
    pt(t, "global", !1)
  ) : !1;
}, N0 = new WeakSet(), l2 = function(t) {
  var i, n, s;
  const e = "id" in t ? `frm
${t.id}` : (i = t.name) != null ? i : t.layer;
  if (!e)
    throw "\u30C8\u30A5\u30A4\u30FC\u30F3\u304C\u6307\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093";
  return (s = (n = f(this, jr)[e]) == null ? void 0 : n.tw) == null || s.end(), !1;
}, O0 = new WeakSet(), c2 = function(t) {
  var i, n, s;
  const e = "id" in t ? `frm
${t.id}` : (i = t.name) != null ? i : t.layer;
  if (!e)
    throw "\u30C8\u30A5\u30A4\u30FC\u30F3\u304C\u6307\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093";
  return (s = (n = f(this, jr)[e]) == null ? void 0 : n.tw) == null || s.pause(), !1;
}, A0 = new WeakSet(), f2 = function(t) {
  var i, n, s;
  const e = "id" in t ? `frm
${t.id}` : (i = t.name) != null ? i : t.layer;
  if (!e)
    throw "\u30C8\u30A5\u30A4\u30FC\u30F3\u304C\u6307\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093";
  return (s = (n = f(this, jr)[e]) == null ? void 0 : n.tw) == null || s.resume(), !1;
}, oa = new WeakMap(), Uh = new WeakSet(), Kp = function(t) {
  const { text: e } = t;
  if (!e)
    throw "text\u306F\u5FC5\u9808\u3067\u3059";
  const i = f(this, $r).call(this, t);
  delete t.text, this.val.getVal("tmp:sn.skip.enabled") ? t.wait = 0 : "wait" in t && tt(t, "wait", NaN);
  const n = encodeURIComponent(JSON.stringify(t));
  f(this, Ar).call(this, "add\uFF5C" + n, i);
  const s = pt(t, "record", !0), a = this.val.doRecLog();
  return s || this.val.setVal_Nochk("save", "sn.doRecLog", s), i.tagCh(e.replaceAll("[r]", `
`)), s || this.val.setVal_Nochk("save", "sn.doRecLog", a), f(this, Ar).call(this, "add_close\uFF5C", i), !1;
}, $r = new WeakMap(), F0 = new WeakSet(), d2 = function(t) {
  const e = S(this, ha, Nu).call(this, t, f(this, $i)), n = f(this, Ht)[e].getPage(t);
  if (!(n instanceof Ie))
    throw e + "\u306FTxtLayer\u3067\u306F\u3042\u308A\u307E\u305B\u3093";
  return n;
}, Gh = new WeakMap(), M0 = new WeakSet(), p2 = function(t) {
  const { layer: e } = t;
  if (!e)
    throw "[current] layer\u306F\u5FC5\u9808\u3067\u3059";
  if (T(this, yn, f(this, Ht)[e]), !(f(this, yn).getPage(t) instanceof Ie))
    throw `${e}\u306FTxtLayer\u3067\u306F\u3042\u308A\u307E\u305B\u3093`;
  return this.recText("", !0), T(this, $i, e), this.val.setVal_Nochk("save", "const.sn.mesLayer", e), S(this, Fr, ri).call(this).forEach((i) => {
    const n = f(this, Ht)[i];
    n.fore instanceof Ie && (n.fore.isCur = n.back.isCur = i === e);
  }), !1;
}, yn = new WeakMap(), ua = new WeakMap(), ha = new WeakSet(), Nu = function(t, e = "") {
  var n;
  const i = (n = t.layer) != null ? n : e;
  if (i.includes(","))
    throw "layer\u540D\u306B\u300C,\u300D\u306F\u4F7F\u3048\u307E\u305B\u3093";
  if (!(i in f(this, Ht)))
    throw "\u5C5E\u6027 layer\u3010" + i + "\u3011\u304C\u4E0D\u6B63\u3067\u3059\u3002\u30EC\u30A4\u30E4\u30FC\u304C\u3042\u308A\u307E\u305B\u3093";
  return t.layer = i;
}, Vi = new WeakMap(), Xi = new WeakMap(), k0 = new WeakSet(), v2 = function(t) {
  const e = f(this, $r).call(this, t);
  return t.layer === f(this, $i) && t.page === "fore" && this.recText("", !0), e.clearText(), !1;
}, B0 = new WeakSet(), g2 = function(t) {
  return f(this, Ar).call(this, "endlink\uFF5C", f(this, $r).call(this, t)), !1;
}, L0 = new WeakSet(), m2 = function(t) {
  return pt(t, "rec_page_break", !0) && this.recText("", !0), f(this, yn) && (f(this, yn).fore.clearLay(t), f(this, yn).back.clearLay(t)), !1;
}, D0 = new WeakSet(), _2 = function(t) {
  if (!t.pic)
    throw "[graph] pic\u306F\u5FC5\u9808\u3067\u3059";
  const e = encodeURIComponent(JSON.stringify(t));
  return f(this, Ar).call(this, "grp\uFF5C" + e, f(this, $r).call(this, t)), !1;
}, U0 = new WeakSet(), y2 = function(t) {
  var i, n, s;
  (i = t.style) != null || (t.style = "background-color: rgba(255,0,0,0.5);"), (n = t.style_hover) != null || (t.style_hover = "background-color: rgba(255,0,0,0.9);"), (s = t.style_clicked) != null || (t.style_clicked = t.style);
  const e = encodeURIComponent(JSON.stringify(t));
  return f(this, Ar).call(this, "link\uFF5C" + e, f(this, $r).call(this, t)), !1;
}, G0 = new WeakSet(), b2 = function(t) {
  return t.text = `
`, S(this, Uh, Kp).call(this, t);
}, H0 = new WeakSet(), x2 = function() {
  return this.recText(`
`), !1;
}, z0 = new WeakSet(), E2 = function(t) {
  var e;
  return T(this, Vi, t), this.recText((e = t.text) != null ? e : ""), !1;
}, j0 = new WeakSet(), w2 = function(t) {
  var e;
  return T(this, Xi, []), T(this, Vi, { text: (e = t.text) != null ? e : "" }), this.val.setVal_Nochk(
    "save",
    "const.sn.sLog",
    t.text ? `[{text:"${t.text}"}]` : "[]"
  ), !1;
}, $0 = new WeakSet(), T2 = function(t) {
  const { t: e, r: i } = t;
  if (!e)
    throw "[ruby2] t\u306F\u5FC5\u9808\u3067\u3059";
  if (!i)
    throw "[ruby2] r\u306F\u5FC5\u9808\u3067\u3059";
  return t.text = "\uFF5C" + encodeURIComponent(e) + "\u300A" + encodeURIComponent(i) + "\u300B", delete t.t, delete t.r, S(this, Uh, Kp).call(this, t);
}, V0 = new WeakSet(), C2 = function(t) {
  const e = encodeURIComponent(JSON.stringify(t));
  return f(this, Ar).call(this, "span\uFF5C" + e, f(this, $r).call(this, t)), !1;
}, X0 = new WeakSet(), I2 = function(t) {
  if (!t.t)
    throw "[tcy] t\u306F\u5FC5\u9808\u3067\u3059";
  const e = encodeURIComponent(JSON.stringify(t));
  return f(this, Ar).call(this, "tcy\uFF5C" + e, f(this, $r).call(this, t)), !1;
}, W0 = new WeakSet(), R2 = function(t) {
  return console.group("\u{1F95F} [dump_lay]"), S(this, Fr, ri).call(this, t.layer).forEach((e) => {
    const i = f(this, Ht)[e];
    try {
      console.info(
        `%c${i.fore.name.slice(0, -7)} %o`,
        `color:#${Y.isDarkMode ? "49F" : "05A"};`,
        JSON.parse(`{"back":{${i.back.dump()}}, "fore":{${i.fore.dump()}}}`)
      );
    } catch (n) {
      console.error("dump_lay err:%o", n), console.error(`   back:${i.back.dump()}`), console.error(`   fore:${i.fore.dump()}`);
    }
  }), console.groupEnd(), !1;
}, Y0 = new WeakSet(), S2 = function(t) {
  const e = S(this, ha, Nu).call(this, t, f(this, $i)), i = pt(t, "enabled", !0);
  return f(this, $r).call(this, t).enabled = i, this.val.setVal_Nochk("save", "const.sn.layer." + e + ".enabled", i), !1;
}, q0 = new WeakSet(), P2 = function(t) {
  var e, i, n;
  return yc.argChk_page(t, "back"), (e = t.clicksebuf) != null || (t.clicksebuf = "SYS"), (i = t.entersebuf) != null || (t.entersebuf = "SYS"), (n = t.leavesebuf) != null || (t.leavesebuf = "SYS"), t.fn || (t.fn = this.scrItr.scriptFn), f(this, $r).call(this, t).addButton(t), this.scrItr.recodeDesign(t), !1;
}, I(Nc, oa, 10);
var Ne, ve, Hh, Z0, N2, Gf, Mo, lc;
class zU {
  constructor() {
    I(this, Z0);
    I(this, Mo);
    I(this, Ne, []);
    I(this, ve, -1);
    I(this, Hh, new gl());
    I(this, Gf, Y.debugLog ? (t) => console.log(`\u{1F47E} <FocusMng idx:${t} btn:%o`, f(this, Ne)[t].btn) : () => {
    });
  }
  destroy() {
    T(this, Ne, []), T(this, ve, -1), f(this, Hh).clear();
  }
  add(t, e, i) {
    var o;
    if (f(this, Ne).findIndex((u) => u.btn === t) >= 0)
      return;
    if (t instanceof ge) {
      t.on("pointerdown", () => {
        for (let u = f(this, Ne).length - 1; u >= 0; --u)
          if (f(this, Ne)[u].btn === t) {
            T(this, ve, u);
            return;
          }
        T(this, ve, -1);
      }), f(this, Ne).push({ btn: t, on: e, off: i });
      return;
    }
    f(this, Hh).add(t, "focus", () => {
      for (let u = f(this, Ne).length - 1; u >= 0; --u)
        if (f(this, Ne)[u].btn === t) {
          T(this, ve, u);
          return;
        }
      T(this, ve, -1);
    });
    let n = (u) => {
    }, s = t.localName === "button" || t.localName === "a" ? (u) => !u.isTrusted && u.key === "Enter" : (u) => u.key === "Enter";
    const a = t;
    switch ((o = a.type) != null ? o : "") {
      case "checkbox":
        n = () => a.checked = !a.checked;
        break;
      case "":
        t.querySelectorAll("input[type]").length > 0 && (n = (u) => S(this, Z0, N2).call(this, t, u.key), s = () => !1);
        break;
      case "range":
        n = (u) => {
          u.isTrusted || (u.key === "ArrowUp" ? a.stepUp() : a.stepDown());
        };
        break;
      case "text":
      case "textarea":
        n = (u) => {
          var l;
          if (u.isTrusted)
            return;
          let h = ((l = a.selectionStart) != null ? l : 0) + (u.key === "ArrowUp" ? -1 : 1);
          h < 0 && (h = 0), a.setSelectionRange(h, h);
        };
        break;
    }
    f(this, Hh).add(t, "keydown", (u) => {
      if (!(u.key !== "ArrowUp" && u.key !== "ArrowDown" && u.key !== "Enter")) {
        if (u.stopPropagation(), u.stopImmediatePropagation(), s(u)) {
          t.dispatchEvent(new MouseEvent("click"));
          return;
        }
        n(u);
      }
    }, { passive: !0 }), t.hasAttribute("tabindex") || (t.tabIndex = 0), f(this, Ne).push({ btn: t, on: e, off: i });
  }
  remove(t) {
    const e = f(this, Ne).findIndex((i) => i.btn === t);
    e < 0 || (f(this, Ne).splice(e, 1), f(this, Ne).length === 0 ? T(this, ve, -1) : e <= f(this, ve) && --sr(this, ve)._);
  }
  isFocus(t) {
    return f(this, ve) < 0 ? !1 : f(this, Ne)[f(this, ve)].btn === t;
  }
  prev() {
    S(this, Mo, lc).call(this);
    const t = f(this, Ne).length;
    if (t !== 0) {
      --sr(this, ve)._ < 0 && T(this, ve, t - 1);
      for (let e = t; e >= 1; --e) {
        const i = (f(this, ve) + e) % t;
        if (f(this, Ne)[i].on()) {
          T(this, ve, i), f(this, Gf).call(this, i);
          return;
        }
      }
      T(this, ve, -1);
    }
  }
  next() {
    S(this, Mo, lc).call(this);
    const t = f(this, Ne).length;
    if (t !== 0) {
      ++sr(this, ve)._ >= t && T(this, ve, 0);
      for (let e = 0; e < t; ++e) {
        const i = (f(this, ve) + e) % t;
        if (f(this, Ne)[i].on()) {
          T(this, ve, i), f(this, Gf).call(this, i);
          return;
        }
      }
      T(this, ve, -1);
    }
  }
  getFocus() {
    if (f(this, ve) < 0)
      return;
    S(this, Mo, lc).call(this), f(this, ve) >= f(this, Ne).length && T(this, ve, 0);
    const t = f(this, Ne)[f(this, ve)];
    return t.on() ? t.btn : void 0;
  }
  blur() {
    S(this, Mo, lc).call(this), T(this, ve, -1), globalThis.focus();
  }
}
Ne = new WeakMap(), ve = new WeakMap(), Hh = new WeakMap(), Z0 = new WeakSet(), N2 = function(t, e) {
  const i = t.querySelectorAll("input[type]"), n = i.length;
  for (let s = 0; s < n; ++s)
    if (!!i[s].checked) {
      i[(s + n + (e === "ArrowUp" ? -1 : 1)) % n].checked = !0;
      break;
    }
}, Gf = new WeakMap(), Mo = new WeakSet(), lc = function() {
  for (let t = f(this, Ne).length - 1; t >= 0; --t) {
    const e = f(this, Ne)[t];
    !(e.btn instanceof ge) || e.btn.parent ? e.off() : f(this, Ne).splice(t, 1);
  }
};
var Jr = "top", Oi = "bottom", Ai = "right", Kr = "left", qg = "auto", Cd = [Jr, Oi, Ai, Kr], wl = "start", Qc = "end", jU = "clippingParents", O2 = "viewport", Vl = "popper", $U = "reference", Qw = /* @__PURE__ */ Cd.reduce(function(r, t) {
  return r.concat([t + "-" + wl, t + "-" + Qc]);
}, []), A2 = /* @__PURE__ */ [].concat(Cd, [qg]).reduce(function(r, t) {
  return r.concat([t, t + "-" + wl, t + "-" + Qc]);
}, []), VU = "beforeRead", XU = "read", WU = "afterRead", YU = "beforeMain", qU = "main", ZU = "afterMain", JU = "beforeWrite", KU = "write", QU = "afterWrite", ob = [VU, XU, WU, YU, qU, ZU, JU, KU, QU];
function kn(r) {
  return r ? (r.nodeName || "").toLowerCase() : null;
}
function Mi(r) {
  if (r == null)
    return window;
  if (r.toString() !== "[object Window]") {
    var t = r.ownerDocument;
    return t && t.defaultView || window;
  }
  return r;
}
function ou(r) {
  var t = Mi(r).Element;
  return r instanceof t || r instanceof Element;
}
function pi(r) {
  var t = Mi(r).HTMLElement;
  return r instanceof t || r instanceof HTMLElement;
}
function A1(r) {
  if (typeof ShadowRoot > "u")
    return !1;
  var t = Mi(r).ShadowRoot;
  return r instanceof t || r instanceof ShadowRoot;
}
function tG(r) {
  var t = r.state;
  Object.keys(t.elements).forEach(function(e) {
    var i = t.styles[e] || {}, n = t.attributes[e] || {}, s = t.elements[e];
    !pi(s) || !kn(s) || (Object.assign(s.style, i), Object.keys(n).forEach(function(a) {
      var o = n[a];
      o === !1 ? s.removeAttribute(a) : s.setAttribute(a, o === !0 ? "" : o);
    }));
  });
}
function eG(r) {
  var t = r.state, e = {
    popper: {
      position: t.options.strategy,
      left: "0",
      top: "0",
      margin: "0"
    },
    arrow: {
      position: "absolute"
    },
    reference: {}
  };
  return Object.assign(t.elements.popper.style, e.popper), t.styles = e, t.elements.arrow && Object.assign(t.elements.arrow.style, e.arrow), function() {
    Object.keys(t.elements).forEach(function(i) {
      var n = t.elements[i], s = t.attributes[i] || {}, a = Object.keys(t.styles.hasOwnProperty(i) ? t.styles[i] : e[i]), o = a.reduce(function(u, h) {
        return u[h] = "", u;
      }, {});
      !pi(n) || !kn(n) || (Object.assign(n.style, o), Object.keys(s).forEach(function(u) {
        n.removeAttribute(u);
      }));
    });
  };
}
const rG = {
  name: "applyStyles",
  enabled: !0,
  phase: "write",
  fn: tG,
  effect: eG,
  requires: ["computeStyles"]
};
function Qi(r) {
  return r.split("-")[0];
}
var Qo = Math.max, Av = Math.min, Tl = Math.round;
function ub() {
  var r = navigator.userAgentData;
  return r != null && r.brands ? r.brands.map(function(t) {
    return t.brand + "/" + t.version;
  }).join(" ") : navigator.userAgent;
}
function F2() {
  return !/^((?!chrome|android).)*safari/i.test(ub());
}
function Cl(r, t, e) {
  t === void 0 && (t = !1), e === void 0 && (e = !1);
  var i = r.getBoundingClientRect(), n = 1, s = 1;
  t && pi(r) && (n = r.offsetWidth > 0 && Tl(i.width) / r.offsetWidth || 1, s = r.offsetHeight > 0 && Tl(i.height) / r.offsetHeight || 1);
  var a = ou(r) ? Mi(r) : window, o = a.visualViewport, u = !F2() && e, h = (i.left + (u && o ? o.offsetLeft : 0)) / n, l = (i.top + (u && o ? o.offsetTop : 0)) / s, c = i.width / n, d = i.height / s;
  return {
    width: c,
    height: d,
    top: l,
    right: h + c,
    bottom: l + d,
    left: h,
    x: h,
    y: l
  };
}
function F1(r) {
  var t = Cl(r), e = r.offsetWidth, i = r.offsetHeight;
  return Math.abs(t.width - e) <= 1 && (e = t.width), Math.abs(t.height - i) <= 1 && (i = t.height), {
    x: r.offsetLeft,
    y: r.offsetTop,
    width: e,
    height: i
  };
}
function M2(r, t) {
  var e = t.getRootNode && t.getRootNode();
  if (r.contains(t))
    return !0;
  if (e && A1(e)) {
    var i = t;
    do {
      if (i && r.isSameNode(i))
        return !0;
      i = i.parentNode || i.host;
    } while (i);
  }
  return !1;
}
function nn(r) {
  return Mi(r).getComputedStyle(r);
}
function iG(r) {
  return ["table", "td", "th"].indexOf(kn(r)) >= 0;
}
function Ma(r) {
  return ((ou(r) ? r.ownerDocument : r.document) || window.document).documentElement;
}
function Zg(r) {
  return kn(r) === "html" ? r : r.assignedSlot || r.parentNode || (A1(r) ? r.host : null) || Ma(r);
}
function tT(r) {
  return !pi(r) || nn(r).position === "fixed" ? null : r.offsetParent;
}
function nG(r) {
  var t = /firefox/i.test(ub()), e = /Trident/i.test(ub());
  if (e && pi(r)) {
    var i = nn(r);
    if (i.position === "fixed")
      return null;
  }
  var n = Zg(r);
  for (A1(n) && (n = n.host); pi(n) && ["html", "body"].indexOf(kn(n)) < 0; ) {
    var s = nn(n);
    if (s.transform !== "none" || s.perspective !== "none" || s.contain === "paint" || ["transform", "perspective"].indexOf(s.willChange) !== -1 || t && s.willChange === "filter" || t && s.filter && s.filter !== "none")
      return n;
    n = n.parentNode;
  }
  return null;
}
function Id(r) {
  for (var t = Mi(r), e = tT(r); e && iG(e) && nn(e).position === "static"; )
    e = tT(e);
  return e && (kn(e) === "html" || kn(e) === "body" && nn(e).position === "static") ? t : e || nG(r) || t;
}
function M1(r) {
  return ["top", "bottom"].indexOf(r) >= 0 ? "x" : "y";
}
function Oc(r, t, e) {
  return Qo(r, Av(t, e));
}
function sG(r, t, e) {
  var i = Oc(r, t, e);
  return i > e ? e : i;
}
function k2() {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
}
function B2(r) {
  return Object.assign({}, k2(), r);
}
function L2(r, t) {
  return t.reduce(function(e, i) {
    return e[i] = r, e;
  }, {});
}
var aG = function(t, e) {
  return t = typeof t == "function" ? t(Object.assign({}, e.rects, {
    placement: e.placement
  })) : t, B2(typeof t != "number" ? t : L2(t, Cd));
};
function oG(r) {
  var t, e = r.state, i = r.name, n = r.options, s = e.elements.arrow, a = e.modifiersData.popperOffsets, o = Qi(e.placement), u = M1(o), h = [Kr, Ai].indexOf(o) >= 0, l = h ? "height" : "width";
  if (!(!s || !a)) {
    var c = aG(n.padding, e), d = F1(s), p = u === "y" ? Jr : Kr, g = u === "y" ? Oi : Ai, v = e.rects.reference[l] + e.rects.reference[u] - a[u] - e.rects.popper[l], m = a[u] - e.rects.reference[u], _ = Id(s), y = _ ? u === "y" ? _.clientHeight || 0 : _.clientWidth || 0 : 0, b = v / 2 - m / 2, x = c[p], w = y - d[l] - c[g], E = y / 2 - d[l] / 2 + b, R = Oc(x, E, w), C = u;
    e.modifiersData[i] = (t = {}, t[C] = R, t.centerOffset = R - E, t);
  }
}
function uG(r) {
  var t = r.state, e = r.options, i = e.element, n = i === void 0 ? "[data-popper-arrow]" : i;
  if (n != null && !(typeof n == "string" && (n = t.elements.popper.querySelector(n), !n))) {
    if (process.env.NODE_ENV !== "production" && (pi(n) || console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).', "To use an SVG arrow, wrap it in an HTMLElement that will be used as", "the arrow."].join(" "))), !M2(t.elements.popper, n)) {
      process.env.NODE_ENV !== "production" && console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper', "element."].join(" "));
      return;
    }
    t.elements.arrow = n;
  }
}
const hG = {
  name: "arrow",
  enabled: !0,
  phase: "main",
  fn: oG,
  effect: uG,
  requires: ["popperOffsets"],
  requiresIfExists: ["preventOverflow"]
};
function Il(r) {
  return r.split("-")[1];
}
var lG = {
  top: "auto",
  right: "auto",
  bottom: "auto",
  left: "auto"
};
function cG(r) {
  var t = r.x, e = r.y, i = window, n = i.devicePixelRatio || 1;
  return {
    x: Tl(t * n) / n || 0,
    y: Tl(e * n) / n || 0
  };
}
function eT(r) {
  var t, e = r.popper, i = r.popperRect, n = r.placement, s = r.variation, a = r.offsets, o = r.position, u = r.gpuAcceleration, h = r.adaptive, l = r.roundOffsets, c = r.isFixed, d = a.x, p = d === void 0 ? 0 : d, g = a.y, v = g === void 0 ? 0 : g, m = typeof l == "function" ? l({
    x: p,
    y: v
  }) : {
    x: p,
    y: v
  };
  p = m.x, v = m.y;
  var _ = a.hasOwnProperty("x"), y = a.hasOwnProperty("y"), b = Kr, x = Jr, w = window;
  if (h) {
    var E = Id(e), R = "clientHeight", C = "clientWidth";
    if (E === Mi(e) && (E = Ma(e), nn(E).position !== "static" && o === "absolute" && (R = "scrollHeight", C = "scrollWidth")), E = E, n === Jr || (n === Kr || n === Ai) && s === Qc) {
      x = Oi;
      var P = c && E === w && w.visualViewport ? w.visualViewport.height : E[R];
      v -= P - i.height, v *= u ? 1 : -1;
    }
    if (n === Kr || (n === Jr || n === Oi) && s === Qc) {
      b = Ai;
      var N = c && E === w && w.visualViewport ? w.visualViewport.width : E[C];
      p -= N - i.width, p *= u ? 1 : -1;
    }
  }
  var M = Object.assign({
    position: o
  }, h && lG), A = l === !0 ? cG({
    x: p,
    y: v
  }) : {
    x: p,
    y: v
  };
  if (p = A.x, v = A.y, u) {
    var k;
    return Object.assign({}, M, (k = {}, k[x] = y ? "0" : "", k[b] = _ ? "0" : "", k.transform = (w.devicePixelRatio || 1) <= 1 ? "translate(" + p + "px, " + v + "px)" : "translate3d(" + p + "px, " + v + "px, 0)", k));
  }
  return Object.assign({}, M, (t = {}, t[x] = y ? v + "px" : "", t[b] = _ ? p + "px" : "", t.transform = "", t));
}
function fG(r) {
  var t = r.state, e = r.options, i = e.gpuAcceleration, n = i === void 0 ? !0 : i, s = e.adaptive, a = s === void 0 ? !0 : s, o = e.roundOffsets, u = o === void 0 ? !0 : o;
  if (process.env.NODE_ENV !== "production") {
    var h = nn(t.elements.popper).transitionProperty || "";
    a && ["transform", "top", "right", "bottom", "left"].some(function(c) {
      return h.indexOf(c) >= 0;
    }) && console.warn(["Popper: Detected CSS transitions on at least one of the following", 'CSS properties: "transform", "top", "right", "bottom", "left".', `

`, 'Disable the "computeStyles" modifier\'s `adaptive` option to allow', "for smooth transitions, or remove these properties from the CSS", "transition declaration on the popper element if only transitioning", "opacity or background-color for example.", `

`, "We recommend using the popper element as a wrapper around an inner", "element that can have any CSS property transitioned for animations."].join(" "));
  }
  var l = {
    placement: Qi(t.placement),
    variation: Il(t.placement),
    popper: t.elements.popper,
    popperRect: t.rects.popper,
    gpuAcceleration: n,
    isFixed: t.options.strategy === "fixed"
  };
  t.modifiersData.popperOffsets != null && (t.styles.popper = Object.assign({}, t.styles.popper, eT(Object.assign({}, l, {
    offsets: t.modifiersData.popperOffsets,
    position: t.options.strategy,
    adaptive: a,
    roundOffsets: u
  })))), t.modifiersData.arrow != null && (t.styles.arrow = Object.assign({}, t.styles.arrow, eT(Object.assign({}, l, {
    offsets: t.modifiersData.arrow,
    position: "absolute",
    adaptive: !1,
    roundOffsets: u
  })))), t.attributes.popper = Object.assign({}, t.attributes.popper, {
    "data-popper-placement": t.placement
  });
}
const dG = {
  name: "computeStyles",
  enabled: !0,
  phase: "beforeWrite",
  fn: fG,
  data: {}
};
var gp = {
  passive: !0
};
function pG(r) {
  var t = r.state, e = r.instance, i = r.options, n = i.scroll, s = n === void 0 ? !0 : n, a = i.resize, o = a === void 0 ? !0 : a, u = Mi(t.elements.popper), h = [].concat(t.scrollParents.reference, t.scrollParents.popper);
  return s && h.forEach(function(l) {
    l.addEventListener("scroll", e.update, gp);
  }), o && u.addEventListener("resize", e.update, gp), function() {
    s && h.forEach(function(l) {
      l.removeEventListener("scroll", e.update, gp);
    }), o && u.removeEventListener("resize", e.update, gp);
  };
}
const vG = {
  name: "eventListeners",
  enabled: !0,
  phase: "write",
  fn: function() {
  },
  effect: pG,
  data: {}
};
var gG = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function Qp(r) {
  return r.replace(/left|right|bottom|top/g, function(t) {
    return gG[t];
  });
}
var mG = {
  start: "end",
  end: "start"
};
function rT(r) {
  return r.replace(/start|end/g, function(t) {
    return mG[t];
  });
}
function k1(r) {
  var t = Mi(r), e = t.pageXOffset, i = t.pageYOffset;
  return {
    scrollLeft: e,
    scrollTop: i
  };
}
function B1(r) {
  return Cl(Ma(r)).left + k1(r).scrollLeft;
}
function _G(r, t) {
  var e = Mi(r), i = Ma(r), n = e.visualViewport, s = i.clientWidth, a = i.clientHeight, o = 0, u = 0;
  if (n) {
    s = n.width, a = n.height;
    var h = F2();
    (h || !h && t === "fixed") && (o = n.offsetLeft, u = n.offsetTop);
  }
  return {
    width: s,
    height: a,
    x: o + B1(r),
    y: u
  };
}
function yG(r) {
  var t, e = Ma(r), i = k1(r), n = (t = r.ownerDocument) == null ? void 0 : t.body, s = Qo(e.scrollWidth, e.clientWidth, n ? n.scrollWidth : 0, n ? n.clientWidth : 0), a = Qo(e.scrollHeight, e.clientHeight, n ? n.scrollHeight : 0, n ? n.clientHeight : 0), o = -i.scrollLeft + B1(r), u = -i.scrollTop;
  return nn(n || e).direction === "rtl" && (o += Qo(e.clientWidth, n ? n.clientWidth : 0) - s), {
    width: s,
    height: a,
    x: o,
    y: u
  };
}
function L1(r) {
  var t = nn(r), e = t.overflow, i = t.overflowX, n = t.overflowY;
  return /auto|scroll|overlay|hidden/.test(e + n + i);
}
function D2(r) {
  return ["html", "body", "#document"].indexOf(kn(r)) >= 0 ? r.ownerDocument.body : pi(r) && L1(r) ? r : D2(Zg(r));
}
function Ac(r, t) {
  var e;
  t === void 0 && (t = []);
  var i = D2(r), n = i === ((e = r.ownerDocument) == null ? void 0 : e.body), s = Mi(i), a = n ? [s].concat(s.visualViewport || [], L1(i) ? i : []) : i, o = t.concat(a);
  return n ? o : o.concat(Ac(Zg(a)));
}
function hb(r) {
  return Object.assign({}, r, {
    left: r.x,
    top: r.y,
    right: r.x + r.width,
    bottom: r.y + r.height
  });
}
function bG(r, t) {
  var e = Cl(r, !1, t === "fixed");
  return e.top = e.top + r.clientTop, e.left = e.left + r.clientLeft, e.bottom = e.top + r.clientHeight, e.right = e.left + r.clientWidth, e.width = r.clientWidth, e.height = r.clientHeight, e.x = e.left, e.y = e.top, e;
}
function iT(r, t, e) {
  return t === O2 ? hb(_G(r, e)) : ou(t) ? bG(t, e) : hb(yG(Ma(r)));
}
function xG(r) {
  var t = Ac(Zg(r)), e = ["absolute", "fixed"].indexOf(nn(r).position) >= 0, i = e && pi(r) ? Id(r) : r;
  return ou(i) ? t.filter(function(n) {
    return ou(n) && M2(n, i) && kn(n) !== "body";
  }) : [];
}
function EG(r, t, e, i) {
  var n = t === "clippingParents" ? xG(r) : [].concat(t), s = [].concat(n, [e]), a = s[0], o = s.reduce(function(u, h) {
    var l = iT(r, h, i);
    return u.top = Qo(l.top, u.top), u.right = Av(l.right, u.right), u.bottom = Av(l.bottom, u.bottom), u.left = Qo(l.left, u.left), u;
  }, iT(r, a, i));
  return o.width = o.right - o.left, o.height = o.bottom - o.top, o.x = o.left, o.y = o.top, o;
}
function U2(r) {
  var t = r.reference, e = r.element, i = r.placement, n = i ? Qi(i) : null, s = i ? Il(i) : null, a = t.x + t.width / 2 - e.width / 2, o = t.y + t.height / 2 - e.height / 2, u;
  switch (n) {
    case Jr:
      u = {
        x: a,
        y: t.y - e.height
      };
      break;
    case Oi:
      u = {
        x: a,
        y: t.y + t.height
      };
      break;
    case Ai:
      u = {
        x: t.x + t.width,
        y: o
      };
      break;
    case Kr:
      u = {
        x: t.x - e.width,
        y: o
      };
      break;
    default:
      u = {
        x: t.x,
        y: t.y
      };
  }
  var h = n ? M1(n) : null;
  if (h != null) {
    var l = h === "y" ? "height" : "width";
    switch (s) {
      case wl:
        u[h] = u[h] - (t[l] / 2 - e[l] / 2);
        break;
      case Qc:
        u[h] = u[h] + (t[l] / 2 - e[l] / 2);
        break;
    }
  }
  return u;
}
function tf(r, t) {
  t === void 0 && (t = {});
  var e = t, i = e.placement, n = i === void 0 ? r.placement : i, s = e.strategy, a = s === void 0 ? r.strategy : s, o = e.boundary, u = o === void 0 ? jU : o, h = e.rootBoundary, l = h === void 0 ? O2 : h, c = e.elementContext, d = c === void 0 ? Vl : c, p = e.altBoundary, g = p === void 0 ? !1 : p, v = e.padding, m = v === void 0 ? 0 : v, _ = B2(typeof m != "number" ? m : L2(m, Cd)), y = d === Vl ? $U : Vl, b = r.rects.popper, x = r.elements[g ? y : d], w = EG(ou(x) ? x : x.contextElement || Ma(r.elements.popper), u, l, a), E = Cl(r.elements.reference), R = U2({
    reference: E,
    element: b,
    strategy: "absolute",
    placement: n
  }), C = hb(Object.assign({}, b, R)), P = d === Vl ? C : E, N = {
    top: w.top - P.top + _.top,
    bottom: P.bottom - w.bottom + _.bottom,
    left: w.left - P.left + _.left,
    right: P.right - w.right + _.right
  }, M = r.modifiersData.offset;
  if (d === Vl && M) {
    var A = M[n];
    Object.keys(N).forEach(function(k) {
      var H = [Ai, Oi].indexOf(k) >= 0 ? 1 : -1, L = [Jr, Oi].indexOf(k) >= 0 ? "y" : "x";
      N[k] += A[L] * H;
    });
  }
  return N;
}
function wG(r, t) {
  t === void 0 && (t = {});
  var e = t, i = e.placement, n = e.boundary, s = e.rootBoundary, a = e.padding, o = e.flipVariations, u = e.allowedAutoPlacements, h = u === void 0 ? A2 : u, l = Il(i), c = l ? o ? Qw : Qw.filter(function(g) {
    return Il(g) === l;
  }) : Cd, d = c.filter(function(g) {
    return h.indexOf(g) >= 0;
  });
  d.length === 0 && (d = c, process.env.NODE_ENV !== "production" && console.error(["Popper: The `allowedAutoPlacements` option did not allow any", "placements. Ensure the `placement` option matches the variation", "of the allowed placements.", 'For example, "auto" cannot be used to allow "bottom-start".', 'Use "auto-start" instead.'].join(" ")));
  var p = d.reduce(function(g, v) {
    return g[v] = tf(r, {
      placement: v,
      boundary: n,
      rootBoundary: s,
      padding: a
    })[Qi(v)], g;
  }, {});
  return Object.keys(p).sort(function(g, v) {
    return p[g] - p[v];
  });
}
function TG(r) {
  if (Qi(r) === qg)
    return [];
  var t = Qp(r);
  return [rT(r), t, rT(t)];
}
function CG(r) {
  var t = r.state, e = r.options, i = r.name;
  if (!t.modifiersData[i]._skip) {
    for (var n = e.mainAxis, s = n === void 0 ? !0 : n, a = e.altAxis, o = a === void 0 ? !0 : a, u = e.fallbackPlacements, h = e.padding, l = e.boundary, c = e.rootBoundary, d = e.altBoundary, p = e.flipVariations, g = p === void 0 ? !0 : p, v = e.allowedAutoPlacements, m = t.options.placement, _ = Qi(m), y = _ === m, b = u || (y || !g ? [Qp(m)] : TG(m)), x = [m].concat(b).reduce(function(it, ht) {
      return it.concat(Qi(ht) === qg ? wG(t, {
        placement: ht,
        boundary: l,
        rootBoundary: c,
        padding: h,
        flipVariations: g,
        allowedAutoPlacements: v
      }) : ht);
    }, []), w = t.rects.reference, E = t.rects.popper, R = /* @__PURE__ */ new Map(), C = !0, P = x[0], N = 0; N < x.length; N++) {
      var M = x[N], A = Qi(M), k = Il(M) === wl, H = [Jr, Oi].indexOf(A) >= 0, L = H ? "width" : "height", U = tf(t, {
        placement: M,
        boundary: l,
        rootBoundary: c,
        altBoundary: d,
        padding: h
      }), V = H ? k ? Ai : Kr : k ? Oi : Jr;
      w[L] > E[L] && (V = Qp(V));
      var K = Qp(V), G = [];
      if (s && G.push(U[A] <= 0), o && G.push(U[V] <= 0, U[K] <= 0), G.every(function(it) {
        return it;
      })) {
        P = M, C = !1;
        break;
      }
      R.set(M, G);
    }
    if (C)
      for (var B = g ? 3 : 1, W = function(ht) {
        var F = x.find(function(vt) {
          var nt = R.get(vt);
          if (nt)
            return nt.slice(0, ht).every(function(ft) {
              return ft;
            });
        });
        if (F)
          return P = F, "break";
      }, Q = B; Q > 0; Q--) {
        var ut = W(Q);
        if (ut === "break")
          break;
      }
    t.placement !== P && (t.modifiersData[i]._skip = !0, t.placement = P, t.reset = !0);
  }
}
const IG = {
  name: "flip",
  enabled: !0,
  phase: "main",
  fn: CG,
  requiresIfExists: ["offset"],
  data: {
    _skip: !1
  }
};
function nT(r, t, e) {
  return e === void 0 && (e = {
    x: 0,
    y: 0
  }), {
    top: r.top - t.height - e.y,
    right: r.right - t.width + e.x,
    bottom: r.bottom - t.height + e.y,
    left: r.left - t.width - e.x
  };
}
function sT(r) {
  return [Jr, Ai, Oi, Kr].some(function(t) {
    return r[t] >= 0;
  });
}
function RG(r) {
  var t = r.state, e = r.name, i = t.rects.reference, n = t.rects.popper, s = t.modifiersData.preventOverflow, a = tf(t, {
    elementContext: "reference"
  }), o = tf(t, {
    altBoundary: !0
  }), u = nT(a, i), h = nT(o, n, s), l = sT(u), c = sT(h);
  t.modifiersData[e] = {
    referenceClippingOffsets: u,
    popperEscapeOffsets: h,
    isReferenceHidden: l,
    hasPopperEscaped: c
  }, t.attributes.popper = Object.assign({}, t.attributes.popper, {
    "data-popper-reference-hidden": l,
    "data-popper-escaped": c
  });
}
const SG = {
  name: "hide",
  enabled: !0,
  phase: "main",
  requiresIfExists: ["preventOverflow"],
  fn: RG
};
function PG(r, t, e) {
  var i = Qi(r), n = [Kr, Jr].indexOf(i) >= 0 ? -1 : 1, s = typeof e == "function" ? e(Object.assign({}, t, {
    placement: r
  })) : e, a = s[0], o = s[1];
  return a = a || 0, o = (o || 0) * n, [Kr, Ai].indexOf(i) >= 0 ? {
    x: o,
    y: a
  } : {
    x: a,
    y: o
  };
}
function NG(r) {
  var t = r.state, e = r.options, i = r.name, n = e.offset, s = n === void 0 ? [0, 0] : n, a = A2.reduce(function(l, c) {
    return l[c] = PG(c, t.rects, s), l;
  }, {}), o = a[t.placement], u = o.x, h = o.y;
  t.modifiersData.popperOffsets != null && (t.modifiersData.popperOffsets.x += u, t.modifiersData.popperOffsets.y += h), t.modifiersData[i] = a;
}
const OG = {
  name: "offset",
  enabled: !0,
  phase: "main",
  requires: ["popperOffsets"],
  fn: NG
};
function AG(r) {
  var t = r.state, e = r.name;
  t.modifiersData[e] = U2({
    reference: t.rects.reference,
    element: t.rects.popper,
    strategy: "absolute",
    placement: t.placement
  });
}
const FG = {
  name: "popperOffsets",
  enabled: !0,
  phase: "read",
  fn: AG,
  data: {}
};
function MG(r) {
  return r === "x" ? "y" : "x";
}
function kG(r) {
  var t = r.state, e = r.options, i = r.name, n = e.mainAxis, s = n === void 0 ? !0 : n, a = e.altAxis, o = a === void 0 ? !1 : a, u = e.boundary, h = e.rootBoundary, l = e.altBoundary, c = e.padding, d = e.tether, p = d === void 0 ? !0 : d, g = e.tetherOffset, v = g === void 0 ? 0 : g, m = tf(t, {
    boundary: u,
    rootBoundary: h,
    padding: c,
    altBoundary: l
  }), _ = Qi(t.placement), y = Il(t.placement), b = !y, x = M1(_), w = MG(x), E = t.modifiersData.popperOffsets, R = t.rects.reference, C = t.rects.popper, P = typeof v == "function" ? v(Object.assign({}, t.rects, {
    placement: t.placement
  })) : v, N = typeof P == "number" ? {
    mainAxis: P,
    altAxis: P
  } : Object.assign({
    mainAxis: 0,
    altAxis: 0
  }, P), M = t.modifiersData.offset ? t.modifiersData.offset[t.placement] : null, A = {
    x: 0,
    y: 0
  };
  if (!!E) {
    if (s) {
      var k, H = x === "y" ? Jr : Kr, L = x === "y" ? Oi : Ai, U = x === "y" ? "height" : "width", V = E[x], K = V + m[H], G = V - m[L], B = p ? -C[U] / 2 : 0, W = y === wl ? R[U] : C[U], Q = y === wl ? -C[U] : -R[U], ut = t.elements.arrow, it = p && ut ? F1(ut) : {
        width: 0,
        height: 0
      }, ht = t.modifiersData["arrow#persistent"] ? t.modifiersData["arrow#persistent"].padding : k2(), F = ht[H], vt = ht[L], nt = Oc(0, R[U], it[U]), ft = b ? R[U] / 2 - B - nt - F - N.mainAxis : W - nt - F - N.mainAxis, rt = b ? -R[U] / 2 + B + nt + vt + N.mainAxis : Q + nt + vt + N.mainAxis, j = t.elements.arrow && Id(t.elements.arrow), xt = j ? x === "y" ? j.clientTop || 0 : j.clientLeft || 0 : 0, Z = (k = M == null ? void 0 : M[x]) != null ? k : 0, X = V + ft - Z - xt, et = V + rt - Z, ot = Oc(p ? Av(K, X) : K, V, p ? Qo(G, et) : G);
      E[x] = ot, A[x] = ot - V;
    }
    if (o) {
      var q, Gt = x === "x" ? Jr : Kr, Bt = x === "x" ? Oi : Ai, ie = E[w], Ve = w === "y" ? "height" : "width", _r = ie + m[Gt], Xt = ie - m[Bt], ir = [Jr, Kr].indexOf(_) !== -1, _e = (q = M == null ? void 0 : M[w]) != null ? q : 0, oe = ir ? _r : ie - R[Ve] - C[Ve] - _e + N.altAxis, ne = ir ? ie + R[Ve] + C[Ve] - _e - N.altAxis : Xt, Vt = p && ir ? sG(oe, ie, ne) : Oc(p ? oe : _r, ie, p ? ne : Xt);
      E[w] = Vt, A[w] = Vt - ie;
    }
    t.modifiersData[i] = A;
  }
}
const BG = {
  name: "preventOverflow",
  enabled: !0,
  phase: "main",
  fn: kG,
  requiresIfExists: ["offset"]
};
function LG(r) {
  return {
    scrollLeft: r.scrollLeft,
    scrollTop: r.scrollTop
  };
}
function DG(r) {
  return r === Mi(r) || !pi(r) ? k1(r) : LG(r);
}
function UG(r) {
  var t = r.getBoundingClientRect(), e = Tl(t.width) / r.offsetWidth || 1, i = Tl(t.height) / r.offsetHeight || 1;
  return e !== 1 || i !== 1;
}
function GG(r, t, e) {
  e === void 0 && (e = !1);
  var i = pi(t), n = pi(t) && UG(t), s = Ma(t), a = Cl(r, n, e), o = {
    scrollLeft: 0,
    scrollTop: 0
  }, u = {
    x: 0,
    y: 0
  };
  return (i || !i && !e) && ((kn(t) !== "body" || L1(s)) && (o = DG(t)), pi(t) ? (u = Cl(t, !0), u.x += t.clientLeft, u.y += t.clientTop) : s && (u.x = B1(s))), {
    x: a.left + o.scrollLeft - u.x,
    y: a.top + o.scrollTop - u.y,
    width: a.width,
    height: a.height
  };
}
function HG(r) {
  var t = /* @__PURE__ */ new Map(), e = /* @__PURE__ */ new Set(), i = [];
  r.forEach(function(s) {
    t.set(s.name, s);
  });
  function n(s) {
    e.add(s.name);
    var a = [].concat(s.requires || [], s.requiresIfExists || []);
    a.forEach(function(o) {
      if (!e.has(o)) {
        var u = t.get(o);
        u && n(u);
      }
    }), i.push(s);
  }
  return r.forEach(function(s) {
    e.has(s.name) || n(s);
  }), i;
}
function zG(r) {
  var t = HG(r);
  return ob.reduce(function(e, i) {
    return e.concat(t.filter(function(n) {
      return n.phase === i;
    }));
  }, []);
}
function jG(r) {
  var t;
  return function() {
    return t || (t = new Promise(function(e) {
      Promise.resolve().then(function() {
        t = void 0, e(r());
      });
    })), t;
  };
}
function Bs(r) {
  for (var t = arguments.length, e = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)
    e[i - 1] = arguments[i];
  return [].concat(e).reduce(function(n, s) {
    return n.replace(/%s/, s);
  }, r);
}
var Ua = 'Popper: modifier "%s" provided an invalid %s property, expected %s but got %s', $G = 'Popper: modifier "%s" requires "%s", but "%s" modifier is not available', aT = ["name", "enabled", "phase", "fn", "effect", "requires", "options"];
function VG(r) {
  r.forEach(function(t) {
    [].concat(Object.keys(t), aT).filter(function(e, i, n) {
      return n.indexOf(e) === i;
    }).forEach(function(e) {
      switch (e) {
        case "name":
          typeof t.name != "string" && console.error(Bs(Ua, String(t.name), '"name"', '"string"', '"' + String(t.name) + '"'));
          break;
        case "enabled":
          typeof t.enabled != "boolean" && console.error(Bs(Ua, t.name, '"enabled"', '"boolean"', '"' + String(t.enabled) + '"'));
          break;
        case "phase":
          ob.indexOf(t.phase) < 0 && console.error(Bs(Ua, t.name, '"phase"', "either " + ob.join(", "), '"' + String(t.phase) + '"'));
          break;
        case "fn":
          typeof t.fn != "function" && console.error(Bs(Ua, t.name, '"fn"', '"function"', '"' + String(t.fn) + '"'));
          break;
        case "effect":
          t.effect != null && typeof t.effect != "function" && console.error(Bs(Ua, t.name, '"effect"', '"function"', '"' + String(t.fn) + '"'));
          break;
        case "requires":
          t.requires != null && !Array.isArray(t.requires) && console.error(Bs(Ua, t.name, '"requires"', '"array"', '"' + String(t.requires) + '"'));
          break;
        case "requiresIfExists":
          Array.isArray(t.requiresIfExists) || console.error(Bs(Ua, t.name, '"requiresIfExists"', '"array"', '"' + String(t.requiresIfExists) + '"'));
          break;
        case "options":
        case "data":
          break;
        default:
          console.error('PopperJS: an invalid property has been provided to the "' + t.name + '" modifier, valid properties are ' + aT.map(function(i) {
            return '"' + i + '"';
          }).join(", ") + '; but "' + e + '" was provided.');
      }
      t.requires && t.requires.forEach(function(i) {
        r.find(function(n) {
          return n.name === i;
        }) == null && console.error(Bs($G, String(t.name), i, i));
      });
    });
  });
}
function XG(r, t) {
  var e = /* @__PURE__ */ new Set();
  return r.filter(function(i) {
    var n = t(i);
    if (!e.has(n))
      return e.add(n), !0;
  });
}
function WG(r) {
  var t = r.reduce(function(e, i) {
    var n = e[i.name];
    return e[i.name] = n ? Object.assign({}, n, i, {
      options: Object.assign({}, n.options, i.options),
      data: Object.assign({}, n.data, i.data)
    }) : i, e;
  }, {});
  return Object.keys(t).map(function(e) {
    return t[e];
  });
}
var oT = "Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.", YG = "Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.", uT = {
  placement: "bottom",
  modifiers: [],
  strategy: "absolute"
};
function hT() {
  for (var r = arguments.length, t = new Array(r), e = 0; e < r; e++)
    t[e] = arguments[e];
  return !t.some(function(i) {
    return !(i && typeof i.getBoundingClientRect == "function");
  });
}
function qG(r) {
  r === void 0 && (r = {});
  var t = r, e = t.defaultModifiers, i = e === void 0 ? [] : e, n = t.defaultOptions, s = n === void 0 ? uT : n;
  return function(o, u, h) {
    h === void 0 && (h = s);
    var l = {
      placement: "bottom",
      orderedModifiers: [],
      options: Object.assign({}, uT, s),
      modifiersData: {},
      elements: {
        reference: o,
        popper: u
      },
      attributes: {},
      styles: {}
    }, c = [], d = !1, p = {
      state: l,
      setOptions: function(_) {
        var y = typeof _ == "function" ? _(l.options) : _;
        v(), l.options = Object.assign({}, s, l.options, y), l.scrollParents = {
          reference: ou(o) ? Ac(o) : o.contextElement ? Ac(o.contextElement) : [],
          popper: Ac(u)
        };
        var b = zG(WG([].concat(i, l.options.modifiers)));
        if (l.orderedModifiers = b.filter(function(M) {
          return M.enabled;
        }), process.env.NODE_ENV !== "production") {
          var x = XG([].concat(b, l.options.modifiers), function(M) {
            var A = M.name;
            return A;
          });
          if (VG(x), Qi(l.options.placement) === qg) {
            var w = l.orderedModifiers.find(function(M) {
              var A = M.name;
              return A === "flip";
            });
            w || console.error(['Popper: "auto" placements require the "flip" modifier be', "present and enabled to work."].join(" "));
          }
          var E = nn(u), R = E.marginTop, C = E.marginRight, P = E.marginBottom, N = E.marginLeft;
          [R, C, P, N].some(function(M) {
            return parseFloat(M);
          }) && console.warn(['Popper: CSS "margin" styles cannot be used to apply padding', "between the popper and its reference element or boundary.", "To replicate margin, use the `offset` modifier, as well as", "the `padding` option in the `preventOverflow` and `flip`", "modifiers."].join(" "));
        }
        return g(), p.update();
      },
      forceUpdate: function() {
        if (!d) {
          var _ = l.elements, y = _.reference, b = _.popper;
          if (!hT(y, b)) {
            process.env.NODE_ENV !== "production" && console.error(oT);
            return;
          }
          l.rects = {
            reference: GG(y, Id(b), l.options.strategy === "fixed"),
            popper: F1(b)
          }, l.reset = !1, l.placement = l.options.placement, l.orderedModifiers.forEach(function(M) {
            return l.modifiersData[M.name] = Object.assign({}, M.data);
          });
          for (var x = 0, w = 0; w < l.orderedModifiers.length; w++) {
            if (process.env.NODE_ENV !== "production" && (x += 1, x > 100)) {
              console.error(YG);
              break;
            }
            if (l.reset === !0) {
              l.reset = !1, w = -1;
              continue;
            }
            var E = l.orderedModifiers[w], R = E.fn, C = E.options, P = C === void 0 ? {} : C, N = E.name;
            typeof R == "function" && (l = R({
              state: l,
              options: P,
              name: N,
              instance: p
            }) || l);
          }
        }
      },
      update: jG(function() {
        return new Promise(function(m) {
          p.forceUpdate(), m(l);
        });
      }),
      destroy: function() {
        v(), d = !0;
      }
    };
    if (!hT(o, u))
      return process.env.NODE_ENV !== "production" && console.error(oT), p;
    p.setOptions(h).then(function(m) {
      !d && h.onFirstUpdate && h.onFirstUpdate(m);
    });
    function g() {
      l.orderedModifiers.forEach(function(m) {
        var _ = m.name, y = m.options, b = y === void 0 ? {} : y, x = m.effect;
        if (typeof x == "function") {
          var w = x({
            state: l,
            name: _,
            instance: p,
            options: b
          }), E = function() {
          };
          c.push(w || E);
        }
      });
    }
    function v() {
      c.forEach(function(m) {
        return m();
      }), c = [];
    }
    return p;
  };
}
var ZG = [vG, FG, dG, rG, OG, IG, BG, hG, SG], JG = /* @__PURE__ */ qG({
  defaultModifiers: ZG
});
const { GamepadListener: KG } = require("gamepad.js");
var Vr, la, dr, Hf, zf, lb, jf, cb, $f, fb, zh, jh, Vf, db, Ae, wi, hs, ls, Xf, ca, Ou, Wf, Yf, Cr, $h, Vh, qf, J0, G2, Zf, ko, K0, H2, Jf, pb, Q0, z2, Kf, vb, Bo, cc, Lo, tg, j2, eg, $2, Ti, rg, V2, ig, X2, Xh, tv, cs, Do, Uo, ng, W2, Mr;
class QG {
  constructor(t, e, i, n, s, a, o, u, h) {
    I(this, zf);
    I(this, jf);
    I(this, $f);
    I(this, Vf);
    I(this, ca);
    I(this, J0);
    I(this, K0);
    I(this, Jf);
    I(this, Q0);
    I(this, Kf);
    I(this, Bo);
    I(this, tg);
    I(this, eg);
    I(this, rg);
    I(this, ig);
    I(this, Xh);
    I(this, ng);
    I(this, Vr, new gl());
    I(this, la, new KG({
      analog: !1,
      deadZone: 0.3
    }));
    I(this, dr, new zU());
    I(this, Hf, (t) => {
    });
    I(this, zh, !1);
    I(this, jh, !1);
    I(this, Ae, {});
    I(this, wi, {});
    I(this, hs, !1);
    I(this, ls, !1);
    I(this, Xf, (t) => {
      var e;
      return (e = f(this, Ae)[t]) != null ? e : f(this, wi)[t];
    });
    I(this, Wf, () => {
      T(this, Wf, () => {
      }), this.scrItr.firstWait();
    });
    I(this, Yf, {
      getBoundingClientRect: (t = 0, e = 0) => DOMRect.fromRect({ x: t, y: e, width: 0, height: 0 })
    });
    I(this, Cr, void 0);
    I(this, $h, void 0);
    I(this, Vh, void 0);
    I(this, qf, {
      placement: "bottom",
      fallbackPlacements: ["top", "bottom"]
    });
    I(this, Zf, (t, e) => {
    });
    I(this, ko, new gl());
    I(this, Lo, () => this.layMng.goTxt());
    I(this, Ti, () => !1);
    I(this, cs, () => {
    });
    I(this, Do, new Fi());
    I(this, Uo, "sn:notice_comp_txt");
    I(this, Mr, {
      Alt: 0,
      Meta: 0,
      Control: 0,
      ArrowDown: 0,
      End: 0,
      Enter: 0,
      Escape: 0,
      " ": 0,
      GoBack: 0
    });
    var g;
    if (this.cfg = t, this.hTag = e, this.appPixi = i, this.main = n, this.layMng = s, this.val = a, this.sndMng = o, this.scrItr = u, this.sys = h, e.clear_event = (v) => S(this, K0, H2).call(this, v), e.event = (v) => S(this, Q0, z2).call(this, v), e.l = (v) => S(this, tg, j2).call(this, v), e.p = (v) => S(this, eg, $2).call(this, v), e.s = () => (this.scrItr.recodePage(), S(this, ca, Ou).call(this, () => {
    }, !1, !0)), e.set_cancel_skip = () => S(this, rg, V2).call(this), e.set_focus = (v) => S(this, ig, X2).call(this, v), e.wait = (v) => S(this, Xh, tv).call(this, v), e.waitclick = () => S(this, ng, W2).call(this), o.setEvtMng(this), u.setOtherObj(this, s), Ie.setEvtMng(n, this, h), s.setEvtMng(this), h.setFire((v, m) => this.fire(v, m)), Y.isDbg) {
      const v = {
        pause: () => {
          if (T(this, hs, !0), !f(this, ls))
            return;
          const m = {};
          this.scrItr.recodeDesign(m), this.sys.callHook("_enterDesign", m), this.sys.send2Dbg("_enterDesign", m);
        },
        stopOnBreakpoint: () => T(this, hs, !0),
        stopOnDataBreakpoint: () => T(this, hs, !0),
        continue: () => T(this, hs, !1),
        disconnect: () => T(this, hs, !1)
      };
      v.attach = v.stopOnEntry = v.stopOnStep = v.stopOnStepIn = v.stopOnStepOut = v.stopOnBackstep = v.pause, h.addHook((m) => {
        var _;
        return (_ = v[m]) == null ? void 0 : _.call(v);
      });
    }
    Wu(`
.sn_hint {
	background-color: #3c3225;
	color: white;
	padding: 4px 8px;
	border-radius: 4px;
	font-size: 1.2em;
	z-index: 10000;
	pointer-events: none;
	user-select: none;
}

.sn_hint_ar,
.sn_hint_ar::before {
	position: absolute;
	width: 8px;
	height: 8px;
	background: inherit;
}
.sn_hint_ar {
	visibility: hidden;
}
.sn_hint_ar::before {
	visibility: visible;
	content: '';
	transform: rotate(45deg);
}

.sn_hint[data-popper-placement^='top']		> .sn_hint_ar {bottom: -4px;}
.sn_hint[data-popper-placement^='bottom']	> .sn_hint_ar {top: -4px;}
.sn_hint[data-popper-placement^='left']		> .sn_hint_ar {right: -4px;}
.sn_hint[data-popper-placement^='right']	> .sn_hint_ar {left: -4px;}
`), Array.from(document.getElementsByClassName("sn_hint")).forEach((v) => {
      var m;
      return (m = v.parentElement) == null ? void 0 : m.removeChild(v);
    }), (g = i.view.parentElement) == null || g.insertAdjacentHTML("beforeend", `
<div class="sn_hint" role="tooltip">
	<span>Dummy</span>
	<div class="sn_hint_ar" data-popper-arrow></div>
</div>`), T(this, Cr, document.querySelector(".sn_hint")), T(this, $h, f(this, Cr).querySelector("span")), T(this, Vh, JG(f(this, Yf), f(this, Cr))), f(this, Cr).hidden = !0, i.stage.interactive = !0, Y.isMobile ? i.stage.on("pointerdown", (v) => this.fire("click", v)) : f(this, Vr).add(i.stage, "pointerdown", (v) => {
      switch (v.data.button) {
        case 0:
          this.fire("click", v);
          break;
        case 1:
          this.fire("middleclick", v);
          break;
      }
    }), f(this, Vr).add(window, "keydown", (v) => S(this, zf, lb).call(this, v)), f(this, Vr).add(i.view, "contextmenu", (v) => S(this, jf, cb).call(this, v));
    const l = (v) => {
      Y.isDarkMode = v.matches, a.setVal_Nochk("tmp", "const.sn.isDarkMode", Y.isDarkMode);
    }, c = globalThis.matchMedia("(prefers-color-scheme: dark)");
    l(c), f(this, Vr).add(c, "change", (v) => {
      l(v), this.fire("sn:chgDarkMode", v);
    }), "WheelEvent" in window && (f(this, Vr).add(i.view, "wheel", (v) => S(this, $f, fb).call(this, v), { passive: !0 }), T(this, Hf, (v) => f(this, Vr).add(v, "wheel", (m) => S(this, $f, fb).call(this, m), { passive: !0 })), T(this, Zf, (v, m) => v.add(i.view, "wheel", (_) => {
      _.isComposing || _.deltaY <= 0 || (_.stopPropagation(), m());
    }))), Y.debugLog && (f(this, la).on("gamepad:connected", (v) => console.log(`\u{1F47A}<'gamepad:connected' index:${v.detail.index} id:${v.detail.gamepad.id}`)), f(this, la).on("gamepad:disconnected", (v) => console.log(`\u{1F47A}<'gamepad:disconnected' index:${v.detail.index} id:${v.detail.gamepad.id}`)));
    const d = [
      "",
      "ArrowUp",
      "",
      "ArrowLeft",
      "",
      "ArrowRight",
      "",
      "ArrowDown",
      ""
    ], p = [0, 0];
    f(this, la).on("gamepad:axis", (v) => {
      if (!document.hasFocus() || v.detail.stick !== 0)
        return;
      p[v.detail.axis] = v.detail.value;
      const m = (p[1] + 1) * 3 + (p[0] + 1), _ = d[m];
      if (!_)
        return;
      const y = f(this, dr).getFocus();
      (!y || y instanceof ge ? globalThis : y).dispatchEvent(new KeyboardEvent("keydown", { key: _, bubbles: !0 })), !(!y || y instanceof ge) && y.getAttribute("type") === "range" && y.dispatchEvent(new InputEvent("input", { bubbles: !0 }));
    }), f(this, la).on("gamepad:button", (v) => {
      if (!(!document.hasFocus() || v.detail.value === 0))
        if (v.detail.button % 2 === 0) {
          const m = f(this, dr).getFocus();
          (!m || m instanceof ge ? globalThis : m).dispatchEvent(new KeyboardEvent("keydown", { key: "Enter", bubbles: !0 }));
        } else
          i.view.dispatchEvent(new Event("contextmenu"));
    }), f(this, la).start(), f(this, Vr).add(window, "keyup", (v) => {
      v.isComposing || v.key in f(this, Mr) && (f(this, Mr)[v.key] = 0);
    }), a.defTmp("const.sn.key.alternate", () => f(this, Mr).Alt > 0), a.defTmp("const.sn.key.command", () => f(this, Mr).Meta > 0), a.defTmp("const.sn.key.control", () => f(this, Mr).Control > 0), a.defTmp("const.sn.key.end", () => f(this, Mr).End > 0), a.defTmp("const.sn.key.escape", () => f(this, Mr).Escape > 0), a.defTmp("const.sn.key.back", () => f(this, Mr).GoBack > 0);
  }
  resvFlameEvent(t) {
    f(this, Vr).add(t, "keydown", (e) => S(this, zf, lb).call(this, e)), f(this, Vr).add(t, "contextmenu", (e) => S(this, jf, cb).call(this, e)), f(this, Hf).call(this, t);
  }
  destroy() {
    f(this, dr).destroy(), f(this, Vr).clear();
  }
  fire(t, e) {
    var s;
    if (f(this, Ti).call(this) || !f(this, ls) || f(this, hs))
      return;
    const i = t.toLowerCase();
    if (Y.debugLog && console.log(`\u{1F47A} fire<(key:\`${i}\` type:${e.type} e:%o)`, { ...e }), i === "enter") {
      const a = f(this, dr).getFocus();
      if (a instanceof ge) {
        a.emit("pointerdown", new Event("pointerdown"));
        return;
      }
    }
    const n = f(this, Xf).call(this, i);
    if (!n) {
      i.slice(0, 5) === "swipe" && globalThis.scrollBy(
        -e.deltaX,
        -e.deltaY
      );
      return;
    }
    i.slice(-5) !== "wheel" && ((s = e.preventDefault) == null || s.call(e)), e.stopPropagation(), !(i.slice(0, 4) !== "dom=" && this.layMng.clickTxtLay()) && (T(this, ls, !1), n(e), f(this, Cr).hidden = !0);
  }
  popLocalEvts() {
    const t = f(this, Ae);
    return T(this, Ae, {}), t;
  }
  pushLocalEvts(t) {
    T(this, Ae, t);
  }
  waitEvent(t, e = !0, i = !1) {
    if (e && i)
      throw "canskip\u3068global\u3092\u540C\u6642\u306Btrue\u6307\u5B9A\u3067\u304D\u307E\u305B\u3093";
    if (this.val.getVal("tmp:sn.skip.enabled")) {
      if (this.val.getVal("tmp:sn.skip.all") || this.scrItr.isNextKidoku)
        return t(), !1;
      f(this, Ti).call(this);
    }
    return S(this, ca, Ou).call(this, t, e, i);
  }
  unButton(t) {
    f(this, dr).remove(t);
  }
  button(t, e, i, n, s) {
    var c, d;
    !t.fn && !t.label && this.main.errScript("fn\u307E\u305F\u306Flabel\u306F\u5FC5\u9808\u3067\u3059"), e.interactive = e.buttonMode = !0;
    const a = (d = (c = t.key) == null ? void 0 : c.toLowerCase()) != null ? d : " ";
    t.fn || (t.fn = this.scrItr.scriptFn);
    const o = pt(t, "global", !1);
    o ? f(this, wi)[a] = () => this.main.resumeByJumpOrCall(t) : f(this, Ae)[a] = () => this.main.resumeByJumpOrCall(t), e.on("pointerdown", (p) => this.fire(a, p));
    const u = t.hint ? () => S(this, J0, G2).call(this, t, e) : () => {
    }, h = () => {
      i(), f(this, Cr).hidden = !0;
    }, l = () => (u(), n());
    if (e.on("pointerover", l), e.on("pointerout", () => {
      f(this, dr).isFocus(e) ? l() : h();
    }), e.on("pointerdown", () => {
      f(this, Cr).hidden = !0;
      const p = f(this, dr).getFocus();
      s(), p instanceof Cs && p.normal();
    }), e.on(
      "pointerup",
      Y.isMobile ? h : () => {
        f(this, dr).isFocus(e) ? l() : h();
      }
    ), f(this, dr).add(e, l, h), t.clickse && (this.cfg.searchPath(t.clickse, hr.EXT_SOUND), e.on("pointerdown", () => {
      const p = { fn: t.clickse, join: !1 };
      t.clicksebuf && (p.buf = t.clicksebuf), this.hTag.playse(p);
    })), t.enterse && (this.cfg.searchPath(t.enterse, hr.EXT_SOUND), e.on("pointerover", () => {
      const p = { fn: t.enterse, join: !1 };
      t.entersebuf && (p.buf = t.entersebuf), this.hTag.playse(p);
    })), t.leavese && (this.cfg.searchPath(t.leavese, hr.EXT_SOUND), e.on("pointerout", () => {
      const p = { fn: t.leavese, join: !1 };
      t.leavesebuf && (p.buf = t.leavesebuf), this.hTag.playse(p);
    })), t.onenter) {
      const p = a + t.onenter.toLowerCase(), g = { fn: t.fn, label: t.onenter, call: !0, key: p };
      o ? f(this, wi)[p] = () => this.main.resumeByJumpOrCall(g) : f(this, Ae)[p] = () => this.main.resumeByJumpOrCall(g), e.on("pointerover", (v) => this.fire(p, v));
    }
    if (t.onleave) {
      const p = a + t.onleave.toLowerCase(), g = { fn: t.fn, label: t.onleave, call: !0, key: p };
      o ? f(this, wi)[p] = () => this.main.resumeByJumpOrCall(g) : f(this, Ae)[p] = () => this.main.resumeByJumpOrCall(g), e.on("pointerout", (v) => this.fire(p, v));
    }
    this.sndMng.loadAheadSnd(t);
  }
  cvsResize() {
    f(this, Cr).hidden = !0;
  }
  waitLimitedEvent(t, e) {
    f(this, Lo).call(this), this.val.saveKidoku();
    const i = () => {
      f(this, ko).clear(), e();
    };
    if (this.val.getVal("tmp:sn.skip.enabled"))
      if (!this.val.getVal("tmp:sn.skip.all") && !this.scrItr.isNextKidoku)
        f(this, Ti).call(this);
      else
        return i(), !1;
    return pt(t, "canskip", !0) && (f(this, ko).add(window, "pointerdown", (n) => {
      n.stopPropagation(), i();
    }), f(this, ko).add(window, "keydown", (n) => {
      n.isComposing || (n.stopPropagation(), i());
    }), f(this, Zf).call(this, f(this, ko), i)), !0;
  }
  noticeCompTxt() {
    f(this, Do).emit(f(this, Uo));
  }
  isSkippingByKeyDown() {
    if (this.scrItr.skip4page)
      return !0;
    for (const t in f(this, Mr))
      if (f(this, Mr)[t] === 2)
        return !0;
    return !1;
  }
}
Vr = new WeakMap(), la = new WeakMap(), dr = new WeakMap(), Hf = new WeakMap(), zf = new WeakSet(), lb = function(t) {
  if (t.isComposing)
    return;
  t.key in f(this, Mr) && (f(this, Mr)[t.key] = t.repeat ? 2 : 1);
  const e = (t.altKey ? t.key === "Alt" ? "" : "alt+" : "") + (t.ctrlKey ? t.key === "Control" ? "" : "ctrl+" : "") + (t.shiftKey ? t.key === "Shift" ? "" : "shift+" : "") + t.key;
  this.fire(e, t);
}, jf = new WeakSet(), cb = function(t) {
  const e = (t.altKey ? t.key === "Alt" ? "" : "alt+" : "") + (t.ctrlKey ? t.key === "Control" ? "" : "ctrl+" : "") + (t.shiftKey ? t.key === "Shift" ? "" : "shift+" : "") + "rightclick";
  this.fire(e, t), t.preventDefault();
}, $f = new WeakSet(), fb = function(t) {
  if (t.isComposing)
    return;
  if (f(this, zh)) {
    T(this, jh, !0);
    return;
  }
  T(this, zh, !0), S(this, Vf, db).call(this);
  const e = (t.altKey ? "alt+" : "") + (t.ctrlKey ? "ctrl+" : "") + (t.shiftKey ? "shift+" : "") + (t.deltaY > 0 ? "downwheel" : "upwheel");
  this.fire(e, t);
}, zh = new WeakMap(), jh = new WeakMap(), Vf = new WeakSet(), db = function() {
  setTimeout(() => {
    if (f(this, jh)) {
      T(this, jh, !1), S(this, Vf, db).call(this);
      return;
    }
    T(this, zh, !1);
  }, 250);
}, Ae = new WeakMap(), wi = new WeakMap(), hs = new WeakMap(), ls = new WeakMap(), Xf = new WeakMap(), ca = new WeakSet(), Ou = function(t, e = !0, i = !0) {
  if (f(this, Lo).call(this), this.val.saveKidoku(), e ? f(this, Ae).click = f(this, Ae).enter = f(this, Ae).arrowdown = f(this, Ae)["wheel.y>0"] = t : (delete f(this, Ae).click, delete f(this, Ae).enter, delete f(this, Ae).arrowdown, delete f(this, Ae)["wheel.y>0"]), T(this, Xf, i ? (n) => {
    var s;
    return (s = f(this, Ae)[n]) != null ? s : f(this, wi)[n];
  } : (n) => f(this, Ae)[n]), T(this, ls, !0), f(this, Wf).call(this), Y.debugLog) {
    const n = /* @__PURE__ */ Object.create(null);
    n.local = Object.keys(f(this, Ae)), n.global = Object.keys(f(this, wi)), console.log("\u{1F38D} wait event... %o", n);
  }
  return !0;
}, Wf = new WeakMap(), Yf = new WeakMap(), Cr = new WeakMap(), $h = new WeakMap(), Vh = new WeakMap(), qf = new WeakMap(), J0 = new WeakSet(), G2 = function(t, e) {
  var s, a;
  const i = e instanceof Cs ? e.getBtnBounds() : e.getBounds();
  if (!(t[":\u30BF\u30B0\u540D"] === "link")) {
    const o = e.parent.parent;
    i.x += o.x, i.y += o.y;
  }
  if (!t.hint) {
    f(this, Cr).hidden = !0;
    return;
  }
  f(this, Cr).style.cssText = `position:${f(this, Cr).style.position}; transform:${f(this, Cr).style.transform};` + ((s = t.hint_style) != null ? s : ""), f(this, $h).style.cssText = "", f(this, $h).textContent = (a = t.hint) != null ? a : "";
  try {
    const o = t.hint_opt ? { ...f(this, qf), ...JSON.parse(t.hint_opt) } : f(this, qf);
    f(this, Vh).setOptions(o);
  } catch (o) {
    console.error(_p(t, "hint_opt", o.message));
  }
  f(this, Yf).getBoundingClientRect = () => DOMRect.fromRect({
    x: this.sys.ofsLeft4elm + i.x * this.sys.cvsScale,
    y: this.sys.ofsTop4elm + i.y * this.sys.cvsScale,
    width: i.width,
    height: i.height
  }), f(this, Vh).update(), f(this, Cr).hidden = !1;
}, Zf = new WeakMap(), ko = new WeakMap(), K0 = new WeakSet(), H2 = function(t) {
  const e = pt(t, "global", !1), i = e ? f(this, wi) : f(this, Ae);
  for (const n in i)
    S(this, Jf, pb).call(this, n, i[n]);
  return e ? T(this, wi, {}) : T(this, Ae, {}), T(this, ls, !1), !1;
}, Jf = new WeakSet(), pb = function(t, e) {
  t.slice(0, 4) === "dom=" && S(this, Bo, cc).call(this, t).el.forEach((i) => i.removeEventListener("click", e));
}, Q0 = new WeakSet(), z2 = function(t) {
  var a, o;
  const e = t.key;
  if (!e)
    throw "key\u306F\u5FC5\u9808\u3067\u3059";
  const i = e.toLowerCase(), n = pt(t, "call", !1), s = pt(t, "global", !1) ? f(this, wi) : f(this, Ae);
  if (pt(t, "del", !1)) {
    if (t.fn || t.label || n)
      throw "fn/label/call\u3068del\u306F\u540C\u6642\u6307\u5B9A\u3067\u304D\u307E\u305B\u3093";
    return S(this, Jf, pb).call(this, e, s[i]), delete s[i], !1;
  }
  if ((a = t.fn) != null || (t.fn = this.scrItr.scriptFn), e.slice(0, 4) === "dom=") {
    const u = S(this, Bo, cc).call(this, e);
    if (u.el.length === 0) {
      if (pt(t, "need_err", !0))
        throw `HTML\u5185\u306B\u30BB\u30EC\u30AF\u30BF\uFF08${u.sel}\uFF09\u306B\u5BFE\u5FDC\u3059\u308B\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u5B58\u5728\u3057\u306A\u3044\u5834\u5408\u3092\u8A31\u5BB9\u3059\u308B\u306A\u3089\u3001need_err=false \u3068\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044`;
      return !1;
    }
    let h = ["click", "keydown"];
    switch ((o = u.el[0].type) != null ? o : "") {
      case "checkbox":
        h = ["input"];
        break;
      case "range":
        h = ["input"];
        break;
      case "text":
      case "textarea":
        h = ["input", "change"];
        break;
    }
    h.forEach((c, d) => u.el.forEach((p) => {
      f(this, Vr).add(p, c, (g) => {
        if (!f(this, ls) || this.layMng.getFrmDisabled(u.id) || c === "keydown" && g.key !== "Enter")
          return;
        const v = p.dataset;
        for (const m in v)
          v.hasOwnProperty(m) && this.val.setVal_Nochk("tmp", `sn.event.domdata.${m}`, v[m]);
        this.fire(e, g);
      }), d === 0 && f(this, dr).add(
        p,
        () => S(this, Kf, vb).call(this, p) ? (p.focus(), !0) : !1,
        () => {
        }
      );
    }));
  }
  return s[i] = () => this.main.resumeByJumpOrCall(t), !1;
}, Kf = new WeakSet(), vb = function(t) {
  if (t.offsetParent === null)
    return !1;
  let e = t;
  do {
    if (getComputedStyle(e).display === "none" || e.dataset.focus === "false" || (e == null ? void 0 : e.disabled))
      return !1;
    e = e.parentElement;
  } while (e !== null);
  return !0;
}, Bo = new WeakSet(), cc = function(t) {
  const e = t.indexOf(":");
  let i = "";
  if (e >= 0) {
    const n = t.slice(4, e), s = `const.sn.frm.${n}`;
    if (!this.val.getVal(`tmp:${s}`, 0))
      throw `HTML\u3010${n}\u3011\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u3066\u3044\u307E\u305B\u3093`;
    const o = document.getElementById(n).contentWindow;
    return i = t.slice(e + 1), { el: o.document.querySelectorAll(i), id: n, sel: i };
  }
  return i = t.slice(4), { el: document.querySelectorAll(i), id: "", sel: i };
}, Lo = new WeakMap(), tg = new WeakSet(), j2 = function(t) {
  if (this.scrItr.skip4page)
    return !1;
  if (!this.val.getVal("tmp:sn.tagL.enabled"))
    return f(this, Lo).call(this), !1;
  if (this.val.getVal("tmp:sn.skip.enabled")) {
    if (!this.val.getVal("tmp:sn.skip.all") && !this.scrItr.isNextKidoku)
      f(this, Ti).call(this);
    else if ("ps".includes(this.val.getVal("sys:sn.skip.mode")))
      return !1;
  }
  return this.val.getVal("tmp:sn.auto.enabled") ? S(this, Xh, tv).call(this, {
    time: Number(this.scrItr.isKidoku ? this.val.getVal("sys:sn.auto.msecLineWait_Kidoku") : this.val.getVal("sys:sn.auto.msecLineWait"))
  }) : (pt(t, "visible", !0) && this.layMng.breakLine(), S(this, ca, Ou).call(this, () => this.main.resume()));
}, eg = new WeakSet(), $2 = function(t) {
  if (this.scrItr.recodePage(), this.val.getVal("tmp:sn.skip.enabled")) {
    if (!this.val.getVal("tmp:sn.skip.all") && !this.scrItr.isNextKidoku)
      f(this, Ti).call(this);
    else if (this.val.getVal("sys:sn.skip.mode") == "s")
      return f(this, Lo).call(this), !1;
  }
  if (this.val.getVal("tmp:sn.auto.enabled"))
    return S(this, Xh, tv).call(this, {
      time: Number(this.scrItr.isKidoku ? this.val.getVal("sys:sn.auto.msecPageWait_Kidoku") : this.val.getVal("sys:sn.auto.msecPageWait"))
    });
  pt(t, "visible", !0) && this.layMng.breakPage();
  const e = () => {
    this.sndMng.clearCache(), this.main.resume();
  };
  return S(this, ca, Ou).call(this, pt(t, "er", !1) && this.layMng.currentTxtlayFore ? () => {
    this.hTag.er(t), e();
  } : e);
}, Ti = new WeakMap(), rg = new WeakSet(), V2 = function() {
  return T(this, Ti, () => (T(this, Ti, () => !1), this.val.setVal_Nochk("tmp", "sn.tagL.enabled", !0), this.val.setVal_Nochk("tmp", "sn.skip.enabled", !1), this.val.setVal_Nochk("tmp", "sn.auto.enabled", !1), this.layMng.setNormalChWait(), f(this, cs).call(this), !0)), !1;
}, ig = new WeakSet(), X2 = function(t) {
  const { add: e, del: i, to: n } = t;
  if ((e == null ? void 0 : e.slice(0, 4)) === "dom=") {
    const s = S(this, Bo, cc).call(this, e);
    if (s.el.length === 0 && pt(t, "need_err", !0))
      throw `HTML\u5185\u306B\u30BB\u30EC\u30AF\u30BF\uFF08${s.sel}\uFF09\u306B\u5BFE\u5FDC\u3059\u308B\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u5B58\u5728\u3057\u306A\u3044\u5834\u5408\u3092\u8A31\u5BB9\u3059\u308B\u306A\u3089\u3001need_err=false \u3068\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044`;
    return s.el.forEach((a) => f(this, dr).add(
      a,
      () => S(this, Kf, vb).call(this, a) ? (a.focus(), !0) : !1,
      () => {
      }
    )), !1;
  }
  if ((i == null ? void 0 : i.slice(0, 4)) === "dom=") {
    const s = S(this, Bo, cc).call(this, i);
    if (s.el.length === 0 && pt(t, "need_err", !0))
      throw `HTML\u5185\u306B\u30BB\u30EC\u30AF\u30BF\uFF08${s.sel}\uFF09\u306B\u5BFE\u5FDC\u3059\u308B\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u5B58\u5728\u3057\u306A\u3044\u5834\u5408\u3092\u8A31\u5BB9\u3059\u308B\u306A\u3089\u3001need_err=false \u3068\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044`;
    return s.el.forEach((a) => f(this, dr).remove(a)), !1;
  }
  if (!n)
    throw "[set_focus] add \u304B to \u306F\u5FC5\u9808\u3067\u3059";
  switch (n) {
    case "null":
      f(this, dr).blur();
      break;
    case "next":
      f(this, dr).next();
      break;
    case "prev":
      f(this, dr).prev();
      break;
  }
  return !1;
}, Xh = new WeakSet(), tv = function(t) {
  const e = tt(t, "time", NaN);
  return this.scrItr.skip4page ? !1 : this.val.getVal("tmp:sn.skip.enabled") ? (!this.val.getVal("tmp:sn.skip.all") && !this.scrItr.isNextKidoku && f(this, Ti).call(this), !1) : (f(this, Do).once(f(this, Uo), () => {
    f(this, Do).off(f(this, Uo));
    const i = new Ta({}).to({}, e).onComplete(() => {
      T(this, cs, () => {
      }), i.stop(), this.main.resume();
    }).start();
    T(this, cs, () => i.end());
  }), T(this, cs, () => {
    T(this, cs, () => {
    }), f(this, Do).off(f(this, Uo));
  }), this.waitEvent(
    () => f(this, cs).call(this),
    pt(t, "canskip", !0),
    pt(t, "global", !1)
  ));
}, cs = new WeakMap(), Do = new WeakMap(), Uo = new WeakMap(), ng = new WeakSet(), W2 = function() {
  return this.scrItr.skip4page ? !1 : ((this.val.getVal("tmp:sn.skip.enabled") || this.val.getVal("tmp:sn.auto.enabled")) && f(this, Ti).call(this), S(this, ca, Ou).call(this, () => this.main.resume()));
}, Mr = new WeakMap();
class lT {
  constructor(t = "", e = 0, i = { ":hEvt1Time": {}, ":hMp": {} }) {
    this.fn = t, this.idx = e, this.csArg = i, this.toString = () => `[fn:${this.fn}, idx:${this.idx}, csArg:${this.csArg}]`;
  }
}
var Nt, Wt, mt, ce, le, fs, Qf, gb, fa, Go, sg, ds, td, mb, ed, _b, Wh, da, Fu, Ho, fc, zo, ps, Fe, ag, Y2, jo, dc, og, q2, Yh, qh, li, ug, Z2, hg, J2, vs, Qa, lg, K2, pa, va, Zh, Jh, Kh, Xr, cg, Q2, fg, tS, dg, eS, rd, yb, pg, rS, vg, iS, gg, nS, id, bb, Qh, $o, pc, ga, gs, to, nd, xb, tl, sd, Eb, ad, od, el, ma, rl, mg, sS, kr, _g, aS, ud, wb, hd, ld, cd, yg, oS, bn, fd, Tb, bg, uS, xg, hS, Eg, lS, il, Vo, wg, cS, nl, ev, Xo, Tg, fS, Ci, Cg, dS, sl, rv, Ig, pS, Ii, pr;
const ii = class {
  constructor(t, e, i, n, s, a, o, u, h) {
    I(this, Qf);
    I(this, td);
    I(this, ed);
    I(this, da);
    I(this, Ho);
    I(this, ag);
    I(this, jo);
    I(this, og);
    I(this, ug);
    I(this, hg);
    I(this, vs);
    I(this, lg);
    I(this, cg);
    I(this, fg);
    I(this, dg);
    I(this, rd);
    I(this, pg);
    I(this, vg);
    I(this, gg);
    I(this, id);
    I(this, $o);
    I(this, gs);
    I(this, nd);
    I(this, sd);
    I(this, mg);
    I(this, _g);
    I(this, ud);
    I(this, yg);
    I(this, fd);
    I(this, bg);
    I(this, xg);
    I(this, Eg);
    I(this, wg);
    I(this, nl);
    I(this, Tg);
    I(this, Cg);
    I(this, sl);
    I(this, Ig);
    I(this, Nt, void 0);
    I(this, Wt, void 0);
    I(this, mt, void 0);
    I(this, ce, void 0);
    I(this, le, void 0);
    I(this, fs, void 0);
    I(this, fa, void 0);
    I(this, Go, void 0);
    I(this, ds, void 0);
    I(this, Wh, void 0);
    I(this, Fe, void 0);
    I(this, Yh, void 0);
    I(this, qh, void 0);
    I(this, li, void 0);
    I(this, pa, void 0);
    I(this, va, void 0);
    I(this, Zh, void 0);
    I(this, Jh, void 0);
    I(this, Kh, void 0);
    I(this, Xr, void 0);
    I(this, Qh, void 0);
    I(this, ga, void 0);
    I(this, tl, void 0);
    I(this, ad, void 0);
    I(this, od, void 0);
    I(this, el, void 0);
    I(this, ma, void 0);
    I(this, rl, void 0);
    I(this, kr, void 0);
    I(this, hd, void 0);
    I(this, ld, void 0);
    I(this, cd, void 0);
    I(this, bn, void 0);
    I(this, il, void 0);
    I(this, Vo, void 0);
    I(this, Xo, void 0);
    I(this, Ci, void 0);
    I(this, Ii, void 0);
    I(this, pr, void 0);
    if (this.cfg = t, this.hTag = e, this.main = i, this.val = n, this.alzTagArg = s, this.runAnalyze = a, this.prpPrs = o, this.sndMng = u, this.sys = h, T(this, Nt, { aToken: [""], len: 1, aLNum: [1] }), T(this, Wt, ""), T(this, mt, 0), T(this, ce, 0), this.addLineNum = (l) => T(this, ce, f(this, ce) + l), T(this, le, []), T(this, fs, new oL()), this.firstWait = () => {
    }, T(this, fa, {
      disconnect: () => {
        T(ii, zo, {}), T(ii, ps, {}), this.isBreak = () => !1, f(this, fa).continue({}), T(this, Fe, 0);
      },
      restart: () => this.isBreak = () => !1,
      add_break: (l) => S(this, Qf, gb).call(this, l.fn, l.o),
      data_break: (l) => {
        f(this, Fe) === 0 && (T(this, Fe, 1), this.main.setLoop(!1, `\u5909\u6570 ${l.dataId}\u3010${l.old_v}\u3011\u2192\u3010${l.new_v}\u3011\u30C7\u30FC\u30BF\u30D6\u30EC\u30FC\u30AF`), this.sys.callHook("stopOnDataBreakpoint", {}), this.sys.send2Dbg("stopOnDataBreakpoint", {}));
      },
      set_func_break: (l) => {
        T(ii, ps, {}), l.a.forEach((c) => f(ii, ps)[c.name] = 1), this.sys.send2Dbg(l.ri, {});
      },
      stack: (l) => this.sys.send2Dbg(l.ri, { a: S(this, og, q2).call(this) }),
      eval: (l) => {
        this.sys.send2Dbg(l.ri, { v: this.prpPrs.parse(l.txt) });
      },
      continue: () => {
        S(this, Ho, fc).call(this) || (T(this, mt, f(this, mt) - f(this, da, Fu)), T(this, Fe, 3), this.main.setLoop(!0), this.main.resume());
      },
      stepover: (l) => S(this, td, mb).call(this, l),
      stepin: () => {
        if (S(this, Ho, fc).call(this))
          return;
        const l = f(this, Nt).aToken[f(this, mt) - f(this, da, Fu)];
        this.sys.callHook(`stopOnStep${f(this, Vo).test(l) ? "In" : ""}`, {}), T(this, mt, f(this, mt) - f(this, da, Fu)), T(this, Fe, f(this, Fe) === 1 ? 4 : 5), this.main.setLoop(!0), this.main.resume();
      },
      stepout: (l) => {
        S(this, Ho, fc).call(this) || (f(this, le).length > 0 ? S(this, ed, _b).call(this, !0) : S(this, td, mb).call(this, l));
      },
      pause: () => {
        T(this, Fe, 4), this.main.setLoop(!1, "\u4E00\u6642\u505C\u6B62"), this.sys.send2Dbg("stopOnStep", {});
      },
      stopOnEntry: () => {
        T(this, Fe, 4), this.main.setLoop(!1, "\u4E00\u6642\u505C\u6B62"), this.sys.send2Dbg("stopOnEntry", {});
      }
    }), T(this, Go, (l) => this.cfg.searchPath(l, hr.EXT_SCRIPT)), T(this, ds, (l) => (this.sys.pathBaseCnvSnPath4Dbg + f(this, Go).call(this, l)).replace(f(ii, sg), `$1/prj/$2/${f(this, Wt)}$3`)), this.cnvPath4Dbg = (l) => this.sys.pathBaseCnvSnPath4Dbg + l.replace("/crypto_prj/", "/prj/"), T(this, Wh, 0), T(this, Fe, 0), this.isBreak = (l) => !1, T(this, Yh, (l) => {
    }), T(this, pa, () => {
    }), T(this, va, () => {
    }), T(this, Zh, ""), T(this, Jh, {}), this.noticeBreak = (l) => {
    }, T(this, Kh, 5), T(this, Xr, [-1]), T(this, Qh, ""), T(this, ga, ""), this.nextToken = () => "", T(this, tl, (l) => {
    }), T(this, ad, /(\*{2,})(.*)/), T(this, od, /\[macro\s/), T(this, el, /\[endmacro[\s\]]/), T(this, ma, /^\[let_ml\s/g), T(this, rl, /^\[endlet_ml\s*]/g), T(this, kr, /* @__PURE__ */ Object.create(null)), T(this, hd, /^\[(call|loadplugin)\s/), T(this, ld, /\bfn\s*=\s*[^\s\]]+/), T(this, cd, () => {
      for (let l = f(this, Nt).len - 1; l >= 0; --l) {
        const c = f(this, Nt).aToken[l];
        if (!f(this, hd).test(c))
          continue;
        const [d, p] = Sp(c);
        this.alzTagArg.go(p);
        const g = this.alzTagArg.hPrm.fn;
        if (!g)
          continue;
        const v = g.val;
        if (!v || v.slice(-1) !== "*")
          continue;
        const m = d === "loadplugin" ? "css" : "sn", _ = this.cfg.matchPath("^" + v.slice(0, -1) + ".*", m);
        f(this, Nt).aToken.splice(l, 1, "	", "; " + c), f(this, Nt).aLNum.splice(l, 1, NaN, NaN);
        for (const y of _) {
          const b = c.replace(
            f(this, ld),
            "fn=" + decodeURIComponent(vc(y[m]))
          );
          f(this, Nt).aToken.splice(l, 0, b), f(this, Nt).aLNum.splice(l, 0, NaN);
        }
      }
      f(this, Nt).len = f(this, Nt).aToken.length;
    }), T(this, bn, !1), T(this, il, "call"), T(this, Vo, /\[(call)\b/), T(this, Xo, !1), T(this, Ci, {
      hSave: {},
      hPages: {},
      aIfStk: [-1]
    }), T(this, Ii, []), T(this, pr, -1), e.let_ml = (l) => S(this, ug, Z2).call(this, l), e.dump_stack = () => S(this, hg, J2).call(this), e.dump_script = (l) => S(this, lg, K2).call(this, l), e.else = e.elsif = e.endif = () => S(this, cg, Q2).call(this), e.if = (l) => S(this, fg, tS).call(this, l), e.call = (l) => S(this, dg, eS).call(this, l), e.jump = (l) => S(this, pg, rS).call(this, l), e.page = (l) => S(this, vg, iS).call(this, l), e.pop_stack = (l) => S(this, gg, nS).call(this, l), e.return = (l) => S(this, id, bb).call(this, l), e.bracket2macro = (l) => S(this, bg, uS).call(this, l), e.char2macro = (l) => S(this, xg, hS).call(this, l), e.endmacro = (l) => S(this, id, bb).call(this, l), e.macro = (l) => S(this, Eg, lS).call(this, l), e.load = (l) => S(this, wg, cS).call(this, l), e.reload_script = (l) => S(this, Tg, fS).call(this, l), e.record_place = () => S(this, Cg, dS).call(this), e.save = (l) => S(this, Ig, pS).call(this, l), t.oCfg.debug.token && T(this, tl, (l) => console.log(`\u{1F331} \u30C8\u30FC\u30AF\u30F3 fn:${f(this, Wt)} idx:${f(this, mt)} ln:${f(this, ce)} token\u3010${l}\u3011`)), n.defTmp("const.sn.vctCallStk.length", () => f(this, le).length), f(this, fs).setEscape(t.oCfg.init.escape), Y.isDbg) {
      h.addHook((c, d) => {
        var p, g;
        return (g = (p = f(this, fa))[c]) == null ? void 0 : g.call(p, d);
      }), this.isBreak = S(this, ag, Y2);
      const l = this.analyzeInit;
      this.analyzeInit = () => {
        this.analyzeInit = () => {
        }, this.sys.send2Dbg("hi", {});
      }, f(this, fa).auth = (c) => {
        const d = c.hBreakpoint.hFn2hLineBP;
        for (const p in d)
          S(this, Qf, gb).call(this, p, d[p]);
        if (T(ii, ps, {}), c.hBreakpoint.aFunc.forEach((p) => f(ii, ps)[p.name] = 1), c.stopOnEntry) {
          for (; ; ) {
            let p = this.nextToken();
            if (!p)
              break;
            const g = p.charCodeAt(0);
            if (g === 91 || g === 38 || g === 42 && p.length === 1)
              break;
            g === 10 && T(this, ce, f(this, ce) + p.length);
          }
          this.sys.callHook("stopOnEntry", {}), this.analyzeInit = l, this.analyzeInit();
        } else
          this.firstWait = () => {
            this.sys.callHook("stopOnEntry", {});
          }, this.analyzeInit = l, this.analyzeInit();
      };
    } else
      this.recodeDesign = () => {
      };
    t.oCfg.debug.tag && T(this, Yh, (l) => console.log(`\u{1F332} \u30BF\u30B0\u89E3\u6790 fn:${f(this, Wt)} idx:${f(this, mt)} ln:${f(this, ce)} [${l} %o]`, this.alzTagArg.hPrm));
  }
  get scriptFn() {
    return f(this, Wt);
  }
  subIdxToken() {
    --sr(this, mt)._;
  }
  get lineNum() {
    return f(this, ce);
  }
  destroy() {
    this.isBreak = () => !1;
  }
  \u30BF\u30B0\u89E3\u6790(t) {
    const [e, i] = Sp(t), n = this.hTag[e];
    if (!n)
      throw `\u672A\u5B9A\u7FA9\u306E\u30BF\u30B0\u3010${e}\u3011\u3067\u3059`;
    this.alzTagArg.go(i), f(this, Yh).call(this, e);
    const s = this.alzTagArg.hPrm;
    if (s.cond) {
      const u = s.cond.val;
      if (!u || u.charAt(0) === "&")
        throw "\u5C5E\u6027cond\u306F\u300C&\u300D\u304C\u4E0D\u8981\u3067\u3059";
      const h = this.prpPrs.parse(u), l = String(h);
      if (l === "null" || l === "undefined" || !h)
        return !1;
    }
    let a = {};
    const o = f(this, le).length;
    if (this.alzTagArg.isKomeParam) {
      if (o === 0)
        throw "\u5C5E\u6027\u300C*\u300D\u306F\u30DE\u30AF\u30ED\u306E\u307F\u6709\u52B9\u3067\u3059";
      a = { ...f(this, le)[f(this, le).length - 1].csArg };
    }
    a[":\u30BF\u30B0\u540D"] = e;
    for (const u in s) {
      let h = s[u].val;
      if ((h == null ? void 0 : h.charAt(0)) === "%") {
        if (o === 0)
          throw "\u5C5E\u6027\u300C%\u300D\u306F\u30DE\u30AF\u30ED\u5B9A\u7FA9\u5185\u3067\u306E\u307F\u4F7F\u7528\u3067\u304D\u307E\u3059\uFF08\u305D\u306E\u30DE\u30AF\u30ED\u306E\u5F15\u6570\u3092\u793A\u3059\u7C21\u7565\u6587\u6CD5\u3067\u3042\u308B\u305F\u3081\uFF09";
        const c = f(this, le)[f(this, le).length - 1].csArg[h.slice(1)];
        if (c) {
          a[u] = c;
          continue;
        }
        if (h = s[u].def, h === void 0 || h === "null")
          continue;
      }
      if (h = this.prpPrs.getValAmpersand(h != null ? h : ""), h !== "undefined") {
        a[u] = h;
        continue;
      }
      const l = s[u].def;
      l !== void 0 && (h = this.prpPrs.getValAmpersand(l), h !== "undefined" && (a[u] = h));
    }
    return n(a);
  }
  setOtherObj(t, e) {
    T(this, qh, t), T(this, li, e);
  }
  dumpErrForeLine() {
    var a;
    if (f(this, mt) === 0) {
      console.group(`\u{1F95F} Error line (from 0 rows before) fn:${f(this, Wt)}`), console.groupEnd();
      return;
    }
    let t = "";
    for (let o = f(this, mt) - 1; o >= 0 && (t = f(this, Nt).aToken[o] + t, !(((a = t.match(/\n/g)) != null ? a : []).length >= f(this, Kh))); --o)
      ;
    const e = t.split(`
`).slice(-f(this, Kh)), i = e.length;
    console.group(`\u{1F95F} Error line (from ${i} rows before) fn:${f(this, Wt)}`);
    const n = String(f(this, ce)).length, s = S(this, vs, Qa).call(this, f(this, Nt), f(this, mt));
    for (let o = 0; o < i; ++o) {
      const u = f(this, ce) - i + o + 1, h = `${String(u).padStart(n, " ")}: %c`, l = e[o], c = l.length > 75 ? l.slice(0, 75) + "\u2026" : l;
      o === i - 1 ? console.info(
        h + c.slice(0, s.col_s) + "%c" + c.slice(s.col_s),
        "color: black; background-color: skyblue;",
        "color: black; background-color: pink;"
      ) : console.info(h + c, "color: black; background-color: skyblue;");
    }
    console.groupEnd();
  }
  analyzeInit() {
    const t = S(this, mg, sS).call(this, f(this, Nt), Boolean(this.val.getVal("mp:const.sn.macro.name")), f(this, ce), f(this, ga), f(this, mt));
    T(this, mt, t.idx), T(this, ce, t.ln), this.runAnalyze();
  }
  get isKidoku() {
    return f(this, bn);
  }
  get isNextKidoku() {
    let t = f(this, Wt), e = f(this, mt), i = f(this, Nt).len;
    if (f(this, le).length > 0) {
      const s = f(this, le)[0];
      t = s.fn, e = s.idx;
      const a = f(this, kr)[t];
      a && (i = a.len);
    }
    const n = this.val.getAreaKidoku(t);
    return !n || e === i ? !1 : n.search(e);
  }
  get normalWait() {
    return f(this, bn) ? this.val.getVal("sys:sn.tagCh.doWait_Kidoku") ? vi(this.val.getVal("sys:sn.tagCh.msecWait_Kidoku")) : 0 : this.val.getVal("sys:sn.tagCh.doWait") ? vi(this.val.getVal("sys:sn.tagCh.msecWait")) : 0;
  }
  get skip4page() {
    return f(this, Xo);
  }
  recodePage() {
    if (T(this, Xo, !1), !this.val.getVal("save:sn.doRecLog"))
      return;
    const { fn: t, idx: e } = S(this, sl, rv).call(this), i = e - 1, n = i + ":" + t, s = f(this, Ii).findIndex((o) => o.key === n);
    if (s > -1) {
      T(this, pr, s);
      return;
    }
    const a = {
      key: n,
      fn: t,
      idx: i,
      retFn: t,
      retIdx: 0,
      retMark: { ...f(this, Ci) }
    };
    if (f(this, pr) >= 0) {
      const o = f(this, Ii)[f(this, pr)];
      a.retFn = o.fn, a.retIdx = o.idx + 1;
    }
    ++sr(this, pr)._ === f(this, Ii).length ? f(this, Ii).push(a) : f(this, Ii)[f(this, pr)] = a;
  }
  recodeDesign(t) {
    let e = "", i = 0;
    const n = f(this, le).length;
    if (t.design_unit && n > 0) {
      const o = f(this, le)[0];
      e = o.fn, i = o.idx;
    } else
      e = f(this, Wt), i = f(this, mt);
    t[":path"] = f(this, ds).call(this, e);
    const s = S(this, vs, Qa).call(this, f(this, kr)[e], i);
    t[":ln"] = s.ln, t[":col_s"] = s.col_s, t[":col_e"] = s.col_e;
    const a = i - 1;
    t[":idx_tkn"] = a, t[":token"] = f(this, kr)[e].aToken[a], this.sys.send2Dbg("_recodeDesign", t);
  }
  replace(t, e) {
    f(this, Nt).aToken[t] = e;
  }
};
let Au = ii;
Nt = new WeakMap(), Wt = new WeakMap(), mt = new WeakMap(), ce = new WeakMap(), le = new WeakMap(), fs = new WeakMap(), Qf = new WeakSet(), gb = function(t, e) {
  f(ii, zo)[f(this, ds).call(this, t)] = e;
}, fa = new WeakMap(), Go = new WeakMap(), sg = new WeakMap(), ds = new WeakMap(), td = new WeakSet(), mb = function(t) {
  if (S(this, Ho, fc).call(this))
    return;
  const e = f(this, Nt).aToken[f(this, mt) - f(this, da, Fu)];
  f(this, Vo).test(e) ? S(this, ed, _b).call(this, !1) : (this.sys.callHook("stopOnStep", {}), f(this, fa).stepin(t));
}, ed = new WeakSet(), _b = function(t) {
  this.sys.callHook(`stopOnStep${t ? "Out" : ""}`, {}), T(this, Wh, f(this, le).length - (t ? 1 : 0)), T(this, mt, f(this, mt) - f(this, da, Fu)), T(this, Fe, t ? 7 : 6), this.main.setLoop(!0), this.main.resume();
}, Wh = new WeakMap(), da = new WeakSet(), Fu = function() {
  return f(this, Fe) === 2 || f(this, Fe) === 4 ? 1 : 0;
}, Ho = new WeakSet(), fc = function() {
  return f(this, mt) < f(this, Nt).len ? !1 : (this.sys.callHook("stopOnEntry", {}), this.main.setLoop(!1, "\u30B9\u30AF\u30EA\u30D7\u30C8\u7D42\u7AEF\u3067\u3059"), !0);
}, zo = new WeakMap(), ps = new WeakMap(), Fe = new WeakMap(), ag = new WeakSet(), Y2 = function(t) {
  switch (f(this, Fe)) {
    case 6:
      S(this, jo, dc).call(this), T(this, Fe, 7);
      break;
    case 7:
      if (f(this, le).length !== f(this, Wh))
        break;
      return T(this, Fe, 4), this.main.setLoop(!1, "\u30B9\u30C6\u30C3\u30D7\u5B9F\u884C"), this.sys.send2Dbg("stopOnStep", {}), !0;
    case 5:
      S(this, jo, dc).call(this), T(this, Fe, 4);
      break;
    case 4:
      return S(this, jo, dc).call(this), this.main.setLoop(!1, "\u30B9\u30C6\u30C3\u30D7\u5B9F\u884C"), this.sys.send2Dbg("stopOnStep", {}), !0;
    case 3:
      S(this, jo, dc).call(this), T(this, Fe, 0);
      break;
    default:
      if (Pp(t) in f(ii, ps))
        return T(this, Fe, 2), this.main.setLoop(!1, `\u95A2\u6570 ${t} \u30D6\u30EC\u30FC\u30AF`), this.sys.callHook("stopOnBreakpoint", {}), this.sys.send2Dbg("stopOnBreakpoint", {}), !0;
      {
        const e = f(ii, zo)[f(this, ds).call(this, f(this, Wt))];
        if (!e)
          break;
        const i = e[f(this, ce)];
        if (!i)
          break;
        if (i.condition) {
          if (!this.prpPrs.parse(i.condition))
            break;
        } else if ("hitCondition" in i && --i.hitCondition > 0)
          break;
        const n = f(this, Fe) === 0;
        T(this, Fe, 2), this.main.setLoop(!1, n ? (i.condition ? "\u6761\u4EF6" : "\u30D2\u30C3\u30C8\u30AB\u30A6\u30F3\u30C8") + "\u30D6\u30EC\u30FC\u30AF" : "\u30B9\u30C6\u30C3\u30D7\u5B9F\u884C");
        const s = n ? "stopOnBreakpoint" : "stopOnStep";
        this.sys.callHook(s, {}), this.sys.send2Dbg(s, {});
      }
      return !0;
  }
  return !1;
}, jo = new WeakSet(), dc = function() {
  var e;
  const t = (e = f(ii, zo)[vc(f(this, Wt))]) == null ? void 0 : e[f(this, ce)];
  t != null && t.hitCondition && --t.hitCondition;
}, og = new WeakSet(), q2 = function() {
  var l, c;
  const t = f(this, Fe) === 3 ? 1 : 0, e = f(this, Nt).aToken[f(this, mt) - 1 + t], i = f(this, ds).call(this, f(this, Wt)), n = Pp(e), s = n ? `[${n}]` : e, a = (l = this.val.getVal("mp:const.sn.macro")) != null ? l : "{}";
  if (f(this, mt) === 0)
    return [{ fn: i, ln: 1, col: 1, nm: s, ma: a }];
  const o = S(this, vs, Qa).call(this, f(this, Nt), f(this, mt)), u = [{ fn: i, ln: o.ln, col: o.col_s + 1, nm: s, ma: a }], h = f(this, le).length;
  if (h === 0)
    return u;
  for (let d = h - 1; d >= 0; --d) {
    const p = f(this, le)[d], g = f(this, kr)[p.fn], v = g.aToken[p.idx - 1], m = S(this, vs, Qa).call(this, g, p.idx), _ = Pp(v);
    u.push({
      fn: f(this, ds).call(this, p.fn),
      ln: m.ln,
      col: m.col_s + 1,
      nm: _ ? `[${_}]` : v,
      ma: (c = p.csArg[":hMp"]["const.sn.macro"]) != null ? c : "{}"
    });
  }
  return u;
}, Yh = new WeakMap(), qh = new WeakMap(), li = new WeakMap(), ug = new WeakSet(), Z2 = function(t) {
  var s;
  const { name: e } = t;
  if (!e)
    throw "name\u306F\u5FC5\u9808\u3067\u3059";
  let i = "";
  const n = f(this, Nt).len;
  for (; f(this, mt) < n && (i = f(this, Nt).aToken[f(this, mt)], i === ""); ++sr(this, mt)._)
    ;
  return t.text = i, t.cast = "str", this.hTag.let(t), T(this, mt, f(this, mt) + 2), T(this, ce, f(this, ce) + ((s = i.match(/\n/g)) != null ? s : []).length), !1;
}, hg = new WeakSet(), J2 = function() {
  var n;
  if (f(this, mt) === 0)
    return console.group(`\u{1F95F} [dump_stack] \u30B9\u30AF\u30EA\u30D7\u30C8\u73FE\u5728\u5730 fn:${f(this, Wt)} line:${1} col:${0}`), console.groupEnd(), !1;
  const t = S(this, vs, Qa).call(this, f(this, Nt), f(this, mt)), e = `\u30B9\u30AF\u30EA\u30D7\u30C8\u73FE\u5728\u5730 fn:${f(this, Wt)} line:${t.ln} col:${t.col_s + 1}`;
  console.group(`\u{1F95F} [dump_stack] ${e}`);
  const i = f(this, le).length;
  if (i > 0) {
    console.info(e);
    for (let s = i - 1; s >= 0; --s) {
      const a = f(this, le)[s], o = a.csArg[":hMp"], u = o ? o[":\u30BF\u30B0\u540D"] : void 0, h = (n = a.csArg[":\u30BF\u30B0\u540D"]) != null ? n : "", l = S(this, vs, Qa).call(this, f(this, kr)[a.fn], a.idx);
      console.info(
        `${i - s}\u3064\u524D\u306E\u30B3\u30FC\u30EB\u5143 fn:${a.fn} line:${l.ln} col:${l.col_s + 1}` + (u ? "\uFF08[" + u + "]\u30DE\u30AF\u30ED\u5185\uFF09" : " ") + `\u3067 [${h} ...]\u3092\u30B3\u30FC\u30EB`
      );
    }
  }
  return console.groupEnd(), !1;
}, vs = new WeakSet(), Qa = function(t, e) {
  const i = { ln: 1, col_s: 0, col_e: 0 };
  if (!t)
    return i;
  let n = e - 1;
  const s = i.ln = t.aLNum[n];
  for (; t.aLNum[n] === s; ) {
    if (t.aToken[n].charAt(0) !== `
`) {
      const a = t.aToken[n].length;
      i.col_e > 0 && (i.col_s += a), i.col_e += a;
    }
    if (--n < 0)
      break;
  }
  return i;
}, lg = new WeakSet(), K2 = function(t) {
  const { set_fnc: e, break_fnc: i } = t;
  if (!e)
    throw "set_fnc\u306F\u5FC5\u9808\u3067\u3059";
  if (T(this, pa, globalThis[e]), !f(this, pa)) {
    if (pt(t, "need_err", !0))
      throw `HTML\u5185\u306B\u95A2\u6570${e}\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093`;
    return T(this, pa, () => {
    }), !1;
  }
  if (this.noticeBreak = (n) => {
    var s;
    f(this, Zh) !== f(this, Wt) && (T(this, Zh, f(this, Wt)), f(this, pa).call(this, f(this, Jh)[f(this, Wt)] = (s = f(this, Jh)[f(this, Wt)]) != null ? s : f(this, Nt).aToken.join(""))), f(this, va).call(this, f(this, ce), n);
  }, this.noticeBreak(!0), !i)
    return !1;
  if (T(this, va, globalThis[i]), !f(this, va)) {
    if (pt(t, "need_err", !0))
      throw `HTML\u5185\u306B\u95A2\u6570${i}\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093`;
    T(this, va, () => {
    });
  }
  return !1;
}, pa = new WeakMap(), va = new WeakMap(), Zh = new WeakMap(), Jh = new WeakMap(), Kh = new WeakMap(), Xr = new WeakMap(), cg = new WeakSet(), Q2 = function() {
  if (f(this, Xr)[0] === -1)
    throw "if\u30D6\u30ED\u30C3\u30AF\u5185\u3067\u306F\u3042\u308A\u307E\u305B\u3093";
  return T(this, mt, f(this, Xr)[0]), f(this, Xr).shift(), !1;
}, fg = new WeakSet(), tS = function(t) {
  var u;
  const { exp: e } = t;
  if (!e)
    throw "exp\u306F\u5FC5\u9808\u3067\u3059";
  if (e.charAt(0) === "&")
    throw "\u5C5E\u6027exp\u306F\u300C&\u300D\u304C\u4E0D\u8981\u3067\u3059";
  let i = 0, n = this.prpPrs.parse(e) ? f(this, mt) : -1;
  const s = f(this, Nt).aLNum[f(this, mt)];
  let a = f(this, ce) - (s || 0);
  const o = f(this, Nt).len;
  for (; f(this, mt) < o; ++sr(this, mt)._) {
    const h = f(this, Nt).aLNum[f(this, mt)];
    f(this, Nt).aLNum[f(this, mt)] = (h || 0) + a;
    const l = f(this, Nt).aToken[f(this, mt)];
    if (!l)
      continue;
    const c = l.charCodeAt(0);
    if (c === 10) {
      T(this, ce, f(this, ce) + l.length);
      continue;
    }
    if (c !== 91)
      continue;
    const [d, p] = Sp(l);
    if (!(d in this.hTag))
      throw `\u672A\u5B9A\u7FA9\u306E\u30BF\u30B0[${d}]\u3067\u3059`;
    switch (this.alzTagArg.go(p), d) {
      case "if":
        ++i;
        break;
      case "elsif":
        if (i > 0 || n > -1)
          break;
        const g = (u = this.alzTagArg.hPrm.exp.val) != null ? u : "";
        if (g.charAt(0) === "&")
          throw "\u5C5E\u6027exp\u306F\u300C&\u300D\u304C\u4E0D\u8981\u3067\u3059";
        this.prpPrs.parse(g) && (n = f(this, mt) + 1);
        break;
      case "else":
        if (i > 0)
          break;
        n === -1 && (n = f(this, mt) + 1);
        break;
      case "endif":
        if (i > 0) {
          --i;
          break;
        }
        return n === -1 ? (++sr(this, mt)._, f(this, Nt).aLNum[f(this, mt)] += a) : (f(this, Xr).unshift(f(this, mt) + 1), T(this, mt, n), T(this, ce, f(this, Nt).aLNum[f(this, mt)])), !1;
    }
  }
  throw "[endif]\u304C\u306A\u3044\u307E\u307E\u30B9\u30AF\u30EA\u30D7\u30C8\u7D42\u7AEF\u3067\u3059";
}, dg = new WeakSet(), eS = function(t) {
  pt(t, "count", !1) || S(this, fd, Tb).call(this);
  const { fn: e } = t;
  return e && f(this, Go).call(this, e), S(this, rd, yb).call(this, { ":hEvt1Time": f(this, qh).popLocalEvts(), ":hMp": this.val.cloneMp() }), pt(t, "clear_local_event", !1) && this.hTag.clear_event({}), S(this, gs, to).call(this, e, t.label), !0;
}, rd = new WeakSet(), yb = function(t) {
  f(this, Nt).aLNum[f(this, mt)] = f(this, ce), f(this, Qh) || (t[":resvToken"] = "", S(this, $o, pc).call(this)), f(this, le).push(new lT(f(this, Wt), f(this, mt), t)), f(this, Xr).unshift(-1);
}, pg = new WeakSet(), rS = function(t) {
  return pt(t, "count", !0) || S(this, fd, Tb).call(this), f(this, Xr)[0] = -1, S(this, gs, to).call(this, t.fn, t.label), !0;
}, vg = new WeakSet(), iS = function(t) {
  if (f(this, pr) === -1)
    return !1;
  if (pt(t, "clear", !1))
    return T(this, Ii, []), T(this, pr, -1), !1;
  const { to: e } = t;
  if (!e)
    throw "clear\u304Bto\u306F\u5FC5\u9808\u3067\u3059";
  const i = f(this, pr);
  switch (e) {
    case "prev":
      f(this, pr) > 0 && --sr(this, pr)._;
      break;
    case "next":
      const o = f(this, Ii).length;
      f(this, pr) < o - 1 && ++sr(this, pr)._;
      break;
    default:
      throw `\u5C5E\u6027to\u300C${e}\u300D\u306F\u7570\u5E38\u3067\u3059`;
  }
  if (i === f(this, pr))
    return !1;
  const n = f(this, Ii)[f(this, pr)], { fn: s, idx: a } = S(this, sl, rv).call(this);
  return n.key === a + ":" + s ? !1 : S(this, nl, ev).call(this, { fn: n.retFn, index: n.retIdx }, n.retMark);
}, gg = new WeakSet(), nS = function(t) {
  if (pt(t, "clear", !1))
    T(this, le, []);
  else if (!f(this, le).pop())
    throw "[pop_stack] \u30B9\u30BF\u30C3\u30AF\u304C\u7A7A\u3067\u3059";
  return S(this, $o, pc).call(this), T(this, Xr, [-1]), this.val.setMp({}), !1;
}, id = new WeakSet(), bb = function(t) {
  const e = f(this, le).pop();
  if (!e)
    throw "[return] \u30B9\u30BF\u30C3\u30AF\u304C\u7A7A\u3067\u3059";
  const i = e.csArg;
  f(this, Xr).shift();
  const n = i[":hMp"];
  n && this.val.setMp(n);
  const s = i[":resvToken"];
  s ? this.nextToken = () => (S(this, $o, pc).call(this), s) : S(this, $o, pc).call(this), i[":hEvt1Time"] && f(this, qh).pushLocalEvts(i[":hEvt1Time"]);
  const { fn: a, label: o } = t;
  return a || o ? (S(this, gs, to).call(this, a, o), !0) : e.fn in f(this, kr) ? (S(this, ud, wb).call(this, e), !1) : (S(this, gs, to).call(this, e.fn, "", e.idx), !0);
}, Qh = new WeakMap(), $o = new WeakSet(), pc = function() {
  T(this, Qh, ""), this.nextToken = S(this, nd, xb);
}, ga = new WeakMap(), gs = new WeakSet(), to = function(t = "", e = "", i = 0) {
  if (!t && !e && this.main.errScript("[jump\u7CFB] fn\u307E\u305F\u306Flabel\u306F\u5FC5\u9808\u3067\u3059"), e ? (e.charAt(0) !== "*" && this.main.errScript("[jump\u7CFB] label\u306F*\u3067\u59CB\u307E\u308A\u307E\u3059"), T(this, ga, e), f(this, ga).slice(0, 2) !== "**" && T(this, mt, i)) : (T(this, ga, ""), T(this, mt, i)), !t) {
    this.analyzeInit();
    return;
  }
  const n = f(this, Go).call(this, t);
  if (t === f(this, Wt)) {
    this.analyzeInit();
    return;
  }
  T(this, Wt, t);
  const s = f(this, kr)[f(this, Wt)];
  if (s) {
    T(this, Nt, s), this.analyzeInit();
    return;
  }
  new fi().add({ name: f(this, Wt), url: n }).use((a, o) => {
    try {
      a.data = this.sys.decStr(a.extension, a.data);
    } catch (u) {
      this.main.errScript(`[jump\u7CFB]sn\u30ED\u30FC\u30C9\u5931\u6557\u3067\u3059 fn:${a.name} ${u}`, !1);
    }
    o == null || o();
  }).load((a, o) => {
    this.nextToken = S(this, nd, xb), T(this, ce, 1), S(this, _g, aS).call(this, o[t].data), this.hTag.record_place({}), this.main.resume(() => this.analyzeInit());
  }), this.main.stop();
}, nd = new WeakSet(), xb = function() {
  var e, i;
  if (S(this, sd, Eb).call(this))
    return "";
  S(this, yg, oS).call(this), (e = f(this, Nt).aLNum)[i = f(this, mt)] || (e[i] = f(this, ce));
  const t = f(this, Nt).aToken[f(this, mt)];
  return f(this, tl).call(this, t), ++sr(this, mt)._, t;
}, tl = new WeakMap(), sd = new WeakSet(), Eb = function() {
  return f(this, mt) < f(this, Nt).len ? !1 : (this.main.errScript("\u30B9\u30AF\u30EA\u30D7\u30C8\u7D42\u7AEF\u3067\u3059"), !0);
}, ad = new WeakMap(), od = new WeakMap(), el = new WeakMap(), ma = new WeakMap(), rl = new WeakMap(), mg = new WeakSet(), sS = function(t, e, i, n, s) {
  var l, c, d, p, g;
  const a = t.aToken.length;
  if (!n) {
    if (S(this, sd, Eb).call(this))
      return { idx: s, ln: i };
    if (t.aLNum[s])
      i = t.aLNum[s];
    else {
      i = 1;
      for (let v = 0; v < s; ++v) {
        (l = t.aLNum)[v] || (l[v] = i);
        const m = t.aToken[v];
        m.charCodeAt(0) === 10 ? i += m.length : i += ((c = m.match(/\n/g)) != null ? c : []).length;
      }
      t.aLNum[s] = i;
    }
    return { idx: s, ln: i };
  }
  t.aLNum[0] = 1;
  const o = n.match(f(this, ad));
  if (o) {
    n = o[1];
    let v = s;
    switch (o[2]) {
      case "before":
        for (; t.aToken[--v] !== n; )
          v === 0 && $t.myTrace("[jump\u7CFB \u7121\u540D\u30E9\u30D9\u30EBbefore] " + i + "\u884C\u76EE\u4EE5\u524D\u3067" + (e ? "\u30DE\u30AF\u30ED\u5185\u306B" : "") + "\u30E9\u30D9\u30EB\u3010" + n + "\u3011\u304C\u3042\u308A\u307E\u305B\u3093", "ET"), e && t.aToken[v].search(f(this, od)) > -1 && $t.myTrace("[jump\u7CFB \u7121\u540D\u30E9\u30D9\u30EBbefore] \u30DE\u30AF\u30ED\u5185\u306B\u30E9\u30D9\u30EB\u3010" + n + "\u3011\u304C\u3042\u308A\u307E\u305B\u3093", "ET");
        return { idx: v + 1, ln: t.aLNum[v] };
      case "after":
        for (; t.aToken[++v] !== n; )
          v === a && $t.myTrace("[jump\u7CFB \u7121\u540D\u30E9\u30D9\u30EBafter] " + i + "\u884C\u76EE\u4EE5\u5F8C\u3067\u30DE\u30AF\u30ED\u5185\u306B\u30E9\u30D9\u30EB\u3010" + n + "\u3011\u304C\u3042\u308A\u307E\u305B\u3093", "ET"), t.aToken[v].search(f(this, el)) > -1 && $t.myTrace("[jump\u7CFB \u7121\u540D\u30E9\u30D9\u30EBafter] " + i + "\u884C\u76EE\u4EE5\u5F8C\u3067\u30DE\u30AF\u30ED\u5185\u306B\u30E9\u30D9\u30EB\u3010" + n + "\u3011\u304C\u3042\u308A\u307E\u305B\u3093", "ET");
        return { idx: v + 1, ln: t.aLNum[v] };
      default:
        $t.myTrace("[jump\u7CFB] \u7121\u540D\u30E9\u30D9\u30EB\u6307\u5B9A\u3010label=" + n + "\u3011\u304C\u9593\u9055\u3063\u3066\u3044\u307E\u3059", "ET");
    }
  }
  i = 1;
  const u = new RegExp(
    "^" + n.replaceAll("*", "\\*") + "(?:\\s|;|\\[|$)"
  );
  let h = !1;
  for (let v = 0; v < a; ++v) {
    (d = t.aLNum)[v] || (d[v] = i);
    const m = t.aToken[v];
    if (h) {
      f(this, rl).lastIndex = 0, f(this, rl).test(m) ? h = !1 : i += ((p = m.match(/\n/g)) != null ? p : []).length;
      continue;
    }
    const _ = m.charCodeAt(0);
    if (_ === 10) {
      i += m.length;
      continue;
    }
    if (_ === 42) {
      if (m.search(u) > -1)
        return { idx: v + 1, ln: i };
      continue;
    }
    _ === 91 && (i += ((g = m.match(/\n/g)) != null ? g : []).length, f(this, ma).lastIndex = 0, f(this, ma).test(m) && (h = !0));
  }
  throw h ? "[let_ml]\u306E\u7D42\u7AEF\u30FB[endlet_ml]\u304C\u3042\u308A\u307E\u305B\u3093" : ($t.myTrace(`[jump\u7CFB] \u30E9\u30D9\u30EB\u3010${n}\u3011\u304C\u3042\u308A\u307E\u305B\u3093`, "ET"), "Dummy");
}, kr = new WeakMap(), _g = new WeakSet(), aS = function(t) {
  const e = f(this, fs).matchToken(t.replace(/(\r\n|\r)/g, `
`));
  for (let n = e.length - 1; n >= 0; --n) {
    const s = e[n];
    if (f(this, ma).lastIndex = 0, f(this, ma).test(s)) {
      const a = s.indexOf("]") + 1;
      if (a === 0)
        throw "[let_ml]\u3067\u9589\u3058\u308B\u3010]\u3011\u304C\u3042\u308A\u307E\u305B\u3093";
      const o = s.slice(0, a), u = s.slice(a);
      e.splice(n, 1, o, u);
    }
  }
  T(this, Nt, { aToken: e, len: e.length, aLNum: [] });
  let i = "";
  try {
    i = "ScriptIterator.replaceScriptChar2macro", f(this, fs).replaceScr_C2M_And_let_ml(f(this, Nt)), i = "ScriptIterator.replaceScript_Wildcard", f(this, cd).call(this);
  } catch (n) {
    n instanceof Error ? i += `\u4F8B\u5916 mes=${n.message}(${n.name})` : i = n, this.main.errScript(i, !1);
  }
  f(this, kr)[f(this, Wt)] = f(this, Nt), this.val.loadScrWork(f(this, Wt));
}, ud = new WeakSet(), wb = function(t) {
  T(this, Wt, t.fn), T(this, mt, t.idx);
  const e = f(this, kr)[f(this, Wt)];
  e && T(this, Nt, e), T(this, ce, f(this, Nt).aLNum[t.idx]);
}, hd = new WeakMap(), ld = new WeakMap(), cd = new WeakMap(), yg = new WeakSet(), oS = function() {
  const t = this.val.getAreaKidoku(f(this, Wt));
  if (!t)
    throw `recordKidoku fn:'${f(this, Wt)}' (areas === null)`;
  if (f(this, le).length > 0) {
    t.record(f(this, mt));
    return;
  }
  T(this, bn, t.search(f(this, mt))), this.val.setVal_Nochk("tmp", "const.sn.isKidoku", f(this, bn)), !f(this, bn) && t.record(f(this, mt));
}, bn = new WeakMap(), fd = new WeakSet(), Tb = function() {
  var t;
  (t = this.val.getAreaKidoku(f(this, Wt))) == null || t.erase(f(this, mt)), T(this, bn, !1);
}, bg = new WeakSet(), uS = function(t) {
  return f(this, fs).bracket2macro(t, f(this, Nt), f(this, mt)), !1;
}, xg = new WeakSet(), hS = function(t) {
  return f(this, fs).char2macro(t, this.hTag, f(this, Nt), f(this, mt)), !1;
}, Eg = new WeakSet(), lS = function(t) {
  var s, a, o;
  const { name: e } = t;
  if (!e)
    throw "name\u306F\u5FC5\u9808\u3067\u3059";
  if (e in this.hTag)
    throw `[${e}]\u306F\u30BF\u30B0\u304B\u3059\u3067\u306B\u5B9A\u7FA9\u6E08\u307F\u306E\u30DE\u30AF\u30ED\u3067\u3059`;
  const i = f(this, ce), n = new lT(f(this, Wt), f(this, mt));
  for (T(this, il, f(this, il) + ("|" + e)), T(this, Vo, new RegExp(`\\[(${f(this, il)})\\b`)), this.hTag[e] = (u) => (u.design_unit = t.design_unit, S(this, rd, yb).call(this, { ...u, ":hMp": this.val.cloneMp() }), this.val.setMp(u), this.val.setVal_Nochk("mp", "const.sn.macro", JSON.stringify(t)), this.val.setVal_Nochk("mp", "const.sn.me_call_scriptFn", f(this, Wt)), T(this, ce, i), S(this, ud, wb).call(this, n), !1); f(this, mt) < f(this, Nt).len; ++sr(this, mt)._) {
    (s = f(this, Nt).aLNum)[a = f(this, mt)] || (s[a] = f(this, ce));
    const u = f(this, Nt).aToken[f(this, mt)];
    if (u.search(f(this, el)) > -1)
      return ++sr(this, mt)._, !1;
    const h = u.charCodeAt(0);
    h === 10 ? T(this, ce, f(this, ce) + u.length) : h === 91 && T(this, ce, f(this, ce) + ((o = u.match(/\n/g)) != null ? o : []).length);
  }
  throw `\u30DE\u30AF\u30ED[${e}]\u5B9A\u7FA9\u306E\u7D42\u7AEF\u30FB[endmacro]\u304C\u3042\u308A\u307E\u305B\u3093`;
}, il = new WeakMap(), Vo = new WeakMap(), wg = new WeakSet(), cS = function(t) {
  if (!("place" in t))
    throw "place\u306F\u5FC5\u9808\u3067\u3059";
  const e = Number(t.place);
  if ("fn" in t != "label" in t)
    throw "fn\u3068label\u306F\u30BB\u30C3\u30C8\u3067\u6307\u5B9A\u3057\u3066\u4E0B\u3055\u3044";
  const i = this.val.getMark(e);
  if (!i)
    throw `place\u3010${e}\u3011\u306F\u5B58\u5728\u3057\u307E\u305B\u3093`;
  return S(this, nl, ev).call(this, t, i);
}, nl = new WeakSet(), ev = function(t, e, i = !0) {
  this.hTag.clear_event({}), this.val.mark2save(e), this.val.setMp({}), f(this, li).recText("", !0), i && this.sndMng.playLoopFromSaveObj(), pt(t, "do_rec", !0) && T(this, Ci, {
    hSave: this.val.cloneSave(),
    hPages: { ...e.hPages },
    aIfStk: [...e.aIfStk]
  });
  const n = {
    enabled: this.val.getVal("save:const.sn.autowc.enabled"),
    text: this.val.getVal("save:const.sn.autowc.text"),
    time: Number(this.val.getVal("save:const.sn.autowc.time"))
  };
  this.hTag.autowc(n);
  const s = String(this.val.getVal("save:const.sn.scriptFn")), a = Number(this.val.getVal("save:const.sn.scriptIdx"));
  return T(this, Xr, [...f(this, Ci).aIfStk]), T(this, le, []), f(this, li).cover(!0), f(this, li).stopAllTw(), "index" in t ? (f(this, li).playback(f(this, Ci).hPages, () => {
    var o, u;
    f(this, li).cover(!1), T(this, Xo, !0), S(this, gs, to).call(this, (o = t.fn) != null ? o : s, "", (u = t.index) != null ? u : a);
  }), !0) : (delete f(this, kr)[s], f(this, li).playback(
    f(this, Ci).hPages,
    "label" in t ? () => {
      f(this, li).cover(!1), T(this, Wt, s), T(this, mt, a), this.hTag.call({ fn: t.fn, label: t.label });
    } : () => {
      f(this, li).cover(!1), S(this, gs, to).call(this, s, "", a);
    }
  ), !0);
}, Xo = new WeakMap(), Tg = new WeakSet(), fS = function(t) {
  const e = this.val.getMark(0);
  return delete f(this, kr)[vc(e.hSave["const.sn.scriptFn"])], t.do_rec = !1, S(this, nl, ev).call(this, t, e, !1);
}, Ci = new WeakMap(), Cg = new WeakSet(), dS = function() {
  if (this.main.isDestroyed())
    return !1;
  const { fn: t, idx: e } = S(this, sl, rv).call(this);
  return this.val.setVal_Nochk("save", "const.sn.scriptFn", t), this.val.setVal_Nochk("save", "const.sn.scriptIdx", e), T(this, Ci, {
    hSave: this.val.cloneSave(),
    hPages: f(this, li).record(),
    aIfStk: f(this, Xr).slice(f(this, le).length)
  }), !1;
}, sl = new WeakSet(), rv = function() {
  if (f(this, le).length === 0)
    return {
      fn: f(this, Wt),
      idx: f(this, mt)
    };
  const e = f(this, le)[0];
  return {
    fn: e.fn,
    idx: e.idx
  };
}, Ig = new WeakSet(), pS = function(t) {
  var n;
  if (!("place" in t))
    throw "place\u306F\u5FC5\u9808\u3067\u3059";
  const e = Number(t.place);
  delete t[":\u30BF\u30B0\u540D"], delete t.place, t.text = ((n = t.text) != null ? n : "").replace(/^(<br\/>)+/, ""), f(this, Ci).json = t, this.val.setMark(e, f(this, Ci));
  const i = Number(this.val.getVal("sys:const.sn.save.place"));
  return e === i && this.val.setVal_Nochk("sys", "const.sn.save.place", i + 1), !1;
}, Ii = new WeakMap(), pr = new WeakMap(), I(Au, sg, /(.+)\/crypto_prj\/([^\/]+)\/[^\.]+(\.\w+)/), I(Au, zo, {}), I(Au, ps, {});
var Wr, Yr, xr, Ri, ms, Wo, Er, dd, _s, al, _a, ol, ul, Yo, Rg, vS, hl, ll, qo, cl, iv, ya, Zo;
class t6 {
  constructor(t) {
    I(this, Rg);
    I(this, cl);
    I(this, Wr, void 0);
    I(this, Yr, void 0);
    I(this, xr, void 0);
    I(this, Ri, void 0);
    I(this, ms, void 0);
    I(this, Wo, void 0);
    I(this, Er, void 0);
    I(this, dd, void 0);
    I(this, _s, void 0);
    I(this, al, void 0);
    I(this, _a, void 0);
    I(this, ol, void 0);
    I(this, ul, void 0);
    I(this, Yo, void 0);
    I(this, hl, void 0);
    I(this, ll, void 0);
    I(this, qo, void 0);
    I(this, ya, void 0);
    I(this, Zo, void 0);
    this.sys = t, T(this, xr, /* @__PURE__ */ Object.create(null)), T(this, _a, () => {
    }), T(this, ol, new uL()), T(this, ul, !1), T(this, Yo, "skynovel"), T(this, hl, () => f(this, _a).call(this)), T(this, ll, (e = S(this, cl, iv)) => {
      f(this, ya) || (f(this, _s).clearBreak(), T(this, _a, e), this.resume = (i = S(this, cl, iv)) => {
        T(this, _a, i);
      }, f(this, Er).noticeBreak(!1));
    }), this.resume = f(this, ll), this.stop = () => {
      T(this, _a, () => {
      }), this.resume = f(this, ll), f(this, Er).noticeBreak(!0);
    }, T(this, qo, !0), T(this, ya, !1), this.isDestroyed = () => f(this, ya), iP(), hr.generate(t).then((e) => T(this, Wr, e)).then(() => S(this, Rg, vS).call(this)).catch((e) => console.error("load err fn:prj.json e:%o", e));
  }
  errScript(t, e = !0) {
    if (this.stop(), $t.myTrace(t), Y.debugLog && console.log("\u{1F35C} SKYNovel err!"), e)
      throw t;
  }
  resumeByJumpOrCall(t) {
    var e, i;
    if (t.url) {
      globalThis.open(t.url);
      return;
    }
    f(this, Ri).setVal_Nochk("tmp", "sn.eventArg", (e = t.arg) != null ? e : ""), f(this, Ri).setVal_Nochk("tmp", "sn.eventLabel", (i = t.label) != null ? i : ""), pt(t, "call", !1) ? (f(this, Er).subIdxToken(), this.resume(() => f(this, xr).call(t))) : (f(this, xr).clear_event({}), this.resume(() => f(this, xr).jump(t)));
  }
  setLoop(t, e = "") {
    T(this, qo, t) ? this.resume() : this.stop(), this.sys.setTitleInfo(e ? ` -- ${e}\u4E2D` : "");
  }
  fire(t, e) {
    f(this, al).fire(t, e);
  }
  async destroy(t = 0) {
    f(this, ya) || (T(this, ya, !0), f(this, ul) && (this.stop(), T(this, qo, !1), f(this, _s).before_destroy(), t > 0 && await new Promise((e) => setTimeout(e, t)), T(this, xr, {}), f(this, al).destroy(), f(this, Er).destroy(), f(this, _s).destroy(), f(this, dd).destroy(), f(this, Yr).ticker.remove(f(this, hl)), f(this, Zo) && f(this, Yr) && f(this, Yr).view.parentNode.appendChild(f(this, Zo)), JO(), f(this, Yr).destroy(!0), this.sys.destroy()));
  }
}
Wr = new WeakMap(), Yr = new WeakMap(), xr = new WeakMap(), Ri = new WeakMap(), ms = new WeakMap(), Wo = new WeakMap(), Er = new WeakMap(), dd = new WeakMap(), _s = new WeakMap(), al = new WeakMap(), _a = new WeakMap(), ol = new WeakMap(), ul = new WeakMap(), Yo = new WeakMap(), Rg = new WeakSet(), vS = async function() {
  var n, s, a;
  const t = (n = document.createElement("canvas")) == null ? void 0 : n.getContext("2d");
  if (!t)
    throw "argChk_Color err";
  Y.cc4ColorName = t;
  const e = {
    width: f(this, Wr).oCfg.window.width,
    height: f(this, Wr).oCfg.window.height,
    backgroundColor: Cb(String(f(this, Wr).oCfg.init.bg_color)),
    resolution: (s = globalThis.devicePixelRatio) != null ? s : 1,
    autoResize: !0
  }, i = document.getElementById(f(this, Yo));
  i && (T(this, Zo, i.cloneNode(!0)), f(this, Zo).id = f(this, Yo), e.view = i), T(this, Yr, new cC(e)), i || (document.body.appendChild(f(this, Yr).view), f(this, Yr).view.id = f(this, Yo)), T(this, Ri, new Op(f(this, Wr), f(this, xr))), T(this, ms, new ao(f(this, Ri), (a = f(this, Wr).oCfg.init.escape) != null ? a : "\\")), await Promise.allSettled(this.sys.init(f(this, xr), f(this, Yr), f(this, Ri), this)), f(this, xr).title({ text: f(this, Wr).oCfg.book.title || "SKYNovel" }), T(this, Wo, new kp(f(this, Wr), f(this, xr), f(this, Ri), this, this.sys)), T(this, Er, new Au(f(this, Wr), f(this, xr), this, f(this, Ri), f(this, ol), () => S(this, cl, iv).call(this), f(this, ms), f(this, Wo), this.sys)), T(this, dd, new $t(this.sys, f(this, xr), f(this, Er))), T(this, _s, new Nc(f(this, Wr), f(this, xr), f(this, Yr), f(this, Ri), this, f(this, Er), this.sys, f(this, Wo), f(this, ol), f(this, ms))), T(this, al, new QG(f(this, Wr), f(this, xr), f(this, Yr), this, f(this, _s), f(this, Ri), f(this, Wo), f(this, Er), this.sys)), f(this, Yr).ticker.add(f(this, hl)), this.resumeByJumpOrCall({ fn: "main" }), T(this, ul, !0);
}, hl = new WeakMap(), ll = new WeakMap(), qo = new WeakMap(), cl = new WeakSet(), iv = function() {
  var t;
  for (; f(this, qo); ) {
    let e = f(this, Er).nextToken();
    if (!e)
      break;
    const i = e.charCodeAt(0);
    if (i !== 9) {
      if (i === 10) {
        f(this, Er).addLineNum(e.length);
        continue;
      }
      if (i === 91) {
        if (f(this, Er).isBreak(e))
          return;
        try {
          const n = ((t = e.match(/\n/g)) != null ? t : []).length;
          if (n > 0 && f(this, Er).addLineNum(n), f(this, Er).\u30BF\u30B0\u89E3\u6790(e)) {
            this.stop();
            break;
          }
          continue;
        } catch (n) {
          n instanceof Error ? this.errScript(`[${Pp(e)}]\u30BF\u30B0\u89E3\u6790\u4E2D\u4F8B\u5916 mes=${n.message}(${n.name})`, !1) : this.errScript(String(n), !1);
          return;
        }
      }
      if (i === 38)
        try {
          if (e.slice(-1) !== "&") {
            if (f(this, Er).isBreak(e))
              return;
            const n = aL(e.slice(1));
            n.name = f(this, ms).getValAmpersand(n.name), n.text = String(f(this, ms).parse(n.text)), f(this, xr).let(n);
            continue;
          }
          if (e.charAt(1) === "&")
            throw new Error("\u300C&\u8868\u793A&\u300D\u66F8\u5F0F\u3067\u306F\u300C&\u300D\u6307\u5B9A\u304C\u4E0D\u8981\u3067\u3059");
          e = String(f(this, ms).parse(e.slice(1, -1)));
        } catch (n) {
          this.errScript(
            n instanceof Error ? `& \u5909\u6570\u64CD\u4F5C\u30FB\u8868\u793A mes=${n.message}(${n.name})` : n,
            !1
          );
          return;
        }
      else {
        if (i === 59)
          continue;
        if (i === 42 && e.length > 1)
          continue;
      }
      try {
        f(this, _s).currentTxtlayForeNeedErr.tagCh(e);
      } catch (n) {
        this.errScript(
          n instanceof Error ? `\u6587\u5B57\u8868\u793A mes=${n.message}(${n.name})` : n,
          !1
        );
        return;
      }
    }
  }
}, ya = new WeakMap(), Zo = new WeakMap();
const { to_app: ue } = window;
var Qe, fl, dl, pl, nv;
class i6 extends sL {
  constructor(e = {}, i = { cur: "prj/", crypto: !1, dip: "" }) {
    super(e, i);
    I(this, pl);
    I(this, Qe, void 0);
    I(this, fl, void 0);
    I(this, dl, void 0);
    T(this, Qe, {
      getAppPath: "",
      isPackaged: !1,
      downloads: "",
      userData: "",
      getVersion: "",
      env: {},
      platform: "",
      arch: ""
    }), this.readFileSync = ue.readFileSync, this.writeFileSync = ue.writeFileSync, this.appendFile = ue.appendFile, this.ensureFileSync = ue.ensureFileSync, this.$path_userdata = "", this.$path_downloads = "", T(this, fl, () => ue.Store({
      cwd: this.$path_userdata + "storage",
      name: this.arg.crypto ? "data_" : "data",
      encryptionKey: this.arg.crypto ? this.stk() : void 0
    })), this.copyBMFolder = async (n, s) => {
      const a = `${this.$path_userdata}storage/${n}/`, o = `${this.$path_userdata}storage/${s}/`;
      !await ue.existsSync(a) || ue.copySync(a, o);
    }, this.eraseBMFolder = async (n) => {
      await ue.removeSync(`${this.$path_userdata}storage/${n}/`);
    }, this.close = () => (ue.win_close(), !1), this._export = () => (ue.zip(
      this.$path_userdata + "storage/",
      this.$path_downloads + (this.crypto ? "" : "no_crypto_") + this.cfg.getNs() + Mc("-", "_", "") + ".spd"
    ), Y.debugLog && console.log("\u30D7\u30EC\u30A4\u30C7\u30FC\u30BF\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3057\u305F"), this.fire("sn:exported", new Event("click")), !1), this._import = () => {
      const n = this.flush;
      return new Promise((s, a) => {
        const o = document.createElement("input");
        o.type = "file", o.accept = ".spd, text/plain", o.onchange = () => {
          o.files ? s(o.files[0].path) : a();
        }, o.click();
      }).then(async (s) => {
        this.flush = () => {
        }, ue.unzip(s, this.$path_userdata + "storage/"), await f(this, fl).call(this);
        const a = await ue.Store_get();
        this.data.sys = a.sys, this.data.mark = a.mark, this.data.kidoku = a.kidoku, this.flush = n, this.flush(), this.val.updateData(a), Y.debugLog && console.log("\u30D7\u30EC\u30A4\u30C7\u30FC\u30BF\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3057\u305F"), this.fire("sn:imported", new Event("click"));
      }), !1;
    }, this.navigate_to = (n) => {
      const { url: s } = n;
      if (!s)
        throw "[navigate_to] url\u306F\u5FC5\u9808\u3067\u3059";
      return ue.navigate_to(s), !1;
    }, this.tglFlscr_sub = async () => ue.setSimpleFullScreen(
      this.isFullScr = !await ue.isSimpleFullScreen()
    ), this.update_check = (n) => {
      const { url: s } = n;
      if (!s)
        throw "[update_check] url\u306F\u5FC5\u9808\u3067\u3059";
      if (s.slice(-1) !== "/")
        throw "[update_check] url\u306E\u6700\u5F8C\u306F/\u3067\u3059";
      return Y.debugLog && $t.myTrace(`[update_check] url=${s}`, "D"), (async () => {
        var p;
        let a = {}, o = "", u = "";
        const h = await this.fetch(s + "_index.json");
        if (h.ok)
          Y.debugLog && $t.myTrace("[update_check] _index.json\u3092\u53D6\u5F97\u3057\u307E\u3057\u305F", "D"), a = await h.json(), u = a.version;
        else {
          const g = await this.fetch(s + `latest${Y.isMac ? "-mac" : ""}.yml`);
          if (!g.ok) {
            Y.debugLog && $t.myTrace("[update_check] [update_check] .yml\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093");
            return;
          }
          Y.debugLog && $t.myTrace("[update_check] .yml\u3092\u53D6\u5F97\u3057\u307E\u3057\u305F", "D"), o = await g.text();
          const v = /version: (.+)/.exec(o);
          if (!v)
            throw "[update_check] .yml \u306B version \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093";
          u = v[1];
        }
        const l = f(this, Qe).getVersion;
        if (Y.debugLog && $t.myTrace(`[update_check] \u73FE\u5728ver=${l} \u65B0\u898Fver=${u}`, "D"), u === l) {
          Y.debugLog && $t.myTrace("[update_check] \u30D0\u30FC\u30B8\u30E7\u30F3\u66F4\u65B0\u306A\u3057", "I");
          return;
        }
        const c = {
          title: "\u30A2\u30D7\u30EA\u66F4\u65B0",
          icon: f(this, Qe).getAppPath + "/app/icon.png",
          buttons: ["OK", "Cancel"],
          defaultId: 0,
          cancelId: 1,
          message: `\u30A2\u30D7\u30EA\u3010${this.cfg.oCfg.book.title}\u3011\u306B\u66F4\u65B0\u304C\u3042\u308A\u307E\u3059\u3002
\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u307E\u3059\u304B\uFF1F`,
          detail: `\u73FE\u5728 NOW ver ${l}
\u65B0\u898F NEW ver ${u}`
        };
        if (!((await ue.showMessageBox(c)).response > 0)) {
          if (Y.debugLog && $t.myTrace("[update_check] \u30A2\u30D7\u30EA\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u958B\u59CB", "D"), h.ok) {
            const g = f(this, Qe).platform + "_" + f(this, Qe).arch;
            let v = a[g];
            if (v)
              await S(this, pl, nv).call(this, s, g + "-" + v.cn, v.path);
            else {
              let m = "";
              const _ = [], y = new RegExp("^" + f(this, Qe).platform + "_");
              for (const x in a) {
                if (!y.test(x))
                  continue;
                const w = a[x];
                m += `
- ` + w.path, _.push({ url: s, urlApp: x + "-" + w.cn, fn: String(w.path) });
              }
              if (c.message = `CPU = ${f(this, Qe).arch}
\u306B\u5BFE\u5FDC\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002\u540C\u3058OS\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u3059\u3079\u3066\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u307E\u3059\u304B\uFF1F`, c.detail = _.length + " \u500B\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u307E\u3059" + m, (await ue.showMessageBox(c)).response > 0)
                return;
              await Promise.allSettled(_.map((x) => S(this, pl, nv).call(this, x.url, x.urlApp, x.fn)));
            }
          } else {
            const g = /path: (.+)/.exec(o);
            if (!g)
              throw "[update_check] path \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093";
            const v = g[1];
            Y.debugLog && $t.myTrace(`[update_check] path=${v}`, "D");
            const m = /sha512: (.+)/.exec(o);
            if (!m)
              throw "[update_check] sha512 \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093";
            const _ = m[1];
            Y.debugLog && $t.myTrace(`[update_check] sha=${_}=`, "D");
            const y = (p = /(.+)(\.\w+)/.exec(v)) != null ? p : ["", "", ""];
            await S(this, pl, nv).call(this, s, y[1] + "-" + f(this, Qe).arch + y[2], v);
          }
          Y.debugLog && $t.myTrace("\u30A2\u30D7\u30EA\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F", "D"), c.buttons.pop(), c.message = `\u30A2\u30D7\u30EA\u3010${this.cfg.oCfg.book.title}\u3011\u306E\u66F4\u65B0\u30D1\u30C3\u30B1\u30FC\u30B8\u3092
\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u307E\u3057\u305F`, ue.showMessageBox(c);
        }
      })(), !1;
    }, this.window = (n) => {
      const s = tt(n, "x", Number(this.val.getVal("sys:const.sn.nativeWindow.x", 0))), a = tt(n, "y", Number(this.val.getVal("sys:const.sn.nativeWindow.y", 0)));
      return ue.window(pt(n, "centering", !1), s, a, Y.stageW, Y.stageH), this.val.setVal_Nochk("sys", "const.sn.nativeWindow.x", s), this.val.setVal_Nochk("sys", "const.sn.nativeWindow.y", a), this.flush(), !1;
    }, this.canCapturePage = (n) => (ue.capturePage(n), !0), globalThis.addEventListener("DOMContentLoaded", async () => this.loaded(e, i), { once: !0, passive: !0 });
  }
  async loaded(e, i) {
    var n;
    await super.loaded(e, i), T(this, Qe, await ue.getInfo()), Y.isPackaged = f(this, Qe).isPackaged, this.arg = i = { ...i, cur: f(this, Qe).getAppPath.replaceAll("\\", "/") + (Y.isPackaged ? "/doc/" : "/") + i.cur }, this.$path_downloads = f(this, Qe).downloads.replaceAll("\\", "/") + "/", Y.isDbg = Boolean(f(this, Qe).env.SKYNOVEL_DBG) && !Y.isPackaged, Y.isDbg && (this.extPort = vi((n = f(this, Qe).env.SKYNOVEL_PORT) != null ? n : "3776")), this.run();
  }
  initVal(e, i, n) {
    i["const.sn.isDebugger"] = !1, i["const.sn.screenResolutionX"] = screen.width, i["const.sn.screenResolutionY"] = screen.height, this.$path_userdata = Y.isDbg ? f(this, Qe).getAppPath.slice(0, -3) + ".vscode/" : f(this, Qe).userData.replaceAll("\\", "/") + "/", this.flush = () => ue.flush(this.data), f(this, fl).call(this).then(async () => {
      var u, h;
      const s = i["const.sn.isFirstBoot"] = await ue.Store_isEmpty();
      if (s)
        this.data.sys = e.sys, this.data.mark = e.mark, this.data.kidoku = e.kidoku, this.flush();
      else {
        const l = await ue.Store_get();
        this.data.sys = l.sys, this.data.mark = l.mark, this.data.kidoku = l.kidoku;
      }
      const a = (u = this.data.sys["const.sn.nativeWindow.x"]) != null ? u : 0, o = (h = this.data.sys["const.sn.nativeWindow.y"]) != null ? h : 0;
      ue.window(s, a, o, Y.stageW, Y.stageH), ue.on("save_win_pos", (l, c, d) => {
        this.val.setVal_Nochk("sys", "const.sn.nativeWindow.x", c), this.val.setVal_Nochk("sys", "const.sn.nativeWindow.y", d), this.flush();
      }), n(this.data);
    });
  }
  async run() {
    f(this, dl) && (f(this, dl).destroy(10), await new Promise((i) => setTimeout(i, 10))), T(this, dl, new t6(this));
  }
  init(e, i, n, s) {
    super.init(e, i, n, s);
    const a = new Event("click");
    return ue.on("fire", (o, u) => s.fire(u, a)), this.cfg.oCfg.debug.devtool ? ue.openDevTools() : ue.win_ev_devtools_opened(() => {
      console.error("DevTool\u306F\u7981\u6B62\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u8A31\u53EF\u3059\u308B\u5834\u5408\u306F\u3010\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u8A2D\u5B9A\u3011\u306E\u3010devtool\u3011\u3092ON\u306B\u3002"), s.destroy();
    }), [];
  }
  cvsResize() {
    super.cvsResize();
    const e = this.appPixi.view, i = e.parentElement.style, n = e.style;
    this.isFullScr ? (i.position = "", i.width = "", i.height = "", n.position = "fixed", n.left = `${this.ofsLeft4elm}px`, n.top = `${this.ofsTop4elm}px`) : (i.position = "relative", i.width = `${this.cvsWidth}px`, i.height = `${this.cvsHeight}px`, n.position = "relative", n.left = "", n.top = "");
  }
  titleSub(e) {
    ue.win_setTitle(e);
  }
}
Qe = new WeakMap(), fl = new WeakMap(), dl = new WeakMap(), pl = new WeakSet(), nv = async function(e, i, n) {
  Y.debugLog && $t.myTrace(`[update_check] \u30A2\u30D7\u30EA\u30D5\u30A1\u30A4\u30EBDL\u8A66\u884C... url=${e + i}`, "D");
  const s = await this.fetch(e + i);
  if (!s.ok) {
    Y.debugLog && $t.myTrace(`[update_check] \u30A2\u30D7\u30EA\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093 url=${e + n}`);
    return;
  }
  const a = f(this, Qe).downloads + "/" + n;
  Y.debugLog && $t.myTrace(`[update_check] pathDL=${a}`, "D");
  const o = await s.arrayBuffer();
  await this.writeFileSync(a, new DataView(o));
};
export {
  Y as CmnLib,
  Rr as Layer,
  i6 as SysApp,
  pt as argChk_Boolean,
  tt as argChk_Num
};
//# sourceMappingURL=app.js.map
