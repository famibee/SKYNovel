{"version":3,"file":"Main.js","names":["#init","sys: SysBase","hApp: IApplicationOptions","#aDest","#hTag","#setVal_Nochk","#getValAmpersand","#parse","#scrItr","#layMng","#evtMng","#isLoop","#main"],"sources":["../src/sn/Main.ts"],"sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2018-2025 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport {CmnLib, argChk_Boolean, parseColor} from './CmnLib';\nimport type {T_HTag, TArg} from './Grammar';\nimport type {T_Main, Scope, T_VAL_BSNU, T_VAL_DATA} from './CmnInterface';\nimport type {SysBase} from './SysBase';\nimport {DebugMng} from './DebugMng';\nimport {Config} from './Config';\nimport {splitAmpersand, tagToken2Name_Args} from './Grammar';\nimport type {ScriptIterator} from './ScriptIterator';\nimport type {LayerMng} from './LayerMng';\nimport type {EventMng} from './EventMng';\n\nimport {type IApplicationOptions, Application, utils} from 'pixi.js';\n\n\nconst\tSN_ID\t= 'skynovel';\n\n\nexport class Main implements T_Main {\n\tstatic\tasync generate(sys: SysBase): Promise<Main> {\n\t\tutils.skipHello();\n\n\t\tconst m = new Main(sys);\n\t\tawait m.#init()\n\t\t.catch((e: unknown)=> console.error('Main.generate err e:%o', e));\n\n\t\treturn m;\n\t}\n\n\n\tcvs\t\t\t: HTMLCanvasElement;\n\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\t#hTag\t\t: T_HTag\t\t= Object.create(null);\t// „Çø„Ç∞Âá¶ÁêÜËæûÊõ∏\n\n\t#scrItr\t\t: ScriptIterator;\n\t#layMng\t\t: LayerMng;\n\t#evtMng\t\t: EventMng;\n\n\t#aDest\t\t: (()=> void)[]\t\t= [];\n\n\n\tprivate constructor(private readonly sys: SysBase) {}\n\n\tasync #init() {\n\t\tconst cfg = await Config.generate(this.sys);\n\t\tthis.sys.setMain(this, cfg);\n\n\t\tconst hApp: IApplicationOptions = {\n\t\t\twidth\t\t\t: cfg.oCfg.window.width,\n\t\t\theight\t\t\t: cfg.oCfg.window.height,\n\t\t\tbackgroundColor\t: parseColor(String(cfg.oCfg.init.bg_color)),\n\t\t\t\t// „Åì„ÅÆString()„ÅØÂæåÊñπ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅÂøÖÈ†à\n\t\t\tresolution\t\t: globalThis.devicePixelRatio,\n\t\t};\n\n\t\tconst cvs = <HTMLCanvasElement | null>document.getElementById(SN_ID);\n\t\tif (cvs) {\n\t\t\tconst clone_cvs = <HTMLCanvasElement>cvs.cloneNode(true);\n\t\t\tclone_cvs.id = SN_ID;\n\t\t\thApp.view = cvs;\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\tconst p = cvs.parentNode!;\n\t\t\tthis.#aDest.unshift(()=> p.appendChild(clone_cvs));\n\t\t}\n\t\telse {\t// Ëá™ÂãïÁöÑ„Å´‰Ωú„Å£„Å¶„Åè„Çå„Çã„Åå„ÄÅ„Å©„ÅÜ„ÇÇ appendChild „Å´ÈÅÖÂª∂„Åå„ÅÇ„Çã„ÅÆ„Åß\n\t\t\tconst c = document.createElement('canvas');\n\t\t\tc.id = SN_ID;\n\t\t\thApp.view = c;\n\t\t\tdocument.body.appendChild(c);\n\t\t\tthis.#aDest.unshift(()=> document.body.removeChild(c));\n\t\t}\n\n\t\tconst app = new Application(hApp);\n\t\tthis.#aDest.unshift(()=> {\n\t\t\tutils.clearTextureCache();\n\t\t\tthis.sys.destroy();\n\t\t\tapp.destroy(false);\t// remove canvas from DOM „ÅåÈùûÂêåÊúü„Å™„ÅÆ„Åß„Ç¶„ÉÅ„Åå„ÇÑ„Çã\n\t\t});\n\n\t\tthis.cvs = app.view;\n\t\tthis.cvs.id = SN_ID +'_act';\n\t\tif (! cvs) document.body.appendChild(this.cvs);\n\n\n\t\tconst cc = document.createElement('canvas').getContext('2d');\n\t\tif (! cc) throw '#init cc err';\n\t\tCmnLib.cc4ColorName = cc;\n\n\t\tconst [{Variable}, {PropParser}, {SoundMng}, {ScriptIterator}, {LayerMng}, {EventMng}, {Button}] = await Promise.all([\n\t\t\timport('./Variable'),\n\t\t\timport('./PropParser'),\n\t\t\timport('./SoundMng'),\n\t\t\timport('./ScriptIterator'),\n\t\t\timport('./LayerMng'),\n\t\t\timport('./EventMng'),\n\t\t\timport('./Button'),\n\t\t]);\n\n\t\tButton.init(cfg);\n\n\t\t// Â§âÊï∞\n\t\tconst val = new Variable(this.sys, cfg, this.#hTag);\n\t\tconst prpPrs = new PropParser(val, cfg.oCfg.init.escape);\n\t\tthis.#setVal_Nochk = (scope, nm, v, autocast)=> val.setVal_Nochk(scope, nm, v, autocast);\n\t\tthis.#getValAmpersand = v=> prpPrs.getValAmpersand(v);\n\t\tthis.#parse = s=> prpPrs.parse(s);\n\n\t\t// „Ç∑„Çπ„ÉÜ„É†\n\t\tawait Promise.allSettled(this.sys.init(this.#hTag, app, val));\t// Â§âÊï∞Ê∫ñÂÇôÂÆå‰∫Ü\n\n\t\t// Ôº¢ÔºßÔº≠„ÉªÂäπÊûúÈü≥\n\t\tconst sndMng = new SoundMng(cfg, this.#hTag, val, this, this.sys);\n\t\tthis.#aDest.unshift(()=> sndMng.destroy());\n\n\t\t// Êù°‰ª∂ÂàÜÂ≤ê„ÄÅ„É©„Éô„É´„Éª„Ç∏„É£„É≥„Éó„ÄÅ„Éû„ÇØ„É≠„ÄÅ„Åó„Åä„Çä\n\t\tthis.#scrItr = new ScriptIterator(cfg, this.#hTag, this, val, prpPrs, sndMng, this.sys);\n\t\tthis.#aDest.unshift(()=> this.#scrItr.destroy());\n\n\t\t// „Éá„Éê„ÉÉ„Ç∞„Éª„Åù„ÅÆ‰ªñ\n\t\tconst dbgMng = new DebugMng(this.sys, this.#hTag, this.#scrItr);\n\t\tthis.#aDest.unshift(()=> dbgMng.destroy());\n\t\tthis.errScript = (mes, isThrow)=> {\n\t\t\tthis.stop();\n\t\t\tDebugMng.myTrace(mes);\n\t\t\tif (CmnLib.debugLog) console.log('üçú SKYNovel err!');\n\t\t\tif (isThrow) throw mes;\n\t\t}\n\n\t\t// „É¨„Ç§„É§ÂÖ±ÈÄö„ÄÅÊñáÂ≠ó„É¨„Ç§„É§„ÄÅÁîªÂÉè„É¨„Ç§„É§\n\t\tthis.#layMng = new LayerMng(cfg, this.#hTag, app, val, this, this.#scrItr, this.sys, sndMng, prpPrs);\n\t\tthis.#aDest.unshift(()=> this.#layMng.destroy());\n\n\t\t// „Ç§„Éô„É≥„Éà\n\t\tthis.#evtMng = new EventMng(cfg, this.#hTag, app, this, this.#layMng, val, sndMng, this.#scrItr, this.sys);\n\t\tthis.#aDest.unshift(()=> this.#evtMng.destroy());\n\n\t\tthis.#aDest.unshift(()=> {\n\t\t\tthis.stop();\n\t\t\tthis.#isLoop = false;\n\n\t\t\tconst fncDummy = ()=> true;\n\t\t\tfor (const key in this.#hTag) this.#hTag[<keyof T_HTag>key] = fncDummy;\n\t\t});\n\t}\n\n\n\tdestroy() {\n\t\tthis.resume = this.destroy = ()=> { /* empty */ };\t// destroy()ÈÄ£ÊâìÂØæÁ≠ñ\n\n\t\tthis.cvs.parentElement?.removeChild(this.cvs);\n\t\t\t// Ôºà„ÇÆ„É£„É©„É™„Éº„ÅßÔºâdocument.body „ÅØ„Ç®„É©„Éº„Å´„Å™„Çã\n\t\tfor (const f of this.#aDest) f();\n\t\tthis.#aDest = [];\n\t}\n\n\n\terrScript = (_mes: string, _isThrow = true)=> { /* empty */ }\n\n\n\tresumeByJumpOrCall(hArg: TArg) {\n\t\tif (hArg.url) {\n\t\t\tthis.#hTag.navigate_to(hArg);\n\t\t\tthis.#scrItr.jumpJustBefore();\n\t\t\treturn;\n\t\t}\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-base-to-string\n\t\tthis.#setVal_Nochk('tmp', 'sn.eventArg', String(hArg.arg ?? ''));\n\t\tthis.#setVal_Nochk('tmp', 'sn.eventLabel', hArg.label ?? '');\n// console.log(`üìú %cresumeByJumpOrCall:%o`, 'color:#3B0;', hArg);\n\t\tif (argChk_Boolean(hArg, 'call', false)) {\n\t\t\tthis.#scrItr.subIdxToken();\t// „Äå„Ç≥„Éº„É´ÂÖÉ„ÅÆÊ¨°„Äç„Å´ÈÄ≤„ÇÅ„Åö„ÄÅ„Äå„Ç≥„Éº„É´ÂÖÉ„Äç„Å´Êàª„Åô\n\t\t\tif (this.#hTag.call(hArg)) return;\n\t\t}\n\t\telse {\n\t\t\tthis.#hTag.clear_event({});\n\t\t\tif (this.#hTag.jump(hArg)) return;\n\t\t}\n\t\tthis.resume();\n\t}\n\t\t#setVal_Nochk = (_scope: Scope, _nm: string, _val: T_VAL_BSNU, _autocast = false)=> { /* empty */ }\n\n\tresume() {\n// console.log(`üìúüü¢ resume!`);\n\t\t// „Çπ„ÇØ„É™„Éó„Éà„ÅåÂãï„Åè„Å®„Åç„ÄÅ„Éñ„É¨„Ç§„ÇØ„Éû„Éº„ÇØ„Å™„Å©Ê∂àÂéª\n\t\tthis.#layMng.clearBreak();\n\t\tthis.#scrItr.noticeBreak(false);\n\t\tthis.#evtMng.hideHint();\n\n\t\tqueueMicrotask(()=> {void this.#main()});\n\t}\n\treadonly stop = ()=> {\n// console.log(`üìúüî¥ stop!`);\n\t\tthis.#scrItr.noticeBreak(true);\n\t};\n\n\tsetLoop(isLoop: boolean, mes = '') {\n\t\t///console.log('setLoop:'+ (isLoop ?'resume!' :'stop!') +' mes:'+ mes);\n\t\t// eslint-disable-next-line no-cond-assign\n\t\tif (this.#isLoop = isLoop) this.resume(); else this.stop();\n\t\tthis.sys.setTitleInfo(mes ?` -- ${mes}‰∏≠` :'');\n\t}\n\t// oxlint-disable-next-line no-unused-private-class-members\n\t#isLoop = true;\n\n\t//MARK: „É°„Ç§„É≥Âá¶ÁêÜÔºà„Ç∑„Éä„É™„Ç™Ëß£ÊûêÔºâ\n\tasync #main() {\n\t\tlet errHd = '';\n\t\ttry {\n\t\t\twhile (this.#isLoop) {\n\t\t\t\tlet token = this.#scrItr.nextToken();\n\t\t\t\tif (! token) return;\t// ÂàùÊúüÂåñÂâç„Å´ÁµÇ‰∫Ü„Åó„ÅüÂ†¥ÂêàÂêë„Åë\n\n\t\t\t\tconst uc = token.charCodeAt(0);\t// TokenTopUnicode\n\t\t\t\t// \\t „Çø„Éñ\n\t\t\t\tif (uc === 9) continue;\n\t\t\t\t// \\n ÊîπË°å\n\t\t\t\tif (uc === 10) {this.#scrItr.addLineNum(token.length); continue}\n\t\t\t\t// [ „Çø„Ç∞ÈñãÂßã\n\t\t\t\tif (uc === 91) {\n\t\t\t\t\terrHd = '„Çø„Ç∞ÈñãÂßã';\n\t\t\t\t\tif (this.#scrItr.isBreak(token)) return;\n\n\t\t\t\t\tconst [tag_name, args] = tagToken2Name_Args(token);\n\t\t\t\t\terrHd = `[${tag_name}]‰æãÂ§ñ`;\n\n\t\t\t\t\tconst cl = (token.match(/\\n/g) ?? []).length;\n\t\t\t\t\tif (cl > 0) this.#scrItr.addLineNum(cl);\n\t\t\t\t\tif (await this.#scrItr.„Çø„Ç∞Ëß£Êûê(\n\t\t\t\t\t\t<keyof T_HTag>tag_name, args\n\t\t\t\t\t)) {this.stop(); return}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// & Â§âÊï∞Êìç‰Ωú„ÉªÂ§âÊï∞Ë°®Á§∫\n\t\t\t\t// anÊôÇ‰ª£„ÉªÁÄ¨Êà∏ÊÑõÁæÖ„Åï„Çì„Çà„Çä https://famibee.blog.fc2.com/blog-entry-245.html\n\t\t\t\tif (uc === 38) {\n\t\t\t\t\tif (! token.endsWith('&')) {\n\t\t\t\t\t\terrHd = 'Â§âÊï∞Ë®àÁÆó';\n\t\t\t\t\t\tif (this.#scrItr.isBreak(token)) return;\n\t\t\t\t\t\tconst o = splitAmpersand(token.slice(1));\n\t\t\t\t\t\to.name = this.#getValAmpersand(o.name);\n\t\t\t\t\t\to.text = String(this.#parse(o.text));\n\t\t\t\t\t\tthis.#hTag.let(o);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\terrHd = 'Â§âÊï∞Êìç‰Ωú';\n\t\t\t\t\tif (token.charAt(1) === '&') throw new Error('„Äå&Ë°®Á§∫&„ÄçÊõ∏Âºè„Åß„ÅØ„Äå&„ÄçÊåáÂÆö„Åå‰∏çË¶Å„Åß„Åô');\n\t\t\t\t\ttoken = String(this.#parse( token.slice(1, -1) ));\n\t\t\t\t\t\t// -> ÊñáÂ≠óË°®Á§∫ „Å∏\n\t\t\t\t}\n\t\t\t\t// ; „Ç≥„É°„É≥„Éà\n\t\t\t\telse if (uc === 59) continue;\n\t\t\t\t// * „É©„Éô„É´\n\t\t\t\telse if (uc === 42 && token.length > 1) continue;\n\n\t\t\t\t// ÊñáÂ≠óË°®Á§∫\n\t\t\t\terrHd = 'ÊñáÂ≠óË°®Á§∫';\n\t\t\t\tthis.#layMng.setNormalChWait();\n\t\t\t\tconst tl = this.#layMng.currentTxtlayForeNeedErr;\n\t\t\t\ttl.tagCh(token);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.errScript(`${errHd} ${\n\t\t\t\te instanceof Error ?`mes=${e.message}(${e.name})` :String(e)\n\t\t\t}`, false);\n\t\t}\n\t}\n\t\t#getValAmpersand\t= (_v: string)=> '';\n\t\t#parse\t\t\t\t: (_s: string)=> T_VAL_DATA;\n\n}\n"],"mappings":"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"}