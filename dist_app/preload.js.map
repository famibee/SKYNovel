{"version":3,"file":"preload.js","names":["hProc\t: HPROC"],"sources":["../src/preload.ts"],"sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2021-2025 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {T_HINFO} from './appMain_cmn';\nimport type {T_Data4Vari} from './sn/CmnInterface';\nimport type {T_CFG} from './sn/ConfigBase';\n\nimport {contextBridge, ipcRenderer} from 'electron';\nimport type {IpcRendererEvent, MessageBoxOptions, MessageBoxReturnValue, OpenDialogOptions, OpenDialogReturnValue} from 'electron/renderer';\n\nexport\ttype\tTAG_WINDOW\t= {\n\tc\t: boolean;\n\tx\t: number;\n\ty\t: number;\n\tw\t: number;\n\th\t: number;\n};\n\nexport\ttype\tSAVE_WIN_INF\t= {\n\tx\t: number;\n\ty\t: number;\n\tw\t: number;\n\th\t: number;\n};\n\nexport\ttype\tHPROC\t= {\n\topenDevTools\t: ()=> void;\n\n\tgetInfo\t\t: ()=> Promise<T_HINFO>;\n\tinited\t\t: (oCfg: T_CFG, tagW: TAG_WINDOW)=> Promise<void>;\n\n\texistsSync\t: (path: string)=> Promise<boolean>;\n\tcopy\t\t: (path_from: string, path_to: string)=> Promise<void>;\n\tremove\t\t: (path: string)=> Promise<void>;\n\tensureFile\t: (path: string)=> Promise<void>;\n\twriteFile\t: (path: string, data: string | NodeJS.ArrayBufferView, o?: object)=> Promise<void>;\n\tappendFile\t: (path: string, data: string)=> Promise<void>;\n\toutputFile\t: (path: string, data: string)=> Promise<void>;\n\n\twindow\t: (centering: boolean, x: number, y: number, w: number, h: number)=> void;\n\tisSimpleFullScreen\t: ()=> Promise<boolean>;\n\tsetSimpleFullScreen\t: (b: boolean)=> Promise<void>;\n\twin_close\t\t: ()=> void;\n\twin_setTitle\t: (title: string)=> void;\n\n\tshowMessageBox\t: (o: MessageBoxOptions)=> Promise<MessageBoxReturnValue>;\n\tshowOpenDialog\t: (o: OpenDialogOptions)=> Promise<OpenDialogReturnValue>;\n\n\tcapturePage\t: (path: string, w: number, h: number)=> Promise<void>;\n\tnavigate_to\t: (url: string)=> void;\n\n\tStore\t: (o: object)=> Promise<void>;\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tflush\t: (o: any)=> Promise<void>;\n\tStore_isEmpty\t: ()=> Promise<boolean>;\n\tStore_get\t\t: ()=> Promise<T_Data4Vari>;\n\n\tzip\t\t: (inp: string, out: string)=> Promise<void>;\n\tunzip\t: (inp: string, out: string)=> Promise<void>;\n\n\t// メイン → レンダラー\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\ton: (channel: string, callback: (e: IpcRendererEvent, arg?: any)=> void)=> void;\n};\n\nconst fncE = console.error;\n\nexport const\thProc\t: HPROC = {\n\t// console.log は【アプリ】のターミナルに出る\n\tgetInfo\t\t: ()=> ipcRenderer.invoke('getInfo').catch(fncE),\n\tinited\t\t: (oCfg: T_CFG, tagW: TAG_WINDOW)=> ipcRenderer.invoke('inited', oCfg, tagW).catch(fncE),\n\n\texistsSync\t: path=> ipcRenderer.invoke('existsSync', path).catch(fncE),\n\tcopy\t\t: (path_from, path_to)=>\n\t\tipcRenderer.invoke('copy', path_from, path_to).catch(fncE),\n\tremove\t\t: path=> ipcRenderer.invoke('remove', path).catch(fncE),\n\tensureFile\t: path=> ipcRenderer.invoke('ensureFile', path).catch(fncE),\n\twriteFile\t: (path, data, o?)=>\n\t\tipcRenderer.invoke('writeFile', path, data, o).catch(fncE),\n\tappendFile\t: (path, data)=>\n\t\tipcRenderer.invoke('appendFile', path, data).catch(fncE),\n\toutputFile\t: (path, data)=>\n\t\tipcRenderer.invoke('outputFile', path, data).catch(fncE),\n\n\twin_close\t: ()=> {ipcRenderer.invoke('win_close').catch(fncE)},\n\twin_setTitle\t: title=>\n\t\t{ipcRenderer.invoke('win_setTitle', title).catch(fncE)},\n\n\tshowMessageBox\t: o=> ipcRenderer.invoke('showMessageBox', o).catch(fncE),\n\tshowOpenDialog\t: o=> ipcRenderer.invoke('showOpenDialog', o).catch(fncE),\n\n\tcapturePage\t: (path, w, h)=>\tipcRenderer.invoke('capturePage', path, w, h).catch(fncE),\n\tnavigate_to\t: url=> {ipcRenderer.invoke('navigate_to', url).catch(fncE)},\n\n\topenDevTools\t: ()=> {ipcRenderer.invoke('openDevTools').catch(fncE)},\n\n\tStore\t: o=> ipcRenderer.invoke('Store', o).catch(fncE),\n\tflush\t: o=> ipcRenderer.invoke('flush', o).catch(fncE),\n\tStore_isEmpty\t: ()=> ipcRenderer.invoke('Store_isEmpty').catch(fncE),\n\tStore_get\t: ()=> ipcRenderer.invoke('Store_get').catch(fncE),\n\n\tzip\t\t: (inp, out)=> ipcRenderer.invoke('zip', inp, out).catch(fncE),\n\tunzip\t: (inp, out)=> ipcRenderer.invoke('unzip', inp, out).catch(fncE),\n\n\tisSimpleFullScreen\t: ()=>\n\t\tipcRenderer.invoke('isSimpleFullScreen').catch(fncE),\n\tsetSimpleFullScreen\t: b=>\n\t\tipcRenderer.invoke('setSimpleFullScreen', b).catch(fncE),\n\twindow\t: (centering, x, y, w, h)=>\n\t\t{ipcRenderer.invoke('window', centering, x, y, w, h).catch(fncE)},\n\n\n\t// メイン → レンダラー\n\ton\t: (ch, cb)=> {switch (ch) {\n\t\tcase 'log':\n\t\t\tipcRenderer.on(ch, (e: IpcRendererEvent, arg: string)=> cb(e, arg));\tbreak;\n\t\tcase 'shutdown':\n\t\t\tipcRenderer.on(ch, (e: IpcRendererEvent)=> cb(e));\tbreak;\n\t\tcase 'save_win_inf':\n\t\t\tipcRenderer.on(ch, (e: IpcRendererEvent, swi: SAVE_WIN_INF)=> cb(e, swi));\tbreak;\n\t\tcase 'fire':\n\t\t\tipcRenderer.on(ch, (e: IpcRendererEvent, KEY: string)=> cb(e, KEY));\tbreak;\n\t\t//case 'call':\t// 実験・保留コード。セキュリティ懸念\n\t\t//\tipcRenderer.on(ch, (e, fn, label)=> cb(e, fn, label));\tbreak;\n\t}},\n\n};\ncontextBridge.exposeInMainWorld('to_app', hProc);\n"],"mappings":"6FAqEA,IAAM,EAAO,QAAQ,MAErB,MAAaA,EAAgB,CAE5B,YAAgB,EAAA,YAAY,OAAO,UAAU,CAAC,MAAM,EAAK,CACzD,QAAW,EAAa,IAAoB,EAAA,YAAY,OAAO,SAAU,EAAM,EAAK,CAAC,MAAM,EAAK,CAEhG,WAAa,GAAO,EAAA,YAAY,OAAO,aAAc,EAAK,CAAC,MAAM,EAAK,CACtE,MAAS,EAAW,IACnB,EAAA,YAAY,OAAO,OAAQ,EAAW,EAAQ,CAAC,MAAM,EAAK,CAC3D,OAAU,GAAO,EAAA,YAAY,OAAO,SAAU,EAAK,CAAC,MAAM,EAAK,CAC/D,WAAa,GAAO,EAAA,YAAY,OAAO,aAAc,EAAK,CAAC,MAAM,EAAK,CACtE,WAAa,EAAM,EAAM,IACxB,EAAA,YAAY,OAAO,YAAa,EAAM,EAAM,EAAE,CAAC,MAAM,EAAK,CAC3D,YAAc,EAAM,IACnB,EAAA,YAAY,OAAO,aAAc,EAAM,EAAK,CAAC,MAAM,EAAK,CACzD,YAAc,EAAM,IACnB,EAAA,YAAY,OAAO,aAAc,EAAM,EAAK,CAAC,MAAM,EAAK,CAEzD,cAAiB,CAAC,EAAA,YAAY,OAAO,YAAY,CAAC,MAAM,EAAK,EAC7D,aAAe,GACd,CAAC,EAAA,YAAY,OAAO,eAAgB,EAAM,CAAC,MAAM,EAAK,EAEvD,eAAiB,GAAI,EAAA,YAAY,OAAO,iBAAkB,EAAE,CAAC,MAAM,EAAK,CACxE,eAAiB,GAAI,EAAA,YAAY,OAAO,iBAAkB,EAAE,CAAC,MAAM,EAAK,CAExE,aAAe,EAAM,EAAG,IAAK,EAAA,YAAY,OAAO,cAAe,EAAM,EAAG,EAAE,CAAC,MAAM,EAAK,CACtF,YAAc,GAAM,CAAC,EAAA,YAAY,OAAO,cAAe,EAAI,CAAC,MAAM,EAAK,EAEvE,iBAAoB,CAAC,EAAA,YAAY,OAAO,eAAe,CAAC,MAAM,EAAK,EAEnE,MAAQ,GAAI,EAAA,YAAY,OAAO,QAAS,EAAE,CAAC,MAAM,EAAK,CACtD,MAAQ,GAAI,EAAA,YAAY,OAAO,QAAS,EAAE,CAAC,MAAM,EAAK,CACtD,kBAAqB,EAAA,YAAY,OAAO,gBAAgB,CAAC,MAAM,EAAK,CACpE,cAAiB,EAAA,YAAY,OAAO,YAAY,CAAC,MAAM,EAAK,CAE5D,KAAQ,EAAK,IAAO,EAAA,YAAY,OAAO,MAAO,EAAK,EAAI,CAAC,MAAM,EAAK,CACnE,OAAS,EAAK,IAAO,EAAA,YAAY,OAAO,QAAS,EAAK,EAAI,CAAC,MAAM,EAAK,CAEtE,uBACC,EAAA,YAAY,OAAO,qBAAqB,CAAC,MAAM,EAAK,CACrD,oBAAsB,GACrB,EAAA,YAAY,OAAO,sBAAuB,EAAE,CAAC,MAAM,EAAK,CACzD,QAAU,EAAW,EAAG,EAAG,EAAG,IAC7B,CAAC,EAAA,YAAY,OAAO,SAAU,EAAW,EAAG,EAAG,EAAG,EAAE,CAAC,MAAM,EAAK,EAIjE,IAAM,EAAI,IAAM,CAAC,OAAQ,EAAR,CAChB,IAAK,MACJ,EAAA,YAAY,GAAG,GAAK,EAAqB,IAAe,EAAG,EAAG,EAAI,CAAC,CAAE,MACtE,IAAK,WACJ,EAAA,YAAY,GAAG,EAAK,GAAuB,EAAG,EAAE,CAAC,CAAE,MACpD,IAAK,eACJ,EAAA,YAAY,GAAG,GAAK,EAAqB,IAAqB,EAAG,EAAG,EAAI,CAAC,CAAE,MAC5E,IAAK,OACJ,EAAA,YAAY,GAAG,GAAK,EAAqB,IAAe,EAAG,EAAG,EAAI,CAAC,CAAE,QAKvE,CACD,EAAA,cAAc,kBAAkB,SAAU,EAAM"}