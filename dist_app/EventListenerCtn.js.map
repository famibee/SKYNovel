{"version":3,"file":"EventListenerCtn.js","names":["#aOffEvt"],"sources":["../src/sn/EventListenerCtn.ts"],"sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2018-2025 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport {utils} from 'pixi.js';\n\ntype IEmitter = utils.EventEmitter | {\n\taddEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | AddEventListenerOptions): void;\n\tremoveEventListener(type: string, listener: EventListenerOrEventListenerObject, options?: boolean | EventListenerOptions): void;\n}\n\n\nexport class EventListenerCtn {\t// リソースリーク対策\n\t#aOffEvt: (()=> void)[]\t= [];\n\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tadd(ed: IEmitter, type: string, fnc: (e: any)=> void, ctx: AddEventListenerOptions = {}): void {\n\t\tif (ed instanceof utils.EventEmitter) {\n\t\t\ted.on(type, fnc, ctx);\n\t\t\tthis.#aOffEvt.push(()=> ed.off(type, fnc, ctx));\n\t\t\treturn;\n\t\t}\n\t\ted.addEventListener(type, fnc, ctx);\n\t\tthis.#aOffEvt.push(()=> ed.removeEventListener(type, fnc, {capture: ctx.capture ?? false}));\n\t}\n\n\tclear(): void {\n\t\tfor (const f of this.#aOffEvt) f();\n\t\tthis.#aOffEvt = [];\n\t}\n\n\tget\tisEmpty() {return this.#aOffEvt.length === 0}\n\n}\n"],"mappings":";AAeA,IAAa,mBAAb,MAA8B;CAC7B,KAA0B,EAAE;CAG5B,IAAI,GAAc,GAAc,GAAsB,IAA+B,EAAE,EAAQ;AAC9F,MAAI,aAAA,qBAAA,SAAkC;AAErC,GADA,EAAG,GAAG,GAAM,GAAK,EAAI,EACrB,MAAA,EAAc,WAAU,EAAG,IAAI,GAAM,GAAK,EAAI,CAAC;AAC/C;;AAGD,EADA,EAAG,iBAAiB,GAAM,GAAK,EAAI,EACnC,MAAA,EAAc,WAAU,EAAG,oBAAoB,GAAM,GAAK,EAAC,SAAS,EAAI,WAAW,IAAM,CAAC,CAAC;;CAG5F,QAAc;AACb,OAAK,IAAM,KAAK,MAAA,EAAe,IAAG;AAClC,QAAA,IAAgB,EAAE;;CAGnB,IAAI,UAAU;AAAC,SAAO,MAAA,EAAc,WAAW"}