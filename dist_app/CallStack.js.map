{"version":3,"file":"CallStack.js","sources":["../src/sn/CallStack.ts"],"sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\n\tCopyright (c) 2018-2025 Famibee (famibee.blog38.fc2.com)\n\n\tThis software is released under the MIT License.\n\thttp://opensource.org/licenses/mit-license.php\n** ***** END LICENSE BLOCK ***** */\n\nimport type {T_HEvt2Fnc} from './CmnInterface';\nimport type {HArg} from './Grammar';\n\n\n// マクロ変数(mp:)\nexport type T_H_VAL_MP = {\n\t'const.sn.macro'\t\t\t: string;\t// (json)実行中マクロのスクリプター用情報\n\t'const.sn.me_call_scriptFn'\t: string;\t// マクロの呼び元スクリプト\n}\nexport function creMP(): T_H_VAL_MP {return {\n\t\t'const.sn.macro'\t\t\t: '{}',\n\t\t'const.sn.me_call_scriptFn'\t: '',\n}}\n\nexport type ICallStackArg = HArg & {\n\t':resvToken'?\t: string;\t\t// call元のtoken\n\t':hEvt1Time'?\t: T_HEvt2Fnc;\t// call元のローカル予約イベント\n\t':hMp'\t\t\t: T_H_VAL_MP;\t// call元のmp:\n\t':タグ名'?\t\t: string;\n\t':lenIfStk'\t\t: number;\n}\nexport function creCSArg(): ICallStackArg {return {\n\t':hEvt1Time': {},\n\t':hMp'\t\t: creMP(),\n\t':lenIfStk'\t: 1,\n}}\n\n\nexport class CallStack {\n\tconstructor(readonly fn = '', readonly idx = 0, readonly csArg: ICallStackArg = creCSArg()) {}\n\n\treadonly\ttoString = ()=> `[fn:${this.fn}, idx:${String(this.idx)}, csArg:${JSON.stringify(this.csArg)}]`;\n\n}\n"],"names":["creMP","creCSArg","CallStack","fn","idx","csArg"],"mappings":"AAgBO,SAASA,IAAoB;AAAC,SAAO;AAAA,IAC1C,kBAAqB;AAAA,IACrB,6BAA8B;AAAA,EAAA;AAC/B;AASM,SAASC,IAA0B;AAAC,SAAO;AAAA,IACjD,cAAc,CAAA;AAAA,IACd,QAAUD,EAAA;AAAA,IACV,aAAc;AAAA,EAAA;AACd;AAGM,MAAME,EAAU;AAAA,EACtB,YAAqBC,IAAK,IAAaC,IAAM,GAAYC,IAAuBJ,KAAY;AAAvE,SAAA,KAAAE,GAAkB,KAAA,MAAAC,GAAkB,KAAA,QAAAC;AAAA,EAAoC;AAAA,EAEpF,WAAW,MAAK,OAAO,KAAK,EAAE,SAAS,OAAO,KAAK,GAAG,CAAC,WAAW,KAAK,UAAU,KAAK,KAAK,CAAC;AAEtG;"}